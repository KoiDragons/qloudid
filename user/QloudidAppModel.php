<?php
require_once('../AppModel.php');
class QloudidAppModel extends AppModel
{   	
		function sendRequestToCompnay($data)
		{
			$dbCon = AppModel::createConnection();
			$hotel_checkin_id= $this -> encrypt_decrypt('decrypt',$data['hotel_checkin_id']);
			$request_id= $this -> encrypt_decrypt('decrypt',$data['request_id']);
			$company_id= $this -> encrypt_decrypt('decrypt',$data['company_id']);
			$stmt = $dbCon->prepare("select * from hotel_checkout_detail where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $hotel_checkin_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			 
			
			$stmt = $dbCon->prepare("INSERT INTO landloard_problem_tickets_company_request (company_id,problem_ticket_id, created_on) VALUES (?,?, now())");
			
			/* bind parameters for markers */
			$stmt->bind_param("ii", $company_id,$request_id);
			$stmt->execute();
			
			
			$stmt = $dbCon->prepare("select  user_address.address as visiting_address,user_address.port_number,user_address.city as visiting_city,user_address.zipcode,vitech_city,first_name,last_name,email,country_of_residence,phone_number,user_address.entry_code,property_nickname,wifi_available,wifi_password,wifi_username from user_address left join user_logins on user_logins.id=user_address.user_id left join user_profiles on user_profiles.user_logins_id=user_address.user_id where user_address.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['room_type_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowInfo = $result->fetch_assoc();	
			$subject="Home repair request";
			$emailContent='<html xmlns="http://www.w3.org/1999/xhtml" style="background-color: rgb(240, 240, 240);"><head>
  <title>Reservation confirmed</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <style type="text/css">
    /* GT AMERICA */

    @font-face {
      font-display: fallback;
      font-family: "GT America Regular";
      font-weight: 400;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
    }

    @font-face {
      font-display: fallback;
      font-family: "GT America Medium";
      font-weight: 600;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
    }

    @font-face {
      font-display: fallback;
      font-family: "GT America Condensed Bold";
      font-weight: 700;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
    }

    /* CLIENT-SPECIFIC RESET */

    body,
    table,
    td,
    a {
      -webkit-text-size-adjust: 100%;
      -ms-text-size-adjust: 100%;
    }

    /* Prevent WebKit and Windows mobile changing default text sizes */

    table,
    td {
      mso-table-lspace: 0pt;
      mso-table-rspace: 0pt;
    }

    /* Remove spacing between tables in Outlook 2007 and up */

    img {
      -ms-interpolation-mode: bicubic;
    }

    /* Allow smoother rendering of resized image in Internet Explorer */

    .im {
      color: inherit !important;
    }

    /* DEVICE-SPECIFIC RESET */

    a[x-apple-data-detectors] {
      color: inherit !important;
      text-decoration: none !important;
      font-size: inherit !important;
      font-family: inherit !important;
      font-weight: inherit !important;
      line-height: inherit !important;
    }

    /* iOS BLUE LINKS */

    /* RESET */

    img {
      border: 0;
      height: auto;
      line-height: 100%;
      outline: none;
      text-decoration: none;
      display: block;
    }

    table {
      border-collapse: collapse;
    }

    table td {
      border-collapse: collapse;
      display: table-cell;
    }

    body {
      height: 100% !important;
      margin: 0 !important;
      padding: 0 !important;
      width: 100% !important;
    }

    /* BG COLORS */

    .mainTable {
      background-color: #F0F0F0;
    }

    .mainTable--hospitality {
      background-color: #f7f2ed;
    }

    html {
      background-color: #F0F0F0;
    }

    /* VARIABLES */

    .bg-white {
      background-color: white;
    }

    .hr {
      /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
      background-color: #d3d3d8;
      border-collapse: collapse;
      mso-table-lspace: 0pt;
      mso-table-rspace: 0pt;
      mso-line-height-rule: exactly;
      line-height: 1px;
    }

    .textAlignLeft {
      text-align: left !important;
    }

    .textAlignRight {
      text-align: right !important;
    }

    .textAlignCenter {
      text-align: center !important;
    }

    .mt1 {
      margin-top: 6px;
    }

    .list {
      padding-left: 18px;
      margin: 0;
    }

    /* TYPOGRAPHY */

    body {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      color: #4f4f65;
      -webkit-font-smoothing: antialiased;
      -ms-text-size-adjust: 100%;
      -moz-osx-font-smoothing: grayscale;
      font-smoothing: always;
      text-rendering: optimizeLegibility;
    }

    .h1 {
      font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 700;
      vertical-align: middle;
      font-size: 36px;
      line-height: 42px;
    }

    .h2 {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 600;
      vertical-align: middle;
      font-size: 16px;
      line-height: 24px;
    }

    .text {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 16px;
      line-height: 21px;
    }

    .text-list {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 16px;
      line-height: 25px;
    }

    .textSmall {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 14px;
    }

    .text-xsmall {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-size: 11px;
      text-transform: uppercase;
      line-height: 22px;
      letter-spacing: 1px;
    }

    .text-bold {
      font-weight: 600;
    }

    .text-link {
      text-decoration: underline;
    }

    .text-linkNoUnderline {
      text-decoration: none;
    }

    .text-strike {
      text-decoration: line-through;
    }

    /* FONT COLORS */

    .textColorDark {
      color: #23233e;
    }

    .textColorNormal {
      color: #4f4f65;
    }

    .textColorBlue {
      color: #2020c0;
    }

    .textColorGrayDark {
      color: #7B7B8B;
    }

    .textColorGray {
      color: #A5A8AD;
    }

    .textColorWhite {
      color: #FFFFFF;
    }

    .textColorRed {
      color: #df3232;
    }

    /* BUTTON */

    .Button-primary-wrapper {
      border-radius: 3px;
      background-color: #2020C0;
    }

    .Button-primary {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      border-radius: 3px;
      border: 1px solid #2020C0;
      color: #ffffff;
      display: block;
      font-size: 16px;
      font-weight: 600;
      padding: 18px;
      text-decoration: none;
    }

    .Button-secondary-wrapper {
      border-radius: 3px;
      background-color: #ffffff;
    }

    .Button-secondary {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      border-radius: 3px;
      border: 1px solid #2020C0;
      color: #2020C0;
      display: block;
      font-size: 16px;
      font-weight: 600;
      padding: 18px;
      text-decoration: none;
    }

    /* LAYOUT */

    .Content-container {
      padding-left: 60px;
      padding-right: 60px;
    }

    .Content-container--main {
      padding-top: 54px;
      padding-bottom: 60px;
    }

    .Content {
      width: 580px;
      margin: 0 auto;
    }

    .wrapper {
      max-width: 600px;
    }

    .section {
      padding: 24px 0px;
      border-bottom: 1px solid #d3d3d8;
    }

    .section--noBorder {
      padding: 24px 0px 0;
    }

    .section--last {
      padding: 24px 0px;
    }

    .message {
      background-color: #F4F4F5;
      padding: 18px;
    }

    .card {
      border: 1px solid #d3d3d8;
      padding: 18px;
    }

    /* HEADER */

    .header-tockLogoImage {
      display: block;
      color: #F0F0F0;
    }

    .header-heroImage {
      padding-bottom: 24px;
    }

    /* PREHEADER */

    .preheader {
      display: none;
      font-size: 1px;
      color: #FFFFFF;
      line-height: 1px;
      max-height: 0px;
      max-width: 0px;
      opacity: 0;
      overflow: hidden;
    }

    /* BANNER */

    .notice {
      padding: 12px;
      background: #23233E;
      color: #FFFFFF;
      display: block;
      font-size: 14px;
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 600;
    }

    /* INTRO */

    .section--intro {
      padding-bottom: 48px;
    }

    /* BOOKING INFO */

    .business-logo__container {
      width: 48px;
      height: 48px;
      border-radius: 3px;
      border: 1px solid #d3d3d8;
      overflow: hidden;
    }

    .business-logo__image {
      border: 1px solid transparent;
      border-radius: 3px;
      width: 48px;
      height: 48px;
      display: block;
    }

    .business-address--address {
      width: 50%;
    }

    .business-address--map {
      width: 50%;
    }

    .business-address--map-image {
      width: 100%;
    }

    /* MOBILE TICKETS */

    .mobile-ticket--description {
      width: 65%;
      margin-top: 12px;
      margin-right: 5%;
    }

    .mobile-ticket--code {
      width: 30%;
    }

    .mobile-ticket--code-image {
      width: 100%;
    }

    /* RESERVATION ACTIONS */

    .linksTable {
      border-bottom: 1px solid #d3d3d8;
    }

    .linksTableRow {
      padding: 24px 12px;
    }

    .actions-icon {
      vertical-align: middle;
    }

    .actions-text {
      vertical-align: middle;
    }

    /* RECEIPT */

    .receipt__container {
      border: 1px solid #d3d3d8;
      padding: 24px;
    }

    .receipt__row {
      border-top: 1px solid #d3d3d8;
    }

    /* FEEDBACK ICONS */

    .feedback-link {
      border: 1px solid #d4d5da;
      border-radius: 3px;
      display: inline-block;
      width: calc(32% - 2px);
      padding: 10px 0;
    }

    .feedback-link-bumper {
      display: inline-block;
      width: 1%;
    }

    .feedback-link img {
      height: 50px;
      width: 50px;
    }

    /* SOCIAL ICONS */

    .social-link {
      display: inline-block;
      width: auto;
    }

    .social-link-text {
      padding: 14px 24px 14px 14px;
    }

    /* TABLET STYLES */

    @media screen and (max-width: 648px) {
      /* DEVICE-SPECIFIC RESET */
      div[style*="margin: 16px 0;"] {
        margin: 0 !important;
      }
      /* ANDROID CENTER FIX */
      /* LAYOUT */
      .wrapper {
        width: 100% !important;
        max-width: 100% !important;
      }
      .Content {
        width: 90% !important;
      }
      .Content-container {
        padding-left: 36px !important;
        padding-right: 36px !important;
      }
      .Content-container--main {
        padding-top: 30px !important;
        padding-bottom: 42px !important;
      }
      .responsiveTable {
        width: 100% !important;
      }
      /* RESERVATION ACTIONS */
      .linksTableRow {
        padding-left: 0 !important;
        padding-right: 0 !important;
        padding-top: 12px !important;
        padding-bottom: 12px !important;
      }
      .linksTableRow--borderRight {
        border-right: none !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      /* FEEDBACK LINK */
      .feedback-link img {
        height: 38px !important;
        width: 38px !important;
      }
    }

    /* MOBILE STYLES */

    @media screen and (max-width: 480px) {
      /* TYPOGRAPHY */
      .h1 {
        font-size: 30px !important;
        line-height: 30px !important;
      }
      .text {
        font-size: 16px !important;
        line-height: 22px !important;
      }
      /* BUTTON */
      .mobile-buttonContainer {
        width: 100% !important;
      }
      /* LAYOUT */
      .Content {
        width: 100% !important;
      }
      .Content-container {
        padding-left: 18px !important;
        padding-right: 18px !important;
      }
      .Content-container--main {
        padding-top: 24px !important;
        padding-bottom: 30px !important;
      }
      .section {
        padding: 18px 0 !important;
      }
      .section--last {
        padding: 18px 0 !important;
      }
      .header {
        padding: 0 18px !important;
      }
      .business-address--address {
        width: 100% !important;
      }
      .business-address--map {
        margin-top: 30px !important;
        width: 100% !important;
      }
      .mobile-ticket--description {
        width: 100% !important;
        margin-top: 0px !important;
      }
      .mobile-ticket--code {
        margin-top: 30px !important;
        margin-left: 0;
        width: 100% !important;
      }
      /* RECEIPT */
      .receipt__container {
        padding: 12px !important;
      }
      /* SOCIAL ICONS */
      .social-link {
        display: block !important;
        width: 100% !important;
        border-bottom: 1px solid #d3d3d8 !important;
      }
      /* INTRO */
      .section--intro {
        padding-top: 18px !important;
        padding-bottom: 18px !important;
      }
    }
  </style>
</head>

<body style="margin: 0 !important; padding: 0 !important; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; height: 100%; margin: 0; padding: 0; width: 100%; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; color: rgb(79, 79, 101); -webkit-font-smoothing: antialiased; -ms-text-size-adjust: 100%; -moz-osx-font-smoothing: grayscale; font-smoothing: always; text-rendering: optimizeLegibility;">
   
  <!--[if mso]>
    <style type="text/css">
.h1 {font-family: "Helvetica", "Arial", sans-serif !important; font-weight: 700 !important; vertical-align: middle !important; font-size: 36px !important; mso-line-height-rule: exactly;line-height: 42px !important;}
.h2 {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 600 !important;vertical-align: middle !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 24px !important;}
.text {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 21px !important;}
.text-list {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 25px !important;}
.textSmall {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 14px !important;}
.text-xsmall {font-family: "Helvetica", "Arial", sans-serif !important;font-size: 11px !important;text-transform: uppercase !important;mso-line-height-rule: exactly;line-height: 22px !important;letter-spacing: 1px !important;}
.text-bold {font-weight: 600 !important;}
.text-link {text-decoration: underline !important;}
.text-linkNoUnderline {text-decoration: none !important;}
.text-strike {text-decoration: line-through !important;}
.textColorDark {color: #23233e !important;}
.textColorNormal {color: #4f4f65 !important;}
.textColorBlue {color: #2020c0 !important;}
.textColorGray {color: #A5A8AD !important;}
.textColorWhite {color: #FFFFFF !important;}
.Button-primary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #ffffff !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
.Button-secondary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #2020C0 !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
    </style>
    <![endif]-->
  <!-- HIDDEN PREHEADER TEXT -->
  <div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;">
  </div>
  <table border="0" cellpadding="0" cellspacing="0" width="100%" class=" mainTable  " style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: rgb(240, 240, 240);">
    <tbody><tr><td style="display:none !important;
 visibility:hidden;
 mso-hide:all;
 font-size:1px;
 color:#ffffff;
 line-height:1px;
 max-height:0px;
 max-width:0px;
 opacity:0;
 overflow:hidden; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> We are thrilled that you will be joining us. If yo... </td>
    <!-- HEADER -->
    </tr><tr>
      <td align="center" class="header" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 580px; margin: 0 auto;">
          <tbody><tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <h1 style="font-size: 33px;font-weight: 800;line-height: 30px;">Dstricts</h1>               </td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
        </tbody></table>
        <!--[if (gte mso 9)|(IE)]>
    </td>
    </tr>
    </table>
    <![endif]-->
      </td>
    </tr>
    <!-- CONTENT -->
    <tr>
      <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content bg-white" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: white; width: 580px; margin: 0 auto;">
          <tbody><tr>
            <td class="Content-container Content-container--main text textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101); padding-left: 60px; padding-right: 60px; padding-top: 54px; padding-bottom: 60px;">
              <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                <!-- RESTAURANT INFO -->
                <tbody><tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" valign="center" width="48" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="business-logo__container" style="width: 48px; height: 48px; border-radius: 3px; border: 1px solid rgb(211, 211, 216); overflow: hidden;">
                            <img src="'.$rowImage['image_path'].'" class="business-logo__image" width="48" height="48" alt="Logo" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block; border: 1px solid transparent; border-radius: 3px; width: 48px; height: 48px; display: block;">
                          </div>
                        </td>
                        <td width="12" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                        <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">'.$rowInfo["property_nickname"].'</span>                          </td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <!-- INTRO -->
                <tr>
                  <td valign="top" align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h1 textColorDark" style="font-family: &quot;GT America Condensed Bold&quot;, &quot;Roboto Condensed&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 700; vertical-align: middle; font-size: 36px; line-height: 42px; color: rgb(35, 35, 62);">Reapir request received</span>                          </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                          <!--[if gte mso 15]>&nbsp;<![endif]-->
                        </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <!-- MESSAGE -->
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr>
                  <td align="left" class="message" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(244, 244, 245); padding: 18px;">
                    <div class="text textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
                      <span class="text-bold textColorDark" style="font-weight: 600; color: rgb(35, 35, 62);">A message from '.$rowInfo["property_nickname"].'</span>
                      <br> We are glad to inform you that you have been short listed to complete a home repair request.
                    </div>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr>
                  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                    <!--[if gte mso 15]>&nbsp;<![endif]-->
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- BOOKING INFO -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" valign="middle" width="468" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text-list textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
                            <span class="text-bold textColorDark" style="font-weight: 600; color: rgb(35, 35, 62);">'.date("F j, Y, g:i a").'</span>
                            
                          </div>
                        </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      

<tr>
                        <td align="center" valign="center" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <table border="0" cellspacing="0" cellpadding="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody><tr>
                              <td align="center" valign="center" width="100%" class="Button-primary-wrapper" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; border-radius: 3px; background-color: rgb(32, 32, 192);">
                              <a href="#" target="_blank" class="Button-primary" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; border-radius: 3px; border: 1px solid rgb(32, 32, 192); color: rgb(255, 255, 255); display: block; font-size: 16px; font-weight: 600; padding: 18px; text-decoration: none;"> Manage your requests </a>                                </td>
                            </tr>
                          </tbody></table>
                        </td>
                      </tr>




                    </tbody></table>
                  </td>
                </tr>
                <!-- ADDRESS -->
                <tr>
                  <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                          <!--[if gte mso 15]>&nbsp;<![endif]-->
                        </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody><tr>
                              <td style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                <table align="left" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--address" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 50%;">
                                  <tbody><tr>
                                    <td align="left" width="100%" class="text-list textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
                                    <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">'.$rowInfo["property_nickname"].'</span><br>'.$rowInfo["visiting_address"].' '.$rowInfo["port_number"].'<br>'.$rowInfo["visiting_city"].' '.$rowInfo["zipcode"].'<br> <br> <br> <a href="https://www.google.com/maps/dir//'.$rowInfo['visiting_address'].' '.$rowInfo['port_number'].'/" class="text text-link textColorBlue" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; text-decoration: underline; color: rgb(32, 32, 192);" target="_blank">Get directions</a>                                      </td>
                                  </tr>
                                </tbody></table>
                                <!--[if mso]></td><td><![endif]-->
                                <table align="right" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--map" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 50%;">
                                  <tbody><tr>
                                    <td width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <a href="https://www.google.com/maps/dir//1350+W+Randolph%2C+Chicago%2C+IL%2C+US+60607/" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;"> <img width="230" class="business-address--map-image" height="auto" alt="Map of Elske" src="https://maps.googleapis.com/maps/api/staticmap?key=AIzaSyCPd%2DxSabI7QOfKX5NxVVup6bPfcovwFiQ&amp;center=1350+W+Randolph%2C+Chicago%2C+IL%2C+US+60607&amp;size=300x200&amp;zoom=15&amp;scale=2&amp;format=png&amp;visual%5Frefresh=true&amp;markers=scale%3A2%7Cicon%3Ahttps%3A%2F%2Fstorage.googleapis.com%2Ftock%2Dpublic%2Dassets%2Fimages%2Demail%2Dtemplate%2Femail%2Dmap%2Dmarker.png%7Cshadow%3Afalse%7C1350+W+Randolph%2C+Chicago%2C+IL%2C+US+60607&amp;style=feature%3Aall%7Celement%3Alabels.text.fill%7Ccolor%3A0x4b505b&amp;style=feature%3Aall%7Celement%3Alabels.text.stroke%7Ccolor%3A0xffffff%7Cvisibility%3Aon&amp;style=feature%3Aadministrative.land%5Fparcel%7Celement%3Aall%7Cvisibility%3Aoff&amp;style=feature%3Alandscape.man%5Fmade%7Celement%3Aall%7Cvisibility%3Aon&amp;style=feature%3Alandscape.man%5Fmade%7Celement%3Ageometry.fill%7Ccolor%3A0xe9e9eb&amp;style=feature%3Apoi%7Celement%3Aall%7Cvisibility%3Aoff&amp;style=feature%3Aroad%7Celement%3Ageometry.fill%7Ccolor%3A0xffffff&amp;style=feature%3Aroad%7Celement%3Alabels.text.fill%7Ccolor%3A0x787c84&amp;style=feature%3Aroad%7Celement%3Alabels.icon%7Cvisibility%3Aoff&amp;style=feature%3Aroad.highway%7Celement%3Ageometry.fill%7Ccolor%3A0xffbe32&amp;style=feature%3Aroad.highway%7Celement%3Ageometry.stroke%7Ccolor%3A0xffbe32&amp;style=feature%3Atransit%7Celement%3Alabels.text.fill%7Cvisibility%3Aon%7Ccolor%3A0x787c84&amp;style=feature%3Atransit.line%7Celement%3Ageometry.fill%7Ccolor%3A0xd2d4d6&amp;signature=3yCSyIXfsSilvB5wcd4OElw40QU=" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block; width: 100%;"> </a>                                      </td>
                                  </tr>
                                </tbody></table>
                              </td>
                            </tr>
                          </tbody></table>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr>
                  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                    <!--[if gte mso 15]>&nbsp;<![endif]-->
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- RECEIPT -->
                
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- EDIT RECEIPT -->
                <!-- CANCELLATION POLICY -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; font-weight: 600; color: rgb(35, 35, 62);">
                            Cancellation policy
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text textColorNormal mt1" style="margin-top: 6px; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
                            <span>Your reservation can be canceled for a full refund 24 hours prior to the reservation time. </span>
                            <span>You can always transfer your reservation to another person.</span>
                          </div>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- QUESTIONS -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; font-weight: 600; color: rgb(35, 35, 62);">
                            Questions?
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text textColorNormal mt1" style="margin-top: 6px; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
                            If you have questions about your reservation, contact us at&nbsp;
                            <a href="mailto:'.$rowInfo['fdesk_email'].'">'.$rowInfo["fdesk_email"].'</a>                            or by calling
                            <a href="tel:+'.$rowInfo[" fdesk_country_code"].'="" '.$rowinfo["fdesk_phone_number"].'"="">+'.$rowInfo["fdesk_country_code"].' '.$rowInfo["fdesk_phone_number"].'</a>.
                          </div>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
              </tbody></table>
            </td>
          </tr>
        </tbody></table>
      </td>
    </tr>
    <!-- FOOTER -->
    <tr>
      <td align="center" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; width: 580px; margin: 0 auto;">
        <!-- Will most likely required a feature flag -->
        <!--[if (gte mso 9)|(IE)]>
<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
<tr>
<td align="center" valign="top" width="600">
<![endif]-->
        <table width="100%" border="0" cellspacing="0" cellpadding="0" align="center" class="Content-container" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; padding-left: 60px; padding-right: 60px;">
          <tbody><tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="center" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <a href="https://www.exploretock.com" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;"> <img src="https://storage.googleapis.com/tock-public-assets/images-email-template/tock-brandmark-color.png" width="30" height="30" alt="Tock" border="0" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block;"> </a>              </td>
          </tr>
          <tr class="spacer">
            <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
              <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                 2019 Tock, Inc.
              </div>
              <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                All Rights Reserved
              </div>
            </td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
        </tbody></table>
        <!--[if (gte mso 9)|(IE)]>
</td>
</tr>
</table>
<![endif]-->
      </td>
    </tr>
  </tbody></table></body></html>';
			
			/*$stmt = $dbCon->prepare("select count(id) as num from `qloudid`.`manage_employee_permissions` where company_id=?");
			
			
			$stmt->bind_param("i", $company_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCompnay = $result->fetch_assoc();
			
			if($rowCompnay['num']==0)
			{
			$to='kowaken.ghirmai@gmail.com';
			try {
				sendEmail($subject, $to, $emailContent);
			}
			catch(Exception $e) {
				
				  sendEmail($subject, $to, $emailContent);
				}	
			}
			else
			{
			$stmt = $dbCon->prepare("select * from `employees` where id in (select employee_id from `qloudid`.`manage_employee_permissions` where company_id=?)");
			
			
			$stmt->bind_param("i", $company_id);
			$stmt->execute();
			$result = $stmt->get_result();
			while($rowCompnay = $result->fetch_assoc())
			{
			$to      = $rowCompnay['email'];
			try {
				//sendEmail($subject, $to, $emailContent);
			}
			catch(Exception $e) {
				  
				}	
			}
			
			
			
			
			}*/
			
			 
			$stmt->close();
			$dbCon->close();
			return 1;	
		}
	


		function sendVerificationCode($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$id= $this -> encrypt_decrypt('decrypt',$data['id']);
			 
				 
				$stmt = $dbCon->prepare("select user_logins.id,email,country_code,phone_number,passport_image,concat_ws(' ',first_name,last_name) as name  from user_logins left join phone_country_code on phone_country_code.id=user_logins.country_of_residence left join user_profiles on user_logins.id=user_profiles.user_logins_id where user_logins.id=(select user_id from user_address where id=?)");
				
				$stmt->bind_param("i",$id);
				$stmt->execute();
				$result = $stmt->get_result();
				$row = $result->fetch_assoc();
				 
				$code=mt_rand(1111,9999); 
				
				$stmt = $dbCon->prepare("update user_address set owner_vereification_code=? where id=?");
				
				$stmt->bind_param("ii",$code,$id);
				$stmt->execute();
				
				 
				$phone='+'.trim($row['country_code']).''.trim($row['phone_number']);
				
				$subject='Your verification code';
				$to=$phone;
				 
				$html='Your verification code : '.$code;	
				 
				$res=sendSms($subject, $to, $html);
				$res=json_decode($res,true);
			 
				$stmt->close();
				$dbCon->close();
				return $code;
			
		}
		
		
		function companyInformation($data)
		{
			 
			$dbCon = AppModel::createConnection();
			$professional_subcategory_id=$this->encrypt_decrypt('decrypt',$_POST['id']);
			$company_id=$this->encrypt_decrypt('decrypt',$_POST['company_id']);
			$stmt = $dbCon->prepare("select company_name from companies  where id=?");
			$stmt->bind_param("i",$company_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();  
			return $row;
			
		}
		function companyDetail($data)
		{
			$dbCon = AppModel::createConnection();
			$company_id= $this -> encrypt_decrypt('decrypt',$data['cid']);
			
			$stmt = $dbCon->prepare("select id from company_profiles  where company_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $company_id);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();
			//print_r($row); die;
			if(empty($row))
			{
				//echo "hi"; die;
				$stmt = $dbCon->prepare("INSERT INTO company_profiles (company_id, created_on , modified_on ) VALUES (?, now(), now())");
				
				
				$stmt->bind_param("i", $company_id);
				$stmt->execute();	
			}
			
			$stmt = $dbCon->prepare("select country_id,companies.id,company_name,cid,founded,industry,profile_pic,address,company_profiles.city,zip,company_profiles.country,delivery_address,d_zip,d_city,d_country,company_profiles.phone,company_email,vat,company_profiles.phone_country,i_port_number,si_address,si_city,si_zip,si_country,sd_address,sd_city,sd_zip,sd_country,bankgiro_med,bankgiro_utan,iban,bic,bank,f_tax from companies left join company_profiles on companies.id=company_profiles.company_id  where companies.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $company_id);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();
			//print_r($row); die;
			
			$stmt->close();
			$dbCon->close();
			return $row;
		}
		
		
		function cleaningExtraInclusion($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$subcatg_id=$this->encrypt_decrypt('decrypt',$data['subcatg_id']);  
			$stmt = $dbCon->prepare("select * from cleaning_extra_inclusion where inclusion_type=?");
			$stmt->bind_param("i", $subcatg_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		
		function homeRepairProblemCategoryDetail()
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select id,ticket_title from `qloudid`.`landloard_ticket_title_new`");
			/* bind parameters for markers */
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$i=1;
			while($row1 = $result->fetch_assoc())
			{
				 $row1['enc']=$this->encrypt_decrypt('encrypt',$row1['id']);
				array_push($org,$row1);			
				 
			}	
			
			 
			$stmt->close();
			$dbCon->close();
			return $org;			
		}
		
		function homeRepairProblemSubCategoryDetail($data)
		{ 
			$dbCon = AppModel::createConnection();
			$subcateg_id=$this->encrypt_decrypt('decrypt',$data['subcatg_id']);
			$stmt = $dbCon->prepare("select * from landloard_property_problem_tickets_subpart where landloard_ticket_title_id=?");
			$stmt->bind_param("i", $subcateg_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			array_push($org,$row);	
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		function addProfessionalHomeRepairRequest($data)
		{
			$dbCon = AppModel::createConnection();
			$catg_id=$this->encrypt_decrypt('decrypt',$data['catg_id']);
			$domain_id=$this->encrypt_decrypt('decrypt',$data['domain_id']);
			$subcatg_id=$this->encrypt_decrypt('decrypt',$data['subcatg_id']);
			$area_id=$this->encrypt_decrypt('decrypt',$data['area_id']);
			
			 
			$data['user_id']=0;
			
			$stmt = $dbCon->prepare("select id from professional_service_subcategory where landloard_ticket_subtitle_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $_POST['property_type_detail']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$_POST['price_info']=1;
			$stmt = $dbCon->prepare("insert into `user_professional_service_request`(vtech_city,vitech_area,domain_id, inclusion_type_detail,`category_id` , `subcategory_id` ,  `price_info` , `product_information`, `created_on`,landloard_ticket_id,problem_subpart_id,user_property_id,user_id) VALUES (?,?,?, ?, ?, ?,   ?, ?, now(),?,?,?,?)");
			$stmt->bind_param("iiisiiisiiii",$area_id,$area_id,$domain_id,$_POST['inclusion_type_detail'], $catg_id,$row['id'],$_POST['price_info'],$_POST['product_information'],$_POST['property_type_detail'],$_POST['problem_subpart_id'],$_POST['user_property_id'],$_POST['user_id']);
			$stmt->execute();
			$id=$stmt->insert_id;
			$data['cid']=$this->encrypt_decrypt('encrypt',$id);
			//$this->sendPropertyLink($data);
			$stmt->close();
			$dbCon->close();
			return $data['cid'];
			
		}
		
		
		function commonTicketRequest($data)
		{
			$dbCon = AppModel::createConnection();
			$catg_id=$this->encrypt_decrypt('decrypt',$data['catg_id']);
			$domain_id=$this->encrypt_decrypt('decrypt',$data['domain_id']);
			$subcatg_id=$this->encrypt_decrypt('decrypt',$data['subcatg_id']);
			$area_id=$this->encrypt_decrypt('decrypt',$data['area_id']);
			
			 
			$data['user_id']=0;
			 
			$_POST['price_info']=1;
			$stmt = $dbCon->prepare("insert into `user_professional_service_request`(vtech_city,vitech_area,domain_id,`category_id` , `subcategory_id` ,  `price_info` , `product_information`, `created_on`,user_property_id,user_id) VALUES (?,?,?, ?, ?,   ?, ?, now(),?,?)");
			$stmt->bind_param("iiiiiisii",$area_id,$area_id,$domain_id,$catg_id,$subcatg_id,$_POST['price_info'],$_POST['product_information'],$_POST['user_property_id'],$_POST['user_id']);
			$stmt->execute();
			$id=$stmt->insert_id;
			$data['cid']=$this->encrypt_decrypt('encrypt',$id);
			//$this->sendPropertyLink($data);
			$stmt->close();
			$dbCon->close();
			return $data['cid'];
			
		}
		
		
		function getSubcategoryIssue($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select * from landloard_ticket_subtitle_repair_issue where landloard_ticket_subtitle_id=?");
			$stmt->bind_param("i", $_POST['subcategory_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org='';
			while($row = $result->fetch_assoc())
			{
				 
				$org=$org.'<label class="checkbox">
						<input class="checkbox__input" type="checkbox"  id="'.$row['id'].'"  onclick="updateInclutionType('.$row['id'].')"><span class="checkbox__inner"><span class="checkbox__tick"></span><span class="checkbox__text">'.$row['home_repair_issue'].'</span></span>
					</label>';
															
															
															
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		 
	}
		
		
		function selectedHomeProblemSubpartId($data)
		{ 
			$dbCon = AppModel::createConnection();
			$subcateg_id=$this->encrypt_decrypt('decrypt',$data['subcatg_id']);
			if($subcateg_id==1 || $subcateg_id==6)
			{
				$stmt = $dbCon->prepare("select * from landloard_property_problem_tickets_subpart where id=? ");
				$stmt->bind_param("i", $data['problem_subpart_id']);
			}
			else
			{
				$stmt = $dbCon->prepare("select * from landloard_property_problem_tickets_subpart where landloard_ticket_title_id=?");
				$stmt->bind_param("i", $subcateg_id);
			}
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			return $row;
		}
		
		function selectedCategoryProblemsInfo($data)
		{ 
			$dbCon = AppModel::createConnection();
			$subcateg_id=$this->encrypt_decrypt('decrypt',$data['subcatg_id']);
			if($subcateg_id<9)
			{
			$stmt = $dbCon->prepare("select * from landloard_ticket_subtitle_new where id<39");	
			}
			else
			{
			$stmt = $dbCon->prepare("select * from landloard_ticket_subtitle_new where id>38");	
			}
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
		function addProfessionalServiceHomeCleaningRequest($data)
		{
			$dbCon = AppModel::createConnection();
			$catg_id=$this->encrypt_decrypt('decrypt',$data['catg_id']);
			$whom_id=1;
			$subcatg_id=$this->encrypt_decrypt('decrypt',$data['subcatg_id']);
			$domain_id=$this->encrypt_decrypt('decrypt',$data['domain_id']);
			
			$area_id=$this->encrypt_decrypt('decrypt',$data['area_id']);
			
			$stmt = $dbCon->prepare("select * from vitech_area where id=?");
			$stmt->bind_param("i",$area_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCity = $result->fetch_assoc();
			
			$data['user_id']=0;
			if($_POST['cleaning_type']==2)
			{
				$_POST['cleaning_type_intensity']=0;
			}
			$_POST['property_type_detail']=1;
			 $_POST['floor_area']=0;
			 $_POST['price_info']=1;
			$stmt = $dbCon->prepare("insert into `user_professional_service_request`(vtech_city,vitech_area,domain_id, `category_id` , `subcategory_id` , `cleaning_type` , `how_often` , `property_type_detail` , `floor_area` ,  `inclusion_type_detail` , `material_info_detail` , `pets_available` , `price_info` , `product_information`,  `created_on`,additional_services,user_property_id,user_id) VALUES ( ?,?, ?, ?, ?,   ?, ?,?, ?, ?, ?,   ?, ?,?, now(),?,?,?)");
			$stmt->bind_param("iiiiiiiidsiiissii",$area_id,$area_id,$domain_id, $catg_id,$subcatg_id,$_POST['cleaning_type'],$_POST['cleaning_type_intensity'],$_POST['property_type_detail'], $_POST['floor_area'], $_POST['inclusion_type_detail'],$_POST['material_info_detail'],$_POST['furniture_info_detail'],$_POST['price_info'],$_POST['product_information'], $_POST['additional_service_type_detail'],$_POST['user_property_id'],$_POST['user_id']);
			$stmt->execute();
			$id=$stmt->insert_id;
			$data['cid']=$this->encrypt_decrypt('encrypt',$id);
			//$this->sendPropertyLink($data);
			$stmt->close();
			$dbCon->close();
			return $data['cid'];
			
		}
		
		function addProfessionalServiceRequest($data)
		{
			$dbCon = AppModel::createConnection();
			$catg_id=$this->encrypt_decrypt('decrypt',$data['catg_id']);
			$subcatg_id=$this->encrypt_decrypt('decrypt',$data['subcatg_id']);
			$domain_id=$this->encrypt_decrypt('decrypt',$data['domain_id']);
			$area_id=$this->encrypt_decrypt('decrypt',$data['area_id']);
			
			$stmt = $dbCon->prepare("select * from vitech_area where id=?");
			$stmt->bind_param("i",$area_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCity = $result->fetch_assoc();
			$data['user_id']=0;
			//$data['user_id']=$this->createUser($_POST);
			 
			$start=strtotime($_POST['start_date']);
			$end=strtotime($_POST['end_date']);
			$_POST['price_info']=1;
			$stmt = $dbCon->prepare("insert into `user_professional_service_request`(vtech_city,vitech_area,domain_id, `category_id` , `subcategory_id` , `start_date` , `end_date` , `inclusion_type_detail` , `material_info_detail` , `furniture_info_detail` , `price_info` , `product_information` , `created_on`,user_property_id,user_id) VALUES (  ?, ?, ?,   ?, ?,?, ?, ?, ?,   ?, ?,?, now(),?,?)");
			$stmt->bind_param("iiiiisssiiisii",$area_id,$area_id,$domain_id, $catg_id,$subcatg_id,$start,$end,$_POST['inclusion_type_detail'],$_POST['material_info_detail'],$_POST['furniture_info_detail'],$_POST['price_info'],$_POST['product_information'],$_POST['user_property_id'],$_POST['user_id'] );
			$stmt->execute();
			$id=$stmt->insert_id;
			$data['cid']=$this->encrypt_decrypt('encrypt',$id);
			//$this->sendPropertyLink($data);
			
			$stmt->close();
			$dbCon->close();
			return $data['cid'];
			
		}
	
		function addProfessionalServiceWindowCleaningRequest($data)
		{
			$dbCon = AppModel::createConnection();
			$catg_id=$this->encrypt_decrypt('decrypt',$data['catg_id']);
			$subcatg_id=$this->encrypt_decrypt('decrypt',$data['subcatg_id']);
			$domain_id=$this->encrypt_decrypt('decrypt',$data['domain_id']);
			$area_id=$this->encrypt_decrypt('decrypt',$data['area_id']);
			
			$stmt = $dbCon->prepare("select * from vitech_area where id=?");
			$stmt->bind_param("i",$area_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCity = $result->fetch_assoc();
			$_POST['property_type_detail']=1;
			$data['user_id']=0;
			$_POST['price_info']=1;
			$_POST['reachable_info_detail']=1;
			$stmt = $dbCon->prepare("insert into `user_professional_service_request`(vtech_city,vitech_area,domain_id, `category_id` , `subcategory_id` , `type_of_window` , `total_window` , `property_type_detail` , `pages_info_detail` , `frame_info_detail` , `exposure_info_detail` , `reachable_info_detail`, `price_info` , `product_information`, `created_on`,user_property_id,user_id) VALUES ( ?,   ?, ?,?, ?, ?, ?,   ?, ?,?, ?, ?, ?,   ?, now(),?,?)");
			$stmt->bind_param("iiiiiiiiiiiiisii",$area_id,$area_id,$domain_id, $catg_id,$subcatg_id,$_POST['furniture_info_detail'],$_POST['total_window'],$_POST['property_type_detail'], $_POST['pages_info_detail'],$_POST['material_info_detail'], $_POST['exposure_info_detail'], $_POST['reachable_info_detail'],$_POST['price_info'],$_POST['product_information'],$_POST['user_property_id'],$_POST['user_id']);
			$stmt->execute();
			$id=$stmt->insert_id;
			$data['cid']=$this->encrypt_decrypt('encrypt',$id);
			
			 
			$stmt->close();
			$dbCon->close();
			return $data['cid'];
			
		}
		
		function getServiceInvoiceDetail($data)
		{ 
			$dbCon = AppModel::createConnection();
			$invoice_id= $this -> encrypt_decrypt('decrypt',$data['invoice_id']);
			 
			$stmt = $dbCon->prepare("select dish_id from hotel_roomservice_item_ordered where invoice_id=?");
			$stmt->bind_param("i", $invoice_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$org['total_price']=0;
			$org['service_list']=array();
			while($row = $result->fetch_assoc())
			{
			$stmt = $dbCon->prepare("select dish_name,dish_price,company_name from dishes_detail_information left join companies on companies.id=dishes_detail_information.company_id where dishes_detail_information.id=?");
			$stmt->bind_param("i", $row['dish_id']);
			$stmt->execute();
			$resultDish = $stmt->get_result();
			$rowDish = $resultDish->fetch_assoc();
			$org['total_price']=$org['total_price']+$rowDish['dish_price'];
			$org['company_name']=htmlentities($rowDish['company_name'],ENT_NOQUOTES, 'UTF-8');
			array_push($org['service_list'],$rowDish);	
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
		
		function updateServiceInvoicePaymentDetail($data)
		{ 
			$dbCon = AppModel::createConnection();
			$invoice_id= $this -> encrypt_decrypt('decrypt',$data['invoice_id']);
			 
			$stmt = $dbCon->prepare("update professional_services_payment_invoice set paid_by_user=?,paying_person_id=?,card_id=?,payment_status=1,payment_made_at=now() where id=?");
			$stmt->bind_param("iiii",$data['is_user'],$data['buyer_id'],$data['card_id'], $invoice_id);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("select total_price,first_name,last_name,email from professional_services_payment_invoice left join user_logins on user_logins.id=professional_services_payment_invoice.user_id where professional_services_payment_invoice.id=?");
			$stmt->bind_param("i", $invoice_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/tokens');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "card[number]=4242424242424242&card[exp_month]=2&card[exp_year]=2040&card[cvc]=314");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);
			$a=json_decode($result,true);
			 
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/customers');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "name=".$row['first_name']."&email=".$row['email']."&source=".$a['id']."&description=My");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);
			$b=json_decode($result,true);
			$cuId=$b['id'];
			
			$total_price=$row['total_price']*100;
			if($total_price<500)
			{
				$total_price=500;
			}
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/charges');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "customer=".$b['id']."&amount=".$total_price."&currency=sek&description=My");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);			
			$c=json_decode($result,true);
			$Chargeid=$c['id'];	
			
			
			$stmt = $dbCon->prepare("update hotel_roomservice_item_ordered set charge_id=?,customer_id=?,booking_checkin_status=2 where invoice_id=?");
			$stmt->bind_param("ssi",$Chargeid,$cuId, $invoice_id);
			$stmt->execute();
			
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		
		function addProfessionalCompanyService($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$company_id= $data['company_id'];
			$data['variation_type']=0;
			$data['bookable_service_category_id']=1;
			$data['dish_type']=1;
			$data['variation_count']=1;
			$data['product_type']=2;
			$img_name1="";
			if($data['subscription_info']==1)	
			{
			$recurring_type=0;
			$total_time=0;
			$recurring_typec=0;
			}
			else
			{
			$recurring_type=$data['recurring_type'];
			$total_time=$data['total_time'];
			$recurring_typec=$data['recurring_typec'];	
			}
			
			 
			if($data['one_shared']==2)
			{
			if($data['one_shared_type']==2)
			{
			$data['dish_price']=$data['private_price'];
			}	
			else
			{
			$data['dish_price']=$data['open_price_per_person'];	
			}
			}
			$data['pickapro_listing']=1;
			$data['inclusion_type_detail']='';
			$dish_name=htmlentities($data['dish_name'],ENT_NOQUOTES, 'UTF-8');
			$dish_detail=htmlentities(strip_tags($data['product_information']),ENT_NOQUOTES, 'UTF-8');
			$product_information=htmlentities($data['product_information'],ENT_NOQUOTES, 'UTF-8'); 
			$stmt = $dbCon->prepare("insert into dishes_detail_information(professional_category_id,professional_subcategory_id,inclusion_detail,tax_included,tax_amount,bookable_service_category_id, is_bookable,preparation_time,post_production_time,dish_name, dish_detail, dish_image, dish_price,  dish_type, dish_warnings, created_on, modified_on,company_id,variation_type,variation_count,product_information,is_physical,subscription_info,recurring_type,recurring_cycle,custom_cycle,custom_time,time_required, one_shared ,   one_shared_type ,  open_price_per_person ,  open_total_person  ,  total_open_events  ,  private_price ,  private_max_person ,  event_at_customer_place  ,  tour_fee_applicable  ,  tour_fee ,  total_private_events  ,  more_event_on_request ,  minimum_people_required  ,  minimum_time_required  ,  minimum_time_period  ,  more_event_extra_fee  ,  extra_fee,pickapro_listing,domain_id,tax_applicable)
			values(?,?,?,?,?,?, ?, ?,?,?, ?, ?, ?, ?, ?, now(),now(),?,?, ?, ?, ?,?,?, ?, ?, ?, ? ,?, ?, ?, ?, ? ,?, ?, ?, ?, ? ,?, ?, ?, ?, ?, ?, ?,?,?,?)");
			$stmt->bind_param("iisiiiiiisssiisiiisiiiiiiiiiiiiiiiiiiiiiiiiiid",$data['category_id'],$data['subcategory_id'],$data['inclusion_type_detail'],$data['tax_included'],$data['tax_amount'],$data['bookable_service_category_id'],$data['is_bookable'],$data['preparation_time'],$data['post_production_time'],$dish_name,$dish_detail ,$img_name1 ,$data['dish_price'], $data['dish_type'],$data['food_type'],$company_id,$data['variation_type'],$data['variation_count'],$product_information,$data['product_type'],$data['subscription_info'],$recurring_type,$recurring_type,$recurring_typec,$total_time,$data['time_required'],$data['one_shared'] ,   $data['one_shared_type'] ,  $data['open_price_per_person'] ,  $data['open_total_person']  ,  $data['total_open_events']  ,  $data['private_price'] ,  $data['private_max_person'] ,  $data['event_at_customer_place']  ,  $data['tour_fee_applicable']  ,  $data['tour_fee'] ,  $data['total_private_events']  ,  $data['more_event_on_request'] ,  $data['minimum_people_required']  ,  $data['minimum_time_required']  ,  $data['minimum_time_period']  ,  $data['more_event_extra_fee']  ,  $data['extra_fee'],$data['pickapro_listing'],$data['domain_id'],$data['tax_applicable']);
			
			
			if($stmt->execute())
			{
				
				$id=$stmt->insert_id;
				
				$snumber=1;
				$stmt = $dbCon->prepare("insert into dish_detail_photos (dish_photo_path,dish_id,sorting_number) values(?, ?, ?)");
				$stmt->bind_param("sii",$img_name1, $id,$snumber);
				$stmt->execute();
				
				if($data['one_shared']==2)
				{
					if($data['one_shared_type']!=2)
					{
					if($data['recurring_event']==0)
					{
						$event_date=strtotime($data['open_event_date']);
						$stmt = $dbCon->prepare("update dishes_detail_information set recurring_event=?,open_event_date=?,open_event_time=? where id=?");
						$stmt->bind_param("isii",$data['recurring_event'],$event_date,$data['event_start_time'],$id );	
						$stmt->execute();	
					}
					else
					{
						for($i=1;$i<=7;$i++)
						{
						$working_day='working_day_'.$i;
						$work_start_time='work_start_time_'.$i;
						$stmt = $dbCon->prepare("update dishes_detail_information set recurring_event=? where id=?");
						$stmt->bind_param("ii",$data['recurring_event'],$id );	
						$stmt->execute();	
						$stmt = $dbCon->prepare("insert into dish_service_recurring_information (day_id,dish_id,event_day,event_start_time) values(?, ?, ?,?)");
						/* bind parameters for markers */
						$cont=1;
						$stmt->bind_param("iiii",$i,$id,$data[$working_day],$data[$work_start_time]);
						$stmt->execute();	
						
							
						}
					}
					}
				}
				
				
			if($data['product_type']==2 && $data['pickapro_listing']==1)
			{
			$stmt = $dbCon->prepare("insert into professional_company_selected_service_todos_price_info(tax_included,tax_amount,bookable_service_category_id, is_bookable,preparation_time,post_production_time,dish_name, dish_detail, dish_image, dish_price,  dish_type, dish_warnings, created_on, modified_on,company_id,variation_type,variation_count,product_information,is_physical,subscription_info,recurring_type,recurring_cycle,custom_cycle,custom_time,time_required, one_shared ,   one_shared_type ,  open_price_per_person ,  open_total_person  ,  total_open_events  ,  private_price ,  private_max_person ,  event_at_customer_place  ,  tour_fee_applicable  ,  tour_fee ,  total_private_events  ,  more_event_on_request ,  minimum_people_required  ,  minimum_time_required  ,  minimum_time_period  ,  more_event_extra_fee  ,  extra_fee,professional_category_id,professional_subcategory_id,qloud_service_id)
			values(?,?,?, ?, ?,?,?, ?, ?, ?, ?, ?, now(),now(),?,?, ?, ?, ?,?,?, ?, ?, ?, ? ,?, ?, ?, ?, ? ,?, ?, ?, ?, ? ,?, ?, ?, ?, ?, ?, ?,?,?,?)");
			$stmt->bind_param("iiiiiisssiisiiisiiiiiiiiiiiiiiiiiiiiiiiiiii",$data['tax_included'],$data['tax_amount'],$data['bookable_service_category_id'],$data['is_bookable'],$data['preparation_time'],$data['post_production_time'],$dish_name,$dish_detail ,$img_name1 ,$data['dish_price'], $data['dish_type'],$data['food_type'],$company_id,$data['variation_type'],$data['variation_count'],$product_information,$data['product_type'],$data['subscription_info'],$recurring_type,$recurring_type,$recurring_typec,$total_time,$data['time_required'],$data['one_shared'] ,   $data['one_shared_type'] ,  $data['open_price_per_person'] ,  $data['open_total_person']  ,  $data['total_open_events']  ,  $data['private_price'] ,  $data['private_max_person'] ,  $data['event_at_customer_place']  ,  $data['tour_fee_applicable']  ,  $data['tour_fee'] ,  $data['total_private_events']  ,  $data['more_event_on_request'] ,  $data['minimum_people_required']  ,  $data['minimum_time_required']  ,  $data['minimum_time_period']  ,  $data['more_event_extra_fee']  ,  $data['extra_fee'],$data['category_id'],$data['subcategory_id'],$id );
			
			
			if($stmt->execute())
			{
				
				$id1=$stmt->insert_id;
				$data['inclusion_type_detail']=substr($data['inclusion_type_detail'],0,1);
				$a=explode(',',$data['inclusion_type_detail']);
				for($up=1;$up<=3;$up++)
				{
					$stmt = $dbCon->prepare("insert into `qloudid`.`professional_company_selected_service_todos_price_available`(price_id,`service_available`) values (?,?)");
					$stmt->bind_param("ii",$id1, $up);
					$stmt->execute();
				}
				foreach($a as $key)
				{
				$stmt = $dbCon->prepare("update`qloudid`.`professional_company_selected_service_todos_price_available` set is_active=1 where price_id=? and `service_available`=?");
				$stmt->bind_param("ii",$id1, $key);
				$stmt->execute();	
				}
				if($data['one_shared']==2)
				{
					if($data['one_shared_type']!=2)
					{
					if($data['recurring_event']==0)
					{
						$event_date=strtotime($data['open_event_date']);
						$stmt = $dbCon->prepare("update professional_company_selected_service_todos_price_info set recurring_event=?,open_event_date=?,open_event_time=? where id=?");
						$stmt->bind_param("isii",$data['recurring_event'],$event_date,$data['event_start_time'],$id1 );	
						$stmt->execute();	
					}
					else
					{
						for($i=1;$i<=7;$i++)
						{
						$working_day='working_day_'.$i;
						$work_start_time='work_start_time_'.$i;
						$stmt = $dbCon->prepare("update professional_company_selected_service_todos_price_info set recurring_event=? where id=?");
						$stmt->bind_param("ii",$data['recurring_event'],$id1 );	
						$stmt->execute();	
						$stmt = $dbCon->prepare("insert into professional_company_selected_service_todos_recurring_info(day_id,service_price_id,event_day,event_start_time) values(?, ?, ?,?)");
						/* bind parameters for markers */
						$cont=1;
						$stmt->bind_param("iiii",$i,$id1,$data[$working_day],$data[$work_start_time]);
						$stmt->execute();	
						
							
						}
					}
					}
				}
				}
			}
				 
				$stmt->close();
				$dbCon->close();
				return 1;
				 
				 
			}
			else
			{
				 
				$stmt->close();
				$dbCon->close();
				return 0;
			}
		
			
		}
			
		function suportedLanguagesList($data)
		{ 
			$dbCon = AppModel::createConnection();
			$domain_id=$data['domain_id'];
			$company_id=$data['company_id'];
			$stmt = $dbCon->prepare("select count(id) as num from professional_company_suported_languages where company_id=? and domain_id=?");
			$stmt->bind_param("ii", $company_id,$domain_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if($row['num']==0)
			{
			$stmt = $dbCon->prepare("select *  from language_list");
			$stmt->execute();
			$result3 = $stmt->get_result();	
			while($rowAmenities= $result3->fetch_assoc())
			{
			$stmt = $dbCon->prepare("insert into professional_company_suported_languages (domain_id,language_id,company_id, created_on, modified_on) values (?,?,?, now(), now())");
			$stmt->bind_param("iii",$domain_id,$rowAmenities['id'],$company_id);
			$stmt->execute();
			 				
			}
			}
			
			
			$stmt = $dbCon->prepare("select professional_company_suported_languages.id,language_name,is_selected from professional_company_suported_languages left join language_list on language_list.id=professional_company_suported_languages.language_id where company_id=? and domain_id=?");
			$stmt->bind_param("ii", $company_id,$domain_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			if($row['is_selected']==null || $row['is_selected']=='')
			{
				$row['is_selected']=0;
			}
			array_push($org,$row);	
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
	function updateLanguageAvailable($data)
    {
        $dbCon = AppModel::createConnection();
		$stmt = $dbCon->prepare("select * from professional_company_suported_languages  where id=?");
        /* bind parameters for markers */
		$stmt->bind_param("i", $data['language_id']);
        $stmt->execute();
        $result = $stmt->get_result();
		$row = $result->fetch_assoc();
		if($row['is_selected']==0)
		{
			$is_selected=1;
		}
		else
		{
			$is_selected=0;
		}
		$stmt = $dbCon->prepare("update professional_company_suported_languages  set is_selected=? where id=?");
        /* bind parameters for markers */
		$stmt->bind_param("ii", $is_selected,$data['language_id']);
        $stmt->execute();
		$stmt->close();
        $dbCon->close();
		return 1;
    }
	

		function updateArea($data)
		{ 
			$dbCon = AppModel::createConnection();
			$domain_id=$data['domain_id'];
			$company_id=$data['company_id'];
			$stmt = $dbCon->prepare("select is_selected from professional_company_selected_areas where id=?");
			$stmt->bind_param("i", $data['area_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$row1 = $result1->fetch_assoc();
			if($row1['is_selected']==1)
			{
			$is_selected=0;	
			}
			else
			{
			$is_selected=1;	
			}
			$stmt = $dbCon->prepare("update professional_company_selected_areas set is_selected=?,modified_on=now() where id=?");
			$stmt->bind_param("ii",$is_selected,$data['area_id']);
			$stmt->execute();
			
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function selectedAreaDetail($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$domain_id=$data['domain_id'];
			$company_id=$data['company_id'];
			$stmt = $dbCon->prepare("select count(id) as num from professional_company_selected_areas where company_id=? and domain_id=?");
			$stmt->bind_param("ii", $company_id,$domain_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if($row['num']==0)
			{
			$stmt = $dbCon->prepare("select * from vitech_city");
			$stmt->execute();
			$result = $stmt->get_result();
			while($rowCategory = $result->fetch_assoc())
			{
			$stmt = $dbCon->prepare("select *  from vitech_area where region_city_id=?");
			$stmt->bind_param("i", $rowCategory['id']);
			$stmt->execute();
			$result3 = $stmt->get_result();	
			while($rowAmenities= $result3->fetch_assoc())
			{
				 
			$stmt = $dbCon->prepare("insert into professional_company_selected_areas (domain_id, city_id,area_id,company_id, created_on, modified_on,is_selected) values (?,?, ?,?, now(), now(),?)");
			$stmt->bind_param("iiiii",$domain_id,$rowCategory['id'],$rowAmenities['id'],$company_id,$is_selected);
			$stmt->execute();
			 				
			}
			
			}
				
			}
			
			
			$stmt = $dbCon->prepare("select * from vitech_city");
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			array_push($org,$row);	 
			$org[$j]['area_list']=array();		 
		 	$stmt = $dbCon->prepare("select professional_company_selected_areas.id,is_selected,area_name from professional_company_selected_areas left join vitech_area on vitech_area.id=professional_company_selected_areas.area_id where professional_company_selected_areas.city_id=? and professional_company_selected_areas.company_id=?  and domain_id=?");
			$stmt->bind_param("iii", $row['id'],$company_id,$domain_id);
			$stmt->execute();
			$result1 = $stmt->get_result();
			 
			while($row1 = $result1->fetch_assoc())
			{
			if($row1['is_selected']==null || $row1['is_selected']=='')
			{
				$row1['is_selected']=0;
			}
			array_push($org[$j]['area_list'],$row1);	 		
			}			
											
			$j++;
			 
			}
			  
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		
		function companyMarketplaceList($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select * from professional_marketplace where id in (select domain_id from cleaning_company_premium_account_request where company_id=? and is_approved=1)");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("i", $data['company_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
				array_push($org,$row);
				$org[$j]['enc']=$this->encrypt_decrypt('encrypt',$row['id']);
				$j++;
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
		
		function professionalTodoUpdate($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$domain_id=$data['domain_id'];
			$company_id=$data['company_id'];
			$stmt = $dbCon->prepare("select * from professional_service_subcategory where id not in(select professional_subcategory_id from  professional_company_selected_service_todos where company_id=? and domain_id=?)");
			$stmt->bind_param("ii", $company_id,$domain_id);
			$stmt->execute();
			$result = $stmt->get_result();
			while($row = $result->fetch_assoc())
			{
			
			$stmt = $dbCon->prepare("select *  from professional_service_subcategory where id=?");
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$result3 = $stmt->get_result();	
			$rowAmenities= $result3->fetch_assoc();
			$stmt = $dbCon->prepare("insert into professional_company_selected_service_todos ( professional_category_id,professional_subcategory_id,company_id,domain_id, created_on, modified_on) values (?, ?,?,?, now(), now())");
			$stmt->bind_param("iiii",$row['professional_category_id'],$row['id'],$company_id,$domain_id);
			$stmt->execute();
							
			}	
			
			$stmt->close();
			$dbCon->close();
			return 1;	
		}
		
		function companyMarketplaceServiceDetail($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$domain_id=$data['domain_id'];
			$company_id=$data['company_id'];
			$stmt = $dbCon->prepare("select * from professional_service_category where id in (select professional_category_id from professional_marketplace_service_todos where is_selected=1 and marketplace_id=?)");
			$stmt->bind_param("i",$domain_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			$row['category_name']=html_entity_decode($row['category_name']);
			array_push($org,$row);
			$org[$j]['subcategory']=array();
		 	$stmt = $dbCon->prepare("select professional_company_selected_service_todos.id,is_selected,subcategory_name,professional_company_selected_service_todos.professional_subcategory_id from professional_company_selected_service_todos left join professional_service_subcategory on professional_service_subcategory.id=professional_company_selected_service_todos.professional_subcategory_id where professional_company_selected_service_todos.professional_category_id=? and professional_company_selected_service_todos.company_id=? and domain_id=? and professional_subcategory_id in (select professional_subcategory_id from professional_marketplace_service_todos where is_selected=1 and marketplace_id=?)");
			$stmt->bind_param("iiii", $row['id'],$company_id,$domain_id,$domain_id);
			$stmt->execute();
			$result1 = $stmt->get_result();
			 
			while($row1 = $result1->fetch_assoc())
			{
			$row1['category_id']=$row['id'];	
			$row1['subcategory_name']=html_entity_decode($row1['subcategory_name']);	
			$stmt = $dbCon->prepare("select count(id)as num from dishes_detail_information where company_id=? and domain_id=? and professional_subcategory_id=?");
			$stmt->bind_param("iii",$company_id,$domain_id, $row1['professional_subcategory_id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();
			if($row2['num']>0)
			{
				$row1['price_added']=1;
			}
			else
			{
				$row1['price_added']=0;
			}
			array_push($org[$j]['subcategory'],$row1);
			}			
											
			 $j++;
			 
			}
			  
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		
		
		
		function companyMarketplacePricingDetail($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$domain_id=$data['domain_id'];
			$company_id=$data['company_id'];
			$org=array();
			$stmt = $dbCon->prepare("select id,dish_name,is_bookable,dish_price from dishes_detail_information where company_id=? and domain_id=? and professional_subcategory_id=?");
			$stmt->bind_param("iii",$company_id,$domain_id, $data['professional_subcategory_id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			while($row2 = $result2->fetch_assoc())
			{
			 array_push($org,$row2);
			}
			  
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		
		
		function updateCategoryServiceTodo($data)
		{ 
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select is_selected,professional_category_id,domain_id,company_id from professional_company_selected_service_todos where id=?");
			$stmt->bind_param("i",$data['service_todo_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if($row['is_selected']==0)
			{
			$is_selected=1;	
			}
			else
			{
				$is_selected=0;
			}
			$stmt = $dbCon->prepare("update professional_company_selected_service_todos set is_selected=?,modified_on=now() where id=?");
			$stmt->bind_param("ii",$is_selected,$data['service_todo_id']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("select count(id) as num from professional_company_selected_service_todos where domain_id=? and professional_category_id=? and is_selected=1 and company_id=? and professional_subcategory_id in (select professional_subcategory_id from professional_marketplace_service_todos where is_selected=1 and marketplace_id=?)");
			$stmt->bind_param("iiii",$row['domain_id'],$row['professional_category_id'],$row['company_id'],$row['domain_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			return $row['num'];
		}
		
		
		function companyMarketplaceProfessionalCategoryDetail($data)
		{ 
		 
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select * from professional_service_subcategory where id not in(select professional_subcategory_id from professional_company_selected_service_todos where company_id=? and domain_id=?)");
			$stmt->bind_param("ii", $data['company_id'],$data['domain_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			while($row= $result->fetch_assoc())
			{
				
			$stmt = $dbCon->prepare("insert into professional_company_selected_service_todos ( domain_id,professional_category_id,professional_subcategory_id,company_id, created_on, modified_on) values (?,?, ?,?, now(), now())");
			$stmt->bind_param("iiii",$data['domain_id'],$row['professional_category_id'],$row['id'],$data['company_id']);
			$stmt->execute();
			 				
			}
			
			$stmt = $dbCon->prepare("select * from professional_service_category where id in (select professional_category_id from professional_company_selected_service_todos where company_id=? and is_selected=1 and domain_id=? and professional_category_id in(select professional_category_id from professional_marketplace_service_todos where marketplace_id=? and is_selected=1))");
			$stmt->bind_param("iii", $data['company_id'],$data['domain_id'],$data['domain_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($rowCategory = $result->fetch_assoc())
			{
			$rowCategory['enc']=$this->encrypt_decrypt('encrypt',$rowCategory['id']);
			array_push($org,$rowCategory);
			}
				$stmt->close();
				$dbCon->close();
				return $org;	
			}
			
		
		
		
		function dstrictRequestBookTable($data)
		{
			$dbCon = AppModel::createConnection();
			if(!isset($_POST)  || empty($_POST))
			{
				return 0;	
			}
			if($_POST['email']==0 || $_POST['email']=="" || $_POST['email']==null)
			{
			return 0;
			} 
			$checkout_id= $this -> encrypt_decrypt('decrypt',$data['checkout_id']);
			
			$stmt = $dbCon->prepare("select id from user_logins where email=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("s", $_POST['email']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if(empty($row))
			{
			$_POST['user_id']=$this->createRentMeeUser($data);	
			}	
			else
			{
				$_POST['user_id']=$row['id'];
			}
						
			$stmt = $dbCon->prepare("select id,work_time from working_hrs where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['time_detail']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowTime = $result->fetch_assoc();
			 
			$stmt = $dbCon->prepare("insert into resturant_table_booking_info(qloud_checkout_id,resturant_id,dining_hall_id,serve_type,company_size,booking_date, booking_time, booking_time_id, user_id,created_on)values(?,?,?,?,?,?,?,?,?, now())");
			$stmt->bind_param("iiiiissii",$checkout_id,$data['resturant_id'],$data['dining_hall'],$data['serve_type'],$data['company_size'],$data['booking_date'],$rowTime['work_time'],$data['time_detail'],$_POST['user_id']);	
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
			
		}
		
		function bookServiceForCheckInUserOld()
		{
			$dbCon = AppModel::createConnection();
			  
			$id=$this->encrypt_decrypt('decrypt',$_POST['location_id']);
			$item_id=$this->encrypt_decrypt('decrypt',$_POST['item_id']);
			$qloud_checkout_id=$this->encrypt_decrypt('decrypt',$_POST['checkout_id']);
			$t=$_POST['price']*$_POST['quantity'];
			$stmt = $dbCon->prepare("insert into hotel_roomservice_item_ordered(qloud_checkout_id,is_private,location_id,booking_person_id,one_shared,dish_price,dish_id,dish_quantity,dish_name,dish_image,dish_detail,total_price,created_on,service_type,`card_number` ,  `card_holder_name` ,  `expiry_date` ,  `cvc` ,  `address`  ,  `port_number`  ,  `zipcode`  ,  `city` )
			values(?,?,?,?,?,?,?,?,?,?,?,?,now(),?,?,?,?,?,?,?,?,?)");
			$stmt->bind_param("iiiiiiiisssiissssssss",$qloud_checkout_id,$_POST['shared_type_private'],$id,$_POST['user_id'],$_POST['shared_type'],$_POST['price'],$item_id,$_POST['quantity'],$_POST['dish_name'],$_POST['dish_image'],$_POST['dish_detail'],$t,$_POST['service_type'],$_POST['card'],$_POST['holder'],$_POST['expiry_date'],$_POST['cvc'],$_POST['address'],$_POST['port_number'],$_POST['zipcode'],$_POST['city']);
			$stmt->execute();
			$id=$stmt->insert_id;
			
			$stmt = $dbCon->prepare("select user_logins.id,zipcode,first_name,last_name,email,country_of_residence,user_profiles.city,user_profiles.state,phone_number,address,port_number from user_logins left join user_profiles on user_profiles.user_logins_id=user_logins.id where user_logins.id=?");
			$stmt->bind_param("i",$_POST['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/tokens');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "card[number]=4242424242424242&card[exp_month]=2&card[exp_year]=2030&card[cvc]=314");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);
			$a=json_decode($result,true);
			 
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/customers');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "name=".$row['first_name']."&email=".$row['email']."&source=".$a['id']."&description=My");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);
			$b=json_decode($result,true);
			$cuId=$b['id'];
			
			$total_price=$_POST['price']*100;
			if($total_price<500)
			{
				$total_price=500;
			}
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/charges');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "customer=".$b['id']."&amount=".$total_price."&currency=sek&description=My");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);			
			$c=json_decode($result,true);
			$Chargeid=$c['id'];	
			
			$rowP['user']=1;
			$rowP['buyer_id']=$row['id'];
			$rowP['user_id']=$row['id'];
			$rowP['customer_id']=$cuId;
			$rowP['charge_id']=$Chargeid; 
			$isConfirmed=1;
			$stmt = $dbCon->prepare("update hotel_roomservice_item_ordered set is_verified=1, is_paid=1,  card_id=0, customer_id=?, charge_id=?, is_user=1, user_id=?,is_confirmed_employee=?,booked_employee_id=?, booking_time=?, booking_date=? where id=?");
			$stmt->bind_param("ssiiiiii",$rowP['customer_id'],$rowP['charge_id'],$rowP['user_id'],$isConfirmed,$_POST['booking_employee_id'],$_POST['booking_time'],$_POST['booking_date'],$id);
			$stmt->execute(); 	
			
			$stmt->close();
			$dbCon->close();
			return $rowP;
			
			 
			
		}
		
		
		
		function bookServiceForCheckInUser()
		{
			$dbCon = AppModel::createConnection();
			 
			$job_id=$this->encrypt_decrypt('decrypt',$_POST['job_id']);
			$company_id=$this->encrypt_decrypt('decrypt',$_POST['company_id']);  
			$qloud_bookable_service_id=$this->encrypt_decrypt('decrypt',$_POST['item_id']);
			$qloud_checkout_id=$this->encrypt_decrypt('decrypt',$_POST['checkout_id']);
			 
			$stmt = $dbCon->prepare("update `user_professional_service_request_company_info` set  bid_accepted=2 where job_id=?");
			$stmt->bind_param("i", $job_id);
			$stmt->execute();
			$_POST['is_confirmed']=1;
			$stmt = $dbCon->prepare("select * from dishes_detail_information where find_in_set(id,?)");
			$stmt->bind_param("s",$qloud_bookable_service_id);
			 
			$stmt->execute();
			$result = $stmt->get_result();
			while($row = $result->fetch_assoc())
			{
			$t=$row['dish_price']*$_POST['quantity'];
			$stmt = $dbCon->prepare("insert into  hotel_roomservice_item_ordered (booked_from,total_price,professional_user_job_id,is_confirmed_employee,booked_employee_id, booking_time, booking_date,qloud_checkout_id,is_verified,service_type,booking_person_id,dish_id,dish_quantity,created_on,is_paid,user_id)values(?,?,?,?,?,?,?,?,?,?,?,?,?,now(),?,?)");
			/* bind parameters for markers */
			$stmt->bind_param("iiiiisiiiiiiiii",$_POST['booked_from'],$t,$job_id,$_POST['is_confirmed'],$_POST['booking_employee_id'],$_POST['booking_time'],$_POST['booking_date'],$qloud_checkout_id,$is_verified,$service_type,$serviceBidsInfo['user_id'],$row['id'],$_POST['quantity'],$is_verified,$serviceBidsInfo['user_id']);
			$stmt->execute();
			$id=$stmt->insert_id;
			$stmt = $dbCon->prepare("insert into `qloudid`.`user_professional_service_request_company_info`( per_hour_fee,project_fee,is_service_bookable, `job_id`  , `company_id`  , `assigned_on`) values (?,?,?,?,?,now())");
			$stmt->bind_param("iiiii",$row['dish_price'],$row['dish_price'], $is_verified,$job_id,$company_id);
			$stmt->execute();
			$bid_id=$stmt->insert_id;
			$stmt = $dbCon->prepare("update `user_professional_service_request_company_info` set  bid_accepted=1,qloud_bookable_service_id=?,booking_employee_id=?, booking_time=?, booking_date=?,hotel_room_service_id=? where id=?");
			$stmt->bind_param("iisiii", $row['id'],$_POST['booking_employee_id'],$_POST['booking_time'],$_POST['booking_date'],$id,$bid_id);
			$stmt->execute();	
			}
			 
			 
			$stmt->close();
			$dbCon->close();
			return 1;
			
			 
			
		}
		
		
		function bookServiceForPublicUser()
		{
			$dbCon = AppModel::createConnection();
			 if(!isset($_POST)  || empty($_POST))
			{
				$rowP=array();
				return $rowP;	
			}
			if($_POST['email']==0 || $_POST['email']=="" || $_POST['email']==null)
			{
			$rowP=array();
			return $rowP;
			} 
			$id=$this->encrypt_decrypt('decrypt',$_POST['location_id']);
			$item_id=$this->encrypt_decrypt('decrypt',$_POST['item_id']);
			$qloud_checkout_id=$this->encrypt_decrypt('decrypt',$_POST['checkout_id']);
			$t=$_POST['price']*$_POST['quantity'];
			
			$stmt = $dbCon->prepare("select id from user_logins where email=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("s", $_POST['email']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if(empty($row))
			{
			$_POST['user_id']=$this->createRentMeeUser($data);	
			}	
			else
			{
				$_POST['user_id']=$row['id'];
			}
			
			$stmt = $dbCon->prepare("insert into hotel_roomservice_item_ordered(qloud_checkout_id,is_private,location_id,booking_person_id,one_shared,dish_price,dish_id,dish_quantity,dish_name,dish_image,dish_detail,total_price,created_on,service_type,`card_number` ,  `card_holder_name` ,  `expiry_date` ,  `cvc` ,  `address`  ,  `port_number`  ,  `zipcode`  ,  `city` )
			values(?,?,?,?,?,?,?,?,?,?,?,?,now(),?,?,?,?,?,?,?,?,?)");
			$stmt->bind_param("iiiiiiiisssiissssssss",$qloud_checkout_id,$_POST['shared_type_private'],$id,$_POST['user_id'],$_POST['shared_type'],$_POST['price'],$item_id,$_POST['quantity'],$_POST['dish_name'],$_POST['dish_image'],$_POST['dish_detail'],$t,$_POST['service_type'],$_POST['card'],$_POST['holder'],$_POST['expiry_date'],$_POST['cvc'],$_POST['address'],$_POST['port_number'],$_POST['zipcode'],$_POST['city']);
			$stmt->execute();
			$id=$stmt->insert_id;
			
			$stmt = $dbCon->prepare("select user_logins.id,zipcode,first_name,last_name,email,country_of_residence,user_profiles.city,user_profiles.state,phone_number,address,port_number from user_logins left join user_profiles on user_profiles.user_logins_id=user_logins.id where user_logins.id=?");
			$stmt->bind_param("i",$_POST['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/tokens');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "card[number]=4242424242424242&card[exp_month]=2&card[exp_year]=2030&card[cvc]=314");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);
			$a=json_decode($result,true);
			 
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/customers');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "name=".$row['first_name']."&email=".$row['email']."&source=".$a['id']."&description=My");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);
			$b=json_decode($result,true);
			$cuId=$b['id'];
			
			$total_price=$_POST['price']*100;
			if($total_price<500)
			{
				$total_price=500;
			}
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/charges');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "customer=".$b['id']."&amount=".$total_price."&currency=sek&description=My");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);			
			$c=json_decode($result,true);
			$Chargeid=$c['id'];	
			
			$rowP['user']=1;
			$rowP['buyer_id']=$row['id'];
			$rowP['user_id']=$row['id'];
			$rowP['customer_id']=$cuId;
			$rowP['charge_id']=$Chargeid; 
			
			$isConfirmed=1;
			$stmt = $dbCon->prepare("update hotel_roomservice_item_ordered set is_verified=1, is_paid=1,  card_id=0, customer_id=?, charge_id=?, is_user=1, user_id=?,is_confirmed_employee=?,booked_employee_id=?, booking_time=?, booking_date=? where id=?");
			$stmt->bind_param("ssiiiiii",$rowP['customer_id'],$rowP['charge_id'],$rowP['user_id'],$isConfirmed,$_POST['booking_employee_id'],$_POST['booking_time'],$_POST['booking_date'],$id);
			$stmt->execute(); 	
			
			$stmt->close();
			$dbCon->close();
			return $rowP;
			
			 
			
		}
		
		function getEmployeeLocations()
		{
			 
			$dbCon = AppModel::createConnection();
			$company_id=$this->encrypt_decrypt('decrypt',$_POST['company_id']);
			 
			$stmt = $dbCon->prepare("select location_id from user_company_profile where company_id=? and user_login_id=(select user_login_id from employees where id=?)");
			$stmt->bind_param("ii",$company_id,$_POST['employee_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if(empty($row))
			{
				$stmt = $dbCon->prepare("select id as location_id from property_location where company_id=?");
				$stmt->bind_param("i",$company_id);
				$stmt->execute();
				$result = $stmt->get_result();
				$row = $result->fetch_assoc();
			}
			$row['enc']=$this->encrypt_decrypt('encrypt',$row['location_id']);
			$stmt->close();
			$dbCon->close();  
			return $row;
			
		}
	
		function createRentMeeUser($data)
		{
			$dbCon = AppModel::createConnection($data);
			$data['password']='';
			$data['random_hash']='';
			if(isset($_POST['user_come_from']))
			{
				$user_come_from=$_POST['user_come_from'];
			}
			else
			{
			$user_come_from=1;	
			}
			
			 
			$stmt = $dbCon->prepare("INSERT INTO user_logins (first_name,last_name,registered_from,get_started_wizard_status,email, password, email_verification_code , created_on , modified_on, country_of_residence,user_came_from ) VALUES (?,?,?, ?,  ?, ?, ?, now(), now(), ?,?)");
			$st=0;
			$rf=1;
			$stmt->bind_param("ssiisssii",$data['first_name'],$data['last_name'], $rf,$st,$data['email'], $data['password'], $data['random_hash'], $data['pcountry'],$user_come_from); // ss -> string string
			$stmt->execute();
			$id=$stmt->insert_id;
			$stmt = $dbCon->prepare("INSERT INTO user_profiles (user_logins_id,phone_number ) VALUES (?, ?)");
			$stmt->bind_param("is",$id,$data['p_number']); // ss -> string string
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return $id;
		}
		
		
		
		
		
		 function getProfessionalBookingServices($data)
		{
			
			$dbCon = AppModel::createConnection();
			$professional_subcategory_id=$this->encrypt_decrypt('decrypt',$_POST['id']);
			$company_id=$this->encrypt_decrypt('decrypt',$_POST['company_id']);
			$domain_id=$this->encrypt_decrypt('decrypt',$_POST['domain_id']);
			$stmt = $dbCon->prepare("select time_required,dish_image,company_name,dishes_detail_information.id,dish_name,dish_detail,dish_price,is_bookable,is_active,is_physical,one_shared,one_shared_type,recurring_event,open_event_date,open_total_person from dishes_detail_information left join companies on companies.id=dishes_detail_information.company_id where is_physical=2 and is_bookable=1 and is_active=1  and company_id=?    and dishes_detail_information.id in (select service_id from dish_marketplace_information where marketplace_id=? and is_published=1)");
			$stmt->bind_param("ii",$company_id,$domain_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			 if($row['one_shared']==2 && $row['one_shared_type']==1 && $row['recurring_event']==0)
			 {
				 $d=strtotime(date('Y-m-d'));
				 if($row['open_event_date']<=$d)
					 continue;
				 else
				 {
					$stmt = $dbCon->prepare("select sum(dish_quantity) as total_booked from hotel_roomservice_item_ordered where dish_id=? and service_type=5");
					$stmt->bind_param("i",$row['id']);
					$stmt->execute();
					$result2 = $stmt->get_result();	
					$row2 = $result2->fetch_assoc();
					if($row2['total_booked']==$row['open_total_person'])
						continue;
				 }
			 }
			 
			 
			$filename="../estorecss/".$row['dish_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['dish_image'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row ['dish_image'].'.jpg' );  $imgs='../../../../'.$imgs; } else { $value_a="../../../../../html/usercontent/images/default-profile-pic.jpg";  $imgs="../../../../../html/usercontent/images/default-profile-pic.jpg"; }
			$imgs=str_replace('../../../../../','https://www.qloudid.com/',$imgs);
			$row['dish_image']=$imgs;
			
			array_push($org,$row);
			$org[$j]['enc']=$this->encrypt_decrypt('encrypt',$row['id']);	
			$j++;
			}
		 
			$stmt->close();
			$dbCon->close();  
			return $org;
			
		}
		
		
		 function getProfessionalBookingFilteredServices($data)
		{
			
			$dbCon = AppModel::createConnection();
			$professional_subcategory_id=$this->encrypt_decrypt('decrypt',$_POST['id']);
			$company_id=$this->encrypt_decrypt('decrypt',$_POST['company_id']);
			$stmt = $dbCon->prepare("select dish_image,company_name,dishes_detail_information.id,dish_name,dish_detail,dish_price,is_bookable,is_active,is_physical,one_shared,one_shared_type,recurring_event,open_event_date,open_total_person from dishes_detail_information left join companies on companies.id=dishes_detail_information.company_id where is_physical=2 and is_bookable=1 and is_active=1 and professional_subcategory_id=? and company_id=? and find_in_set(one_shared,?) and find_in_set(one_shared_type,?)");
			$stmt->bind_param("iiii",$professional_subcategory_id,$company_id,$_POST['one_shared'],$_POST['one_shared_type']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			 if($row['one_shared']==2 && $row['one_shared_type']==1 && $row['recurring_event']==0)
			 {
				 $d=strtotime(date('Y-m-d'));
				 if($row['open_event_date']<=$d)
					 continue;
				 else
				 {
					$stmt = $dbCon->prepare("select sum(dish_quantity) as total_booked from hotel_roomservice_item_ordered where dish_id=? and service_type=5");
					$stmt->bind_param("i",$row['id']);
					$stmt->execute();
					$result2 = $stmt->get_result();	
					$row2 = $result2->fetch_assoc();
					if($row2['total_booked']==$row['open_total_person'])
						continue;
				 }
			 }
			 
			 
			$filename="../estorecss/".$row['dish_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['dish_image'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row ['dish_image'].'.jpg' );  $imgs='../../../../'.$imgs; } else { $value_a="../../../../../html/usercontent/images/default-profile-pic.jpg";  $imgs="../../../../../html/usercontent/images/default-profile-pic.jpg"; }
			$imgs=str_replace('../../../../../','https://www.qloudid.com/',$imgs);
			$row['dish_image']=$imgs;
			
			array_push($org,$row);
			$org[$j]['enc']=$this->encrypt_decrypt('encrypt',$row['id']);	
			$j++;
			}
		 
			$stmt->close();
			$dbCon->close();  
			return $org;
			
		}
		
		
		
		 
		
		
		
		function bookingServicesLocationList($data)
		{
			$dbCon = AppModel::createConnection($data);
			$data['hotel_checkin_id']=$_POST['checkout_id'];
				$bookingInformationDetail= $this -> bookingInformationDetail($data);
				$search='%'.$bookingInformationDetail['city'].'%';
				$stmt = $dbCon->prepare("select distinct city_v from property_location where company_id in (select company_id from dishes_detail_information where is_physical=2)");
				 
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0; 
			while($row = $result->fetch_assoc())
			{
				array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
		
		function bookingServicesProfessionalCategoryList($data)
		{
			$dbCon = AppModel::createConnection($data);
			$checkout_id=$this->encrypt_decrypt('decrypt',$_POST['checkout_id']);
			$domain_id=$this->encrypt_decrypt('decrypt',$_POST['domain_id']);
			$area_id=$_POST['city_id'];
			$md_id=$this->encrypt_decrypt('decrypt',$_POST['md_id']); 
				$search='%'.$_POST['city'].'%';
				 
				/*$stmt = $dbCon->prepare("select * from professional_service_category where id in (select professional_category_id from dishes_detail_information where is_physical=2 and company_id in (select company_id from property_location where property_location.visiting_address like ? or property_location.visiting_state like ? or property_location.visiting_city like ? or property_location.country_v like ? or property_location.city_v like ?))");*/
				
				if($data['is_premium']==1)
				{
				
				$stmt = $dbCon->prepare("select * from professional_service_category where id in(select professional_category_id from professional_marketplace_service_todos where marketplace_id=? and is_selected=1  and published_on_dstricts=1) and id in (select professional_category_id from professional_company_selected_service_todos where company_id in(select company_id from professional_company_selected_areas where city_id=? and is_selected=1 and company_id in (select company_id from cleaning_company_premium_account_request where selected_subscription>0 and domain_id=?)) and is_selected=1) and available_at_domain=?	order by category_completed desc");
				}
				else
				{
				$stmt = $dbCon->prepare("select * from professional_service_category where id in(select professional_category_id from professional_marketplace_service_todos where marketplace_id=? and is_selected=1  and unaqasa_nonpremium=1) and id in (select professional_category_id from professional_company_selected_service_todos where company_id in(select company_id from professional_company_selected_areas where city_id=? and is_selected=1 and company_id in (select company_id from cleaning_company_premium_account_request where selected_subscription>0 and domain_id=?)) and is_selected=1) and available_at_domain=?	order by category_completed desc");	
				}
				$stmt->bind_param("iiii",$domain_id,$area_id,$domain_id,$md_id);
			
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0; 
			while($row = $result->fetch_assoc())
			{
				  
				if($data['is_premium']==1)
				{
				$stmt = $dbCon->prepare("select count(dishes_detail_information.id) as num from dishes_detail_information where is_physical=2 and is_bookable=1 and is_active=1 and professional_subcategory_id in (select id from professional_service_subcategory where professional_category_id=? and id in (select subcategory_id from professional_service_subcategory_available  where availablity_type=1) and id in (select professional_subcategory_id from professional_marketplace_service_todos where marketplace_id=? and is_selected=1 and professional_category_id=?   and published_on_dstricts=1) and id in (select professional_subcategory_id from professional_company_selected_service_todos where company_id in(select company_id from professional_company_selected_areas where city_id=? and is_selected=1) and is_selected=1 and professional_category_id=?)) and dishes_detail_information.id in (select service_id from dish_marketplace_information where marketplace_id=? and is_published=1)");
				}
				else
				{
				$stmt = $dbCon->prepare("select count(dishes_detail_information.id) as num from dishes_detail_information where is_physical=2 and is_bookable=1 and is_active=1 and professional_subcategory_id in (select id from professional_service_subcategory where professional_category_id=? and id in (select subcategory_id from professional_service_subcategory_available  where availablity_type=1) and id in (select professional_subcategory_id from professional_marketplace_service_todos where unaqasa_nonpremium=1 and marketplace_id=? and is_selected=1 and professional_category_id=? ) and id in (select professional_subcategory_id from professional_company_selected_service_todos where   company_id in(select company_id from professional_company_selected_areas where city_id=? and is_selected=1) and is_selected=1 and professional_category_id=?)) and dishes_detail_information.id in (select service_id from dish_marketplace_information where marketplace_id=? and is_published=1)");	
				}
				$stmt->bind_param("iiiiii",$row['id'],$domain_id,$row['id'],$area_id,$row['id'],$domain_id);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$row1 = $result1->fetch_assoc();	
				 
				if($row1['num']==0)
				{
				continue;
				}
				
				if($row['id']==$data['catg_id'])
				{
					$row['is_selected']=1;
				}
				else
				{
					$row['is_selected']=0;
				}
				 $row['enc']=$this->encrypt_decrypt('encrypt',$row['id']);
				array_push($org,$row);
				$key_values = array_column($org, 'is_selected'); 
				array_multisort($key_values, SORT_DESC, $org);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
		
		function bookingProfessionalSubCategoryList($data)
		{
			$dbCon = AppModel::createConnection($data);
			$domain_id=$this->encrypt_decrypt('decrypt',$_POST['domain_id']);
			$area_id=$_POST['city_id'];
			$md_id=$this->encrypt_decrypt('decrypt',$_POST['md_id']);  
			$catg_id=$_POST['category_id']; 
			 
			/*$stmt = $dbCon->prepare("select * from professional_service_subcategory where id in (select professional_subcategory_id  from dishes_detail_information where is_physical=2 and professional_category_id=(select id from professional_service_category where category_name=?) and company_id in (select company_id from property_location where property_location.visiting_address like ? or property_location.visiting_state like ? or property_location.visiting_city like ? or property_location.country_v like ? or property_location.city_v like ?) )");
			$stmt->bind_param("ssssss", $_POST['category_name'],$search,$search,$search,$search,$search);*/
			if($data['is_premium']==1)
			{
			$stmt = $dbCon->prepare("select * from professional_service_subcategory where professional_category_id=? and id in (select subcategory_id from professional_service_subcategory_available  where availablity_type=1) and id in (select professional_subcategory_id from professional_marketplace_service_todos where marketplace_id=? and is_selected=1 and professional_category_id=?  and published_on_dstricts=1) and id in (select professional_subcategory_id from professional_company_selected_service_todos where company_id in(select company_id from professional_company_selected_areas where city_id=? and is_selected=1) and is_selected=1 and professional_category_id=?) ");
			}
			else
			{
			$stmt = $dbCon->prepare("select * from professional_service_subcategory where professional_category_id=? and id in (select subcategory_id from professional_service_subcategory_available  where availablity_type=1) and id in (select professional_subcategory_id from professional_marketplace_service_todos where unaqasa_nonpremium=1 and marketplace_id=? and is_selected=1 and professional_category_id=?) and id in (select professional_subcategory_id from professional_company_selected_service_todos where company_id in(select company_id from professional_company_selected_areas where city_id=? and is_selected=1) and is_selected=1 and professional_category_id=?) ");	
			}
			
			$stmt->bind_param("iiiii", $catg_id,$domain_id,$catg_id,$area_id,$catg_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0; 
			while($row = $result->fetch_assoc())
			{
				 
				$stmt = $dbCon->prepare("select count(dishes_detail_information.id) as num from dishes_detail_information where is_physical=2 and is_bookable=1 and is_active=1 and professional_subcategory_id =?   and dishes_detail_information.id in (select service_id from dish_marketplace_information where marketplace_id=? and is_published=1)");
				$stmt->bind_param("ii",$row['id'],$domain_id);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$row1 = $result1->fetch_assoc();	
				if($row1['num']==0)
				{
				continue;
				}
				
				 
				
				$filename="../estorecss/".$row ['subcategory_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['subcategory_image'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row ['subcategory_image'].'.jpg' );  $imgs='../../../../'.$imgs; } else { $value_a="../../../../../html/usercontent/images/default-profile-pic.jpg";  $imgs="../../../../../html/usercontent/images/default-profile-pic.jpg"; }	
				$imgs=str_replace('../../../../../','https://www.qloudid.com/',$imgs);
				$row['enc']=$this->encrypt_decrypt('encrypt',$row['id']);
				$row['subcategory_image']=$imgs;
			 
				array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
		
		function getProfessionalServiceCompaniesOld($data)
		{
			$dbCon = AppModel::createConnection();
			$professional_subcategory_id=$this->encrypt_decrypt('decrypt',$_POST['id']);
			 
				$search='%'.$_POST['city'].'%';
				$stmt = $dbCon->prepare("select companies.id,company_name,latitude,longitude,address,profile_pic from companies left join company_profiles on company_profiles.company_id=companies.id where companies.id in(select company_id from dishes_detail_information where is_physical=2 and is_bookable=1 and is_active=1 and professional_subcategory_id=? and company_id in(select company_id from property_location where property_location.visiting_address like ? or property_location.visiting_state like ? or property_location.visiting_city like ? or property_location.country_v like ? or property_location.city_v like ?))");
				$stmt->bind_param("isssss",$professional_subcategory_id,$search,$search,$search,$search,$search);
			 
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			 
			$stmt = $dbCon->prepare("select min(dish_price) as price from dishes_detail_information where is_physical=2 and is_bookable=1 and is_active=1 and professional_subcategory_id=? and company_id=?");
			$stmt->bind_param("ii",$professional_subcategory_id,$row['id']);
			$stmt->execute();
			$resultPrice = $stmt->get_result();
			$rowPrice = $resultPrice->fetch_assoc();
			  
				if($row['profile_pic']=="" || $row['profile_pic']==null)
				{
					$image='https://www.qloudid.com/html/usercontent/images/random/officepng.png';
				}
				else
				{
				$filename="../estorecss/".$row['profile_pic'].".txt"; $value_a=file_get_contents("../estorecss/".$row['profile_pic'].".txt"); $value_a=str_replace('"','',$value_a); $image = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['profile_pic'].'.jpg' );
				$image=str_replace('../','https://www.qloudid.com/',$image);	
				}
				
				array_push($org,$row);
				$org[$j]['price']=$rowPrice['price'];
				$org[$j]['image_path']=$image;
				$org[$j]['enc']=$this->encrypt_decrypt('encrypt',$row['id']);
				$j++;
			}
		 
			$stmt->close();
			$dbCon->close();  
			return $org;
			
		}
		
		function getProfessionalServiceCompanies($data)
		{
			$dbCon = AppModel::createConnection();
			$professional_subcategory_id=$this->encrypt_decrypt('decrypt',$data['subcatg_id']);
			$catg_id=$this->encrypt_decrypt('decrypt',$data['catg_id']);
			$domain_id=$this->encrypt_decrypt('decrypt',$_POST['domain_id']);
			$area_id=$this->encrypt_decrypt('decrypt',$_POST['city_id']);
			$md_id=$this->encrypt_decrypt('decrypt',$_POST['md_id']);  
			 if($data['is_premium']==1)
			 {
				$stmt = $dbCon->prepare("select companies.id,company_name,latitude,longitude,address,profile_pic from companies left join company_profiles on company_profiles.company_id=companies.id where companies.id in(select company_id from dishes_detail_information where is_physical=2 and is_bookable=1 and is_active=1 and professional_subcategory_id in (select professional_subcategory_id from professional_marketplace_service_todos where marketplace_id=? and is_selected=1 and published_on_dstricts=1) and id in (select service_id from dish_marketplace_information where marketplace_id=? and is_published=1))"); 
			 }
			else
			{
				$stmt = $dbCon->prepare("select companies.id,company_name,latitude,longitude,address,profile_pic from companies left join company_profiles on company_profiles.company_id=companies.id where companies.id in(select company_id from dishes_detail_information where is_physical=2 and is_bookable=1 and is_active=1 and professional_subcategory_id in (select professional_subcategory_id from professional_marketplace_service_todos where marketplace_id=? and is_selected=1 and unaqasa_nonpremium=1) and id in (select service_id from dish_marketplace_information where marketplace_id=? and is_published=1))");
			}
			$stmt->bind_param("ii",$domain_id,$domain_id);
			 
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			
			$stmt = $dbCon->prepare("select selected_subscription from cleaning_company_premium_account_request where company_id=? and domain_id=?");
			$stmt->bind_param("ii",$row['id'],$domain_id);
			$stmt->execute();
			$resultC = $stmt->get_result();
			$rowC = $resultC->fetch_assoc();
			if($rowC['selected_subscription']==0)
			{
				continue;
			}
			else
			{
			$row['selected_subscription']=$rowC['selected_subscription'];
			}
			 
			 
			$stmt = $dbCon->prepare("select min(dish_price) as price from dishes_detail_information where is_physical=2 and is_bookable=1 and is_active=1 and professional_subcategory_id=? and company_id=?");
			$stmt->bind_param("ii",$professional_subcategory_id,$row['id']);
			$stmt->execute();
			$resultPrice = $stmt->get_result();
			$rowPrice = $resultPrice->fetch_assoc();
				array_push($org,$row);
				$org[$j]['price']=$rowPrice['price'];
				$org[$j]['image_path']=$image;
				$org[$j]['enc']=$this->encrypt_decrypt('encrypt',$row['id']);
				
				$org[$j]['images']=array();
				$i=0;
				$stmt = $dbCon->prepare("select * from dish_detail_photos where dish_id in (select id from dishes_detail_information where is_physical=2 and is_bookable=1 and is_active=1 and professional_subcategory_id=? and company_id=?) limit 0,4");
				$stmt->bind_param("ii",$professional_subcategory_id,$row['id']);
				$stmt->execute();
				$resultPrice1 = $stmt->get_result();
				while($rowProfile = $resultPrice1->fetch_assoc())
				{
					$row['profile_pic']=$rowProfile['dish_photo_path'];
					if($row['profile_pic']=="" || $row['profile_pic']==null)
					{
						continue;
					}
					else
					{
					$filename="../estorecss/".$row['profile_pic'].".txt"; $value_a=file_get_contents("../estorecss/".$row['profile_pic'].".txt"); $value_a=str_replace('"','',$value_a); $image = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['profile_pic'].'.jpg' );
					$row['profile_pic']=str_replace('../','https://www.qloudid.com/',$image);	
					}
					$org[$j]['images'][$i]['profile_pic']=$row['profile_pic'];
					$i++;
				}
				$key_values = array_column($org, 'selected_subscription'); 
				array_multisort($key_values, SORT_DESC, $org);
				$j++;	
			}
		 
			$stmt->close();
			$dbCon->close();  
			return $org;
			
		}	
			
			
		function bookApartment()
		{
			$dbCon = AppModel::createConnection();
			if(!isset($_POST)  || empty($_POST))
			{
				$org=array();
				return $org;	
			}
			if($_POST['email']==0 || $_POST['email']=="" || $_POST['email']==null)
			{
			$org=array();
			return $org;
			}
			$id= $this -> encrypt_decrypt('decrypt',$_POST['id']);   
			$rid= $this -> encrypt_decrypt('decrypt',$_POST['rid']); 
			
			$stmt = $dbCon->prepare("select id from user_logins where email=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("s", $_POST['email']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if(empty($row))
			{
			$_POST['user_id']=$this->createRentMeeUser($data);	
			}	
			else
			{
				$_POST['user_id']=$row['id'];
			}
			
			$_POST['holder']=htmlentities($_POST['holder'],ENT_NOQUOTES, 'ISO-8859-1');
			$_POST['expiry_month']=date('m',$_POST['expiry_date']);
			$_POST['expiry_year']=date('Y',$_POST['expiry_date']);
			$_POST['card_type']=1;
			$stmt = $dbCon->prepare("insert into user_cards(`user_login_id`,`created_on`,`card_number`,card_cvv,exp_month,exp_year,name_on_card,card_type) values(?, now(), ?, ?, ?, ?, ?, ?)");
			$stmt->bind_param("isiiiss", $_POST['user_id'],$_POST['card'],$_POST['cvv'],$data['expiry_month'],$data['expiry_year'],$_POST['holder'],$_POST['card_type']);
			$stmt->execute();
			$card_id=$stmt->insert_id;
			
			$stmt = $dbCon->prepare("select count(id) as num from user_address where user_id = ?");
				
						/* bind parameters for markers */
			$stmt->bind_param("i", $_POST['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			$_POST['EntryCode']='';
			$_POST['IsInvoiceAddressSame']=1;
			$_POST['address']=htmlentities($_POST['address'],ENT_NOQUOTES, 'ISO-8859-1');
			$_POST['city']=htmlentities($_POST['city'],ENT_NOQUOTES, 'ISO-8859-1');
			if($rowId['num']==0)
			{
				
			$stmt = $dbCon->prepare("update user_profiles set name_on_door=?, entry_code=?, full_address=?, port_number=?, address=?, city=?, zipcode=?,invoice_address=?,invoice_zipcode=?,invoice_city=?,invoice_port=?,is_invoice_same=?,is_name_on_house_same=?,is_id_active=1  where user_logins_id=?");
				/* bind parameters for markers */
			$stmt->bind_param("sssssssssssiii",$_POST['first_name'],$_POST['EntryCode'], $_POST['address'],$_POST['port_number'], $_POST['address'],$_POST['city'],$_POST['zipcode'],$_POST['address'],$_POST['zipcode'],$_POST['city'],$_POST['port_number'],$_POST['IsInvoiceAddressSame'],$_POST['IsNameSame'],$_POST['user_id']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("insert into  user_address ( `user_id`, `address`  , `city`  , `zipcode` , `port_number` , `invoice_address`  , `invoice_city`  , `invoice_zipcode`  , `invoice_port_number`  , `is_name_same`  , `is_invoice_same`  , `name_on_house`   , `created_on`,entry_code ) values (? , ?, ?, ?, ? , ?, ?, ?, ? , ?, ?, ?, now(), ?)");
				/* bind parameters for markers */
			$stmt->bind_param("issssssssiiss",$_POST['user_id'],$_POST['address'],$_POST['city'],$_POST['zipcode'],$_POST['port_number'],$_POST['address'],$_POST['city'],$_POST['zipcode'],$_POST['port_number'],$_POST['IsInvoiceAddressSame'],$_POST['IsNameSame'],$_POST['first_name'],$_POST['EntryCode']);
			$stmt->execute();
			$address_id=$stmt->insert_id;
			}
			else
			{
				$st=0;
			$stmt = $dbCon->prepare("insert into  user_address ( `user_id`, `address`  , `city`  , `zipcode` , `port_number` , `invoice_address`  , `invoice_city`  , `invoice_zipcode`  , `invoice_port_number`  , `is_name_same`  , `is_invoice_same`  , `name_on_house`   , `created_on`,entry_code, is_personal_address ) values (? , ?, ?, ?, ? , ?, ?, ?, ? , ?, ?, ?, now(), ?, ?)");
				/* bind parameters for markers */
			$stmt->bind_param("issssssssiissi",$_POST['user_id'],$_POST['address'],$_POST['city'], $_POST['zipcode'],$_POST['port_number'],$_POST['address'],$_POST['city'],$_POST['zipcode'],$_POST['port_number'],$_POST['IsInvoiceAddressSame'],$_POST['IsNameSame'],$_POST['first_name'],$_POST['EntryCode'],$st);
			$stmt->execute();
			$address_id=$stmt->insert_id;	
			}
			
			$j=0;
			while($j==0)
					{
					$code=mt_rand(1111,9999); 
					$stmt = $dbCon->prepare("select id from hotel_checkout_detail where checkin_code=?");
					/* bind parameters for markers */
					$stmt->bind_param("s",$code);
					$stmt->execute();
					$result = $stmt->get_result();
					$rowCode = $result->fetch_assoc();
					if(empty($rowCode))
					{
						$j++;
					}
					}
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/tokens');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "card[number]=4242424242424242&card[exp_month]=2&card[exp_year]=2030&card[cvc]=314");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);
			$a=json_decode($result,true);
			 
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/customers');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "name=".$_POST['first_name']."&email=".$_POST['email']."&source=".$a['id']."&description=My");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);
			$b=json_decode($result,true);
			$cuId=$b['id'];
			
			$total_price=$_POST['price']*$_POST['total_days']*100;
			if($total_price<500)
			{
				$total_price=500;
			}
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/charges');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "customer=".$b['id']."&amount=".$total_price."&currency=sek&description=My");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);			
			$c=json_decode($result,true);
			$Chargeid=$c['id'];	
			
			$date1=date('Y-m-d',$_POST['checkin_date']);
			$date2=date('Y-m-d',$_POST['checkout_date']);
			$stmt = $dbCon->prepare("insert into `hotel_checkout_detail`(`guest_adult`,`guest_children`,`guest_infant`,`checkin_date`,`checkout_date`,`room_type_id`,`total_days`,`price`,`created_on`,hotel_property_type,checkin_booking_date,checkout_booking_date) values ( ?, ?, ?, ?, ?, ?, ?, ?, now(), ?,?,?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("iiissiiiiss", $_POST['guest_adults'], $_POST['guest_children'], $_POST['guest_infants'],$date1,$date2,$id,$_POST['total_days'],$_POST['price'],$_POST['hotel_property_type'],$_POST['checkin_date'],$_POST['checkin_date']);
			$stmt->execute();
			$id=$stmt->insert_id;
			
			$payment_option=1;
			$is_company=0;
			$stmt = $dbCon->prepare("update hotel_checkout_detail set payment_option=?,chekin_type=?,is_paid=1, buyer_id=?, card_id=?,cust_id=?,transection_id=?,is_buyer_company=?,user_id=?,checkin_code=?,hotel_id=?,property_id=?,room_cleaning_date=?,delivery_address_id=? where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("iiiissiisiisii",$payment_option,$payment_option,$_POST['user_id'],$card_id,$cuId,$Chargeid,$is_company,$_POST['user_id'],$code,$is_company,$is_company,$_POST['date1'],$address_id, $id);
			$stmt->execute();
			$org=array();
			$org['qloud_checkout_id']=$this -> encrypt_decrypt('encrypt',$id);
			$org['user_id']=$_POST['user_id'];
			$org['customer_id']=$cuId;
			$org['Chargeid']=$Chargeid;
			$org['is_company']=$is_company;
			$org['address_id']=$address_id;
			$org['card_id']=$card_id;
			$org['code']=$code;
			$stmt->close();
			$dbCon->close();
			return $org;
			
		}	 
		
		
		
		function bookRentalCar()
		{ 
		
			$dbCon = AppModel::createConnection();
			if(!isset($_POST)  || empty($_POST))
			{
				return 0;	
			}
			if($_POST['email']==0 || $_POST['email']=="" || $_POST['email']==null)
			{
			return 0;	
			}
			$car_type_id= $this -> encrypt_decrypt('decrypt',$_POST['car_type_id']);
			$car_id= $this -> encrypt_decrypt('decrypt',$_POST['car_id']);
			$hotel_checkin_id=0;
			$data=array();
			$data=$_POST;
			
			$stmt = $dbCon->prepare("select id from user_logins where email=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("s", $_POST['email']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if(empty($row))
			{
			$_POST['user_id']=$this->createRentMeeUser($data);	
			}	
			else
			{
				$_POST['user_id']=$row['id'];
			}
			 
			$stmt = $dbCon->prepare("select email from user_logins where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $_POST['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowUser = $result->fetch_assoc();
			 
			$stmt = $dbCon->prepare("select company_email,car_rental_available_car_type.location_id,image_url,car_rental_available_car_type.id,car_model,model_series from car_rental_available_car_type left join car_rental_model on car_rental_model.id=car_rental_available_car_type.brand_type left join car_rental_model_series on car_rental_model_series.id=car_rental_available_car_type.model_id left join property_location on property_location.id= car_rental_available_car_type.location_id left join companies on companies.id=property_location.company_id where car_rental_available_car_type.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $car_type_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			 
			$stmt = $dbCon->prepare("insert into car_rental_booking_information (extra_driver,booking_domain_id, country_id, phone_number, extra_inclusions,child_seats,user_id,qloud_checkout_id, car_type_id,car_id,location_id,checkin_date,checkout_date,total_days,per_day_price,pickup_time,address,port_number,zipcode,city,card_number,card_holder_name,expiry_date,cvv,insurance_fee,created_on) values (?,?,?,?, ?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,now())");
			$stmt->bind_param("iiisiiiiiiissiisssssssssi",$_POST['extra_driver'],$_POST['domain_id'],$_POST['pcountry'],$_POST['p_number'],$_POST['extra_inclusions'],$_POST['child_seats'], $_POST['user_id'],$hotel_checkin_id,$car_type_id,$car_id,$row['location_id'], $_POST['checkin_date'], $_POST['checkout_date'], $_POST['total_days'], $_POST['price'], $_POST['pickup_time'], $_POST['address'], $_POST['port_number'], $_POST['zipcode'], $_POST['city'], $_POST['card'], $_POST['holder'], $_POST['expiry_date'], $_POST['cvc'], $_POST['insurance_fee']);
			$stmt->execute();
			
			$id=$stmt->insert_id;
			$data=array();
			$data['enc']=$this -> encrypt_decrypt('encrypt',$id);
			 
			$stmt = $dbCon->prepare("select companies.id,company_name,company_email from companies where id=(select company_id from property_location where id=(select location_id from car_rental_booking_information where id=?))");
			$stmt->bind_param("i",$booking_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCompanyEmail = $result->fetch_assoc();
			$to=$row['company_email'];
			$subject='Booking information';
			
			$emailContent='<html xmlns="http://www.w3.org/1999/xhtml" style="background-color: rgb(240, 240, 240);" class=""><head>
					  <title>Reservation confirmed</title>
					  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
					  <meta charset="utf-8">
					  <meta name="viewport" content="width=device-width, initial-scale=1">
					  <meta http-equiv="X-UA-Compatible" content="IE=edge">
					  <style type="text/css">
						/* GT AMERICA */

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Regular";
						  font-weight: 400;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
						}

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Medium";
						  font-weight: 600;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
						}

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Condensed Bold";
						  font-weight: 700;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
						}

						/* CLIENT-SPECIFIC RESET */

						body,
						table,
						td,
						a {
						  -webkit-text-size-adjust: 100%;
						  -ms-text-size-adjust: 100%;
						}

						/* Prevent WebKit and Windows mobile changing default text sizes */

						table,
						td {
						  mso-table-lspace: 0pt;
						  mso-table-rspace: 0pt;
						}

						/* Remove spacing between tables in Outlook 2007 and up */

						img {
						  -ms-interpolation-mode: bicubic;
						}

						/* Allow smoother rendering of resized image in Internet Explorer */

						.im {
						  color: inherit !important;
						}

						/* DEVICE-SPECIFIC RESET */

						a[x-apple-data-detectors] {
						  color: inherit !important;
						  text-decoration: none !important;
						  font-size: inherit !important;
						  font-family: inherit !important;
						  font-weight: inherit !important;
						  line-height: inherit !important;
						}

						/* iOS BLUE LINKS */

						/* RESET */

						img {
						  border: 0;
						  height: auto;
						  line-height: 100%;
						  outline: none;
						  text-decoration: none;
						  display: block;
						}

						table {
						  border-collapse: collapse;
						}

						table td {
						  border-collapse: collapse;
						  display: table-cell;
						}

						body {
						  height: 100% !important;
						  margin: 0 !important;
						  padding: 0 !important;
						  width: 100% !important;
						}

						/* BG COLORS */

						.mainTable {
						  background-color: #F0F0F0;
						}

						.mainTable--hospitality {
						  background-color: #f7f2ed;
						}

						html {
						  background-color: #F0F0F0;
						}

						/* VARIABLES */

						.bg-white {
						  background-color: white;
						}

						.hr {
						  /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
						  background-color: #d3d3d8;
						  border-collapse: collapse;
						  mso-table-lspace: 0pt;
						  mso-table-rspace: 0pt;
						  mso-line-height-rule: exactly;
						  line-height: 1px;
						}

						.textAlignLeft {
						  text-align: left !important;
						}

						.textAlignRight {
						  text-align: right !important;
						}

						.textAlignCenter {
						  text-align: center !important;
						}

						.mt1 {
						  margin-top: 6px;
						}

						.list {
						  padding-left: 18px;
						  margin: 0;
						}

						/* TYPOGRAPHY */

						body {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  color: #4f4f65;
						  -webkit-font-smoothing: antialiased;
						  -ms-text-size-adjust: 100%;
						  -moz-osx-font-smoothing: grayscale;
						  font-smoothing: always;
						  text-rendering: optimizeLegibility;
						}

						.h1 {
						  font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 700;
						  vertical-align: middle;
						  font-size: 36px;
						  line-height: 42px;
						}

						.h2 {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 600;
						  vertical-align: middle;
						  font-size: 16px;
						  line-height: 24px;
						}

						.text {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 16px;
						  line-height: 21px;
						}

						.text-list {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 16px;
						  line-height: 25px;
						}

						.textSmall {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 14px;
						}

						.text-xsmall {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-size: 11px;
						  text-transform: uppercase;
						  line-height: 22px;
						  letter-spacing: 1px;
						}

						.text-bold {
						  font-weight: 600;
						}

						.text-link {
						  text-decoration: underline;
						}

						.text-linkNoUnderline {
						  text-decoration: none;
						}

						.text-strike {
						  text-decoration: line-through;
						}

						/* FONT COLORS */

						.textColorDark {
						  color: #23233e;
						}

						.textColorNormal {
						  color: #4f4f65;
						}

						.textColorBlue {
						  color: #2020c0;
						}

						.textColorGrayDark {
						  color: #7B7B8B;
						}

						.textColorGray {
						  color: #A5A8AD;
						}

						.textColorWhite {
						  color: #FFFFFF;
						}

						.textColorRed {
						  color: #df3232;
						}

						/* BUTTON */

						.Button-primary-wrapper {
						  border-radius: 3px;
						  background-color: #2020C0;
						}

						.Button-primary {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  border-radius: 3px;
						  border: 1px solid #2020C0;
						  color: #ffffff;
						  display: block;
						  font-size: 16px;
						  font-weight: 600;
						  padding: 18px;
						  text-decoration: none;
						}

						.Button-secondary-wrapper {
						  border-radius: 3px;
						  background-color: #ffffff;
						}

						.Button-secondary {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  border-radius: 3px;
						  border: 1px solid #2020C0;
						  color: #2020C0;
						  display: block;
						  font-size: 16px;
						  font-weight: 600;
						  padding: 18px;
						  text-decoration: none;
						}

						/* LAYOUT */

						.Content-container {
						  padding-left: 60px;
						  padding-right: 60px;
						}

						.Content-container--main {
						  padding-top: 54px;
						  padding-bottom: 60px;
						}

						.Content {
						  width: 580px;
						  margin: 0 auto;
						}

						.wrapper {
						  max-width: 600px;
						}

						.section {
						  padding: 24px 0px;
						  border-bottom: 1px solid #d3d3d8;
						}

						.section--noBorder {
						  padding: 24px 0px 0;
						}

						.section--last {
						  padding: 24px 0px;
						}

						.message {
						  background-color: #F4F4F5;
						  padding: 18px;
						}

						.card {
						  border: 1px solid #d3d3d8;
						  padding: 18px;
						}

						/* HEADER */

						.header-tockLogoImage {
						  display: block;
						  color: #F0F0F0;
						}

						.header-heroImage {
						  padding-bottom: 24px;
						}

						/* PREHEADER */

						.preheader {
						  display: none;
						  font-size: 1px;
						  color: #FFFFFF;
						  line-height: 1px;
						  max-height: 0px;
						  max-width: 0px;
						  opacity: 0;
						  overflow: hidden;
						}

						/* BANNER */

						.notice {
						  padding: 12px;
						  background: #23233E;
						  color: #FFFFFF;
						  display: block;
						  font-size: 14px;
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 600;
						}

						/* INTRO */

						.section--intro {
						  padding-bottom: 48px;
						}

						/* BOOKING INFO */

						.business-logo__container {
						  width: 48px;
						  height: 48px;
						  border-radius: 3px;
						  border: 1px solid #d3d3d8;
						  overflow: hidden;
						}

						.business-logo__image {
						  border: 1px solid transparent;
						  border-radius: 3px;
						  width: 48px;
						  height: 48px;
						  display: block;
						}

						.business-address--address {
						  width: 50%;
						}

						.business-address--map {
						  width: 50%;
						}

						.business-address--map-image {
						  width: 100%;
						}

						/* MOBILE TICKETS */

						.mobile-ticket--description {
						  width: 65%;
						  margin-top: 12px;
						  margin-right: 5%;
						}

						.mobile-ticket--code {
						  width: 30%;
						}

						.mobile-ticket--code-image {
						  width: 100%;
						}

						/* RESERVATION ACTIONS */

						.linksTable {
						  border-bottom: 1px solid #d3d3d8;
						}

						.linksTableRow {
						  padding: 24px 12px;
						}

						.actions-icon {
						  vertical-align: middle;
						}

						.actions-text {
						  vertical-align: middle;
						}

						/* RECEIPT */

						.receipt__container {
						  border: 1px solid #d3d3d8;
						  padding: 24px;
						}

						.receipt__row {
						  border-top: 1px solid #d3d3d8;
						}

						/* FEEDBACK ICONS */

						.feedback-link {
						  border: 1px solid #d4d5da;
						  border-radius: 3px;
						  display: inline-block;
						  width: calc(32% - 2px);
						  padding: 10px 0;
						}

						.feedback-link-bumper {
						  display: inline-block;
						  width: 1%;
						}

						.feedback-link img {
						  height: 50px;
						  width: 50px;
						}

						/* SOCIAL ICONS */

						.social-link {
						  display: inline-block;
						  width: auto;
						}

						.social-link-text {
						  padding: 14px 24px 14px 14px;
						}

						/* TABLET STYLES */

						@media screen and (max-width: 648px) {
						  /* DEVICE-SPECIFIC RESET */
						  div[style*="margin: 16px 0;"] {
							margin: 0 !important;
						  }
						  /* ANDROID CENTER FIX */
						  /* LAYOUT */
						  .wrapper {
							width: 100% !important;
							max-width: 100% !important;
						  }
						  .Content {
							width: 90% !important;
						  }
						  .Content-container {
							padding-left: 36px !important;
							padding-right: 36px !important;
						  }
						  .Content-container--main {
							padding-top: 30px !important;
							padding-bottom: 42px !important;
						  }
						  .responsiveTable {
							width: 100% !important;
						  }
						  /* RESERVATION ACTIONS */
						  .linksTableRow {
							padding-left: 0 !important;
							padding-right: 0 !important;
							padding-top: 12px !important;
							padding-bottom: 12px !important;
						  }
						  .linksTableRow--borderRight {
							border-right: none !important;
							padding-left: 0 !important;
							padding-right: 0 !important;
						  }
						  /* FEEDBACK LINK */
						  .feedback-link img {
							height: 38px !important;
							width: 38px !important;
						  }
						}

						/* MOBILE STYLES */

						@media screen and (max-width: 480px) {
						  /* TYPOGRAPHY */
						  .h1 {
							font-size: 30px !important;
							line-height: 30px !important;
						  }
						  .text {
							font-size: 16px !important;
							line-height: 22px !important;
						  }
						  /* BUTTON */
						  .mobile-buttonContainer {
							width: 100% !important;
						  }
						  /* LAYOUT */
						  .Content {
							width: 100% !important;
						  }
						  .Content-container {
							padding-left: 18px !important;
							padding-right: 18px !important;
						  }
						  .Content-container--main {
							padding-top: 24px !important;
							padding-bottom: 30px !important;
						  }
						  .section {
							padding: 18px 0 !important;
						  }
						  .section--last {
							padding: 18px 0 !important;
						  }
						  .header {
							padding: 0 18px !important;
						  }
						  .business-address--address {
							width: 100% !important;
						  }
						  .business-address--map {
							margin-top: 30px !important;
							width: 100% !important;
						  }
						  .mobile-ticket--description {
							width: 100% !important;
							margin-top: 0px !important;
						  }
						  .mobile-ticket--code {
							margin-top: 30px !important;
							margin-left: 0;
							width: 100% !important;
						  }
						  /* RECEIPT */
						  .receipt__container {
							padding: 12px !important;
						  }
						  /* SOCIAL ICONS */
						  .social-link {
							display: block !important;
							width: 100% !important;
							border-bottom: 1px solid #d3d3d8 !important;
						  }
						  /* INTRO */
						  .section--intro {
							padding-top: 18px !important;
							padding-bottom: 18px !important;
						  }
						}
					  </style>
					<style id="__web-inspector-hide-shortcut-style__">
.__web-inspector-hide-shortcut__, .__web-inspector-hide-shortcut__ *, .__web-inspector-hidebefore-shortcut__::before, .__web-inspector-hideafter-shortcut__::after
{
    visibility: hidden !important;
}
</style></head>

					<body style="margin: 0 !important; padding: 0 !important; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; height: 100%; margin: 0; padding: 0; width: 100%; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; color: rgb(79, 79, 101); -webkit-font-smoothing: antialiased; -ms-text-size-adjust: 100%; -moz-osx-font-smoothing: grayscale; font-smoothing: always; text-rendering: optimizeLegibility;">
					   
					  <!--[if mso]>
						<style type="text/css">
					.h1 {font-family: "Helvetica", "Arial", sans-serif !important; font-weight: 700 !important; vertical-align: middle !important; font-size: 36px !important; mso-line-height-rule: exactly;line-height: 42px !important;}
					.h2 {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 600 !important;vertical-align: middle !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 24px !important;}
					.text {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 21px !important;}
					.text-list {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 25px !important;}
					.textSmall {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 14px !important;}
					.text-xsmall {font-family: "Helvetica", "Arial", sans-serif !important;font-size: 11px !important;text-transform: uppercase !important;mso-line-height-rule: exactly;line-height: 22px !important;letter-spacing: 1px !important;}
					.text-bold {font-weight: 600 !important;}
					.text-link {text-decoration: underline !important;}
					.text-linkNoUnderline {text-decoration: none !important;}
					.text-strike {text-decoration: line-through !important;}
					.textColorDark {color: #23233e !important;}
					.textColorNormal {color: #4f4f65 !important;}
					.textColorBlue {color: #2020c0 !important;}
					.textColorGray {color: #A5A8AD !important;}
					.textColorWhite {color: #FFFFFF !important;}
					.Button-primary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #ffffff !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
					.Button-secondary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #2020C0 !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
						</style>
						<![endif]-->
					  <!-- HIDDEN PREHEADER TEXT -->
					  <div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;">
					  </div>
					  <table border="0" cellpadding="0" cellspacing="0" width="100%" class=" mainTable  " style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: rgb(240, 240, 240);">
						<tbody><tr><td style="display:none !important;
					 visibility:hidden;
					 mso-hide:all;
					 font-size:1px;
					 color:#ffffff;
					 line-height:1px;
					 max-height:0px;
					 max-width:0px;
					 opacity:0;
					 overflow:hidden; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> We are thrilled that you will be joining us. If yo... </td>
						<!-- HEADER -->
						</tr><tr>
						  <td align="center" class="header" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
							<!--[if (gte mso 9)|(IE)]>
						<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
						<tr>
						<td align="center" valign="top" width="600">
						<![endif]-->
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 580px; margin: 0 auto;">
							  <tbody><tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr>
								<td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <h1 style="font-size: 33px;font-weight: 800;line-height: 30px;">Dstricts</h1>               </td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							</tbody></table>
							<!--[if (gte mso 9)|(IE)]>
						</td>
						</tr>
						</table>
						<![endif]-->
						  </td>
						</tr>
						<!-- CONTENT -->
						<tr>
						  <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
							<!--[if (gte mso 9)|(IE)]>
						<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
						<tr>
						<td align="center" valign="top" width="600">
						<![endif]-->
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content bg-white" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: white; width: 580px; margin: 0 auto;">
							  <tbody><tr>
								<td class="Content-container Content-container--main text textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101); padding-left: 60px; padding-right: 60px; padding-top: 54px; padding-bottom: 60px;">
								  <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
									<!-- RESTAURANT INFO -->
									<tbody><tr>
									  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" valign="center" width="48" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="business-logo__container" style="width: 48px; height: 48px; border-radius: 3px; border: 1px solid rgb(211, 211, 216); overflow: hidden;">
												<img src="'.$row['image_url'].'" class="business-logo__image" width="48" height="48" alt="Logo" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block; border: 1px solid transparent; border-radius: 3px; width: 48px; height: 48px; display: block;">
											  </div>
											</td>
											<td width="12" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
											<td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">'.$row['car_model'].'</span>                          </td>
										  </tr>
										  <tr class="spacer">
											<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr class="spacer">
											<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<!-- INTRO -->
									<tr>
									  <td valign="top" align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h1 textColorDark" style="font-family: &quot;GT America Condensed Bold&quot;, &quot;Roboto Condensed&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 700; vertical-align: middle; font-size: 36px; line-height: 42px; color: rgb(35, 35, 62);">Booking information</span>                          </td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr>
											<td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
											  <!--[if gte mso 15]>&nbsp;<![endif]-->
											</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<!-- MESSAGE -->
									<tr class="spacer">
									  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr>
									  <td align="left" class="message" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(244, 244, 245); padding: 18px;">
										<div class="text textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
										  <span class="text-bold textColorDark" style="font-weight: 600; color: rgb(35, 35, 62);">Booking information</span>
										  <br>You have have received a booking please click on button below to verify the detail of bookings</div>
									  </td>
									</tr>
									<tr class="spacer">
									  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr>
									  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
										<!--[if gte mso 15]>&nbsp;<![endif]-->
									  </td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<!-- BOOKING INFO -->
									<tr>
									  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" valign="middle" width="468" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="text-list textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
												<span class="text-bold textColorDark" style="font-weight: 600; color: rgb(35, 35, 62);">'.date("F j, Y, g:i a").'</span>
												<br>Price per day(inclusive of taxes): '.$_POST['price'].'
												<br>
											  </div>
											</td>
										  </tr>
										  
										  
										  

					

					

					




										</tbody></table>
									  </td>
									</tr>
									<!-- ADDRESS -->
									<tr>
									  <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr>
											<td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
											  <!--[if gte mso 15]>&nbsp;<![endif]-->
											</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr>
											<td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
												<tbody><tr>
												  <td style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
													<table align="left" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--address" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 50%;">
													  <tbody><tr>
														<td align="left" width="100%" class="text-list textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
														<span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">'.$row["car_model"].'</span><br>'.$row["model_series"].'<br>From '.date('Y-m-d',$_POST["checkin_date"]).' to '.date('Y-m-d',$_POST["checkout_date"]).'                                         </td>
													  </tr>
													</tbody></table>
													<!--[if mso]></td><td><![endif]-->
													
												  </td>
												</tr>
											  </tbody></table>
											</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr>
									  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
										<!--[if gte mso 15]>&nbsp;<![endif]-->
									  </td>
									</tr>
									
									<tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody>
                      
                      
                      



<tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>

<tr>
                        <td align="center" valign="center" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <table border="0" cellspacing="0" cellpadding="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody>
<tr>
                              <td align="center" valign="center" width="100%" class="Button-primary-wrapper" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; border-radius: 3px; background-color: rgb(32, 32, 192);">
                              <a href="https://qloudid.com/public/index.php/CarRental/verifyBooking/'.$data['enc'].'" target="_blank" class="Button-primary" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; border-radius: 3px; border: 1px solid rgb(32, 32, 192); color: rgb(255, 255, 255); display: block; font-size: 16px; font-weight: 600; padding: 18px; text-decoration: none;">Confirm booking</a>                                </td>
                            </tr>
                          </tbody>
</table>
                        </td>
                      </tr>
                    </tbody>
</table>
                  </td>
                </tr>	
									<!-- RECEIPT -->
									
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									
									
									<tr>
									  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
										<!--[if gte mso 15]>&nbsp;<![endif]-->
									  </td>
									</tr>
									
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<!-- EDIT RECEIPT -->
									<!-- CANCELLATION POLICY -->
									<tr>
									  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="text text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; font-weight: 600; color: rgb(35, 35, 62);">
												Confirmation policy
											  </div>
											</td>
										  </tr>
										  <tr>
											<td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="text textColorNormal mt1" style="margin-top: 6px; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
												<span>This booking will be confirmed only when car rental company accept your request.</span>
												<span>You can not transfer your booking to another person.</span>
											  </div>
											</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<tr class="spacer">
									  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									
									<!-- QUESTIONS -->
									
								  </tbody></table>
								</td>
							  </tr>
							</tbody></table>
						  </td>
						</tr>
						<!-- FOOTER -->
						<tr>
						  <td align="center" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; width: 580px; margin: 0 auto;">
							<!-- Will most likely required a feature flag -->
							<!--[if (gte mso 9)|(IE)]>
					<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
					<tr>
					<td align="center" valign="top" width="600">
					<![endif]-->
							<table width="100%" border="0" cellspacing="0" cellpadding="0" align="center" class="Content-container" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; padding-left: 60px; padding-right: 60px;">
							  <tbody><tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr>
								<td align="center" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <a href="https://www.exploretock.com" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;"> <img src="https://storage.googleapis.com/tock-public-assets/images-email-template/tock-brandmark-color.png" width="30" height="30" alt="Tock" border="0" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block;"> </a>              </td>
							  </tr>
							  <tr class="spacer">
								<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr>
								<td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
								  <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
									 2019 Tock, Inc.
								  </div>
								  <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
									All Rights Reserved
								  </div>
								</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							</tbody></table>
							<!--[if (gte mso 9)|(IE)]>
					</td>
					</tr>
					</table>
					<![endif]-->
						  </td>
						</tr>
					  </tbody></table><title>Reservation confirmed</title>
					  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
					  <meta charset="utf-8">
					  <meta name="viewport" content="width=device-width, initial-scale=1">
					  <meta http-equiv="X-UA-Compatible" content="IE=edge">
					  <style type="text/css">
						/* GT AMERICA */

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Regular";
						  font-weight: 400;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
						}

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Medium";
						  font-weight: 600;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
						}

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Condensed Bold";
						  font-weight: 700;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
						}

						/* CLIENT-SPECIFIC RESET */

						body,
						table,
						td,
						a {
						  -webkit-text-size-adjust: 100%;
						  -ms-text-size-adjust: 100%;
						}

						/* Prevent WebKit and Windows mobile changing default text sizes */

						table,
						td {
						  mso-table-lspace: 0pt;
						  mso-table-rspace: 0pt;
						}

						/* Remove spacing between tables in Outlook 2007 and up */

						img {
						  -ms-interpolation-mode: bicubic;
						}

						/* Allow smoother rendering of resized image in Internet Explorer */

						.im {
						  color: inherit !important;
						}

						/* DEVICE-SPECIFIC RESET */

						a[x-apple-data-detectors] {
						  color: inherit !important;
						  text-decoration: none !important;
						  font-size: inherit !important;
						  font-family: inherit !important;
						  font-weight: inherit !important;
						  line-height: inherit !important;
						}

						/* iOS BLUE LINKS */

						/* RESET */

						img {
						  border: 0;
						  height: auto;
						  line-height: 100%;
						  outline: none;
						  text-decoration: none;
						  display: block;
						}

						table {
						  border-collapse: collapse;
						}

						table td {
						  border-collapse: collapse;
						  display: table-cell;
						}

						body {
						  height: 100% !important;
						  margin: 0 !important;
						  padding: 0 !important;
						  width: 100% !important;
						}

						/* BG COLORS */

						.mainTable {
						  background-color: #F0F0F0;
						}

						.mainTable--hospitality {
						  background-color: #f7f2ed;
						}

						html {
						  background-color: #F0F0F0;
						}

						/* VARIABLES */

						.bg-white {
						  background-color: white;
						}

						.hr {
						  /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
						  background-color: #d3d3d8;
						  border-collapse: collapse;
						  mso-table-lspace: 0pt;
						  mso-table-rspace: 0pt;
						  mso-line-height-rule: exactly;
						  line-height: 1px;
						}

						.textAlignLeft {
						  text-align: left !important;
						}

						.textAlignRight {
						  text-align: right !important;
						}

						.textAlignCenter {
						  text-align: center !important;
						}

						.mt1 {
						  margin-top: 6px;
						}

						.list {
						  padding-left: 18px;
						  margin: 0;
						}

						/* TYPOGRAPHY */

						body {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  color: #4f4f65;
						  -webkit-font-smoothing: antialiased;
						  -ms-text-size-adjust: 100%;
						  -moz-osx-font-smoothing: grayscale;
						  font-smoothing: always;
						  text-rendering: optimizeLegibility;
						}

						.h1 {
						  font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 700;
						  vertical-align: middle;
						  font-size: 36px;
						  line-height: 42px;
						}

						.h2 {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 600;
						  vertical-align: middle;
						  font-size: 16px;
						  line-height: 24px;
						}

						.text {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 16px;
						  line-height: 21px;
						}

						.text-list {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 16px;
						  line-height: 25px;
						}

						.textSmall {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 14px;
						}

						.text-xsmall {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-size: 11px;
						  text-transform: uppercase;
						  line-height: 22px;
						  letter-spacing: 1px;
						}

						.text-bold {
						  font-weight: 600;
						}

						.text-link {
						  text-decoration: underline;
						}

						.text-linkNoUnderline {
						  text-decoration: none;
						}

						.text-strike {
						  text-decoration: line-through;
						}

						/* FONT COLORS */

						.textColorDark {
						  color: #23233e;
						}

						.textColorNormal {
						  color: #4f4f65;
						}

						.textColorBlue {
						  color: #2020c0;
						}

						.textColorGrayDark {
						  color: #7B7B8B;
						}

						.textColorGray {
						  color: #A5A8AD;
						}

						.textColorWhite {
						  color: #FFFFFF;
						}

						.textColorRed {
						  color: #df3232;
						}

						/* BUTTON */

						.Button-primary-wrapper {
						  border-radius: 3px;
						  background-color: #2020C0;
						}

						.Button-primary {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  border-radius: 3px;
						  border: 1px solid #2020C0;
						  color: #ffffff;
						  display: block;
						  font-size: 16px;
						  font-weight: 600;
						  padding: 18px;
						  text-decoration: none;
						}

						.Button-secondary-wrapper {
						  border-radius: 3px;
						  background-color: #ffffff;
						}

						.Button-secondary {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  border-radius: 3px;
						  border: 1px solid #2020C0;
						  color: #2020C0;
						  display: block;
						  font-size: 16px;
						  font-weight: 600;
						  padding: 18px;
						  text-decoration: none;
						}

						/* LAYOUT */

						.Content-container {
						  padding-left: 60px;
						  padding-right: 60px;
						}

						.Content-container--main {
						  padding-top: 54px;
						  padding-bottom: 60px;
						}

						.Content {
						  width: 580px;
						  margin: 0 auto;
						}

						.wrapper {
						  max-width: 600px;
						}

						.section {
						  padding: 24px 0px;
						  border-bottom: 1px solid #d3d3d8;
						}

						.section--noBorder {
						  padding: 24px 0px 0;
						}

						.section--last {
						  padding: 24px 0px;
						}

						.message {
						  background-color: #F4F4F5;
						  padding: 18px;
						}

						.card {
						  border: 1px solid #d3d3d8;
						  padding: 18px;
						}

						/* HEADER */

						.header-tockLogoImage {
						  display: block;
						  color: #F0F0F0;
						}

						.header-heroImage {
						  padding-bottom: 24px;
						}

						/* PREHEADER */

						.preheader {
						  display: none;
						  font-size: 1px;
						  color: #FFFFFF;
						  line-height: 1px;
						  max-height: 0px;
						  max-width: 0px;
						  opacity: 0;
						  overflow: hidden;
						}

						/* BANNER */

						.notice {
						  padding: 12px;
						  background: #23233E;
						  color: #FFFFFF;
						  display: block;
						  font-size: 14px;
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 600;
						}

						/* INTRO */

						.section--intro {
						  padding-bottom: 48px;
						}

						/* BOOKING INFO */

						.business-logo__container {
						  width: 48px;
						  height: 48px;
						  border-radius: 3px;
						  border: 1px solid #d3d3d8;
						  overflow: hidden;
						}

						.business-logo__image {
						  border: 1px solid transparent;
						  border-radius: 3px;
						  width: 48px;
						  height: 48px;
						  display: block;
						}

						.business-address--address {
						  width: 50%;
						}

						.business-address--map {
						  width: 50%;
						}

						.business-address--map-image {
						  width: 100%;
						}

						/* MOBILE TICKETS */

						.mobile-ticket--description {
						  width: 65%;
						  margin-top: 12px;
						  margin-right: 5%;
						}

						.mobile-ticket--code {
						  width: 30%;
						}

						.mobile-ticket--code-image {
						  width: 100%;
						}

						/* RESERVATION ACTIONS */

						.linksTable {
						  border-bottom: 1px solid #d3d3d8;
						}

						.linksTableRow {
						  padding: 24px 12px;
						}

						.actions-icon {
						  vertical-align: middle;
						}

						.actions-text {
						  vertical-align: middle;
						}

						/* RECEIPT */

						.receipt__container {
						  border: 1px solid #d3d3d8;
						  padding: 24px;
						}

						.receipt__row {
						  border-top: 1px solid #d3d3d8;
						}

						/* FEEDBACK ICONS */

						.feedback-link {
						  border: 1px solid #d4d5da;
						  border-radius: 3px;
						  display: inline-block;
						  width: calc(32% - 2px);
						  padding: 10px 0;
						}

						.feedback-link-bumper {
						  display: inline-block;
						  width: 1%;
						}

						.feedback-link img {
						  height: 50px;
						  width: 50px;
						}

						/* SOCIAL ICONS */

						.social-link {
						  display: inline-block;
						  width: auto;
						}

						.social-link-text {
						  padding: 14px 24px 14px 14px;
						}

						/* TABLET STYLES */

						@media screen and (max-width: 648px) {
						  /* DEVICE-SPECIFIC RESET */
						  div[style*="margin: 16px 0;"] {
							margin: 0 !important;
						  }
						  /* ANDROID CENTER FIX */
						  /* LAYOUT */
						  .wrapper {
							width: 100% !important;
							max-width: 100% !important;
						  }
						  .Content {
							width: 90% !important;
						  }
						  .Content-container {
							padding-left: 36px !important;
							padding-right: 36px !important;
						  }
						  .Content-container--main {
							padding-top: 30px !important;
							padding-bottom: 42px !important;
						  }
						  .responsiveTable {
							width: 100% !important;
						  }
						  /* RESERVATION ACTIONS */
						  .linksTableRow {
							padding-left: 0 !important;
							padding-right: 0 !important;
							padding-top: 12px !important;
							padding-bottom: 12px !important;
						  }
						  .linksTableRow--borderRight {
							border-right: none !important;
							padding-left: 0 !important;
							padding-right: 0 !important;
						  }
						  /* FEEDBACK LINK */
						  .feedback-link img {
							height: 38px !important;
							width: 38px !important;
						  }
						}

						/* MOBILE STYLES */

						@media screen and (max-width: 480px) {
						  /* TYPOGRAPHY */
						  .h1 {
							font-size: 30px !important;
							line-height: 30px !important;
						  }
						  .text {
							font-size: 16px !important;
							line-height: 22px !important;
						  }
						  /* BUTTON */
						  .mobile-buttonContainer {
							width: 100% !important;
						  }
						  /* LAYOUT */
						  .Content {
							width: 100% !important;
						  }
						  .Content-container {
							padding-left: 18px !important;
							padding-right: 18px !important;
						  }
						  .Content-container--main {
							padding-top: 24px !important;
							padding-bottom: 30px !important;
						  }
						  .section {
							padding: 18px 0 !important;
						  }
						  .section--last {
							padding: 18px 0 !important;
						  }
						  .header {
							padding: 0 18px !important;
						  }
						  .business-address--address {
							width: 100% !important;
						  }
						  .business-address--map {
							margin-top: 30px !important;
							width: 100% !important;
						  }
						  .mobile-ticket--description {
							width: 100% !important;
							margin-top: 0px !important;
						  }
						  .mobile-ticket--code {
							margin-top: 30px !important;
							margin-left: 0;
							width: 100% !important;
						  }
						  /* RECEIPT */
						  .receipt__container {
							padding: 12px !important;
						  }
						  /* SOCIAL ICONS */
						  .social-link {
							display: block !important;
							width: 100% !important;
							border-bottom: 1px solid #d3d3d8 !important;
						  }
						  /* INTRO */
						  .section--intro {
							padding-top: 18px !important;
							padding-bottom: 18px !important;
						  }
						}
					  </style>



					   
					  <!--[if mso]>
						<style type="text/css">
					.h1 {font-family: "Helvetica", "Arial", sans-serif !important; font-weight: 700 !important; vertical-align: middle !important; font-size: 36px !important; mso-line-height-rule: exactly;line-height: 42px !important;}
					.h2 {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 600 !important;vertical-align: middle !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 24px !important;}
					.text {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 21px !important;}
					.text-list {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 25px !important;}
					.textSmall {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 14px !important;}
					.text-xsmall {font-family: "Helvetica", "Arial", sans-serif !important;font-size: 11px !important;text-transform: uppercase !important;mso-line-height-rule: exactly;line-height: 22px !important;letter-spacing: 1px !important;}
					.text-bold {font-weight: 600 !important;}
					.text-link {text-decoration: underline !important;}
					.text-linkNoUnderline {text-decoration: none !important;}
					.text-strike {text-decoration: line-through !important;}
					.textColorDark {color: #23233e !important;}
					.textColorNormal {color: #4f4f65 !important;}
					.textColorBlue {color: #2020c0 !important;}
					.textColorGray {color: #A5A8AD !important;}
					.textColorWhite {color: #FFFFFF !important;}
					.Button-primary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #ffffff !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
					.Button-secondary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #2020C0 !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
						</style>
						<![endif]-->
					  <!-- HIDDEN PREHEADER TEXT -->
					  <div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;">
					  </div>
					  



					</body></html>';
			
			try{
				sendEmail($subject, $to, $emailContent);
			}
			catch(Exception $e) {
				$to='kowaken.ghirmai@gmail.com';
				sendEmail($subject, $to, $emailContent);
			}
			
			for($i=$_POST['checkin_date']; $i<=$_POST['checkout_date']; )
			{
				$stmt = $dbCon->prepare("insert into car_booking_dates (car_id,booking_date,booking_id) values (?,?,?)");
				$stmt->bind_param("isi", $car_id,$i,$id);
				$stmt->execute();
				$i=strtotime(date('Y-m-d',$i) . ' +1 day');
			}
			
			$to=$rowUser['email'];
			$subject='Booking information';
			
			$emailContent='<html xmlns="http://www.w3.org/1999/xhtml" style="background-color: rgb(240, 240, 240);" class=""><head>
					  <title>Reservation confirmed</title>
					  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
					  <meta charset="utf-8">
					  <meta name="viewport" content="width=device-width, initial-scale=1">
					  <meta http-equiv="X-UA-Compatible" content="IE=edge">
					  <style type="text/css">
						/* GT AMERICA */

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Regular";
						  font-weight: 400;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
						}

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Medium";
						  font-weight: 600;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
						}

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Condensed Bold";
						  font-weight: 700;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
						}

						/* CLIENT-SPECIFIC RESET */

						body,
						table,
						td,
						a {
						  -webkit-text-size-adjust: 100%;
						  -ms-text-size-adjust: 100%;
						}

						/* Prevent WebKit and Windows mobile changing default text sizes */

						table,
						td {
						  mso-table-lspace: 0pt;
						  mso-table-rspace: 0pt;
						}

						/* Remove spacing between tables in Outlook 2007 and up */

						img {
						  -ms-interpolation-mode: bicubic;
						}

						/* Allow smoother rendering of resized image in Internet Explorer */

						.im {
						  color: inherit !important;
						}

						/* DEVICE-SPECIFIC RESET */

						a[x-apple-data-detectors] {
						  color: inherit !important;
						  text-decoration: none !important;
						  font-size: inherit !important;
						  font-family: inherit !important;
						  font-weight: inherit !important;
						  line-height: inherit !important;
						}

						/* iOS BLUE LINKS */

						/* RESET */

						img {
						  border: 0;
						  height: auto;
						  line-height: 100%;
						  outline: none;
						  text-decoration: none;
						  display: block;
						}

						table {
						  border-collapse: collapse;
						}

						table td {
						  border-collapse: collapse;
						  display: table-cell;
						}

						body {
						  height: 100% !important;
						  margin: 0 !important;
						  padding: 0 !important;
						  width: 100% !important;
						}

						/* BG COLORS */

						.mainTable {
						  background-color: #F0F0F0;
						}

						.mainTable--hospitality {
						  background-color: #f7f2ed;
						}

						html {
						  background-color: #F0F0F0;
						}

						/* VARIABLES */

						.bg-white {
						  background-color: white;
						}

						.hr {
						  /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
						  background-color: #d3d3d8;
						  border-collapse: collapse;
						  mso-table-lspace: 0pt;
						  mso-table-rspace: 0pt;
						  mso-line-height-rule: exactly;
						  line-height: 1px;
						}

						.textAlignLeft {
						  text-align: left !important;
						}

						.textAlignRight {
						  text-align: right !important;
						}

						.textAlignCenter {
						  text-align: center !important;
						}

						.mt1 {
						  margin-top: 6px;
						}

						.list {
						  padding-left: 18px;
						  margin: 0;
						}

						/* TYPOGRAPHY */

						body {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  color: #4f4f65;
						  -webkit-font-smoothing: antialiased;
						  -ms-text-size-adjust: 100%;
						  -moz-osx-font-smoothing: grayscale;
						  font-smoothing: always;
						  text-rendering: optimizeLegibility;
						}

						.h1 {
						  font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 700;
						  vertical-align: middle;
						  font-size: 36px;
						  line-height: 42px;
						}

						.h2 {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 600;
						  vertical-align: middle;
						  font-size: 16px;
						  line-height: 24px;
						}

						.text {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 16px;
						  line-height: 21px;
						}

						.text-list {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 16px;
						  line-height: 25px;
						}

						.textSmall {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 14px;
						}

						.text-xsmall {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-size: 11px;
						  text-transform: uppercase;
						  line-height: 22px;
						  letter-spacing: 1px;
						}

						.text-bold {
						  font-weight: 600;
						}

						.text-link {
						  text-decoration: underline;
						}

						.text-linkNoUnderline {
						  text-decoration: none;
						}

						.text-strike {
						  text-decoration: line-through;
						}

						/* FONT COLORS */

						.textColorDark {
						  color: #23233e;
						}

						.textColorNormal {
						  color: #4f4f65;
						}

						.textColorBlue {
						  color: #2020c0;
						}

						.textColorGrayDark {
						  color: #7B7B8B;
						}

						.textColorGray {
						  color: #A5A8AD;
						}

						.textColorWhite {
						  color: #FFFFFF;
						}

						.textColorRed {
						  color: #df3232;
						}

						/* BUTTON */

						.Button-primary-wrapper {
						  border-radius: 3px;
						  background-color: #2020C0;
						}

						.Button-primary {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  border-radius: 3px;
						  border: 1px solid #2020C0;
						  color: #ffffff;
						  display: block;
						  font-size: 16px;
						  font-weight: 600;
						  padding: 18px;
						  text-decoration: none;
						}

						.Button-secondary-wrapper {
						  border-radius: 3px;
						  background-color: #ffffff;
						}

						.Button-secondary {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  border-radius: 3px;
						  border: 1px solid #2020C0;
						  color: #2020C0;
						  display: block;
						  font-size: 16px;
						  font-weight: 600;
						  padding: 18px;
						  text-decoration: none;
						}

						/* LAYOUT */

						.Content-container {
						  padding-left: 60px;
						  padding-right: 60px;
						}

						.Content-container--main {
						  padding-top: 54px;
						  padding-bottom: 60px;
						}

						.Content {
						  width: 580px;
						  margin: 0 auto;
						}

						.wrapper {
						  max-width: 600px;
						}

						.section {
						  padding: 24px 0px;
						  border-bottom: 1px solid #d3d3d8;
						}

						.section--noBorder {
						  padding: 24px 0px 0;
						}

						.section--last {
						  padding: 24px 0px;
						}

						.message {
						  background-color: #F4F4F5;
						  padding: 18px;
						}

						.card {
						  border: 1px solid #d3d3d8;
						  padding: 18px;
						}

						/* HEADER */

						.header-tockLogoImage {
						  display: block;
						  color: #F0F0F0;
						}

						.header-heroImage {
						  padding-bottom: 24px;
						}

						/* PREHEADER */

						.preheader {
						  display: none;
						  font-size: 1px;
						  color: #FFFFFF;
						  line-height: 1px;
						  max-height: 0px;
						  max-width: 0px;
						  opacity: 0;
						  overflow: hidden;
						}

						/* BANNER */

						.notice {
						  padding: 12px;
						  background: #23233E;
						  color: #FFFFFF;
						  display: block;
						  font-size: 14px;
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 600;
						}

						/* INTRO */

						.section--intro {
						  padding-bottom: 48px;
						}

						/* BOOKING INFO */

						.business-logo__container {
						  width: 48px;
						  height: 48px;
						  border-radius: 3px;
						  border: 1px solid #d3d3d8;
						  overflow: hidden;
						}

						.business-logo__image {
						  border: 1px solid transparent;
						  border-radius: 3px;
						  width: 48px;
						  height: 48px;
						  display: block;
						}

						.business-address--address {
						  width: 50%;
						}

						.business-address--map {
						  width: 50%;
						}

						.business-address--map-image {
						  width: 100%;
						}

						/* MOBILE TICKETS */

						.mobile-ticket--description {
						  width: 65%;
						  margin-top: 12px;
						  margin-right: 5%;
						}

						.mobile-ticket--code {
						  width: 30%;
						}

						.mobile-ticket--code-image {
						  width: 100%;
						}

						/* RESERVATION ACTIONS */

						.linksTable {
						  border-bottom: 1px solid #d3d3d8;
						}

						.linksTableRow {
						  padding: 24px 12px;
						}

						.actions-icon {
						  vertical-align: middle;
						}

						.actions-text {
						  vertical-align: middle;
						}

						/* RECEIPT */

						.receipt__container {
						  border: 1px solid #d3d3d8;
						  padding: 24px;
						}

						.receipt__row {
						  border-top: 1px solid #d3d3d8;
						}

						/* FEEDBACK ICONS */

						.feedback-link {
						  border: 1px solid #d4d5da;
						  border-radius: 3px;
						  display: inline-block;
						  width: calc(32% - 2px);
						  padding: 10px 0;
						}

						.feedback-link-bumper {
						  display: inline-block;
						  width: 1%;
						}

						.feedback-link img {
						  height: 50px;
						  width: 50px;
						}

						/* SOCIAL ICONS */

						.social-link {
						  display: inline-block;
						  width: auto;
						}

						.social-link-text {
						  padding: 14px 24px 14px 14px;
						}

						/* TABLET STYLES */

						@media screen and (max-width: 648px) {
						  /* DEVICE-SPECIFIC RESET */
						  div[style*="margin: 16px 0;"] {
							margin: 0 !important;
						  }
						  /* ANDROID CENTER FIX */
						  /* LAYOUT */
						  .wrapper {
							width: 100% !important;
							max-width: 100% !important;
						  }
						  .Content {
							width: 90% !important;
						  }
						  .Content-container {
							padding-left: 36px !important;
							padding-right: 36px !important;
						  }
						  .Content-container--main {
							padding-top: 30px !important;
							padding-bottom: 42px !important;
						  }
						  .responsiveTable {
							width: 100% !important;
						  }
						  /* RESERVATION ACTIONS */
						  .linksTableRow {
							padding-left: 0 !important;
							padding-right: 0 !important;
							padding-top: 12px !important;
							padding-bottom: 12px !important;
						  }
						  .linksTableRow--borderRight {
							border-right: none !important;
							padding-left: 0 !important;
							padding-right: 0 !important;
						  }
						  /* FEEDBACK LINK */
						  .feedback-link img {
							height: 38px !important;
							width: 38px !important;
						  }
						}

						/* MOBILE STYLES */

						@media screen and (max-width: 480px) {
						  /* TYPOGRAPHY */
						  .h1 {
							font-size: 30px !important;
							line-height: 30px !important;
						  }
						  .text {
							font-size: 16px !important;
							line-height: 22px !important;
						  }
						  /* BUTTON */
						  .mobile-buttonContainer {
							width: 100% !important;
						  }
						  /* LAYOUT */
						  .Content {
							width: 100% !important;
						  }
						  .Content-container {
							padding-left: 18px !important;
							padding-right: 18px !important;
						  }
						  .Content-container--main {
							padding-top: 24px !important;
							padding-bottom: 30px !important;
						  }
						  .section {
							padding: 18px 0 !important;
						  }
						  .section--last {
							padding: 18px 0 !important;
						  }
						  .header {
							padding: 0 18px !important;
						  }
						  .business-address--address {
							width: 100% !important;
						  }
						  .business-address--map {
							margin-top: 30px !important;
							width: 100% !important;
						  }
						  .mobile-ticket--description {
							width: 100% !important;
							margin-top: 0px !important;
						  }
						  .mobile-ticket--code {
							margin-top: 30px !important;
							margin-left: 0;
							width: 100% !important;
						  }
						  /* RECEIPT */
						  .receipt__container {
							padding: 12px !important;
						  }
						  /* SOCIAL ICONS */
						  .social-link {
							display: block !important;
							width: 100% !important;
							border-bottom: 1px solid #d3d3d8 !important;
						  }
						  /* INTRO */
						  .section--intro {
							padding-top: 18px !important;
							padding-bottom: 18px !important;
						  }
						}
					  </style>
					<style id="__web-inspector-hide-shortcut-style__">
.__web-inspector-hide-shortcut__, .__web-inspector-hide-shortcut__ *, .__web-inspector-hidebefore-shortcut__::before, .__web-inspector-hideafter-shortcut__::after
{
    visibility: hidden !important;
}
</style></head>

					<body style="margin: 0 !important; padding: 0 !important; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; height: 100%; margin: 0; padding: 0; width: 100%; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; color: rgb(79, 79, 101); -webkit-font-smoothing: antialiased; -ms-text-size-adjust: 100%; -moz-osx-font-smoothing: grayscale; font-smoothing: always; text-rendering: optimizeLegibility;">
					   
					  <!--[if mso]>
						<style type="text/css">
					.h1 {font-family: "Helvetica", "Arial", sans-serif !important; font-weight: 700 !important; vertical-align: middle !important; font-size: 36px !important; mso-line-height-rule: exactly;line-height: 42px !important;}
					.h2 {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 600 !important;vertical-align: middle !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 24px !important;}
					.text {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 21px !important;}
					.text-list {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 25px !important;}
					.textSmall {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 14px !important;}
					.text-xsmall {font-family: "Helvetica", "Arial", sans-serif !important;font-size: 11px !important;text-transform: uppercase !important;mso-line-height-rule: exactly;line-height: 22px !important;letter-spacing: 1px !important;}
					.text-bold {font-weight: 600 !important;}
					.text-link {text-decoration: underline !important;}
					.text-linkNoUnderline {text-decoration: none !important;}
					.text-strike {text-decoration: line-through !important;}
					.textColorDark {color: #23233e !important;}
					.textColorNormal {color: #4f4f65 !important;}
					.textColorBlue {color: #2020c0 !important;}
					.textColorGray {color: #A5A8AD !important;}
					.textColorWhite {color: #FFFFFF !important;}
					.Button-primary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #ffffff !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
					.Button-secondary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #2020C0 !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
						</style>
						<![endif]-->
					  <!-- HIDDEN PREHEADER TEXT -->
					  <div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;">
					  </div>
					  <table border="0" cellpadding="0" cellspacing="0" width="100%" class=" mainTable  " style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: rgb(240, 240, 240);">
						<tbody><tr><td style="display:none !important;
					 visibility:hidden;
					 mso-hide:all;
					 font-size:1px;
					 color:#ffffff;
					 line-height:1px;
					 max-height:0px;
					 max-width:0px;
					 opacity:0;
					 overflow:hidden; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> We are thrilled that you will be joining us. If yo... </td>
						<!-- HEADER -->
						</tr><tr>
						  <td align="center" class="header" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
							<!--[if (gte mso 9)|(IE)]>
						<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
						<tr>
						<td align="center" valign="top" width="600">
						<![endif]-->
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 580px; margin: 0 auto;">
							  <tbody><tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr>
								<td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <h1 style="font-size: 33px;font-weight: 800;line-height: 30px;">Dstricts</h1>               </td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							</tbody></table>
							<!--[if (gte mso 9)|(IE)]>
						</td>
						</tr>
						</table>
						<![endif]-->
						  </td>
						</tr>
						<!-- CONTENT -->
						<tr>
						  <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
							<!--[if (gte mso 9)|(IE)]>
						<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
						<tr>
						<td align="center" valign="top" width="600">
						<![endif]-->
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content bg-white" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: white; width: 580px; margin: 0 auto;">
							  <tbody><tr>
								<td class="Content-container Content-container--main text textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101); padding-left: 60px; padding-right: 60px; padding-top: 54px; padding-bottom: 60px;">
								  <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
									<!-- RESTAURANT INFO -->
									<tbody><tr>
									  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" valign="center" width="48" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="business-logo__container" style="width: 48px; height: 48px; border-radius: 3px; border: 1px solid rgb(211, 211, 216); overflow: hidden;">
												<img src="'.$row['image_url'].'" class="business-logo__image" width="48" height="48" alt="Logo" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block; border: 1px solid transparent; border-radius: 3px; width: 48px; height: 48px; display: block;">
											  </div>
											</td>
											<td width="12" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
											<td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">'.$row['car_model'].'</span>                          </td>
										  </tr>
										  <tr class="spacer">
											<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr class="spacer">
											<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<!-- INTRO -->
									<tr>
									  <td valign="top" align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h1 textColorDark" style="font-family: &quot;GT America Condensed Bold&quot;, &quot;Roboto Condensed&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 700; vertical-align: middle; font-size: 36px; line-height: 42px; color: rgb(35, 35, 62);">Booking information</span>                          </td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr>
											<td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
											  <!--[if gte mso 15]>&nbsp;<![endif]-->
											</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<!-- MESSAGE -->
									<tr class="spacer">
									  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr>
									  <td align="left" class="message" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(244, 244, 245); padding: 18px;">
										<div class="text textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
										  <span class="text-bold textColorDark" style="font-weight: 600; color: rgb(35, 35, 62);">Booking information</span>
										  <br>You have succefully made your car reservation. But please wait for the confirmation from the car rental office. Once the confirmation is done we will inform you</div>
									  </td>
									</tr>
									<tr class="spacer">
									  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr>
									  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
										<!--[if gte mso 15]>&nbsp;<![endif]-->
									  </td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<!-- BOOKING INFO -->
									<tr>
									  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" valign="middle" width="468" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="text-list textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
												<span class="text-bold textColorDark" style="font-weight: 600; color: rgb(35, 35, 62);">'.date("F j, Y, g:i a").'</span>
												<br>Price per day(inclusive of taxes): '.$_POST['price'].'
												<br>
											  </div>
											</td>
										  </tr>
										  
										  
										  

					

					

					




										</tbody></table>
									  </td>
									</tr>
									<!-- ADDRESS -->
									<tr>
									  <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr>
											<td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
											  <!--[if gte mso 15]>&nbsp;<![endif]-->
											</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr>
											<td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
												<tbody><tr>
												  <td style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
													<table align="left" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--address" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 50%;">
													  <tbody><tr>
														<td align="left" width="100%" class="text-list textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
														<span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">'.$row["car_model"].'</span><br>'.$row["model_series"].'<br>From '.date('Y-m-d',$_POST["checkin_date"]).' to '.date('Y-m-d',$_POST["checkout_date"]).'                                         </td>
													  </tr>
													</tbody></table>
													<!--[if mso]></td><td><![endif]-->
													
												  </td>
												</tr>
											  </tbody></table>
											</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr>
									  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
										<!--[if gte mso 15]>&nbsp;<![endif]-->
									  </td>
									</tr>
									
									
									<!-- RECEIPT -->
									
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<!-- EDIT RECEIPT -->
									<!-- CANCELLATION POLICY -->
									<tr>
									  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="text text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; font-weight: 600; color: rgb(35, 35, 62);">
												Confirmation policy
											  </div>
											</td>
										  </tr>
										  <tr>
											<td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="text textColorNormal mt1" style="margin-top: 6px; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
												<span>This booking will be confirmed only when car rental company accept your request.</span>
												<span>You can not transfer your booking to another person.</span>
											  </div>
											</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<tr class="spacer">
									  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									
									<!-- QUESTIONS -->
									
								  </tbody></table>
								</td>
							  </tr>
							</tbody></table>
						  </td>
						</tr>
						<!-- FOOTER -->
						<tr>
						  <td align="center" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; width: 580px; margin: 0 auto;">
							<!-- Will most likely required a feature flag -->
							<!--[if (gte mso 9)|(IE)]>
					<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
					<tr>
					<td align="center" valign="top" width="600">
					<![endif]-->
							<table width="100%" border="0" cellspacing="0" cellpadding="0" align="center" class="Content-container" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; padding-left: 60px; padding-right: 60px;">
							  <tbody><tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr>
								<td align="center" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <a href="https://www.exploretock.com" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;"> <img src="https://storage.googleapis.com/tock-public-assets/images-email-template/tock-brandmark-color.png" width="30" height="30" alt="Tock" border="0" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block;"> </a>              </td>
							  </tr>
							  <tr class="spacer">
								<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr>
								<td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
								  <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
									 2019 Tock, Inc.
								  </div>
								  <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
									All Rights Reserved
								  </div>
								</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							</tbody></table>
							<!--[if (gte mso 9)|(IE)]>
					</td>
					</tr>
					</table>
					<![endif]-->
						  </td>
						</tr>
					  </tbody></table><title>Reservation confirmed</title>
					  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
					  <meta charset="utf-8">
					  <meta name="viewport" content="width=device-width, initial-scale=1">
					  <meta http-equiv="X-UA-Compatible" content="IE=edge">
					  <style type="text/css">
						/* GT AMERICA */

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Regular";
						  font-weight: 400;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
						}

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Medium";
						  font-weight: 600;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
						}

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Condensed Bold";
						  font-weight: 700;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
						}

						/* CLIENT-SPECIFIC RESET */

						body,
						table,
						td,
						a {
						  -webkit-text-size-adjust: 100%;
						  -ms-text-size-adjust: 100%;
						}

						/* Prevent WebKit and Windows mobile changing default text sizes */

						table,
						td {
						  mso-table-lspace: 0pt;
						  mso-table-rspace: 0pt;
						}

						/* Remove spacing between tables in Outlook 2007 and up */

						img {
						  -ms-interpolation-mode: bicubic;
						}

						/* Allow smoother rendering of resized image in Internet Explorer */

						.im {
						  color: inherit !important;
						}

						/* DEVICE-SPECIFIC RESET */

						a[x-apple-data-detectors] {
						  color: inherit !important;
						  text-decoration: none !important;
						  font-size: inherit !important;
						  font-family: inherit !important;
						  font-weight: inherit !important;
						  line-height: inherit !important;
						}

						/* iOS BLUE LINKS */

						/* RESET */

						img {
						  border: 0;
						  height: auto;
						  line-height: 100%;
						  outline: none;
						  text-decoration: none;
						  display: block;
						}

						table {
						  border-collapse: collapse;
						}

						table td {
						  border-collapse: collapse;
						  display: table-cell;
						}

						body {
						  height: 100% !important;
						  margin: 0 !important;
						  padding: 0 !important;
						  width: 100% !important;
						}

						/* BG COLORS */

						.mainTable {
						  background-color: #F0F0F0;
						}

						.mainTable--hospitality {
						  background-color: #f7f2ed;
						}

						html {
						  background-color: #F0F0F0;
						}

						/* VARIABLES */

						.bg-white {
						  background-color: white;
						}

						.hr {
						  /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
						  background-color: #d3d3d8;
						  border-collapse: collapse;
						  mso-table-lspace: 0pt;
						  mso-table-rspace: 0pt;
						  mso-line-height-rule: exactly;
						  line-height: 1px;
						}

						.textAlignLeft {
						  text-align: left !important;
						}

						.textAlignRight {
						  text-align: right !important;
						}

						.textAlignCenter {
						  text-align: center !important;
						}

						.mt1 {
						  margin-top: 6px;
						}

						.list {
						  padding-left: 18px;
						  margin: 0;
						}

						/* TYPOGRAPHY */

						body {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  color: #4f4f65;
						  -webkit-font-smoothing: antialiased;
						  -ms-text-size-adjust: 100%;
						  -moz-osx-font-smoothing: grayscale;
						  font-smoothing: always;
						  text-rendering: optimizeLegibility;
						}

						.h1 {
						  font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 700;
						  vertical-align: middle;
						  font-size: 36px;
						  line-height: 42px;
						}

						.h2 {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 600;
						  vertical-align: middle;
						  font-size: 16px;
						  line-height: 24px;
						}

						.text {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 16px;
						  line-height: 21px;
						}

						.text-list {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 16px;
						  line-height: 25px;
						}

						.textSmall {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 14px;
						}

						.text-xsmall {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-size: 11px;
						  text-transform: uppercase;
						  line-height: 22px;
						  letter-spacing: 1px;
						}

						.text-bold {
						  font-weight: 600;
						}

						.text-link {
						  text-decoration: underline;
						}

						.text-linkNoUnderline {
						  text-decoration: none;
						}

						.text-strike {
						  text-decoration: line-through;
						}

						/* FONT COLORS */

						.textColorDark {
						  color: #23233e;
						}

						.textColorNormal {
						  color: #4f4f65;
						}

						.textColorBlue {
						  color: #2020c0;
						}

						.textColorGrayDark {
						  color: #7B7B8B;
						}

						.textColorGray {
						  color: #A5A8AD;
						}

						.textColorWhite {
						  color: #FFFFFF;
						}

						.textColorRed {
						  color: #df3232;
						}

						/* BUTTON */

						.Button-primary-wrapper {
						  border-radius: 3px;
						  background-color: #2020C0;
						}

						.Button-primary {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  border-radius: 3px;
						  border: 1px solid #2020C0;
						  color: #ffffff;
						  display: block;
						  font-size: 16px;
						  font-weight: 600;
						  padding: 18px;
						  text-decoration: none;
						}

						.Button-secondary-wrapper {
						  border-radius: 3px;
						  background-color: #ffffff;
						}

						.Button-secondary {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  border-radius: 3px;
						  border: 1px solid #2020C0;
						  color: #2020C0;
						  display: block;
						  font-size: 16px;
						  font-weight: 600;
						  padding: 18px;
						  text-decoration: none;
						}

						/* LAYOUT */

						.Content-container {
						  padding-left: 60px;
						  padding-right: 60px;
						}

						.Content-container--main {
						  padding-top: 54px;
						  padding-bottom: 60px;
						}

						.Content {
						  width: 580px;
						  margin: 0 auto;
						}

						.wrapper {
						  max-width: 600px;
						}

						.section {
						  padding: 24px 0px;
						  border-bottom: 1px solid #d3d3d8;
						}

						.section--noBorder {
						  padding: 24px 0px 0;
						}

						.section--last {
						  padding: 24px 0px;
						}

						.message {
						  background-color: #F4F4F5;
						  padding: 18px;
						}

						.card {
						  border: 1px solid #d3d3d8;
						  padding: 18px;
						}

						/* HEADER */

						.header-tockLogoImage {
						  display: block;
						  color: #F0F0F0;
						}

						.header-heroImage {
						  padding-bottom: 24px;
						}

						/* PREHEADER */

						.preheader {
						  display: none;
						  font-size: 1px;
						  color: #FFFFFF;
						  line-height: 1px;
						  max-height: 0px;
						  max-width: 0px;
						  opacity: 0;
						  overflow: hidden;
						}

						/* BANNER */

						.notice {
						  padding: 12px;
						  background: #23233E;
						  color: #FFFFFF;
						  display: block;
						  font-size: 14px;
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 600;
						}

						/* INTRO */

						.section--intro {
						  padding-bottom: 48px;
						}

						/* BOOKING INFO */

						.business-logo__container {
						  width: 48px;
						  height: 48px;
						  border-radius: 3px;
						  border: 1px solid #d3d3d8;
						  overflow: hidden;
						}

						.business-logo__image {
						  border: 1px solid transparent;
						  border-radius: 3px;
						  width: 48px;
						  height: 48px;
						  display: block;
						}

						.business-address--address {
						  width: 50%;
						}

						.business-address--map {
						  width: 50%;
						}

						.business-address--map-image {
						  width: 100%;
						}

						/* MOBILE TICKETS */

						.mobile-ticket--description {
						  width: 65%;
						  margin-top: 12px;
						  margin-right: 5%;
						}

						.mobile-ticket--code {
						  width: 30%;
						}

						.mobile-ticket--code-image {
						  width: 100%;
						}

						/* RESERVATION ACTIONS */

						.linksTable {
						  border-bottom: 1px solid #d3d3d8;
						}

						.linksTableRow {
						  padding: 24px 12px;
						}

						.actions-icon {
						  vertical-align: middle;
						}

						.actions-text {
						  vertical-align: middle;
						}

						/* RECEIPT */

						.receipt__container {
						  border: 1px solid #d3d3d8;
						  padding: 24px;
						}

						.receipt__row {
						  border-top: 1px solid #d3d3d8;
						}

						/* FEEDBACK ICONS */

						.feedback-link {
						  border: 1px solid #d4d5da;
						  border-radius: 3px;
						  display: inline-block;
						  width: calc(32% - 2px);
						  padding: 10px 0;
						}

						.feedback-link-bumper {
						  display: inline-block;
						  width: 1%;
						}

						.feedback-link img {
						  height: 50px;
						  width: 50px;
						}

						/* SOCIAL ICONS */

						.social-link {
						  display: inline-block;
						  width: auto;
						}

						.social-link-text {
						  padding: 14px 24px 14px 14px;
						}

						/* TABLET STYLES */

						@media screen and (max-width: 648px) {
						  /* DEVICE-SPECIFIC RESET */
						  div[style*="margin: 16px 0;"] {
							margin: 0 !important;
						  }
						  /* ANDROID CENTER FIX */
						  /* LAYOUT */
						  .wrapper {
							width: 100% !important;
							max-width: 100% !important;
						  }
						  .Content {
							width: 90% !important;
						  }
						  .Content-container {
							padding-left: 36px !important;
							padding-right: 36px !important;
						  }
						  .Content-container--main {
							padding-top: 30px !important;
							padding-bottom: 42px !important;
						  }
						  .responsiveTable {
							width: 100% !important;
						  }
						  /* RESERVATION ACTIONS */
						  .linksTableRow {
							padding-left: 0 !important;
							padding-right: 0 !important;
							padding-top: 12px !important;
							padding-bottom: 12px !important;
						  }
						  .linksTableRow--borderRight {
							border-right: none !important;
							padding-left: 0 !important;
							padding-right: 0 !important;
						  }
						  /* FEEDBACK LINK */
						  .feedback-link img {
							height: 38px !important;
							width: 38px !important;
						  }
						}

						/* MOBILE STYLES */

						@media screen and (max-width: 480px) {
						  /* TYPOGRAPHY */
						  .h1 {
							font-size: 30px !important;
							line-height: 30px !important;
						  }
						  .text {
							font-size: 16px !important;
							line-height: 22px !important;
						  }
						  /* BUTTON */
						  .mobile-buttonContainer {
							width: 100% !important;
						  }
						  /* LAYOUT */
						  .Content {
							width: 100% !important;
						  }
						  .Content-container {
							padding-left: 18px !important;
							padding-right: 18px !important;
						  }
						  .Content-container--main {
							padding-top: 24px !important;
							padding-bottom: 30px !important;
						  }
						  .section {
							padding: 18px 0 !important;
						  }
						  .section--last {
							padding: 18px 0 !important;
						  }
						  .header {
							padding: 0 18px !important;
						  }
						  .business-address--address {
							width: 100% !important;
						  }
						  .business-address--map {
							margin-top: 30px !important;
							width: 100% !important;
						  }
						  .mobile-ticket--description {
							width: 100% !important;
							margin-top: 0px !important;
						  }
						  .mobile-ticket--code {
							margin-top: 30px !important;
							margin-left: 0;
							width: 100% !important;
						  }
						  /* RECEIPT */
						  .receipt__container {
							padding: 12px !important;
						  }
						  /* SOCIAL ICONS */
						  .social-link {
							display: block !important;
							width: 100% !important;
							border-bottom: 1px solid #d3d3d8 !important;
						  }
						  /* INTRO */
						  .section--intro {
							padding-top: 18px !important;
							padding-bottom: 18px !important;
						  }
						}
					  </style>



					   
					  <!--[if mso]>
						<style type="text/css">
					.h1 {font-family: "Helvetica", "Arial", sans-serif !important; font-weight: 700 !important; vertical-align: middle !important; font-size: 36px !important; mso-line-height-rule: exactly;line-height: 42px !important;}
					.h2 {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 600 !important;vertical-align: middle !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 24px !important;}
					.text {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 21px !important;}
					.text-list {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 25px !important;}
					.textSmall {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 14px !important;}
					.text-xsmall {font-family: "Helvetica", "Arial", sans-serif !important;font-size: 11px !important;text-transform: uppercase !important;mso-line-height-rule: exactly;line-height: 22px !important;letter-spacing: 1px !important;}
					.text-bold {font-weight: 600 !important;}
					.text-link {text-decoration: underline !important;}
					.text-linkNoUnderline {text-decoration: none !important;}
					.text-strike {text-decoration: line-through !important;}
					.textColorDark {color: #23233e !important;}
					.textColorNormal {color: #4f4f65 !important;}
					.textColorBlue {color: #2020c0 !important;}
					.textColorGray {color: #A5A8AD !important;}
					.textColorWhite {color: #FFFFFF !important;}
					.Button-primary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #ffffff !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
					.Button-secondary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #2020C0 !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
						</style>
						<![endif]-->
					  <!-- HIDDEN PREHEADER TEXT -->
					  <div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;">
					  </div>
					  



					</body></html>';
					
					try{
	sendEmail($subject, $to, $emailContent);
}
catch(Exception $e) {
	
}
			$stmt->close();
			$dbCon->close();
			return 1;	
		}
		
		
		function bookCar()
		{ 
		
			$dbCon = AppModel::createConnection();
			if(!isset($_POST) || empty($_POST))
			{
				return 0;	
			}
			 
			if($_POST['user_id']==0 || $_POST['user_id']=="" || $_POST['user_id']==null)
			{
			return 0;	
			}
			$car_type_id= $this -> encrypt_decrypt('decrypt',$_POST['car_type_id']);
			$car_id= $this -> encrypt_decrypt('decrypt',$_POST['car_id']);
			$hotel_checkin_id= $this -> encrypt_decrypt('decrypt',$_POST['hotel_checkin_id']);
			
			$stmt = $dbCon->prepare("select email from user_logins where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $_POST['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowUser = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select company_email,car_rental_available_car_type.location_id,image_url,car_rental_available_car_type.id,car_model,model_series from car_rental_available_car_type left join car_rental_model on car_rental_model.id=car_rental_available_car_type.brand_type left join car_rental_model_series on car_rental_model_series.id=car_rental_available_car_type.model_id left join property_location on property_location.id= car_rental_available_car_type.location_id left join companies on companies.id=property_location.company_id where car_rental_available_car_type.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $car_type_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			 
			$stmt = $dbCon->prepare("insert into car_rental_booking_information (extra_driver,extra_inclusions,child_seats,user_id,qloud_checkout_id, car_type_id,car_id,location_id,checkin_date,checkout_date,total_days,per_day_price,pickup_time,address,port_number,zipcode,city,card_number,card_holder_name,expiry_date,cvv,insurance_fee,created_on) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,now())");
			$stmt->bind_param("iiiiiiiissiisssssssssi",$_POST['extra_driver'],$_POST['extra_inclusions'],$_POST['child_seats'], $_POST['user_id'],$hotel_checkin_id,$car_type_id,$car_id,$row['location_id'], $_POST['checkin_date'], $_POST['checkout_date'], $_POST['total_days'], $_POST['price'], $_POST['pickup_time'], $_POST['address'], $_POST['port_number'], $_POST['zipcode'], $_POST['city'], $_POST['card'], $_POST['holder'], $_POST['expiry_date'], $_POST['cvc'], $_POST['insurance_fee']);
			$stmt->execute();
			
			$id=$stmt->insert_id;
			$data=array();
			$data['enc']=$this -> encrypt_decrypt('encrypt',$id);
			$to=$row['company_email'];
			$subject='Booking information';
			
			$emailContent='<html xmlns="http://www.w3.org/1999/xhtml" style="background-color: rgb(240, 240, 240);" class=""><head>
					  <title>Reservation confirmed</title>
					  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
					  <meta charset="utf-8">
					  <meta name="viewport" content="width=device-width, initial-scale=1">
					  <meta http-equiv="X-UA-Compatible" content="IE=edge">
					  <style type="text/css">
						/* GT AMERICA */

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Regular";
						  font-weight: 400;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
						}

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Medium";
						  font-weight: 600;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
						}

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Condensed Bold";
						  font-weight: 700;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
						}

						/* CLIENT-SPECIFIC RESET */

						body,
						table,
						td,
						a {
						  -webkit-text-size-adjust: 100%;
						  -ms-text-size-adjust: 100%;
						}

						/* Prevent WebKit and Windows mobile changing default text sizes */

						table,
						td {
						  mso-table-lspace: 0pt;
						  mso-table-rspace: 0pt;
						}

						/* Remove spacing between tables in Outlook 2007 and up */

						img {
						  -ms-interpolation-mode: bicubic;
						}

						/* Allow smoother rendering of resized image in Internet Explorer */

						.im {
						  color: inherit !important;
						}

						/* DEVICE-SPECIFIC RESET */

						a[x-apple-data-detectors] {
						  color: inherit !important;
						  text-decoration: none !important;
						  font-size: inherit !important;
						  font-family: inherit !important;
						  font-weight: inherit !important;
						  line-height: inherit !important;
						}

						/* iOS BLUE LINKS */

						/* RESET */

						img {
						  border: 0;
						  height: auto;
						  line-height: 100%;
						  outline: none;
						  text-decoration: none;
						  display: block;
						}

						table {
						  border-collapse: collapse;
						}

						table td {
						  border-collapse: collapse;
						  display: table-cell;
						}

						body {
						  height: 100% !important;
						  margin: 0 !important;
						  padding: 0 !important;
						  width: 100% !important;
						}

						/* BG COLORS */

						.mainTable {
						  background-color: #F0F0F0;
						}

						.mainTable--hospitality {
						  background-color: #f7f2ed;
						}

						html {
						  background-color: #F0F0F0;
						}

						/* VARIABLES */

						.bg-white {
						  background-color: white;
						}

						.hr {
						  /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
						  background-color: #d3d3d8;
						  border-collapse: collapse;
						  mso-table-lspace: 0pt;
						  mso-table-rspace: 0pt;
						  mso-line-height-rule: exactly;
						  line-height: 1px;
						}

						.textAlignLeft {
						  text-align: left !important;
						}

						.textAlignRight {
						  text-align: right !important;
						}

						.textAlignCenter {
						  text-align: center !important;
						}

						.mt1 {
						  margin-top: 6px;
						}

						.list {
						  padding-left: 18px;
						  margin: 0;
						}

						/* TYPOGRAPHY */

						body {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  color: #4f4f65;
						  -webkit-font-smoothing: antialiased;
						  -ms-text-size-adjust: 100%;
						  -moz-osx-font-smoothing: grayscale;
						  font-smoothing: always;
						  text-rendering: optimizeLegibility;
						}

						.h1 {
						  font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 700;
						  vertical-align: middle;
						  font-size: 36px;
						  line-height: 42px;
						}

						.h2 {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 600;
						  vertical-align: middle;
						  font-size: 16px;
						  line-height: 24px;
						}

						.text {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 16px;
						  line-height: 21px;
						}

						.text-list {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 16px;
						  line-height: 25px;
						}

						.textSmall {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 14px;
						}

						.text-xsmall {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-size: 11px;
						  text-transform: uppercase;
						  line-height: 22px;
						  letter-spacing: 1px;
						}

						.text-bold {
						  font-weight: 600;
						}

						.text-link {
						  text-decoration: underline;
						}

						.text-linkNoUnderline {
						  text-decoration: none;
						}

						.text-strike {
						  text-decoration: line-through;
						}

						/* FONT COLORS */

						.textColorDark {
						  color: #23233e;
						}

						.textColorNormal {
						  color: #4f4f65;
						}

						.textColorBlue {
						  color: #2020c0;
						}

						.textColorGrayDark {
						  color: #7B7B8B;
						}

						.textColorGray {
						  color: #A5A8AD;
						}

						.textColorWhite {
						  color: #FFFFFF;
						}

						.textColorRed {
						  color: #df3232;
						}

						/* BUTTON */

						.Button-primary-wrapper {
						  border-radius: 3px;
						  background-color: #2020C0;
						}

						.Button-primary {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  border-radius: 3px;
						  border: 1px solid #2020C0;
						  color: #ffffff;
						  display: block;
						  font-size: 16px;
						  font-weight: 600;
						  padding: 18px;
						  text-decoration: none;
						}

						.Button-secondary-wrapper {
						  border-radius: 3px;
						  background-color: #ffffff;
						}

						.Button-secondary {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  border-radius: 3px;
						  border: 1px solid #2020C0;
						  color: #2020C0;
						  display: block;
						  font-size: 16px;
						  font-weight: 600;
						  padding: 18px;
						  text-decoration: none;
						}

						/* LAYOUT */

						.Content-container {
						  padding-left: 60px;
						  padding-right: 60px;
						}

						.Content-container--main {
						  padding-top: 54px;
						  padding-bottom: 60px;
						}

						.Content {
						  width: 580px;
						  margin: 0 auto;
						}

						.wrapper {
						  max-width: 600px;
						}

						.section {
						  padding: 24px 0px;
						  border-bottom: 1px solid #d3d3d8;
						}

						.section--noBorder {
						  padding: 24px 0px 0;
						}

						.section--last {
						  padding: 24px 0px;
						}

						.message {
						  background-color: #F4F4F5;
						  padding: 18px;
						}

						.card {
						  border: 1px solid #d3d3d8;
						  padding: 18px;
						}

						/* HEADER */

						.header-tockLogoImage {
						  display: block;
						  color: #F0F0F0;
						}

						.header-heroImage {
						  padding-bottom: 24px;
						}

						/* PREHEADER */

						.preheader {
						  display: none;
						  font-size: 1px;
						  color: #FFFFFF;
						  line-height: 1px;
						  max-height: 0px;
						  max-width: 0px;
						  opacity: 0;
						  overflow: hidden;
						}

						/* BANNER */

						.notice {
						  padding: 12px;
						  background: #23233E;
						  color: #FFFFFF;
						  display: block;
						  font-size: 14px;
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 600;
						}

						/* INTRO */

						.section--intro {
						  padding-bottom: 48px;
						}

						/* BOOKING INFO */

						.business-logo__container {
						  width: 48px;
						  height: 48px;
						  border-radius: 3px;
						  border: 1px solid #d3d3d8;
						  overflow: hidden;
						}

						.business-logo__image {
						  border: 1px solid transparent;
						  border-radius: 3px;
						  width: 48px;
						  height: 48px;
						  display: block;
						}

						.business-address--address {
						  width: 50%;
						}

						.business-address--map {
						  width: 50%;
						}

						.business-address--map-image {
						  width: 100%;
						}

						/* MOBILE TICKETS */

						.mobile-ticket--description {
						  width: 65%;
						  margin-top: 12px;
						  margin-right: 5%;
						}

						.mobile-ticket--code {
						  width: 30%;
						}

						.mobile-ticket--code-image {
						  width: 100%;
						}

						/* RESERVATION ACTIONS */

						.linksTable {
						  border-bottom: 1px solid #d3d3d8;
						}

						.linksTableRow {
						  padding: 24px 12px;
						}

						.actions-icon {
						  vertical-align: middle;
						}

						.actions-text {
						  vertical-align: middle;
						}

						/* RECEIPT */

						.receipt__container {
						  border: 1px solid #d3d3d8;
						  padding: 24px;
						}

						.receipt__row {
						  border-top: 1px solid #d3d3d8;
						}

						/* FEEDBACK ICONS */

						.feedback-link {
						  border: 1px solid #d4d5da;
						  border-radius: 3px;
						  display: inline-block;
						  width: calc(32% - 2px);
						  padding: 10px 0;
						}

						.feedback-link-bumper {
						  display: inline-block;
						  width: 1%;
						}

						.feedback-link img {
						  height: 50px;
						  width: 50px;
						}

						/* SOCIAL ICONS */

						.social-link {
						  display: inline-block;
						  width: auto;
						}

						.social-link-text {
						  padding: 14px 24px 14px 14px;
						}

						/* TABLET STYLES */

						@media screen and (max-width: 648px) {
						  /* DEVICE-SPECIFIC RESET */
						  div[style*="margin: 16px 0;"] {
							margin: 0 !important;
						  }
						  /* ANDROID CENTER FIX */
						  /* LAYOUT */
						  .wrapper {
							width: 100% !important;
							max-width: 100% !important;
						  }
						  .Content {
							width: 90% !important;
						  }
						  .Content-container {
							padding-left: 36px !important;
							padding-right: 36px !important;
						  }
						  .Content-container--main {
							padding-top: 30px !important;
							padding-bottom: 42px !important;
						  }
						  .responsiveTable {
							width: 100% !important;
						  }
						  /* RESERVATION ACTIONS */
						  .linksTableRow {
							padding-left: 0 !important;
							padding-right: 0 !important;
							padding-top: 12px !important;
							padding-bottom: 12px !important;
						  }
						  .linksTableRow--borderRight {
							border-right: none !important;
							padding-left: 0 !important;
							padding-right: 0 !important;
						  }
						  /* FEEDBACK LINK */
						  .feedback-link img {
							height: 38px !important;
							width: 38px !important;
						  }
						}

						/* MOBILE STYLES */

						@media screen and (max-width: 480px) {
						  /* TYPOGRAPHY */
						  .h1 {
							font-size: 30px !important;
							line-height: 30px !important;
						  }
						  .text {
							font-size: 16px !important;
							line-height: 22px !important;
						  }
						  /* BUTTON */
						  .mobile-buttonContainer {
							width: 100% !important;
						  }
						  /* LAYOUT */
						  .Content {
							width: 100% !important;
						  }
						  .Content-container {
							padding-left: 18px !important;
							padding-right: 18px !important;
						  }
						  .Content-container--main {
							padding-top: 24px !important;
							padding-bottom: 30px !important;
						  }
						  .section {
							padding: 18px 0 !important;
						  }
						  .section--last {
							padding: 18px 0 !important;
						  }
						  .header {
							padding: 0 18px !important;
						  }
						  .business-address--address {
							width: 100% !important;
						  }
						  .business-address--map {
							margin-top: 30px !important;
							width: 100% !important;
						  }
						  .mobile-ticket--description {
							width: 100% !important;
							margin-top: 0px !important;
						  }
						  .mobile-ticket--code {
							margin-top: 30px !important;
							margin-left: 0;
							width: 100% !important;
						  }
						  /* RECEIPT */
						  .receipt__container {
							padding: 12px !important;
						  }
						  /* SOCIAL ICONS */
						  .social-link {
							display: block !important;
							width: 100% !important;
							border-bottom: 1px solid #d3d3d8 !important;
						  }
						  /* INTRO */
						  .section--intro {
							padding-top: 18px !important;
							padding-bottom: 18px !important;
						  }
						}
					  </style>
					<style id="__web-inspector-hide-shortcut-style__">
.__web-inspector-hide-shortcut__, .__web-inspector-hide-shortcut__ *, .__web-inspector-hidebefore-shortcut__::before, .__web-inspector-hideafter-shortcut__::after
{
    visibility: hidden !important;
}
</style></head>

					<body style="margin: 0 !important; padding: 0 !important; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; height: 100%; margin: 0; padding: 0; width: 100%; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; color: rgb(79, 79, 101); -webkit-font-smoothing: antialiased; -ms-text-size-adjust: 100%; -moz-osx-font-smoothing: grayscale; font-smoothing: always; text-rendering: optimizeLegibility;">
					   
					  <!--[if mso]>
						<style type="text/css">
					.h1 {font-family: "Helvetica", "Arial", sans-serif !important; font-weight: 700 !important; vertical-align: middle !important; font-size: 36px !important; mso-line-height-rule: exactly;line-height: 42px !important;}
					.h2 {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 600 !important;vertical-align: middle !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 24px !important;}
					.text {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 21px !important;}
					.text-list {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 25px !important;}
					.textSmall {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 14px !important;}
					.text-xsmall {font-family: "Helvetica", "Arial", sans-serif !important;font-size: 11px !important;text-transform: uppercase !important;mso-line-height-rule: exactly;line-height: 22px !important;letter-spacing: 1px !important;}
					.text-bold {font-weight: 600 !important;}
					.text-link {text-decoration: underline !important;}
					.text-linkNoUnderline {text-decoration: none !important;}
					.text-strike {text-decoration: line-through !important;}
					.textColorDark {color: #23233e !important;}
					.textColorNormal {color: #4f4f65 !important;}
					.textColorBlue {color: #2020c0 !important;}
					.textColorGray {color: #A5A8AD !important;}
					.textColorWhite {color: #FFFFFF !important;}
					.Button-primary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #ffffff !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
					.Button-secondary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #2020C0 !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
						</style>
						<![endif]-->
					  <!-- HIDDEN PREHEADER TEXT -->
					  <div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;">
					  </div>
					  <table border="0" cellpadding="0" cellspacing="0" width="100%" class=" mainTable  " style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: rgb(240, 240, 240);">
						<tbody><tr><td style="display:none !important;
					 visibility:hidden;
					 mso-hide:all;
					 font-size:1px;
					 color:#ffffff;
					 line-height:1px;
					 max-height:0px;
					 max-width:0px;
					 opacity:0;
					 overflow:hidden; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> We are thrilled that you will be joining us. If yo... </td>
						<!-- HEADER -->
						</tr><tr>
						  <td align="center" class="header" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
							<!--[if (gte mso 9)|(IE)]>
						<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
						<tr>
						<td align="center" valign="top" width="600">
						<![endif]-->
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 580px; margin: 0 auto;">
							  <tbody><tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr>
								<td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <h1 style="font-size: 33px;font-weight: 800;line-height: 30px;">Dstricts</h1>               </td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							</tbody></table>
							<!--[if (gte mso 9)|(IE)]>
						</td>
						</tr>
						</table>
						<![endif]-->
						  </td>
						</tr>
						<!-- CONTENT -->
						<tr>
						  <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
							<!--[if (gte mso 9)|(IE)]>
						<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
						<tr>
						<td align="center" valign="top" width="600">
						<![endif]-->
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content bg-white" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: white; width: 580px; margin: 0 auto;">
							  <tbody><tr>
								<td class="Content-container Content-container--main text textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101); padding-left: 60px; padding-right: 60px; padding-top: 54px; padding-bottom: 60px;">
								  <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
									<!-- RESTAURANT INFO -->
									<tbody><tr>
									  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" valign="center" width="48" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="business-logo__container" style="width: 48px; height: 48px; border-radius: 3px; border: 1px solid rgb(211, 211, 216); overflow: hidden;">
												<img src="'.$row['image_url'].'" class="business-logo__image" width="48" height="48" alt="Logo" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block; border: 1px solid transparent; border-radius: 3px; width: 48px; height: 48px; display: block;">
											  </div>
											</td>
											<td width="12" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
											<td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">'.$row['car_model'].'</span>                          </td>
										  </tr>
										  <tr class="spacer">
											<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr class="spacer">
											<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<!-- INTRO -->
									<tr>
									  <td valign="top" align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h1 textColorDark" style="font-family: &quot;GT America Condensed Bold&quot;, &quot;Roboto Condensed&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 700; vertical-align: middle; font-size: 36px; line-height: 42px; color: rgb(35, 35, 62);">Booking information</span>                          </td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr>
											<td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
											  <!--[if gte mso 15]>&nbsp;<![endif]-->
											</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<!-- MESSAGE -->
									<tr class="spacer">
									  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr>
									  <td align="left" class="message" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(244, 244, 245); padding: 18px;">
										<div class="text textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
										  <span class="text-bold textColorDark" style="font-weight: 600; color: rgb(35, 35, 62);">Booking information</span>
										  <br>You have have received a booking please click on button below to verify the detail of bookings</div>
									  </td>
									</tr>
									<tr class="spacer">
									  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr>
									  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
										<!--[if gte mso 15]>&nbsp;<![endif]-->
									  </td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<!-- BOOKING INFO -->
									<tr>
									  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" valign="middle" width="468" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="text-list textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
												<span class="text-bold textColorDark" style="font-weight: 600; color: rgb(35, 35, 62);">'.date("F j, Y, g:i a").'</span>
												<br>Price per day(inclusive of taxes): '.$_POST['price'].'
												<br>
											  </div>
											</td>
										  </tr>
										  
										  
										  

					

					

					




										</tbody></table>
									  </td>
									</tr>
									<!-- ADDRESS -->
									<tr>
									  <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr>
											<td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
											  <!--[if gte mso 15]>&nbsp;<![endif]-->
											</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr>
											<td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
												<tbody><tr>
												  <td style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
													<table align="left" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--address" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 50%;">
													  <tbody><tr>
														<td align="left" width="100%" class="text-list textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
														<span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">'.$row["car_model"].'</span><br>'.$row["model_series"].'<br>From '.date('Y-m-d',$_POST["checkin_date"]).' to '.date('Y-m-d',$_POST["checkout_date"]).'                                         </td>
													  </tr>
													</tbody></table>
													<!--[if mso]></td><td><![endif]-->
													
												  </td>
												</tr>
											  </tbody></table>
											</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr>
									  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
										<!--[if gte mso 15]>&nbsp;<![endif]-->
									  </td>
									</tr>
									
									<tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody>
                      
                      
                      



<tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>

<tr>
                        <td align="center" valign="center" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <table border="0" cellspacing="0" cellpadding="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody>
<tr>
                              <td align="center" valign="center" width="100%" class="Button-primary-wrapper" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; border-radius: 3px; background-color: rgb(32, 32, 192);">
                              <a href="https://qloudid.com/public/index.php/CarRental/verifyBooking/'.$data['enc'].'" target="_blank" class="Button-primary" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; border-radius: 3px; border: 1px solid rgb(32, 32, 192); color: rgb(255, 255, 255); display: block; font-size: 16px; font-weight: 600; padding: 18px; text-decoration: none;">Confirm booking</a>                                </td>
                            </tr>
                          </tbody>
</table>
                        </td>
                      </tr>
                    </tbody>
</table>
                  </td>
                </tr>	
									<!-- RECEIPT -->
									
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									
									
									<tr>
									  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
										<!--[if gte mso 15]>&nbsp;<![endif]-->
									  </td>
									</tr>
									
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<!-- EDIT RECEIPT -->
									<!-- CANCELLATION POLICY -->
									<tr>
									  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="text text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; font-weight: 600; color: rgb(35, 35, 62);">
												Confirmation policy
											  </div>
											</td>
										  </tr>
										  <tr>
											<td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="text textColorNormal mt1" style="margin-top: 6px; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
												<span>This booking will be confirmed only when car rental company accept your request.</span>
												<span>You can not transfer your booking to another person.</span>
											  </div>
											</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<tr class="spacer">
									  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									
									<!-- QUESTIONS -->
									
								  </tbody></table>
								</td>
							  </tr>
							</tbody></table>
						  </td>
						</tr>
						<!-- FOOTER -->
						<tr>
						  <td align="center" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; width: 580px; margin: 0 auto;">
							<!-- Will most likely required a feature flag -->
							<!--[if (gte mso 9)|(IE)]>
					<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
					<tr>
					<td align="center" valign="top" width="600">
					<![endif]-->
							<table width="100%" border="0" cellspacing="0" cellpadding="0" align="center" class="Content-container" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; padding-left: 60px; padding-right: 60px;">
							  <tbody><tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr>
								<td align="center" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <a href="https://www.exploretock.com" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;"> <img src="https://storage.googleapis.com/tock-public-assets/images-email-template/tock-brandmark-color.png" width="30" height="30" alt="Tock" border="0" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block;"> </a>              </td>
							  </tr>
							  <tr class="spacer">
								<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr>
								<td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
								  <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
									 2019 Tock, Inc.
								  </div>
								  <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
									All Rights Reserved
								  </div>
								</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							</tbody></table>
							<!--[if (gte mso 9)|(IE)]>
					</td>
					</tr>
					</table>
					<![endif]-->
						  </td>
						</tr>
					  </tbody></table><title>Reservation confirmed</title>
					  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
					  <meta charset="utf-8">
					  <meta name="viewport" content="width=device-width, initial-scale=1">
					  <meta http-equiv="X-UA-Compatible" content="IE=edge">
					  <style type="text/css">
						/* GT AMERICA */

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Regular";
						  font-weight: 400;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
						}

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Medium";
						  font-weight: 600;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
						}

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Condensed Bold";
						  font-weight: 700;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
						}

						/* CLIENT-SPECIFIC RESET */

						body,
						table,
						td,
						a {
						  -webkit-text-size-adjust: 100%;
						  -ms-text-size-adjust: 100%;
						}

						/* Prevent WebKit and Windows mobile changing default text sizes */

						table,
						td {
						  mso-table-lspace: 0pt;
						  mso-table-rspace: 0pt;
						}

						/* Remove spacing between tables in Outlook 2007 and up */

						img {
						  -ms-interpolation-mode: bicubic;
						}

						/* Allow smoother rendering of resized image in Internet Explorer */

						.im {
						  color: inherit !important;
						}

						/* DEVICE-SPECIFIC RESET */

						a[x-apple-data-detectors] {
						  color: inherit !important;
						  text-decoration: none !important;
						  font-size: inherit !important;
						  font-family: inherit !important;
						  font-weight: inherit !important;
						  line-height: inherit !important;
						}

						/* iOS BLUE LINKS */

						/* RESET */

						img {
						  border: 0;
						  height: auto;
						  line-height: 100%;
						  outline: none;
						  text-decoration: none;
						  display: block;
						}

						table {
						  border-collapse: collapse;
						}

						table td {
						  border-collapse: collapse;
						  display: table-cell;
						}

						body {
						  height: 100% !important;
						  margin: 0 !important;
						  padding: 0 !important;
						  width: 100% !important;
						}

						/* BG COLORS */

						.mainTable {
						  background-color: #F0F0F0;
						}

						.mainTable--hospitality {
						  background-color: #f7f2ed;
						}

						html {
						  background-color: #F0F0F0;
						}

						/* VARIABLES */

						.bg-white {
						  background-color: white;
						}

						.hr {
						  /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
						  background-color: #d3d3d8;
						  border-collapse: collapse;
						  mso-table-lspace: 0pt;
						  mso-table-rspace: 0pt;
						  mso-line-height-rule: exactly;
						  line-height: 1px;
						}

						.textAlignLeft {
						  text-align: left !important;
						}

						.textAlignRight {
						  text-align: right !important;
						}

						.textAlignCenter {
						  text-align: center !important;
						}

						.mt1 {
						  margin-top: 6px;
						}

						.list {
						  padding-left: 18px;
						  margin: 0;
						}

						/* TYPOGRAPHY */

						body {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  color: #4f4f65;
						  -webkit-font-smoothing: antialiased;
						  -ms-text-size-adjust: 100%;
						  -moz-osx-font-smoothing: grayscale;
						  font-smoothing: always;
						  text-rendering: optimizeLegibility;
						}

						.h1 {
						  font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 700;
						  vertical-align: middle;
						  font-size: 36px;
						  line-height: 42px;
						}

						.h2 {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 600;
						  vertical-align: middle;
						  font-size: 16px;
						  line-height: 24px;
						}

						.text {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 16px;
						  line-height: 21px;
						}

						.text-list {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 16px;
						  line-height: 25px;
						}

						.textSmall {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 14px;
						}

						.text-xsmall {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-size: 11px;
						  text-transform: uppercase;
						  line-height: 22px;
						  letter-spacing: 1px;
						}

						.text-bold {
						  font-weight: 600;
						}

						.text-link {
						  text-decoration: underline;
						}

						.text-linkNoUnderline {
						  text-decoration: none;
						}

						.text-strike {
						  text-decoration: line-through;
						}

						/* FONT COLORS */

						.textColorDark {
						  color: #23233e;
						}

						.textColorNormal {
						  color: #4f4f65;
						}

						.textColorBlue {
						  color: #2020c0;
						}

						.textColorGrayDark {
						  color: #7B7B8B;
						}

						.textColorGray {
						  color: #A5A8AD;
						}

						.textColorWhite {
						  color: #FFFFFF;
						}

						.textColorRed {
						  color: #df3232;
						}

						/* BUTTON */

						.Button-primary-wrapper {
						  border-radius: 3px;
						  background-color: #2020C0;
						}

						.Button-primary {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  border-radius: 3px;
						  border: 1px solid #2020C0;
						  color: #ffffff;
						  display: block;
						  font-size: 16px;
						  font-weight: 600;
						  padding: 18px;
						  text-decoration: none;
						}

						.Button-secondary-wrapper {
						  border-radius: 3px;
						  background-color: #ffffff;
						}

						.Button-secondary {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  border-radius: 3px;
						  border: 1px solid #2020C0;
						  color: #2020C0;
						  display: block;
						  font-size: 16px;
						  font-weight: 600;
						  padding: 18px;
						  text-decoration: none;
						}

						/* LAYOUT */

						.Content-container {
						  padding-left: 60px;
						  padding-right: 60px;
						}

						.Content-container--main {
						  padding-top: 54px;
						  padding-bottom: 60px;
						}

						.Content {
						  width: 580px;
						  margin: 0 auto;
						}

						.wrapper {
						  max-width: 600px;
						}

						.section {
						  padding: 24px 0px;
						  border-bottom: 1px solid #d3d3d8;
						}

						.section--noBorder {
						  padding: 24px 0px 0;
						}

						.section--last {
						  padding: 24px 0px;
						}

						.message {
						  background-color: #F4F4F5;
						  padding: 18px;
						}

						.card {
						  border: 1px solid #d3d3d8;
						  padding: 18px;
						}

						/* HEADER */

						.header-tockLogoImage {
						  display: block;
						  color: #F0F0F0;
						}

						.header-heroImage {
						  padding-bottom: 24px;
						}

						/* PREHEADER */

						.preheader {
						  display: none;
						  font-size: 1px;
						  color: #FFFFFF;
						  line-height: 1px;
						  max-height: 0px;
						  max-width: 0px;
						  opacity: 0;
						  overflow: hidden;
						}

						/* BANNER */

						.notice {
						  padding: 12px;
						  background: #23233E;
						  color: #FFFFFF;
						  display: block;
						  font-size: 14px;
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 600;
						}

						/* INTRO */

						.section--intro {
						  padding-bottom: 48px;
						}

						/* BOOKING INFO */

						.business-logo__container {
						  width: 48px;
						  height: 48px;
						  border-radius: 3px;
						  border: 1px solid #d3d3d8;
						  overflow: hidden;
						}

						.business-logo__image {
						  border: 1px solid transparent;
						  border-radius: 3px;
						  width: 48px;
						  height: 48px;
						  display: block;
						}

						.business-address--address {
						  width: 50%;
						}

						.business-address--map {
						  width: 50%;
						}

						.business-address--map-image {
						  width: 100%;
						}

						/* MOBILE TICKETS */

						.mobile-ticket--description {
						  width: 65%;
						  margin-top: 12px;
						  margin-right: 5%;
						}

						.mobile-ticket--code {
						  width: 30%;
						}

						.mobile-ticket--code-image {
						  width: 100%;
						}

						/* RESERVATION ACTIONS */

						.linksTable {
						  border-bottom: 1px solid #d3d3d8;
						}

						.linksTableRow {
						  padding: 24px 12px;
						}

						.actions-icon {
						  vertical-align: middle;
						}

						.actions-text {
						  vertical-align: middle;
						}

						/* RECEIPT */

						.receipt__container {
						  border: 1px solid #d3d3d8;
						  padding: 24px;
						}

						.receipt__row {
						  border-top: 1px solid #d3d3d8;
						}

						/* FEEDBACK ICONS */

						.feedback-link {
						  border: 1px solid #d4d5da;
						  border-radius: 3px;
						  display: inline-block;
						  width: calc(32% - 2px);
						  padding: 10px 0;
						}

						.feedback-link-bumper {
						  display: inline-block;
						  width: 1%;
						}

						.feedback-link img {
						  height: 50px;
						  width: 50px;
						}

						/* SOCIAL ICONS */

						.social-link {
						  display: inline-block;
						  width: auto;
						}

						.social-link-text {
						  padding: 14px 24px 14px 14px;
						}

						/* TABLET STYLES */

						@media screen and (max-width: 648px) {
						  /* DEVICE-SPECIFIC RESET */
						  div[style*="margin: 16px 0;"] {
							margin: 0 !important;
						  }
						  /* ANDROID CENTER FIX */
						  /* LAYOUT */
						  .wrapper {
							width: 100% !important;
							max-width: 100% !important;
						  }
						  .Content {
							width: 90% !important;
						  }
						  .Content-container {
							padding-left: 36px !important;
							padding-right: 36px !important;
						  }
						  .Content-container--main {
							padding-top: 30px !important;
							padding-bottom: 42px !important;
						  }
						  .responsiveTable {
							width: 100% !important;
						  }
						  /* RESERVATION ACTIONS */
						  .linksTableRow {
							padding-left: 0 !important;
							padding-right: 0 !important;
							padding-top: 12px !important;
							padding-bottom: 12px !important;
						  }
						  .linksTableRow--borderRight {
							border-right: none !important;
							padding-left: 0 !important;
							padding-right: 0 !important;
						  }
						  /* FEEDBACK LINK */
						  .feedback-link img {
							height: 38px !important;
							width: 38px !important;
						  }
						}

						/* MOBILE STYLES */

						@media screen and (max-width: 480px) {
						  /* TYPOGRAPHY */
						  .h1 {
							font-size: 30px !important;
							line-height: 30px !important;
						  }
						  .text {
							font-size: 16px !important;
							line-height: 22px !important;
						  }
						  /* BUTTON */
						  .mobile-buttonContainer {
							width: 100% !important;
						  }
						  /* LAYOUT */
						  .Content {
							width: 100% !important;
						  }
						  .Content-container {
							padding-left: 18px !important;
							padding-right: 18px !important;
						  }
						  .Content-container--main {
							padding-top: 24px !important;
							padding-bottom: 30px !important;
						  }
						  .section {
							padding: 18px 0 !important;
						  }
						  .section--last {
							padding: 18px 0 !important;
						  }
						  .header {
							padding: 0 18px !important;
						  }
						  .business-address--address {
							width: 100% !important;
						  }
						  .business-address--map {
							margin-top: 30px !important;
							width: 100% !important;
						  }
						  .mobile-ticket--description {
							width: 100% !important;
							margin-top: 0px !important;
						  }
						  .mobile-ticket--code {
							margin-top: 30px !important;
							margin-left: 0;
							width: 100% !important;
						  }
						  /* RECEIPT */
						  .receipt__container {
							padding: 12px !important;
						  }
						  /* SOCIAL ICONS */
						  .social-link {
							display: block !important;
							width: 100% !important;
							border-bottom: 1px solid #d3d3d8 !important;
						  }
						  /* INTRO */
						  .section--intro {
							padding-top: 18px !important;
							padding-bottom: 18px !important;
						  }
						}
					  </style>



					   
					  <!--[if mso]>
						<style type="text/css">
					.h1 {font-family: "Helvetica", "Arial", sans-serif !important; font-weight: 700 !important; vertical-align: middle !important; font-size: 36px !important; mso-line-height-rule: exactly;line-height: 42px !important;}
					.h2 {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 600 !important;vertical-align: middle !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 24px !important;}
					.text {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 21px !important;}
					.text-list {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 25px !important;}
					.textSmall {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 14px !important;}
					.text-xsmall {font-family: "Helvetica", "Arial", sans-serif !important;font-size: 11px !important;text-transform: uppercase !important;mso-line-height-rule: exactly;line-height: 22px !important;letter-spacing: 1px !important;}
					.text-bold {font-weight: 600 !important;}
					.text-link {text-decoration: underline !important;}
					.text-linkNoUnderline {text-decoration: none !important;}
					.text-strike {text-decoration: line-through !important;}
					.textColorDark {color: #23233e !important;}
					.textColorNormal {color: #4f4f65 !important;}
					.textColorBlue {color: #2020c0 !important;}
					.textColorGray {color: #A5A8AD !important;}
					.textColorWhite {color: #FFFFFF !important;}
					.Button-primary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #ffffff !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
					.Button-secondary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #2020C0 !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
						</style>
						<![endif]-->
					  <!-- HIDDEN PREHEADER TEXT -->
					  <div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;">
					  </div>
					  



					</body></html>';
			
			try{
				sendEmail($subject, $to, $emailContent);
			}
			catch(Exception $e) {
				$to='kowaken.ghirmai@gmail.com';
				sendEmail($subject, $to, $emailContent);
			}
			for($i=$_POST['checkin_date']; $i<=$_POST['checkout_date']; )
			{
				$stmt = $dbCon->prepare("insert into car_booking_dates (car_id,booking_date,booking_id) values (?,?,?)");
				$stmt->bind_param("isi", $car_id,$i,$id);
				$stmt->execute();
				$i=strtotime(date('Y-m-d',$i) . ' +1 day');
			}
			
			$to=$rowUser['email'];
			$subject='Booking information';
			
			$emailContent='<html xmlns="http://www.w3.org/1999/xhtml" style="background-color: rgb(240, 240, 240);" class=""><head>
					  <title>Reservation confirmed</title>
					  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
					  <meta charset="utf-8">
					  <meta name="viewport" content="width=device-width, initial-scale=1">
					  <meta http-equiv="X-UA-Compatible" content="IE=edge">
					  <style type="text/css">
						/* GT AMERICA */

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Regular";
						  font-weight: 400;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
						}

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Medium";
						  font-weight: 600;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
						}

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Condensed Bold";
						  font-weight: 700;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
						}

						/* CLIENT-SPECIFIC RESET */

						body,
						table,
						td,
						a {
						  -webkit-text-size-adjust: 100%;
						  -ms-text-size-adjust: 100%;
						}

						/* Prevent WebKit and Windows mobile changing default text sizes */

						table,
						td {
						  mso-table-lspace: 0pt;
						  mso-table-rspace: 0pt;
						}

						/* Remove spacing between tables in Outlook 2007 and up */

						img {
						  -ms-interpolation-mode: bicubic;
						}

						/* Allow smoother rendering of resized image in Internet Explorer */

						.im {
						  color: inherit !important;
						}

						/* DEVICE-SPECIFIC RESET */

						a[x-apple-data-detectors] {
						  color: inherit !important;
						  text-decoration: none !important;
						  font-size: inherit !important;
						  font-family: inherit !important;
						  font-weight: inherit !important;
						  line-height: inherit !important;
						}

						/* iOS BLUE LINKS */

						/* RESET */

						img {
						  border: 0;
						  height: auto;
						  line-height: 100%;
						  outline: none;
						  text-decoration: none;
						  display: block;
						}

						table {
						  border-collapse: collapse;
						}

						table td {
						  border-collapse: collapse;
						  display: table-cell;
						}

						body {
						  height: 100% !important;
						  margin: 0 !important;
						  padding: 0 !important;
						  width: 100% !important;
						}

						/* BG COLORS */

						.mainTable {
						  background-color: #F0F0F0;
						}

						.mainTable--hospitality {
						  background-color: #f7f2ed;
						}

						html {
						  background-color: #F0F0F0;
						}

						/* VARIABLES */

						.bg-white {
						  background-color: white;
						}

						.hr {
						  /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
						  background-color: #d3d3d8;
						  border-collapse: collapse;
						  mso-table-lspace: 0pt;
						  mso-table-rspace: 0pt;
						  mso-line-height-rule: exactly;
						  line-height: 1px;
						}

						.textAlignLeft {
						  text-align: left !important;
						}

						.textAlignRight {
						  text-align: right !important;
						}

						.textAlignCenter {
						  text-align: center !important;
						}

						.mt1 {
						  margin-top: 6px;
						}

						.list {
						  padding-left: 18px;
						  margin: 0;
						}

						/* TYPOGRAPHY */

						body {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  color: #4f4f65;
						  -webkit-font-smoothing: antialiased;
						  -ms-text-size-adjust: 100%;
						  -moz-osx-font-smoothing: grayscale;
						  font-smoothing: always;
						  text-rendering: optimizeLegibility;
						}

						.h1 {
						  font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 700;
						  vertical-align: middle;
						  font-size: 36px;
						  line-height: 42px;
						}

						.h2 {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 600;
						  vertical-align: middle;
						  font-size: 16px;
						  line-height: 24px;
						}

						.text {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 16px;
						  line-height: 21px;
						}

						.text-list {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 16px;
						  line-height: 25px;
						}

						.textSmall {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 14px;
						}

						.text-xsmall {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-size: 11px;
						  text-transform: uppercase;
						  line-height: 22px;
						  letter-spacing: 1px;
						}

						.text-bold {
						  font-weight: 600;
						}

						.text-link {
						  text-decoration: underline;
						}

						.text-linkNoUnderline {
						  text-decoration: none;
						}

						.text-strike {
						  text-decoration: line-through;
						}

						/* FONT COLORS */

						.textColorDark {
						  color: #23233e;
						}

						.textColorNormal {
						  color: #4f4f65;
						}

						.textColorBlue {
						  color: #2020c0;
						}

						.textColorGrayDark {
						  color: #7B7B8B;
						}

						.textColorGray {
						  color: #A5A8AD;
						}

						.textColorWhite {
						  color: #FFFFFF;
						}

						.textColorRed {
						  color: #df3232;
						}

						/* BUTTON */

						.Button-primary-wrapper {
						  border-radius: 3px;
						  background-color: #2020C0;
						}

						.Button-primary {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  border-radius: 3px;
						  border: 1px solid #2020C0;
						  color: #ffffff;
						  display: block;
						  font-size: 16px;
						  font-weight: 600;
						  padding: 18px;
						  text-decoration: none;
						}

						.Button-secondary-wrapper {
						  border-radius: 3px;
						  background-color: #ffffff;
						}

						.Button-secondary {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  border-radius: 3px;
						  border: 1px solid #2020C0;
						  color: #2020C0;
						  display: block;
						  font-size: 16px;
						  font-weight: 600;
						  padding: 18px;
						  text-decoration: none;
						}

						/* LAYOUT */

						.Content-container {
						  padding-left: 60px;
						  padding-right: 60px;
						}

						.Content-container--main {
						  padding-top: 54px;
						  padding-bottom: 60px;
						}

						.Content {
						  width: 580px;
						  margin: 0 auto;
						}

						.wrapper {
						  max-width: 600px;
						}

						.section {
						  padding: 24px 0px;
						  border-bottom: 1px solid #d3d3d8;
						}

						.section--noBorder {
						  padding: 24px 0px 0;
						}

						.section--last {
						  padding: 24px 0px;
						}

						.message {
						  background-color: #F4F4F5;
						  padding: 18px;
						}

						.card {
						  border: 1px solid #d3d3d8;
						  padding: 18px;
						}

						/* HEADER */

						.header-tockLogoImage {
						  display: block;
						  color: #F0F0F0;
						}

						.header-heroImage {
						  padding-bottom: 24px;
						}

						/* PREHEADER */

						.preheader {
						  display: none;
						  font-size: 1px;
						  color: #FFFFFF;
						  line-height: 1px;
						  max-height: 0px;
						  max-width: 0px;
						  opacity: 0;
						  overflow: hidden;
						}

						/* BANNER */

						.notice {
						  padding: 12px;
						  background: #23233E;
						  color: #FFFFFF;
						  display: block;
						  font-size: 14px;
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 600;
						}

						/* INTRO */

						.section--intro {
						  padding-bottom: 48px;
						}

						/* BOOKING INFO */

						.business-logo__container {
						  width: 48px;
						  height: 48px;
						  border-radius: 3px;
						  border: 1px solid #d3d3d8;
						  overflow: hidden;
						}

						.business-logo__image {
						  border: 1px solid transparent;
						  border-radius: 3px;
						  width: 48px;
						  height: 48px;
						  display: block;
						}

						.business-address--address {
						  width: 50%;
						}

						.business-address--map {
						  width: 50%;
						}

						.business-address--map-image {
						  width: 100%;
						}

						/* MOBILE TICKETS */

						.mobile-ticket--description {
						  width: 65%;
						  margin-top: 12px;
						  margin-right: 5%;
						}

						.mobile-ticket--code {
						  width: 30%;
						}

						.mobile-ticket--code-image {
						  width: 100%;
						}

						/* RESERVATION ACTIONS */

						.linksTable {
						  border-bottom: 1px solid #d3d3d8;
						}

						.linksTableRow {
						  padding: 24px 12px;
						}

						.actions-icon {
						  vertical-align: middle;
						}

						.actions-text {
						  vertical-align: middle;
						}

						/* RECEIPT */

						.receipt__container {
						  border: 1px solid #d3d3d8;
						  padding: 24px;
						}

						.receipt__row {
						  border-top: 1px solid #d3d3d8;
						}

						/* FEEDBACK ICONS */

						.feedback-link {
						  border: 1px solid #d4d5da;
						  border-radius: 3px;
						  display: inline-block;
						  width: calc(32% - 2px);
						  padding: 10px 0;
						}

						.feedback-link-bumper {
						  display: inline-block;
						  width: 1%;
						}

						.feedback-link img {
						  height: 50px;
						  width: 50px;
						}

						/* SOCIAL ICONS */

						.social-link {
						  display: inline-block;
						  width: auto;
						}

						.social-link-text {
						  padding: 14px 24px 14px 14px;
						}

						/* TABLET STYLES */

						@media screen and (max-width: 648px) {
						  /* DEVICE-SPECIFIC RESET */
						  div[style*="margin: 16px 0;"] {
							margin: 0 !important;
						  }
						  /* ANDROID CENTER FIX */
						  /* LAYOUT */
						  .wrapper {
							width: 100% !important;
							max-width: 100% !important;
						  }
						  .Content {
							width: 90% !important;
						  }
						  .Content-container {
							padding-left: 36px !important;
							padding-right: 36px !important;
						  }
						  .Content-container--main {
							padding-top: 30px !important;
							padding-bottom: 42px !important;
						  }
						  .responsiveTable {
							width: 100% !important;
						  }
						  /* RESERVATION ACTIONS */
						  .linksTableRow {
							padding-left: 0 !important;
							padding-right: 0 !important;
							padding-top: 12px !important;
							padding-bottom: 12px !important;
						  }
						  .linksTableRow--borderRight {
							border-right: none !important;
							padding-left: 0 !important;
							padding-right: 0 !important;
						  }
						  /* FEEDBACK LINK */
						  .feedback-link img {
							height: 38px !important;
							width: 38px !important;
						  }
						}

						/* MOBILE STYLES */

						@media screen and (max-width: 480px) {
						  /* TYPOGRAPHY */
						  .h1 {
							font-size: 30px !important;
							line-height: 30px !important;
						  }
						  .text {
							font-size: 16px !important;
							line-height: 22px !important;
						  }
						  /* BUTTON */
						  .mobile-buttonContainer {
							width: 100% !important;
						  }
						  /* LAYOUT */
						  .Content {
							width: 100% !important;
						  }
						  .Content-container {
							padding-left: 18px !important;
							padding-right: 18px !important;
						  }
						  .Content-container--main {
							padding-top: 24px !important;
							padding-bottom: 30px !important;
						  }
						  .section {
							padding: 18px 0 !important;
						  }
						  .section--last {
							padding: 18px 0 !important;
						  }
						  .header {
							padding: 0 18px !important;
						  }
						  .business-address--address {
							width: 100% !important;
						  }
						  .business-address--map {
							margin-top: 30px !important;
							width: 100% !important;
						  }
						  .mobile-ticket--description {
							width: 100% !important;
							margin-top: 0px !important;
						  }
						  .mobile-ticket--code {
							margin-top: 30px !important;
							margin-left: 0;
							width: 100% !important;
						  }
						  /* RECEIPT */
						  .receipt__container {
							padding: 12px !important;
						  }
						  /* SOCIAL ICONS */
						  .social-link {
							display: block !important;
							width: 100% !important;
							border-bottom: 1px solid #d3d3d8 !important;
						  }
						  /* INTRO */
						  .section--intro {
							padding-top: 18px !important;
							padding-bottom: 18px !important;
						  }
						}
					  </style>
					<style id="__web-inspector-hide-shortcut-style__">
.__web-inspector-hide-shortcut__, .__web-inspector-hide-shortcut__ *, .__web-inspector-hidebefore-shortcut__::before, .__web-inspector-hideafter-shortcut__::after
{
    visibility: hidden !important;
}
</style></head>

					<body style="margin: 0 !important; padding: 0 !important; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; height: 100%; margin: 0; padding: 0; width: 100%; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; color: rgb(79, 79, 101); -webkit-font-smoothing: antialiased; -ms-text-size-adjust: 100%; -moz-osx-font-smoothing: grayscale; font-smoothing: always; text-rendering: optimizeLegibility;">
					   
					  <!--[if mso]>
						<style type="text/css">
					.h1 {font-family: "Helvetica", "Arial", sans-serif !important; font-weight: 700 !important; vertical-align: middle !important; font-size: 36px !important; mso-line-height-rule: exactly;line-height: 42px !important;}
					.h2 {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 600 !important;vertical-align: middle !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 24px !important;}
					.text {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 21px !important;}
					.text-list {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 25px !important;}
					.textSmall {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 14px !important;}
					.text-xsmall {font-family: "Helvetica", "Arial", sans-serif !important;font-size: 11px !important;text-transform: uppercase !important;mso-line-height-rule: exactly;line-height: 22px !important;letter-spacing: 1px !important;}
					.text-bold {font-weight: 600 !important;}
					.text-link {text-decoration: underline !important;}
					.text-linkNoUnderline {text-decoration: none !important;}
					.text-strike {text-decoration: line-through !important;}
					.textColorDark {color: #23233e !important;}
					.textColorNormal {color: #4f4f65 !important;}
					.textColorBlue {color: #2020c0 !important;}
					.textColorGray {color: #A5A8AD !important;}
					.textColorWhite {color: #FFFFFF !important;}
					.Button-primary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #ffffff !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
					.Button-secondary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #2020C0 !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
						</style>
						<![endif]-->
					  <!-- HIDDEN PREHEADER TEXT -->
					  <div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;">
					  </div>
					  <table border="0" cellpadding="0" cellspacing="0" width="100%" class=" mainTable  " style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: rgb(240, 240, 240);">
						<tbody><tr><td style="display:none !important;
					 visibility:hidden;
					 mso-hide:all;
					 font-size:1px;
					 color:#ffffff;
					 line-height:1px;
					 max-height:0px;
					 max-width:0px;
					 opacity:0;
					 overflow:hidden; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> We are thrilled that you will be joining us. If yo... </td>
						<!-- HEADER -->
						</tr><tr>
						  <td align="center" class="header" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
							<!--[if (gte mso 9)|(IE)]>
						<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
						<tr>
						<td align="center" valign="top" width="600">
						<![endif]-->
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 580px; margin: 0 auto;">
							  <tbody><tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr>
								<td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <h1 style="font-size: 33px;font-weight: 800;line-height: 30px;">Dstricts</h1>               </td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							</tbody></table>
							<!--[if (gte mso 9)|(IE)]>
						</td>
						</tr>
						</table>
						<![endif]-->
						  </td>
						</tr>
						<!-- CONTENT -->
						<tr>
						  <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
							<!--[if (gte mso 9)|(IE)]>
						<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
						<tr>
						<td align="center" valign="top" width="600">
						<![endif]-->
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content bg-white" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: white; width: 580px; margin: 0 auto;">
							  <tbody><tr>
								<td class="Content-container Content-container--main text textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101); padding-left: 60px; padding-right: 60px; padding-top: 54px; padding-bottom: 60px;">
								  <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
									<!-- RESTAURANT INFO -->
									<tbody><tr>
									  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" valign="center" width="48" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="business-logo__container" style="width: 48px; height: 48px; border-radius: 3px; border: 1px solid rgb(211, 211, 216); overflow: hidden;">
												<img src="'.$row['image_url'].'" class="business-logo__image" width="48" height="48" alt="Logo" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block; border: 1px solid transparent; border-radius: 3px; width: 48px; height: 48px; display: block;">
											  </div>
											</td>
											<td width="12" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
											<td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">'.$row['car_model'].'</span>                          </td>
										  </tr>
										  <tr class="spacer">
											<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr class="spacer">
											<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<!-- INTRO -->
									<tr>
									  <td valign="top" align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h1 textColorDark" style="font-family: &quot;GT America Condensed Bold&quot;, &quot;Roboto Condensed&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 700; vertical-align: middle; font-size: 36px; line-height: 42px; color: rgb(35, 35, 62);">Booking information</span>                          </td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr>
											<td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
											  <!--[if gte mso 15]>&nbsp;<![endif]-->
											</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<!-- MESSAGE -->
									<tr class="spacer">
									  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr>
									  <td align="left" class="message" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(244, 244, 245); padding: 18px;">
										<div class="text textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
										  <span class="text-bold textColorDark" style="font-weight: 600; color: rgb(35, 35, 62);">Booking information</span>
										  <br>You have succefully made your car reservation. But please wait for the confirmation from the car rental office. Once the confirmation is done we will inform you</div>
									  </td>
									</tr>
									<tr class="spacer">
									  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr>
									  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
										<!--[if gte mso 15]>&nbsp;<![endif]-->
									  </td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<!-- BOOKING INFO -->
									<tr>
									  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" valign="middle" width="468" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="text-list textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
												<span class="text-bold textColorDark" style="font-weight: 600; color: rgb(35, 35, 62);">'.date("F j, Y, g:i a").'</span>
												<br>Price per day(inclusive of taxes): '.$_POST['price'].'
												<br>
											  </div>
											</td>
										  </tr>
										  
										  
										  

					

					

					




										</tbody></table>
									  </td>
									</tr>
									<!-- ADDRESS -->
									<tr>
									  <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr>
											<td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
											  <!--[if gte mso 15]>&nbsp;<![endif]-->
											</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr>
											<td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
												<tbody><tr>
												  <td style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
													<table align="left" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--address" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 50%;">
													  <tbody><tr>
														<td align="left" width="100%" class="text-list textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
														<span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">'.$row["car_model"].'</span><br>'.$row["model_series"].'<br>From '.date('Y-m-d',$_POST["checkin_date"]).' to '.date('Y-m-d',$_POST["checkout_date"]).'                                         </td>
													  </tr>
													</tbody></table>
													<!--[if mso]></td><td><![endif]-->
													
												  </td>
												</tr>
											  </tbody></table>
											</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr>
									  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
										<!--[if gte mso 15]>&nbsp;<![endif]-->
									  </td>
									</tr>
									
									
									<!-- RECEIPT -->
									
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<!-- EDIT RECEIPT -->
									<!-- CANCELLATION POLICY -->
									<tr>
									  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="text text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; font-weight: 600; color: rgb(35, 35, 62);">
												Confirmation policy
											  </div>
											</td>
										  </tr>
										  <tr>
											<td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="text textColorNormal mt1" style="margin-top: 6px; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
												<span>This booking will be confirmed only when car rental company accept your request.</span>
												<span>You can not transfer your booking to another person.</span>
											  </div>
											</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<tr class="spacer">
									  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									
									<!-- QUESTIONS -->
									
								  </tbody></table>
								</td>
							  </tr>
							</tbody></table>
						  </td>
						</tr>
						<!-- FOOTER -->
						<tr>
						  <td align="center" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; width: 580px; margin: 0 auto;">
							<!-- Will most likely required a feature flag -->
							<!--[if (gte mso 9)|(IE)]>
					<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
					<tr>
					<td align="center" valign="top" width="600">
					<![endif]-->
							<table width="100%" border="0" cellspacing="0" cellpadding="0" align="center" class="Content-container" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; padding-left: 60px; padding-right: 60px;">
							  <tbody><tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr>
								<td align="center" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <a href="https://www.exploretock.com" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;"> <img src="https://storage.googleapis.com/tock-public-assets/images-email-template/tock-brandmark-color.png" width="30" height="30" alt="Tock" border="0" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block;"> </a>              </td>
							  </tr>
							  <tr class="spacer">
								<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr>
								<td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
								  <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
									 2019 Tock, Inc.
								  </div>
								  <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
									All Rights Reserved
								  </div>
								</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							</tbody></table>
							<!--[if (gte mso 9)|(IE)]>
					</td>
					</tr>
					</table>
					<![endif]-->
						  </td>
						</tr>
					  </tbody></table><title>Reservation confirmed</title>
					  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
					  <meta charset="utf-8">
					  <meta name="viewport" content="width=device-width, initial-scale=1">
					  <meta http-equiv="X-UA-Compatible" content="IE=edge">
					  <style type="text/css">
						/* GT AMERICA */

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Regular";
						  font-weight: 400;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
						}

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Medium";
						  font-weight: 600;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
						}

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Condensed Bold";
						  font-weight: 700;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
						}

						/* CLIENT-SPECIFIC RESET */

						body,
						table,
						td,
						a {
						  -webkit-text-size-adjust: 100%;
						  -ms-text-size-adjust: 100%;
						}

						/* Prevent WebKit and Windows mobile changing default text sizes */

						table,
						td {
						  mso-table-lspace: 0pt;
						  mso-table-rspace: 0pt;
						}

						/* Remove spacing between tables in Outlook 2007 and up */

						img {
						  -ms-interpolation-mode: bicubic;
						}

						/* Allow smoother rendering of resized image in Internet Explorer */

						.im {
						  color: inherit !important;
						}

						/* DEVICE-SPECIFIC RESET */

						a[x-apple-data-detectors] {
						  color: inherit !important;
						  text-decoration: none !important;
						  font-size: inherit !important;
						  font-family: inherit !important;
						  font-weight: inherit !important;
						  line-height: inherit !important;
						}

						/* iOS BLUE LINKS */

						/* RESET */

						img {
						  border: 0;
						  height: auto;
						  line-height: 100%;
						  outline: none;
						  text-decoration: none;
						  display: block;
						}

						table {
						  border-collapse: collapse;
						}

						table td {
						  border-collapse: collapse;
						  display: table-cell;
						}

						body {
						  height: 100% !important;
						  margin: 0 !important;
						  padding: 0 !important;
						  width: 100% !important;
						}

						/* BG COLORS */

						.mainTable {
						  background-color: #F0F0F0;
						}

						.mainTable--hospitality {
						  background-color: #f7f2ed;
						}

						html {
						  background-color: #F0F0F0;
						}

						/* VARIABLES */

						.bg-white {
						  background-color: white;
						}

						.hr {
						  /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
						  background-color: #d3d3d8;
						  border-collapse: collapse;
						  mso-table-lspace: 0pt;
						  mso-table-rspace: 0pt;
						  mso-line-height-rule: exactly;
						  line-height: 1px;
						}

						.textAlignLeft {
						  text-align: left !important;
						}

						.textAlignRight {
						  text-align: right !important;
						}

						.textAlignCenter {
						  text-align: center !important;
						}

						.mt1 {
						  margin-top: 6px;
						}

						.list {
						  padding-left: 18px;
						  margin: 0;
						}

						/* TYPOGRAPHY */

						body {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  color: #4f4f65;
						  -webkit-font-smoothing: antialiased;
						  -ms-text-size-adjust: 100%;
						  -moz-osx-font-smoothing: grayscale;
						  font-smoothing: always;
						  text-rendering: optimizeLegibility;
						}

						.h1 {
						  font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 700;
						  vertical-align: middle;
						  font-size: 36px;
						  line-height: 42px;
						}

						.h2 {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 600;
						  vertical-align: middle;
						  font-size: 16px;
						  line-height: 24px;
						}

						.text {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 16px;
						  line-height: 21px;
						}

						.text-list {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 16px;
						  line-height: 25px;
						}

						.textSmall {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 14px;
						}

						.text-xsmall {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-size: 11px;
						  text-transform: uppercase;
						  line-height: 22px;
						  letter-spacing: 1px;
						}

						.text-bold {
						  font-weight: 600;
						}

						.text-link {
						  text-decoration: underline;
						}

						.text-linkNoUnderline {
						  text-decoration: none;
						}

						.text-strike {
						  text-decoration: line-through;
						}

						/* FONT COLORS */

						.textColorDark {
						  color: #23233e;
						}

						.textColorNormal {
						  color: #4f4f65;
						}

						.textColorBlue {
						  color: #2020c0;
						}

						.textColorGrayDark {
						  color: #7B7B8B;
						}

						.textColorGray {
						  color: #A5A8AD;
						}

						.textColorWhite {
						  color: #FFFFFF;
						}

						.textColorRed {
						  color: #df3232;
						}

						/* BUTTON */

						.Button-primary-wrapper {
						  border-radius: 3px;
						  background-color: #2020C0;
						}

						.Button-primary {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  border-radius: 3px;
						  border: 1px solid #2020C0;
						  color: #ffffff;
						  display: block;
						  font-size: 16px;
						  font-weight: 600;
						  padding: 18px;
						  text-decoration: none;
						}

						.Button-secondary-wrapper {
						  border-radius: 3px;
						  background-color: #ffffff;
						}

						.Button-secondary {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  border-radius: 3px;
						  border: 1px solid #2020C0;
						  color: #2020C0;
						  display: block;
						  font-size: 16px;
						  font-weight: 600;
						  padding: 18px;
						  text-decoration: none;
						}

						/* LAYOUT */

						.Content-container {
						  padding-left: 60px;
						  padding-right: 60px;
						}

						.Content-container--main {
						  padding-top: 54px;
						  padding-bottom: 60px;
						}

						.Content {
						  width: 580px;
						  margin: 0 auto;
						}

						.wrapper {
						  max-width: 600px;
						}

						.section {
						  padding: 24px 0px;
						  border-bottom: 1px solid #d3d3d8;
						}

						.section--noBorder {
						  padding: 24px 0px 0;
						}

						.section--last {
						  padding: 24px 0px;
						}

						.message {
						  background-color: #F4F4F5;
						  padding: 18px;
						}

						.card {
						  border: 1px solid #d3d3d8;
						  padding: 18px;
						}

						/* HEADER */

						.header-tockLogoImage {
						  display: block;
						  color: #F0F0F0;
						}

						.header-heroImage {
						  padding-bottom: 24px;
						}

						/* PREHEADER */

						.preheader {
						  display: none;
						  font-size: 1px;
						  color: #FFFFFF;
						  line-height: 1px;
						  max-height: 0px;
						  max-width: 0px;
						  opacity: 0;
						  overflow: hidden;
						}

						/* BANNER */

						.notice {
						  padding: 12px;
						  background: #23233E;
						  color: #FFFFFF;
						  display: block;
						  font-size: 14px;
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 600;
						}

						/* INTRO */

						.section--intro {
						  padding-bottom: 48px;
						}

						/* BOOKING INFO */

						.business-logo__container {
						  width: 48px;
						  height: 48px;
						  border-radius: 3px;
						  border: 1px solid #d3d3d8;
						  overflow: hidden;
						}

						.business-logo__image {
						  border: 1px solid transparent;
						  border-radius: 3px;
						  width: 48px;
						  height: 48px;
						  display: block;
						}

						.business-address--address {
						  width: 50%;
						}

						.business-address--map {
						  width: 50%;
						}

						.business-address--map-image {
						  width: 100%;
						}

						/* MOBILE TICKETS */

						.mobile-ticket--description {
						  width: 65%;
						  margin-top: 12px;
						  margin-right: 5%;
						}

						.mobile-ticket--code {
						  width: 30%;
						}

						.mobile-ticket--code-image {
						  width: 100%;
						}

						/* RESERVATION ACTIONS */

						.linksTable {
						  border-bottom: 1px solid #d3d3d8;
						}

						.linksTableRow {
						  padding: 24px 12px;
						}

						.actions-icon {
						  vertical-align: middle;
						}

						.actions-text {
						  vertical-align: middle;
						}

						/* RECEIPT */

						.receipt__container {
						  border: 1px solid #d3d3d8;
						  padding: 24px;
						}

						.receipt__row {
						  border-top: 1px solid #d3d3d8;
						}

						/* FEEDBACK ICONS */

						.feedback-link {
						  border: 1px solid #d4d5da;
						  border-radius: 3px;
						  display: inline-block;
						  width: calc(32% - 2px);
						  padding: 10px 0;
						}

						.feedback-link-bumper {
						  display: inline-block;
						  width: 1%;
						}

						.feedback-link img {
						  height: 50px;
						  width: 50px;
						}

						/* SOCIAL ICONS */

						.social-link {
						  display: inline-block;
						  width: auto;
						}

						.social-link-text {
						  padding: 14px 24px 14px 14px;
						}

						/* TABLET STYLES */

						@media screen and (max-width: 648px) {
						  /* DEVICE-SPECIFIC RESET */
						  div[style*="margin: 16px 0;"] {
							margin: 0 !important;
						  }
						  /* ANDROID CENTER FIX */
						  /* LAYOUT */
						  .wrapper {
							width: 100% !important;
							max-width: 100% !important;
						  }
						  .Content {
							width: 90% !important;
						  }
						  .Content-container {
							padding-left: 36px !important;
							padding-right: 36px !important;
						  }
						  .Content-container--main {
							padding-top: 30px !important;
							padding-bottom: 42px !important;
						  }
						  .responsiveTable {
							width: 100% !important;
						  }
						  /* RESERVATION ACTIONS */
						  .linksTableRow {
							padding-left: 0 !important;
							padding-right: 0 !important;
							padding-top: 12px !important;
							padding-bottom: 12px !important;
						  }
						  .linksTableRow--borderRight {
							border-right: none !important;
							padding-left: 0 !important;
							padding-right: 0 !important;
						  }
						  /* FEEDBACK LINK */
						  .feedback-link img {
							height: 38px !important;
							width: 38px !important;
						  }
						}

						/* MOBILE STYLES */

						@media screen and (max-width: 480px) {
						  /* TYPOGRAPHY */
						  .h1 {
							font-size: 30px !important;
							line-height: 30px !important;
						  }
						  .text {
							font-size: 16px !important;
							line-height: 22px !important;
						  }
						  /* BUTTON */
						  .mobile-buttonContainer {
							width: 100% !important;
						  }
						  /* LAYOUT */
						  .Content {
							width: 100% !important;
						  }
						  .Content-container {
							padding-left: 18px !important;
							padding-right: 18px !important;
						  }
						  .Content-container--main {
							padding-top: 24px !important;
							padding-bottom: 30px !important;
						  }
						  .section {
							padding: 18px 0 !important;
						  }
						  .section--last {
							padding: 18px 0 !important;
						  }
						  .header {
							padding: 0 18px !important;
						  }
						  .business-address--address {
							width: 100% !important;
						  }
						  .business-address--map {
							margin-top: 30px !important;
							width: 100% !important;
						  }
						  .mobile-ticket--description {
							width: 100% !important;
							margin-top: 0px !important;
						  }
						  .mobile-ticket--code {
							margin-top: 30px !important;
							margin-left: 0;
							width: 100% !important;
						  }
						  /* RECEIPT */
						  .receipt__container {
							padding: 12px !important;
						  }
						  /* SOCIAL ICONS */
						  .social-link {
							display: block !important;
							width: 100% !important;
							border-bottom: 1px solid #d3d3d8 !important;
						  }
						  /* INTRO */
						  .section--intro {
							padding-top: 18px !important;
							padding-bottom: 18px !important;
						  }
						}
					  </style>



					   
					  <!--[if mso]>
						<style type="text/css">
					.h1 {font-family: "Helvetica", "Arial", sans-serif !important; font-weight: 700 !important; vertical-align: middle !important; font-size: 36px !important; mso-line-height-rule: exactly;line-height: 42px !important;}
					.h2 {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 600 !important;vertical-align: middle !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 24px !important;}
					.text {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 21px !important;}
					.text-list {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 25px !important;}
					.textSmall {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 14px !important;}
					.text-xsmall {font-family: "Helvetica", "Arial", sans-serif !important;font-size: 11px !important;text-transform: uppercase !important;mso-line-height-rule: exactly;line-height: 22px !important;letter-spacing: 1px !important;}
					.text-bold {font-weight: 600 !important;}
					.text-link {text-decoration: underline !important;}
					.text-linkNoUnderline {text-decoration: none !important;}
					.text-strike {text-decoration: line-through !important;}
					.textColorDark {color: #23233e !important;}
					.textColorNormal {color: #4f4f65 !important;}
					.textColorBlue {color: #2020c0 !important;}
					.textColorGray {color: #A5A8AD !important;}
					.textColorWhite {color: #FFFFFF !important;}
					.Button-primary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #ffffff !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
					.Button-secondary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #2020C0 !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
						</style>
						<![endif]-->
					  <!-- HIDDEN PREHEADER TEXT -->
					  <div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;">
					  </div>
					  



					</body></html>';
					
					try{
	sendEmail($subject, $to, $emailContent);
}
catch(Exception $e) {
	
}
			$stmt->close();
			$dbCon->close();
			return 1;	
		}
		
		function availableCarSelectedCityList()
		{
		 
		$dbCon = AppModel::createConnection();
		 
			$search='%'.$_POST['city'].'%';
			$stmt = $dbCon->prepare("select car_price as price,car_registration_number,car_manufecturing_year,transmission_type,fuel_type,car_color,car_rental_available_car_type.id as car_type_id,image_url,car_rental_available_car.id,car_model,model_series,car_price,is_available,transmission_type from car_rental_available_car left join  car_rental_available_car_type on car_rental_available_car_type.id=car_rental_available_car.car_type_id left join car_rental_model on car_rental_model.id=car_rental_available_car_type.brand_type left join car_rental_model_series on car_rental_model_series.id=car_rental_available_car_type.model_id  where is_updated=1 and is_available=1 and car_type_id in(select car_rental_available_car_type.id from car_rental_available_car_type left join car_rental_model on car_rental_model.id=car_rental_available_car_type.brand_type left join car_rental_model_series on car_rental_model_series.id=car_rental_available_car_type.model_id  where location_id in (select id from property_location where   property_location.visiting_address like ? or property_location.visiting_state like ? or property_location.visiting_city like ? or property_location.country_v like ? or property_location.city_v like ?)) ");
			
			/* bind parameters for markers */
			$stmt->bind_param("sssss",$search,$search,$search,$search,$search);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
				
			$stmt = $dbCon->prepare("select image_path from car_images where car_id=? limit 0,1");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$row1 = $result1->fetch_assoc();
			if(empty($row1))
			{
			$row['image_url']=$row['image_url'];;	
			}
			else
			{
			$image=$row1['image_path'];
			$value_a=file_get_contents("../estorecss/".$image.".txt"); $value_a=str_replace('"','',$value_a); $row1['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$image.'.jpg' );
			$row1['image_path']=str_replace('../','https://www.qloudid.com/',$row1['image_path']);	
			$row['image_url']=$row1['image_path'];		
			}

			
			$row['enc']=$this -> encrypt_decrypt('encrypt',$row['id']);
			$row['car_type_id_enc']=$this -> encrypt_decrypt('encrypt',$row['car_type_id']);  
			$row['price']=$row['price'];
			$row['car_registration_number']=$row['car_registration_number'];
			$row['car_manufecturing_year']=$row['car_manufecturing_year'];
			if($row['transmission_type']==1)
			{
				$row['transmission_type']='Automatic';
			}
			else
			{
				$row['transmission_type']='Mannual';
			}
			
			if($row['fuel_type']==1)
			{
				$row['fuel_type']='Petrol';
			}
			else if($row['fuel_type']==2)
			{
				$row['fuel_type']='Diesel';
			}
			else
			{
				$row['fuel_type']='Electric';
			}
			array_push($org,$row);
			$j++;
			}
			 
				$stmt->close();
				$dbCon->close();
				//echo '<pre>'; print_r($org);  echo '</pre>'; 
				return $org;
	}
	
	
		function listAvailableCars()
		{
		 
			$dbCon = AppModel::createConnection();
		 
			$search='%'.$_POST['city'].'%';
			$stmt = $dbCon->prepare("select car_price as price,car_registration_number,car_manufecturing_year,transmission_type,fuel_type,car_color,car_rental_available_car_type.id as car_type_id,image_url,car_rental_available_car.id,car_model,model_series,car_price,is_available,transmission_type from car_rental_available_car left join  car_rental_available_car_type on car_rental_available_car_type.id=car_rental_available_car.car_type_id left join car_rental_model on car_rental_model.id=car_rental_available_car_type.brand_type left join car_rental_model_series on car_rental_model_series.id=car_rental_available_car_type.model_id  where is_updated=1 and is_available=1 and car_type_id in(select car_rental_available_car_type.id from car_rental_available_car_type left join car_rental_model on car_rental_model.id=car_rental_available_car_type.brand_type left join car_rental_model_series on car_rental_model_series.id=car_rental_available_car_type.model_id  where find_in_set(car_body_type,?) and location_id in (select id from property_location where   property_location.visiting_address like ? or property_location.visiting_state like ? or property_location.visiting_city like ? or property_location.country_v like ? or property_location.city_v like ?)) and find_in_set(home_delivery,?)  and find_in_set(pick_up_delivery,?)  and find_in_set(airport_pickup,?)  and find_in_set(airport_dropoff,?)  and find_in_set(deposit_applicable,?)  and find_in_set(gps_available,?)  and find_in_set(child_seat,?)  and find_in_set(additional_driver,?)  and find_in_set(transmission_type,?) ");
			
			/* bind parameters for markers */
			$stmt->bind_param("sssssssssssssss",$_POST['car_body_type'], $search,$search,$search,$search,$search,$_POST['home_delivery_info'],$_POST['pickup_delivery_info'],$_POST['airport_pickup_info'],$_POST['airport_dropoff_info'],$_POST['deposit_type'],$_POST['gps_info'],$_POST['child_seat_info'],$_POST['driver_info'],$_POST['transmission_type']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			$stmt = $dbCon->prepare("select image_path from car_images where car_id=? limit 0,1");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$row1 = $result1->fetch_assoc();
			if(empty($row1))
			{
			$row['image_url']=$row['image_url'];;	
			}
			else
			{
			$image=$row1['image_path'];
			$value_a=file_get_contents("../estorecss/".$image.".txt"); $value_a=str_replace('"','',$value_a); $row1['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$image.'.jpg' );
			$row1['image_path']=str_replace('../','https://www.qloudid.com/',$row1['image_path']);	
			$row['image_url']=$row1['image_path'];		
			}	 
			$row['enc']=$this -> encrypt_decrypt('encrypt',$row['id']);
			$row['car_type_id_enc']=$this -> encrypt_decrypt('encrypt',$row['car_type_id']); 
			$row['price']=$row['price'];
			$row['car_registration_number']=$row['car_registration_number'];
			$row['car_manufecturing_year']=$row['car_manufecturing_year'];
			if($row['transmission_type']==1)
			{
				$row['transmission_type']='Automatic';
			}
			else
			{
				$row['transmission_type']='Mannual';
			}
			
			if($row['fuel_type']==1)
			{
				$row['fuel_type']='Petrol';
			}
			else if($row['fuel_type']==2)
			{
				$row['fuel_type']='Diesel';
			}
			else
			{
				$row['fuel_type']='Electric';
			}
			array_push($org,$row);
			$j++;
			}
			 
				$stmt->close();
				$dbCon->close();
				//echo '<pre>'; print_r($org);  echo '</pre>'; 
				return $org;
	}
		
	
	
		
		function availableCarList()
		{
			$dbCon = AppModel::createConnection();
			$car_type_id= $this -> encrypt_decrypt('decrypt',$_POST['car_type_id']); 
			$stmt = $dbCon->prepare("select image_url,car_rental_available_car.id,car_model,model_series,car_price,is_available,transmission_type from car_rental_available_car left join  car_rental_available_car_type on car_rental_available_car_type.id=car_rental_available_car.car_type_id left join car_rental_model on car_rental_model.id=car_rental_available_car_type.brand_type left join car_rental_model_series on car_rental_model_series.id=car_rental_available_car_type.model_id  where car_type_id=? and is_updated=1 and is_available=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $car_type_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0; 
			while($row = $result->fetch_assoc())
			{
			if($row['transmission_type']==1)
			{
				$row['transmission_type']='Automatic';
			}
			else
			{
				$row['transmission_type']='Mannual';
			}
			$row['enc']= $this -> encrypt_decrypt('encrypt',$row['id']);  
			array_push($org,$row); 
			$stmt = $dbCon->prepare("select image_path from car_images where car_id=? limit 0,1");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$row1 = $result1->fetch_assoc();
			if(empty($row1))
			{
			$org[$j]['images']=$row1['image_url'];;	
			}
			else
			{
			$image=$row1['image_path'];
			$value_a=file_get_contents("../estorecss/".$image.".txt"); $value_a=str_replace('"','',$value_a); $row1['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$image.'.jpg' );
			$row1['image_path']=str_replace('../','https://www.qloudid.com/',$row1['image_path']);	
			$org[$j]['images']=$row1['image_path'];		
			}
			 
			$j++;
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
		}
	
	
		function selectedCarTypeImages()
		{
			$dbCon = AppModel::createConnection();
			$car_type_id= $this -> encrypt_decrypt('decrypt',$_POST['car_type_id']); 
			$stmt = $dbCon->prepare("select image_path from car_images where car_id in (select id from car_rental_available_car where car_type_id=?) limit 0,4");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $car_type_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0; 
			while($row1 = $result->fetch_assoc())
			{
			 
			$image=$row1['image_path'];
			$value_a=file_get_contents("../estorecss/".$image.".txt"); $value_a=str_replace('"','',$value_a); $row1['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$image.'.jpg' );
			$row1['image_path1']=str_replace('../','https://www.qloudid.com/',$row1['image_path']);	
			array_push($org,$row1);	
			$j++;
			}
			if($j<4)
			{
			$stmt = $dbCon->prepare("select image_url,car_rental_available_car_type.id,car_model,model_series from car_rental_available_car_type left join car_rental_model on car_rental_model.id=car_rental_available_car_type.brand_type left join car_rental_model_series on car_rental_model_series.id=car_rental_available_car_type.model_id  where car_rental_available_car_type.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $car_type_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			for($i=$j; $i<4; $i++)
			{
			$org[$i]['image_path1']=$row['image_url'];	
			}
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
		}
	
		function selectedCarTypeDetail()
		{
			$dbCon = AppModel::createConnection();
			$car_type_id= $this -> encrypt_decrypt('decrypt',$_POST['car_type_id']); 
			$stmt = $dbCon->prepare("select car_rental_available_car_type.location_id,image_url,car_rental_available_car_type.id,car_model,model_series from car_rental_available_car_type left join car_rental_model on car_rental_model.id=car_rental_available_car_type.brand_type left join car_rental_model_series on car_rental_model_series.id=car_rental_available_car_type.model_id  where car_rental_available_car_type.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $car_type_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			return $row;
			
		}
		function selectedCarDetail()
		{
			$dbCon = AppModel::createConnection();
			$car_id= $this -> encrypt_decrypt('decrypt',$_POST['car_id']); 
			
			$stmt = $dbCon->prepare("select gps_available,gps_fee,child_seat,child_seat_fee,additional_driver,additional_driver_fee,fuel_type,available_range,car_registration_number,car_rental_available_car_type.location_id,image_url,car_rental_available_car.id,car_model,model_series,car_price,is_available,transmission_type from car_rental_available_car left join  car_rental_available_car_type on car_rental_available_car_type.id=car_rental_available_car.car_type_id left join car_rental_model on car_rental_model.id=car_rental_available_car_type.brand_type left join car_rental_model_series on car_rental_model_series.id=car_rental_available_car_type.model_id  where car_rental_available_car.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $car_id);
			$stmt->execute();
			$result = $stmt->get_result();
			 
			$row = $result->fetch_assoc();
			if($row['transmission_type']==1)
			{
				$row['transmission_type']='Automatic';
			}
			else
			{
				$row['transmission_type']='Mannual';
			}
			
			if($row['fuel_type']==1)
			{
				$row['fuel_type']='Petrol';
			}
			else if($row['fuel_type']==2)
			{
				$row['fuel_type']='Diesel';
			}
			else
			{
				$row['fuel_type']='Electric';
			}
			
			
			$row['enc']= $this -> encrypt_decrypt('encrypt',$row['id']);  
			 
			$stmt = $dbCon->prepare("select image_path from car_images where car_id=? limit 0,1");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$row1 = $result1->fetch_assoc();
			if(empty($row1))
			{
			$row['images']=$row1['image_url'];;	
			}
			else
			{
			$image=$row1['image_path'];
			$value_a=file_get_contents("../estorecss/".$image.".txt"); $value_a=str_replace('"','',$value_a); $row1['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$image.'.jpg' );
			$row1['image_path']=str_replace('../','https://www.qloudid.com/',$row1['image_path']);	
			$row['images']=$row1['image_path'];		
			}
			
			$stmt = $dbCon->prepare("select * from car_rental_booking_rules where location_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['location_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRules = $result->fetch_assoc();
			
			$row['service_tax']=($row['car_price']*$rowRules['service_tax'])/100;
			$row['total_vat']=($row['car_price']*$rowRules['total_vat'])/100;
			$row['deposit_fee']=($row['car_price']*$rowRules['deposit_fee'])/100;
			$row['night_charges']=$rowRules['night_charges'];
			$row['cancellation_fee_applicable']=$rowRules['cancellation_fee_applicable'];
			if($rowRules['unlimited_free_km']==0)
			{
				$row['free_km']=$rowRules['total_free_km'].'KMs';
			}
			else
			{
				$row['free_km']='Unlimited free KMs';
			}
			
			$row['total_car_price']=$row['car_price']+$row['service_tax']+$row['total_vat'];
			$stmt->close();
			$dbCon->close();
			return $row;
			
		}
	
	
		function carRentalList()
		{
		 
		$dbCon = AppModel::createConnection();
		
		 
			$search='%'.$_POST['city'].'%';
			$stmt = $dbCon->prepare("select image_url,car_rental_available_car_type.id,car_model,model_series from car_rental_available_car_type left join car_rental_model on car_rental_model.id=car_rental_available_car_type.brand_type left join car_rental_model_series on car_rental_model_series.id=car_rental_available_car_type.model_id  where location_id in (select id from property_location where   property_location.visiting_address like ? or property_location.visiting_state like ? or property_location.visiting_city like ? or property_location.country_v like ? or property_location.city_v like ?) and car_body_type=?");
			 
			/* bind parameters for markers */
			$stmt->bind_param("sssssi", $search,$search,$search,$search,$search,$_POST['car_body_type']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			$row['enc']=$this -> encrypt_decrypt('encrypt',$row['id']);
			$stmt = $dbCon->prepare("select min(car_price) as price,car_registration_number,car_manufecturing_year,transmission_type,fuel_type,car_color from car_rental_available_car where car_type_id=? and is_updated=1 and is_available=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$resultPrice = $stmt->get_result();
			$rowPrice = $resultPrice->fetch_assoc();
			if(empty($rowPrice ))
				continue;
			
			$row['price']=$rowPrice['price'];
			$row['car_registration_number']=$rowPrice['car_registration_number'];
			$row['car_manufecturing_year']=$rowPrice['car_manufecturing_year'];
			if($rowPrice['transmission_type']==1)
			{
				$row['transmission_type']='Automatic';
			}
			else
			{
				$row['transmission_type']='Mannual';
			}
			
			if($rowPrice['fuel_type']==1)
			{
				$row['fuel_type']='Petrol';
			}
			else if($rowPrice['fuel_type']==2)
			{
				$row['fuel_type']='Diesel';
			}
			else
			{
				$row['fuel_type']='Electric';
			}
			array_push($org,$row);
			$j++;
			}
			 
				$stmt->close();
				$dbCon->close();
				//echo '<pre>'; print_r($org);  echo '</pre>'; 
				return $org;
	}
	
		function dstrictListNearByResturant($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$checkout_id= $this -> encrypt_decrypt('decrypt',$data['checkout_id']);
			/*$stmt = $dbCon->prepare("select latitude,longitude,city from  user_address where id=(select room_type_id from hotel_checkout_detail where id=?)");
			$stmt->bind_param("i", $checkout_id); 
			$stmt->execute();
			$result = $stmt->get_result();
			$rowUser = $result->fetch_assoc();*/
			$org=array();
			 
			$stmt = $dbCon->prepare("select resturant_information.id,resturant_name,latitude,longitude,street_name_v,city_v,port_number,postal_code_v,country_v,visiting_address from resturant_information left join property_location on property_location.id=resturant_information.property_id where city_v=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("s", $_POST['city']);
			$stmt->execute();
			$result = $stmt->get_result();
			
			while($row2 = $result->fetch_assoc())
			{
				$row2['enc']= $this -> encrypt_decrypt('encrypt',$row2['id']); 
				/*$row2['street_name_v']=html_entity_decode($row2['visiting_address']);
				
				$address=$row2['street_name_v'].' '.$row2['port_number'];
  
				$url = "http://api.locationiq.com/v1/autocomplete.php?key=pk.1daa15e048f0e38b45be79dc1ecad248&q=".$address;
				$ch = curl_init();
				curl_setopt($ch, CURLOPT_URL, $url);
				curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
				curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);   
				curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'GET');      
				$responseJson = curl_exec($ch);
				echo curl_error($ch);
				curl_close($ch);
				 
				$response = json_decode($responseJson,true);
				if(!isset($response['error']))
				{
				 $select1="UPDATE property_location set latitude='".$response[0]['lat']."',longitude='".$response[0]['lon']."' where id=".$row2['id'];	
				$result5=mysqli_query($dbCon, $select1);
				$row2['latitude']=$response[0]['lat'];
				$row2['langitude']=$response[0]['lon'];
				}
				
				//$row2['street_name_v']=htmlentities($row2['visiting_address'],ENT_NOQUOTES, 'UTF-8');	 
				$row2['city_v']=htmlentities($row2['city_v'],ENT_NOQUOTES, 'UTF-8');	
				$earthRadius = 4857;
				$latFrom = deg2rad($rowUser['current_latitude']);
				$lonFrom = deg2rad($rowUser['current_longitude']);
				$latTo = deg2rad($row2['latitude']);
				$lonTo = deg2rad($row2['langitude']);
				$latDelta = $latTo - $latFrom;
				$lonDelta = $lonTo - $lonFrom;
				$angle = 2 * asin(sqrt(pow(sin($latDelta / 2), 2) + cos($latFrom) * cos($latTo) * pow(sin($lonDelta / 2), 2)));
				$row2['distance']=round($angle * $earthRadius *1.609344*1000);
				//if($row2['distance']<1000)*/
			$stmt = $dbCon->prepare("select resturant_photo_path,sorting_number,id from resturant_apartment_photos where resturant_id=? order by sorting_number ");
			$stmt->bind_param("i", $row2['id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$row1 = $result1->fetch_assoc();
			 if(!empty($row1))
			 {
			  $filename="../estorecss/".$row1['resturant_photo_path'].".txt"; $value_a=file_get_contents("../estorecss/".$row1['resturant_photo_path'].".txt"); $value_a=str_replace('"','',$value_a); $row1['resturant_photo_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row1['sorting_number'].'_'.$data['apartment_id'].'.jpg' );
			$row2['resturant_photo_path']=str_replace('../','https://www.qloudid.com/',$row1['resturant_photo_path']);		
			 }
			else
			{
				$row2['resturant_photo_path']='https://www.qloudid.com/estorecss/tmpnew0.09086000 1600564862.jpg';
			}
			array_push($org,$row2);
			}	
			//if(count($org)>1)
			//$org=$this->record_sort($org, "distance"); 
			 
			$stmt->close();
			$dbCon->close();
			 return $org;
		}
		
		
		function dstrictFilterNearByResturant($data)
		{
			$dbCon = AppModel::createConnection();
			 $search='%'.$_POST['city'].'%';
			$checkout_id= $this -> encrypt_decrypt('decrypt',$data['checkout_id']);
			$org=array();
			 
			$stmt = $dbCon->prepare("select resturant_information.id,resturant_name,latitude,longitude,street_name_v,city_v,port_number,postal_code_v,country_v,visiting_address from resturant_information left join property_location on property_location.id=resturant_information.property_id where (property_location.visiting_address like ? or property_location.visiting_state like ? or property_location.visiting_city like ? or property_location.country_v like ? or property_location.city_v like ?) and find_in_set(resturant_type,?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("ssssss", $search,$search,$search,$search,$search, $_POST['eat_drink_type']);
			$stmt->execute();
			$result = $stmt->get_result();
			
			while($row2 = $result->fetch_assoc())
			{
			$row2['enc']= $this -> encrypt_decrypt('encrypt',$row2['id']); 
				 
			$stmt = $dbCon->prepare("select resturant_photo_path,sorting_number,id from resturant_apartment_photos where resturant_id=? order by sorting_number ");
			$stmt->bind_param("i", $row2['id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$row1 = $result1->fetch_assoc();
			 if(!empty($row1))
			 {
			  $filename="../estorecss/".$row1['resturant_photo_path'].".txt"; $value_a=file_get_contents("../estorecss/".$row1['resturant_photo_path'].".txt"); $value_a=str_replace('"','',$value_a); $row1['resturant_photo_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row1['sorting_number'].'_'.$row1['resturant_photo_path'].'.jpg' );
			$row2['resturant_photo_path']=str_replace('../','https://www.qloudid.com/',$row1['resturant_photo_path']);		
			 }
			else
			{
				$row2['resturant_photo_path']='https://www.qloudid.com/estorecss/tmpnew0.09086000 1600564862.jpg';
			}
			array_push($org,$row2);
			}	
			//if(count($org)>1)
			//$org=$this->record_sort($org, "distance"); 
			 
			$stmt->close();
			$dbCon->close();
			 return $org;
		}
		
		
		function resturantAddedImages()
		{
			$dbCon = AppModel::createConnection();
			$id= $this -> encrypt_decrypt('decrypt',$_POST['id']);
			 
			$stmt = $dbCon->prepare("select resturant_photo_path,sorting_number,id from resturant_apartment_photos where resturant_id=? order by sorting_number");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $id);
			$stmt->execute();
			$resultImages = $stmt->get_result();
			$org=array();
			$j=0;
			while($row1 = $resultImages->fetch_assoc())
			{
				 
			$filename="../estorecss/".$row1['resturant_photo_path'].".txt"; $value_a=file_get_contents("../estorecss/".$row1['resturant_photo_path'].".txt"); $value_a=str_replace('"','',$value_a); $row1['resturant_photo_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row1['sorting_number'].'_'.$row1['resturant_photo_path'].'.jpg' );
			$row1['resturant_photo_path']=str_replace('../','https://www.qloudid.com/',$row1['resturant_photo_path']);	
			array_push($org,$row1);
			$j++;
			}
			 if($j<4)
			 {
				 $k=5-$j;
				for($i=1;$i<=$k;$i++)
				{
					$org[$j]['resturant_photo_path']='https://www.qloudid.com/estorecss/tmpnew0.09086000%201600564862.jpg';
					$j++;
				}
			 
			 }
			
			$stmt->close();
			$dbCon->close();
			  
			return $org;
			
	}
	
	
		
		

		function dstrictProfessionalServiceRequestList($data)
		{
				$dbCon = AppModel::createConnection();
				$checkout_id= $this -> encrypt_decrypt('decrypt',$data['checkout_id']);
				$org=array();
				$stmt = $dbCon->prepare("select property_info_required ,user_professional_service_request.id,category_name,subcategory_name,user_property_id from user_professional_service_request left join professional_service_category on professional_service_category.id=user_professional_service_request.category_id left join professional_service_subcategory on professional_service_subcategory.id=user_professional_service_request.subcategory_id where   domain_id=1 and qloud_checkout_id=? order by id desc");
				$stmt->bind_param("i", $checkout_id);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$j=0;
				while($row = $result1->fetch_assoc())
				{
				array_push($org,$row);
				$org[$j]['enc']= $this -> encrypt_decrypt('encrypt',$row['id']);
				$j++;
				}
				$stmt->close();
				$dbCon->close();
				return $org;
		}
	function dstrictProfessionalNonbookableRequest($data)
		{
			$dbCon = AppModel::createConnection();
			$checkout_id=$this->encrypt_decrypt('decrypt',$data['checkout_id']);
			$catg_id=$this->encrypt_decrypt('decrypt',$data['catg_id']);
			$whom_id=1;
			$subcatg_id=$this->encrypt_decrypt('decrypt',$data['subcatg_id']);
			$company_id=$this->encrypt_decrypt('decrypt',$data['company_id']);
			$service_id=$this->encrypt_decrypt('decrypt',$data['bookable_service_id']);
			$domain_id=1;
			  
			$stmt = $dbCon->prepare("insert into `user_professional_service_request`(selected_qualified_companies,user_property_id,qloud_checkout_id,domain_id, whom_you_want_served,`category_id` , `subcategory_id` , `property_type_detail` , `carried_for` , `begin_info` , `user_id`, `created_on`) VALUES (?,?,?, ?, ?,?, ?,?, ?, ?, ?, now())");
			$stmt->bind_param("siiiiiiiiii",$company_id,$data['apartment_id'],$checkout_id,$domain_id,$whom_id, $catg_id,$subcatg_id,$data['property_type'],$domain_id,$domain_id,$data['user_id']);
			$stmt->execute();
			$id=$stmt->insert_id;
			
			$stmt = $dbCon->prepare("select * from professional_company_selected_service_todos_price_info where id =?");
			$stmt->bind_param("i", $service_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCategory = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("insert into `qloudid`.`user_professional_service_request_company_info`(  `job_id`  , `company_id`  , `assigned_on`,is_accepted,per_hour_fee,project_fee,bid_accepted,qloud_bookable_service_id) values (?,?,now(),?,?,?,?,?)");
			$stmt->bind_param("iiiiiii", $id,$company_id,$domain_id,$rowCategory['dish_price'],$rowCategory['dish_price'],$domain_id,$service_id);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
			
		}		
	
	
	function dstrictProfessionalBookableRequest($data)
		{
			$dbCon = AppModel::createConnection();
			
			$checkout_id=$this->encrypt_decrypt('decrypt',$data['checkout_id']);
			$catg_id=$this->encrypt_decrypt('decrypt',$data['catg_id']);
			$whom_id=1;
			$subcatg_id=$this->encrypt_decrypt('decrypt',$data['subcatg_id']);
			$company_id=$this->encrypt_decrypt('decrypt',$data['company_id']);
			$service_id=$this->encrypt_decrypt('decrypt',$data['bookable_service_id']);
			$domain_id=1;
			
			$stmt = $dbCon->prepare("insert into `user_professional_service_request`(selected_qualified_companies,user_property_id,qloud_checkout_id,domain_id, whom_you_want_served,`category_id` , `subcategory_id` , `property_type_detail` , `carried_for` , `begin_info` , `user_id`, `created_on`) VALUES (?,?,?, ?, ?,?, ?,?, ?, ?, ?, now())");
			$stmt->bind_param("siiiiiiiiii",$company_id,$data['apartment_id'],$checkout_id,$domain_id,$whom_id, $catg_id,$subcatg_id,$data['property_type'],$domain_id,$domain_id,$data['user_id']);
			$stmt->execute();
			$id=$stmt->insert_id;
			
			$stmt = $dbCon->prepare("select * from professional_company_selected_service_todos_price_info where id =?");
			$stmt->bind_param("i", $service_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCategory = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("insert into `qloudid`.`user_professional_service_request_company_info`( is_service_bookable, `job_id`  , `company_id`  , `assigned_on`,is_accepted,per_hour_fee,project_fee,bid_accepted,qloud_bookable_service_id) values (?, ?,?,now(),?,?,?,?,?)");
			$stmt->bind_param("iiiiiiii", $domain_id,$id,$company_id,$domain_id,$rowCategory['dish_price'],$rowCategory['dish_price'],$domain_id,$service_id);
			$stmt->execute();
			
			$id1=$stmt->insert_id;
			
			$service_type=6;
			$is_verified=1;
			$stmt = $dbCon->prepare("insert into  hotel_roomservice_item_ordered (is_confirmed_employee,booked_employee_id, booking_time, booking_date,qloud_checkout_id,is_verified,service_type,booking_person_id,dish_id,dish_quantity,created_on,is_paid,user_id)values(?,?,?,?,?,?,?,?,?,?,now(),?,?)");
			/* bind parameters for markers */
			$stmt->bind_param("iisiiiiiiiii",$_POST['is_confirmed'],$_POST['booking_employee_id'],$_POST['booking_time'],$_POST['booking_date'],$checkout_id,$is_verified,$service_type,$data['user_id'],$service_id,$is_verified,$is_verified,$data['user_id']);
			$stmt->execute();
			$id2=$stmt->insert_id;
			
			$stmt = $dbCon->prepare("update `user_professional_service_request_company_info` set  bid_accepted=1,qloud_bookable_service_id=?,booking_employee_id=?, booking_time=?, booking_date=?,hotel_room_service_id=? where id=?");
			$stmt->bind_param("iisiii", $service_id,$data['booking_employee_id'],$data['booking_time'],$data['booking_date'],$id2,$id1);
			$stmt->execute();
			
			$stmt->close();
			$dbCon->close();
			return 1;
			
		}		
	
	
	
	function dstrictsSelectedServiceInfo($data)
		{
			 
			$dbCon = AppModel::createConnection();
			$services=$this->encrypt_decrypt('decrypt',$data['service_id']);
			$a=explode(',',$services);
			  $item_id=$a[0];
			$stmt = $dbCon->prepare("select company_name,product_information ,time_required,dishes_detail_information.id,dish_name,dish_detail,dish_price,is_bookable,is_active,is_physical,dish_image,one_shared,one_shared_type,recurring_event,open_event_date,open_total_person,open_event_time,work_time,open_price_per_person,private_price from dishes_detail_information left join working_hrs on working_hrs.id=dishes_detail_information.open_event_time left join companies on companies.id=dishes_detail_information.company_id where dishes_detail_information.id=?");
			$stmt->bind_param("i",$item_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowDishes = $result->fetch_assoc();
			if($rowDishes['one_shared']==2 && $rowDishes['one_shared_type']==1 && $rowDishes['recurring_event']==0)
			{
			$stmt = $dbCon->prepare("select sum(dish_quantity) as total_booked from hotel_roomservice_item_ordered where dish_id=? and service_type=5");
			$stmt->bind_param("i",$rowDishes['id']);
			$stmt->execute();
			$result2 = $stmt->get_result();	
			$row2 = $result2->fetch_assoc();
			$rowDishes['open_total_person']=$rowDishes['open_total_person']-$row2['total_booked'];
			}
			
			
			$filename="../estorecss/".$rowDishes ['dish_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$rowDishes ['dish_image'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$rowDishes ['dish_image'].'.jpg' );  $imgs='../../../../'.$imgs; } else { $value_a="../../../../../html/usercontent/images/default-profile-pic.jpg";  $imgs="../../../../../html/usercontent/images/default-profile-pic.jpg"; }
			$imgs=str_replace('../../../../../','https://www.qloudid.com/',$imgs);
			$rowDishes['dish_image']=$imgs;
			 
			$stmt->close();
			$dbCon->close();  
			return $rowDishes;
			
		}
		
	function dstrictBookingPrivateCalenderInfo($data)
	{
		$dbCon = AppModel::createConnection();
		 
		$employee_id=$this->encrypt_decrypt('decrypt',$data['employee_id']);
		$bookable_service_id=$this->encrypt_decrypt('decrypt',$data['bookable_service_id']);
		$company_id=$this->encrypt_decrypt('decrypt',$data['cid']);
		$query="select time_required,post_production_time,preparation_time from dishes_detail_information where id in (".$bookable_service_id.")";
		$result=(mysqli_query($dbCon,$query));
		$timeRequired=0;
		while($row=mysqli_fetch_array($result))
		{
		$timeRequired=$timeRequired+$row['time_required']+$row['post_production_time']+$row['preparation_time'];	
		}
		
		
		$query="select * from company_profiles where company_id=(select company_id from dishes_detail_information where id in ('".$bookable_service_id."'))";
		$result=(mysqli_query($dbCon,$query));
		$rowCompanyProfile=mysqli_fetch_array($result);
		$timeRequired=$timeRequired+$rowCompanyProfile['gap_between_bookings'];	
		 
		
		
		$org=array();
		$timeRequired=round($timeRequired/2);
		$flag=$data['date_flag']*7;
	$startDate=date('d-m-Y',strtotime(date('d-m-Y') . ' +'.$flag.' day'));
 
	for($i=0;$i<=6;$i++)
	{		
	$org[$i]['timerequired']=$timeRequired;
	$org[$i]['date']=strtotime($startDate . ' +'.$i.' day');
	$weekDay=date('w', strtotime($startDate . ' +'.$i.' day')); 
		if($employee_id==0)
		{
		$query="select id,services_available from employees where company_id=".$company_id;	
		}
		else
		{
			$query="select id,services_available from employees where id=".$employee_id;
		}
		$result=(mysqli_query($dbCon,$query));
		$ids='';
		while($row=mysqli_fetch_array($result))
		{
			 
			/*$query2="select working_day from employee_working_hrs where day_id=".$weekDay." and employee_id=".$row['id'];
			$result2=(mysqli_query($dbCon,$query2));
			$row2=mysqli_fetch_array($result2);
			 
			if($row2['working_day']==0)
			{
				continue;
			}
			*/
			$ids=$ids.$row['id'].',';	
			
		}
		$ids=substr($ids,0,-1);
		$emps=explode(',',$ids);
		$org[$i]['work_time_info']=array();
		if($ids=='')
		{
			continue;
		}	
		$workId="0";
		
		foreach($emps as $key1)
		{
			 
		$bookedDate='0';
		$query2="select booking_time,dish_id from hotel_roomservice_item_ordered where booked_employee_id=".$key1." and booking_date='".$org[$i]['date']."'";
		$result2=(mysqli_query($dbCon,$query2));
		while($row2=mysqli_fetch_array($result2))
		{
			
			$query="select time_required,post_production_time,preparation_time from dishes_detail_information where id =".$row2['dish_id'];
			$resultDish=(mysqli_query($dbCon,$query));
			$timeRequired=0;
			while($rowDish=mysqli_fetch_array($resultDish))
			{
			$timeBooked=$timeBooked+$rowDish['time_required']+$rowDish['post_production_time']+$rowDish['preparation_time'];	
			}
			
			$timeBooked=$timeBooked+$rowCompanyProfile['gap_between_bookings'];
			$bookedDate=$bookedDate.",".$row2['booking_time'];
			$tmp='';
			for($timeB=1;$timeB<=$timeBooked;$timeB++)
			{
				$tmp=$tmp.($row2['booking_time']+$timeB).",";
			}
			$bookedDate=$bookedDate.",".$tmp;
		}
 
		   
		$query2="select work_start_time,work_end_time,lunch_start_time,lunch_end_time from employee_working_hrs where day_id=".$weekDay." and employee_id=".$key1;
		$result2=(mysqli_query($dbCon,$query2));
		$row2=mysqli_fetch_array($result2);
		if(empty($row2))
		{
		$row2=array();
		$row2['work_start_time']=15;
		$row2['work_end_time']=38;
		$row2['lunch_start_time']=30;
		$row2['lunch_end_time']=32;
		}
		$row2['lunch_end_time']=$row2['lunch_end_time']-1; 
		 
		
		 
		$query="select id,work_time from working_hrs where (id between ".$rowCompanyProfile['booking_start_time']." and ".$rowCompanyProfile['booking_end_time'].") and (id not between ".$row2['lunch_start_time']." and ".$row2['lunch_end_time'].")  and id not in (select id from working_hrs where id in (".$bookedDate."))";
		$result=(mysqli_query($dbCon,$query));
		$ids='';
		while($row=mysqli_fetch_array($result))
		{
		$workId=$workId.",".$row['id'];
		//$row['emp_id']=$key1;
		//array_push($org[$i]['work_time_info'],$row);
		$ids=$ids.$row['id'].",";
		}
		 
		$dataWork=explode(',',substr($ids,0,-1));
		$avail=1;
		$j=0;
		 
		foreach($dataWork as $key3)
		{
			for($t=0;$t<$timeRequired;$t++)
			{
				$value=(int)$key3+$t;
				if (in_array($value, $dataWork))
				{
				$avail=1;
				}
				else
				{
				$avail=0;
				break;
				}
			}
			
			if($avail==1)
			{
				$query="select id from working_hrs where id=".$key3;
				$result=(mysqli_query($dbCon,$query));
				$row=mysqli_fetch_array($result);
				$row['emp_id']=$key1;
				$reg=1;
			foreach($org[$i]['work_time_info'] as $vals)
			{
				
				if($vals['id']==$row['id'])
				{
					$reg=0;
					break;
				}
			}
			if($row['id']==null || $row['id']=='')
				continue;
			if($reg==1)
			array_push($org[$i]['work_time_info'],$row);
			 //if(!in_array($row,$org[$i]['work_time_info']))
				//array_push($org[$i]['work_time_info'],$row);
			}
		}
		$key2 = array_column($org[$i]['work_time_info'], 'id');

		array_multisort($key2, SORT_ASC, $org[$i]['work_time_info']);
		}
		
	
		
	}
	$dbCon->close();  
	$data['calender']=json_encode($org,true);
	$calender=$this->dstrictGetCalender($data);
	return $calender;
	 
	}
	
	
	function dstrictBookingOpenCalenderInfo()
	{
		$dbCon = AppModel::createConnection();
		 
		$data=array();
		$data['w_width']=$_POST['w_width'];
		$company_id=$this->encrypt_decrypt('decrypt',$_POST['company_id']);
		$items=$this->encrypt_decrypt('decrypt',$_POST['service_id']); 
		
		$_POST['quantity']=1;
		$query="select time_required,post_production_time,preparation_time,open_total_person from dishes_detail_information where id=".$items;
		$result=(mysqli_query($dbCon,$query));
		$timeRequired=0;
		$row=mysqli_fetch_array($result);
		$timeRequired=$timeRequired+$row['time_required']+$row['post_production_time']+$row['preparation_time'];
		$totalPerson=$row['open_total_person'];
		$org=array();
		$org['date_flag']=$_POST['date_flag'];
		$timeRequired=round($timeRequired/2);
		$flag=$_POST['date_flag']*7;
	$startDate=date('d-m-Y',strtotime(date('d-m-Y') . ' +'.$flag.' day'));

	for($i=0;$i<=6;$i++)
	{		
	$org[$i]['timerequired']=$timeRequired;
	$org[$i]['date']=strtotime($startDate . ' +'.$i.' day');
	$weekDay=date('w', strtotime($startDate . ' +'.$i.' day')); 
	$org[$i]['work_time_info']=array(); 
	 
	$query="select day_id,event_day,id from dish_service_recurring_information left join working_hrs on working_hrs.id=dish_service_recurring_information.event_start_time where day_id=".$weekDay." and dish_id=".$items;
	$result=(mysqli_query($dbCon,$query));
	$row=mysqli_fetch_array($result); 
	  
		if($row['event_day']==0)
		continue; 
	  
	
	
					$stmt = $dbCon->prepare("select sum(dish_quantity) as total_booked from hotel_roomservice_item_ordered where dish_id=? and service_type=5");
					$stmt->bind_param("i",$items);
					$stmt->execute();
					$result2 = $stmt->get_result();	
					$row2 = $result2->fetch_assoc();
					if($row2['total_booked']==$totalPerson)
						continue;
					if(($totalPerson-$row2['total_booked'])<$_POST['quantity'])
						continue;
	 array_push($org[$i]['work_time_info'],$row);
			 
	}
	 
	$dbCon->close();  
	 
	$data['calender']=json_encode($org,true);
	$calender=$this->dstrictGetOpenCalender($data);
	return $calender;
	}
	function dstrictGetOpenCalender($data)
		{
			$dbCon = AppModel::createConnection();
			 
			if($data['date_flag']==0)
				{
					$earlier='<div class="absolute left-0 -top-12 z-20"><button class="
  rounded-full
  inline-flex
  items-center
  justify-center
  h-10
  px-4
  !leading-5
  
  border
  border-green
  focus:!outline-none
  focus:!ring-green-200
  focus:!ring-2
  duration-300
  transition-colors text-green border-none !text-green-200 X1LqXa1wBWadrQb2cUbq focus:!ring-0" disabled=""><span class="flex items-center justify-center mr-2 h-5 w-5" style="color:#F67F00;"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-4 w-3 rotate-90"><path d="M1.48698 8.81659C1.17469 8.50765 0.999521 8.08836 1 7.65097C1.00048 7.21358 1.17657 6.79392 1.48953 6.4843C1.8025 6.17468 2.2267 6.00047 2.66881 6C3.11093 5.99953 3.53475 6.17282 3.84703 6.48177L11.5056 14.0585L19.1563 6.48967C19.3112 6.3364 19.4951 6.21476 19.6973 6.13169C19.8996 6.04861 20.1164 6.00573 20.3352 6.0055C20.5541 6.00526 20.7708 6.04768 20.9729 6.13032C21.175 6.21296 21.3586 6.33421 21.5132 6.48714C21.6677 6.64007 21.7903 6.8217 21.8738 7.02164C21.9574 7.22159 22.0002 7.43594 22 7.65245C21.9998 7.86897 21.9564 8.08341 21.8724 8.28353C21.7885 8.48366 21.6655 8.66555 21.5106 8.81881L12.7071 17.5282C12.3755 17.8348 11.9377 18.0037 11.4844 17.9999C11.031 17.9961 10.5969 17.8199 10.2721 17.5077L1.48698 8.81659Z" fill="currentColor"></path></svg></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit; color:#F67F00;">Earlier</font></font></button></div>
  
 <div class="absolute right-0 -top-12 z-20"><button onclick="getNewCalender(1);" class="
  rounded-full
  inline-flex
  items-center
  justify-center
  h-10
  px-4
  !leading-5
  
  border
  border-green
  focus:!outline-none
  focus:!ring-green-200
  focus:!ring-2
  duration-300
  transition-colors text-green border-none  X1LqXa1wBWadrQb2cUbq focus:!ring-0"><font style="vertical-align: inherit; color:#F67F00;"><font style="vertical-align: inherit;  color:#F67F00;">Later</font></font><span class="flex items-center justify-center ml-2 h-5 w-5" style="color:#F67F00;"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-4 w-3 -rotate-90"><path d="M1.48698 8.81659C1.17469 8.50765 0.999521 8.08836 1 7.65097C1.00048 7.21358 1.17657 6.79392 1.48953 6.4843C1.8025 6.17468 2.2267 6.00047 2.66881 6C3.11093 5.99953 3.53475 6.17282 3.84703 6.48177L11.5056 14.0585L19.1563 6.48967C19.3112 6.3364 19.4951 6.21476 19.6973 6.13169C19.8996 6.04861 20.1164 6.00573 20.3352 6.0055C20.5541 6.00526 20.7708 6.04768 20.9729 6.13032C21.175 6.21296 21.3586 6.33421 21.5132 6.48714C21.6677 6.64007 21.7903 6.8217 21.8738 7.02164C21.9574 7.22159 22.0002 7.43594 22 7.65245C21.9998 7.86897 21.9564 8.08341 21.8724 8.28353C21.7885 8.48366 21.6655 8.66555 21.5106 8.81881L12.7071 17.5282C12.3755 17.8348 11.9377 18.0037 11.4844 17.9999C11.031 17.9961 10.5969 17.8199 10.2721 17.5077L1.48698 8.81659Z" fill="currentColor"></path></svg></span></button></div>
  
  ';
				}
				else if($data['date_flag']==3)
				{
					$earlier='<div class="absolute left-0 -top-12 z-20"><button onclick="getNewCalender(2);" class="
  rounded-full
  inline-flex
  items-center
  justify-center
  h-10
  px-4
  !leading-5
  
  border
  border-green
  focus:!outline-none
  focus:!ring-green-200
  focus:!ring-2
  duration-300
  transition-colors text-green border-none  X1LqXa1wBWadrQb2cUbq focus:!ring-0"><span class="flex items-center justify-center mr-2 h-5 w-5" style="color:#F67F00;"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-4 w-3 rotate-90"><path d="M1.48698 8.81659C1.17469 8.50765 0.999521 8.08836 1 7.65097C1.00048 7.21358 1.17657 6.79392 1.48953 6.4843C1.8025 6.17468 2.2267 6.00047 2.66881 6C3.11093 5.99953 3.53475 6.17282 3.84703 6.48177L11.5056 14.0585L19.1563 6.48967C19.3112 6.3364 19.4951 6.21476 19.6973 6.13169C19.8996 6.04861 20.1164 6.00573 20.3352 6.0055C20.5541 6.00526 20.7708 6.04768 20.9729 6.13032C21.175 6.21296 21.3586 6.33421 21.5132 6.48714C21.6677 6.64007 21.7903 6.8217 21.8738 7.02164C21.9574 7.22159 22.0002 7.43594 22 7.65245C21.9998 7.86897 21.9564 8.08341 21.8724 8.28353C21.7885 8.48366 21.6655 8.66555 21.5106 8.81881L12.7071 17.5282C12.3755 17.8348 11.9377 18.0037 11.4844 17.9999C11.031 17.9961 10.5969 17.8199 10.2721 17.5077L1.48698 8.81659Z" fill="currentColor"></path></svg></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit; color:#F67F00;">Earlier</font></font></button></div>
  
  
                                            <div class="absolute right-0 -top-12 z-20"><button class="
  rounded-full
  inline-flex
  items-center
  justify-center
  h-10
  px-4
  !leading-5
  
  border
  border-green
  focus:!outline-none
  focus:!ring-green-200
  focus:!ring-2
  duration-300
  transition-colors text-green border-none !text-green-200 X1LqXa1wBWadrQb2cUbq focus:!ring-0" disabled=""><font style="vertical-align: inherit; color:#F67F00;"><font style="vertical-align: inherit; color:#F67F00;">Later</font></font><span class="flex items-center justify-center ml-2 h-5 w-5" style="color:#F67F00;"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-4 w-3 -rotate-90"><path d="M1.48698 8.81659C1.17469 8.50765 0.999521 8.08836 1 7.65097C1.00048 7.21358 1.17657 6.79392 1.48953 6.4843C1.8025 6.17468 2.2267 6.00047 2.66881 6C3.11093 5.99953 3.53475 6.17282 3.84703 6.48177L11.5056 14.0585L19.1563 6.48967C19.3112 6.3364 19.4951 6.21476 19.6973 6.13169C19.8996 6.04861 20.1164 6.00573 20.3352 6.0055C20.5541 6.00526 20.7708 6.04768 20.9729 6.13032C21.175 6.21296 21.3586 6.33421 21.5132 6.48714C21.6677 6.64007 21.7903 6.8217 21.8738 7.02164C21.9574 7.22159 22.0002 7.43594 22 7.65245C21.9998 7.86897 21.9564 8.08341 21.8724 8.28353C21.7885 8.48366 21.6655 8.66555 21.5106 8.81881L12.7071 17.5282C12.3755 17.8348 11.9377 18.0037 11.4844 17.9999C11.031 17.9961 10.5969 17.8199 10.2721 17.5077L1.48698 8.81659Z" fill="currentColor"></path></svg></span></button></div>';
				}
				else
				{
					$e=$data['date_flag']-1;
					$l=$data['date_flag']+1;
					$earlier='<div class="absolute left-0 -top-12 z-20"><button onclick="getNewCalender('.$e.');" class="
  rounded-full
  inline-flex
  items-center
  justify-center
  h-10
  px-4
  !leading-5
  
  border
  border-green
  focus:!outline-none
  focus:!ring-green-200
  focus:!ring-2
  duration-300
  transition-colors text-green border-none  X1LqXa1wBWadrQb2cUbq focus:!ring-0"><span class="flex items-center justify-center mr-2 h-5 w-5"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-4 w-3 rotate-90"><path d="M1.48698 8.81659C1.17469 8.50765 0.999521 8.08836 1 7.65097C1.00048 7.21358 1.17657 6.79392 1.48953 6.4843C1.8025 6.17468 2.2267 6.00047 2.66881 6C3.11093 5.99953 3.53475 6.17282 3.84703 6.48177L11.5056 14.0585L19.1563 6.48967C19.3112 6.3364 19.4951 6.21476 19.6973 6.13169C19.8996 6.04861 20.1164 6.00573 20.3352 6.0055C20.5541 6.00526 20.7708 6.04768 20.9729 6.13032C21.175 6.21296 21.3586 6.33421 21.5132 6.48714C21.6677 6.64007 21.7903 6.8217 21.8738 7.02164C21.9574 7.22159 22.0002 7.43594 22 7.65245C21.9998 7.86897 21.9564 8.08341 21.8724 8.28353C21.7885 8.48366 21.6655 8.66555 21.5106 8.81881L12.7071 17.5282C12.3755 17.8348 11.9377 18.0037 11.4844 17.9999C11.031 17.9961 10.5969 17.8199 10.2721 17.5077L1.48698 8.81659Z" fill="currentColor"></path></svg></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Earlier</font></font></button></div>
  
   <div class="absolute right-0 -top-12 z-20"><button onclick="getNewCalender('.$l.');" class="
  rounded-full
  inline-flex
  items-center
  justify-center
  h-10
  px-4
  !leading-5
  
  border
  border-green
  focus:!outline-none
  focus:!ring-green-200
  focus:!ring-2
  duration-300
  transition-colors text-green border-none  X1LqXa1wBWadrQb2cUbq focus:!ring-0"><font style="vertical-align: inherit; color:#F67F00;"><font style="vertical-align: inherit; color:#F67F00;">Later</font></font><span class="flex items-center justify-center ml-2 h-5 w-5"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-4 w-3 -rotate-90"><path d="M1.48698 8.81659C1.17469 8.50765 0.999521 8.08836 1 7.65097C1.00048 7.21358 1.17657 6.79392 1.48953 6.4843C1.8025 6.17468 2.2267 6.00047 2.66881 6C3.11093 5.99953 3.53475 6.17282 3.84703 6.48177L11.5056 14.0585L19.1563 6.48967C19.3112 6.3364 19.4951 6.21476 19.6973 6.13169C19.8996 6.04861 20.1164 6.00573 20.3352 6.0055C20.5541 6.00526 20.7708 6.04768 20.9729 6.13032C21.175 6.21296 21.3586 6.33421 21.5132 6.48714C21.6677 6.64007 21.7903 6.8217 21.8738 7.02164C21.9574 7.22159 22.0002 7.43594 22 7.65245C21.9998 7.86897 21.9564 8.08341 21.8724 8.28353C21.7885 8.48366 21.6655 8.66555 21.5106 8.81881L12.7071 17.5282C12.3755 17.8348 11.9377 18.0037 11.4844 17.9999C11.031 17.9961 10.5969 17.8199 10.2721 17.5077L1.48698 8.81659Z" fill="currentColor"></path></svg></span></button></div>
  
                                          ';
				}
			 $flag=$data['date_flag']*7;
			$startDate=date('M d',strtotime(date('d-m-Y') . ' +'.$flag.' day'));
			$flag=($data['date_flag']*7)+6;
			$endDate=date('M d',strtotime(date('d-m-Y') . ' +'.$flag.' day'));
			$calender=json_decode($data['calender'],true); 
			//echo '<pre>'; print_r($calender); echo '</pre>'; die; 
			$header="";		
			$i=0;			
			$weekDays='';
			 foreach($calender as $key)
			 {
				 
				 
				 if($i==0)
				 {
					 $select="selected";
				 }
				 
				 else
					 {
						$select=""; 
					 }
					 if(count($key['work_time_info'])==0)
					 {
						$header=$header.'<div class="flex-grow basis-0 border-b-[1px] border-l-[1px] border-gray-200 bg_212b3a  text-center last-of-type:border-r-[1px] colIndex-'.$i.' text-gray-300"><span class="block pt-2 text-center text-sm capitalize text-inherit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'.date('D',$key['date']).'</font></font></span><span class="relative mx-auto mb-1 block h-11 text-lg font-semibold !leading-[44px] text-inherit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'.date('d',$key['date']).'</font></font></span></div>'; $disable='disabled';
					 }
					 else
					 {
						 $header=$header.'<div class="flex-grow basis-0 border-b-[1px] border-l-[1px] border-gray-200 bg_212b3a  text-center last-of-type:border-r-[1px] colIndex-'.$i.' txt_777E90"><span class="block pt-2 text-center text-sm capitalize text-inherit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'.date('D',$key['date']).'</font></font></span><span class="relative mx-auto mb-1 block h-11 text-lg font-semibold !leading-[44px] text-inherit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'.date('d',$key['date']).'</font></font><span class="absolute bottom-[2px] left-1/2 h-[6px] w-[6px] -translate-x-1/2 rounded-full bg-gray-900"></span></span></div>'; 
					 }
					
				 
						$weekDays=$weekDays.'<div class="flex-shrink flex-grow basis-0 border-l-[1px] border-b-[1px] border-gray-100 text-center last-of-type:border-r-[1px]">';
						
						     
									foreach($key['work_time_info'] as $key1)
									 {
										 
											 
										 
									$stmt = $dbCon->prepare("select work_time from working_hrs where id=?");
									/* bind parameters for markers */
									 
									$stmt->bind_param("i",$key1['id']);
									$stmt->execute();
									$result = $stmt->get_result();
									$row = $result->fetch_assoc();	 
									
									 
									$weekDays=$weekDays.'<span class="mx-1 my-[6px] flex h-auto cursor-pointer flex-col rounded-md border-[1px] border-solid text-center text-xs font-semibold !leading-9 md:m-2   border-green text-green hover:bg-green bg-green-100 hover:text-white" onclick="updateEmployeeTime('.$key['date'].','.$key1['id'].',0,'.$key['timerequired'].');"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'.$row['work_time'].'</font></font></span></span>
									
									';	 
									 }
								
								$weekDays=$weekDays.'</div>';
								
						 	 
			$i++;
			 }
		
			if(isset($data['w_width']))
			{
			if($data['w_width']>700)
					{
						$width=450;
					}
					else
					{
					$width=	$data['w_width']-50;
					}	
			}	
			else
			{
				$width=450;
			}
		
			 $dataAvailable='<div class="column_m bs_bb  ">
					
					<div style="position: relative;">
                                    <div class="calendar week-view">
									<p class="sticky !top-16 z-[100] m-0 flex flex-col items-center justify-center bg_212b3a  p-3 uppercase"><span class="font-semibold txt_777E90"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'.$startDate.' - '.$endDate.'</font></font></span><span class="text-xs text-gray-700"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Week 45</font></font></span></p>
                                         
                                        <div class="sticky !top-32 z-[100] bg_212b3a  shadow" style="height:76px;">
                                            <div class="slick-slider slick-calendar slick-initialized">
                                                <div class="slick-list">
                                                    <div class="slick-track" style="width: '.$width.'px; opacity: 1; transform: translate3d(0px, 0px, 0px);">
                                                        <div data-index="0" class="slick-slide slick-active slick-current" tabindex="-1" aria-hidden="false" style="outline: none; width: '.$width.'px;">
                                                            <div>
                                                                <div class="!flex w-full justify-between" tabindex="-1" style="width: 100%; display: inline-block;">
                                                                     '.$header.'
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            '.$earlier.'
                                        </div>
                                        <div class="hours sticky">
                                            <div class="flex w-full" style="min-height: 300px;">
                                               '.$weekDays.'
                                            </div>
                                        </div>
                                    </div>
                                </div>
					
					
					
				</div>';
				
				 
			$dbCon->close();
			return $dataAvailable;
			
			 
			
		}
	
	
	function dstrictGetCalender($data)
		{
			$dbCon = AppModel::createConnection();
			if($data['date_flag']==0)
				{
					$earlier='<div class="absolute left-0 -top-12 z-20"><button class="
  rounded-full
  inline-flex
  items-center
  justify-center
  h-10
  px-4
  !leading-5
  
  border
  border-green
  focus:!outline-none
  focus:!ring-green-200
  focus:!ring-2
  duration-300
  transition-colors text-green border-none !text-green-200 X1LqXa1wBWadrQb2cUbq focus:!ring-0" disabled=""><span class="flex items-center justify-center mr-2 h-5 w-5" style="color:#F67F00;"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-4 w-3 rotate-90"><path d="M1.48698 8.81659C1.17469 8.50765 0.999521 8.08836 1 7.65097C1.00048 7.21358 1.17657 6.79392 1.48953 6.4843C1.8025 6.17468 2.2267 6.00047 2.66881 6C3.11093 5.99953 3.53475 6.17282 3.84703 6.48177L11.5056 14.0585L19.1563 6.48967C19.3112 6.3364 19.4951 6.21476 19.6973 6.13169C19.8996 6.04861 20.1164 6.00573 20.3352 6.0055C20.5541 6.00526 20.7708 6.04768 20.9729 6.13032C21.175 6.21296 21.3586 6.33421 21.5132 6.48714C21.6677 6.64007 21.7903 6.8217 21.8738 7.02164C21.9574 7.22159 22.0002 7.43594 22 7.65245C21.9998 7.86897 21.9564 8.08341 21.8724 8.28353C21.7885 8.48366 21.6655 8.66555 21.5106 8.81881L12.7071 17.5282C12.3755 17.8348 11.9377 18.0037 11.4844 17.9999C11.031 17.9961 10.5969 17.8199 10.2721 17.5077L1.48698 8.81659Z" fill="currentColor"></path></svg></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit; color:#F67F00;">Earlier</font></font></button></div>
  
 <div class="absolute right-0 -top-12 z-20"><button onclick="getNewCalender(1);" class="
  rounded-full
  inline-flex
  items-center
  justify-center
  h-10
  px-4
  !leading-5
  
  border
  border-green
  focus:!outline-none
  focus:!ring-green-200
  focus:!ring-2
  duration-300
  transition-colors text-green border-none  X1LqXa1wBWadrQb2cUbq focus:!ring-0"><font style="vertical-align: inherit; color:#F67F00;"><font style="vertical-align: inherit;  color:#F67F00;">Later</font></font><span class="flex items-center justify-center ml-2 h-5 w-5" style="color:#F67F00;"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-4 w-3 -rotate-90"><path d="M1.48698 8.81659C1.17469 8.50765 0.999521 8.08836 1 7.65097C1.00048 7.21358 1.17657 6.79392 1.48953 6.4843C1.8025 6.17468 2.2267 6.00047 2.66881 6C3.11093 5.99953 3.53475 6.17282 3.84703 6.48177L11.5056 14.0585L19.1563 6.48967C19.3112 6.3364 19.4951 6.21476 19.6973 6.13169C19.8996 6.04861 20.1164 6.00573 20.3352 6.0055C20.5541 6.00526 20.7708 6.04768 20.9729 6.13032C21.175 6.21296 21.3586 6.33421 21.5132 6.48714C21.6677 6.64007 21.7903 6.8217 21.8738 7.02164C21.9574 7.22159 22.0002 7.43594 22 7.65245C21.9998 7.86897 21.9564 8.08341 21.8724 8.28353C21.7885 8.48366 21.6655 8.66555 21.5106 8.81881L12.7071 17.5282C12.3755 17.8348 11.9377 18.0037 11.4844 17.9999C11.031 17.9961 10.5969 17.8199 10.2721 17.5077L1.48698 8.81659Z" fill="currentColor"></path></svg></span></button></div>
  
  ';
				}
				else if($data['date_flag']==3)
				{
					$earlier='<div class="absolute left-0 -top-12 z-20"><button onclick="getNewCalender(2);" class="
  rounded-full
  inline-flex
  items-center
  justify-center
  h-10
  px-4
  !leading-5
  
  border
  border-green
  focus:!outline-none
  focus:!ring-green-200
  focus:!ring-2
  duration-300
  transition-colors text-green border-none  X1LqXa1wBWadrQb2cUbq focus:!ring-0"><span class="flex items-center justify-center mr-2 h-5 w-5" style="color:#F67F00;"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-4 w-3 rotate-90"><path d="M1.48698 8.81659C1.17469 8.50765 0.999521 8.08836 1 7.65097C1.00048 7.21358 1.17657 6.79392 1.48953 6.4843C1.8025 6.17468 2.2267 6.00047 2.66881 6C3.11093 5.99953 3.53475 6.17282 3.84703 6.48177L11.5056 14.0585L19.1563 6.48967C19.3112 6.3364 19.4951 6.21476 19.6973 6.13169C19.8996 6.04861 20.1164 6.00573 20.3352 6.0055C20.5541 6.00526 20.7708 6.04768 20.9729 6.13032C21.175 6.21296 21.3586 6.33421 21.5132 6.48714C21.6677 6.64007 21.7903 6.8217 21.8738 7.02164C21.9574 7.22159 22.0002 7.43594 22 7.65245C21.9998 7.86897 21.9564 8.08341 21.8724 8.28353C21.7885 8.48366 21.6655 8.66555 21.5106 8.81881L12.7071 17.5282C12.3755 17.8348 11.9377 18.0037 11.4844 17.9999C11.031 17.9961 10.5969 17.8199 10.2721 17.5077L1.48698 8.81659Z" fill="currentColor"></path></svg></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit; color:#F67F00;">Earlier</font></font></button></div>
  
  
                                            <div class="absolute right-0 -top-12 z-20"><button class="
  rounded-full
  inline-flex
  items-center
  justify-center
  h-10
  px-4
  !leading-5
  
  border
  border-green
  focus:!outline-none
  focus:!ring-green-200
  focus:!ring-2
  duration-300
  transition-colors text-green border-none !text-green-200 X1LqXa1wBWadrQb2cUbq focus:!ring-0" disabled=""><font style="vertical-align: inherit; color:#F67F00;"><font style="vertical-align: inherit; color:#F67F00;">Later</font></font><span class="flex items-center justify-center ml-2 h-5 w-5" style="color:#F67F00;"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-4 w-3 -rotate-90"><path d="M1.48698 8.81659C1.17469 8.50765 0.999521 8.08836 1 7.65097C1.00048 7.21358 1.17657 6.79392 1.48953 6.4843C1.8025 6.17468 2.2267 6.00047 2.66881 6C3.11093 5.99953 3.53475 6.17282 3.84703 6.48177L11.5056 14.0585L19.1563 6.48967C19.3112 6.3364 19.4951 6.21476 19.6973 6.13169C19.8996 6.04861 20.1164 6.00573 20.3352 6.0055C20.5541 6.00526 20.7708 6.04768 20.9729 6.13032C21.175 6.21296 21.3586 6.33421 21.5132 6.48714C21.6677 6.64007 21.7903 6.8217 21.8738 7.02164C21.9574 7.22159 22.0002 7.43594 22 7.65245C21.9998 7.86897 21.9564 8.08341 21.8724 8.28353C21.7885 8.48366 21.6655 8.66555 21.5106 8.81881L12.7071 17.5282C12.3755 17.8348 11.9377 18.0037 11.4844 17.9999C11.031 17.9961 10.5969 17.8199 10.2721 17.5077L1.48698 8.81659Z" fill="currentColor"></path></svg></span></button></div>';
				}
				else
				{
					$e=$data['date_flag']-1;
					$l=$data['date_flag']+1;
					$earlier='<div class="absolute left-0 -top-12 z-20"><button onclick="getNewCalender('.$e.');" class="
  rounded-full
  inline-flex
  items-center
  justify-center
  h-10
  px-4
  !leading-5
  
  border
  border-green
  focus:!outline-none
  focus:!ring-green-200
  focus:!ring-2
  duration-300
  transition-colors text-green border-none  X1LqXa1wBWadrQb2cUbq focus:!ring-0"><span class="flex items-center justify-center mr-2 h-5 w-5"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-4 w-3 rotate-90"><path d="M1.48698 8.81659C1.17469 8.50765 0.999521 8.08836 1 7.65097C1.00048 7.21358 1.17657 6.79392 1.48953 6.4843C1.8025 6.17468 2.2267 6.00047 2.66881 6C3.11093 5.99953 3.53475 6.17282 3.84703 6.48177L11.5056 14.0585L19.1563 6.48967C19.3112 6.3364 19.4951 6.21476 19.6973 6.13169C19.8996 6.04861 20.1164 6.00573 20.3352 6.0055C20.5541 6.00526 20.7708 6.04768 20.9729 6.13032C21.175 6.21296 21.3586 6.33421 21.5132 6.48714C21.6677 6.64007 21.7903 6.8217 21.8738 7.02164C21.9574 7.22159 22.0002 7.43594 22 7.65245C21.9998 7.86897 21.9564 8.08341 21.8724 8.28353C21.7885 8.48366 21.6655 8.66555 21.5106 8.81881L12.7071 17.5282C12.3755 17.8348 11.9377 18.0037 11.4844 17.9999C11.031 17.9961 10.5969 17.8199 10.2721 17.5077L1.48698 8.81659Z" fill="currentColor"></path></svg></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Earlier</font></font></button></div>
  
   <div class="absolute right-0 -top-12 z-20"><button onclick="getNewCalender('.$l.');" class="
  rounded-full
  inline-flex
  items-center
  justify-center
  h-10
  px-4
  !leading-5
  
  border
  border-green
  focus:!outline-none
  focus:!ring-green-200
  focus:!ring-2
  duration-300
  transition-colors text-green border-none  X1LqXa1wBWadrQb2cUbq focus:!ring-0"><font style="vertical-align: inherit; color:#F67F00;"><font style="vertical-align: inherit; color:#F67F00;">Later</font></font><span class="flex items-center justify-center ml-2 h-5 w-5"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-4 w-3 -rotate-90"><path d="M1.48698 8.81659C1.17469 8.50765 0.999521 8.08836 1 7.65097C1.00048 7.21358 1.17657 6.79392 1.48953 6.4843C1.8025 6.17468 2.2267 6.00047 2.66881 6C3.11093 5.99953 3.53475 6.17282 3.84703 6.48177L11.5056 14.0585L19.1563 6.48967C19.3112 6.3364 19.4951 6.21476 19.6973 6.13169C19.8996 6.04861 20.1164 6.00573 20.3352 6.0055C20.5541 6.00526 20.7708 6.04768 20.9729 6.13032C21.175 6.21296 21.3586 6.33421 21.5132 6.48714C21.6677 6.64007 21.7903 6.8217 21.8738 7.02164C21.9574 7.22159 22.0002 7.43594 22 7.65245C21.9998 7.86897 21.9564 8.08341 21.8724 8.28353C21.7885 8.48366 21.6655 8.66555 21.5106 8.81881L12.7071 17.5282C12.3755 17.8348 11.9377 18.0037 11.4844 17.9999C11.031 17.9961 10.5969 17.8199 10.2721 17.5077L1.48698 8.81659Z" fill="currentColor"></path></svg></span></button></div>
  
                                          ';
				}
			 $flag=$data['date_flag']*7;
			$startDate=date('M d',strtotime(date('d-m-Y') . ' +'.$flag.' day'));
			$flag=($data['date_flag']*7)+6;
			$endDate=date('M d',strtotime(date('d-m-Y') . ' +'.$flag.' day'));
			$calender=json_decode($data['calender'],true); 
			//echo '<pre>'; print_r($calender); echo '</pre>'; die; 
			$header="";		
			$i=0;			
			$weekDays='';
			 foreach($calender as $key)
			 {
				 
				 
				 if($i==0)
				 {
					 $select="selected";
				 }
				 
				 else
					 {
						$select=""; 
					 }
					 if(count($key['work_time_info'])==0)
					 {
						$header=$header.'<div class="flex-grow basis-0 border-b-[1px] border-l-[1px] border-gray-200 bg_212b3a  text-center last-of-type:border-r-[1px] colIndex-'.$i.' text-gray-300"><span class="block pt-2 text-center text-sm capitalize text-inherit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'.date('D',$key['date']).'</font></font></span><span class="relative mx-auto mb-1 block h-11 text-lg font-semibold !leading-[44px] text-inherit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'.date('d',$key['date']).'</font></font></span></div>'; $disable='disabled';
					 }
					 else
					 {
						 $header=$header.'<div class="flex-grow basis-0 border-b-[1px] border-l-[1px] border-gray-200 bg_212b3a  text-center last-of-type:border-r-[1px] colIndex-'.$i.' txt_777E90"><span class="block pt-2 text-center text-sm capitalize text-inherit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'.date('D',$key['date']).'</font></font></span><span class="relative mx-auto mb-1 block h-11 text-lg font-semibold !leading-[44px] text-inherit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'.date('d',$key['date']).'</font></font><span class="absolute bottom-[2px] left-1/2 h-[6px] w-[6px] -translate-x-1/2 rounded-full bg-gray-900"></span></span></div>'; 
					 }
					
				 
						$weekDays=$weekDays.'<div class="flex-shrink flex-grow basis-0 border-l-[1px] border-b-[1px] border-gray-100 text-center last-of-type:border-r-[1px]">';
						
						     
									foreach($key['work_time_info'] as $key1)
									 {
										 
											 
										 
									$stmt = $dbCon->prepare("select work_time from working_hrs where id=?");
									/* bind parameters for markers */
									 
									$stmt->bind_param("i",$key1['id']);
									$stmt->execute();
									$result = $stmt->get_result();
									$row = $result->fetch_assoc();	 
									
									 
									$weekDays=$weekDays.'<span class="mx-1 my-[6px] flex h-auto cursor-pointer flex-col rounded-md border-[1px] border-solid text-center text-xs font-semibold !leading-9 md:m-2   border-green text-green hover:bg-green bg-green-100 hover:text-white" onclick="updateEmployeeTime('.$key['date'].','.$key1['id'].','.$key1['emp_id'].','.$key['timerequired'].');"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'.$row['work_time'].'</font></font></span></span>
									
									';	 
									 }
								
								$weekDays=$weekDays.'</div>';
								
						 	 
			$i++;
			 }
		
			if(isset($data['w_width']))
			{
			if($data['w_width']>700)
					{
						$width=450;
					}
					else
					{
					$width=	$data['w_width']-50;
					}	
			}	
			else
			{
				$width=450;
			}
		
			 $dataAvailable='<div class="column_m bs_bb  ">
					
					<div style="position: relative;">
                                    <div class="calendar week-view">
									<p class="sticky !top-16 z-[100] m-0 flex flex-col items-center justify-center bg_212b3a  p-3 uppercase"><span class="font-semibold txt_777E90"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'.$startDate.' - '.$endDate.'</font></font></span><span class="text-xs text-gray-700"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Week 45</font></font></span></p>
                                         
                                        <div class="sticky !top-32 z-[100] bg_212b3a  shadow" style="height:76px;">
                                            <div class="slick-slider slick-calendar slick-initialized">
                                                <div class="slick-list">
                                                    <div class="slick-track" style="width: '.$width.'px; opacity: 1; transform: translate3d(0px, 0px, 0px);">
                                                        <div data-index="0" class="slick-slide slick-active slick-current" tabindex="-1" aria-hidden="false" style="outline: none; width: '.$width.'px;">
                                                            <div>
                                                                <div class="!flex w-full justify-between" tabindex="-1" style="width: 100%; display: inline-block;">
                                                                     '.$header.'
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            '.$earlier.'
                                        </div>
                                        <div class="hours sticky">
                                            <div class="flex w-full" style="min-height: 300px;">
                                               '.$weekDays.'
                                            </div>
                                        </div>
                                    </div>
                                </div>
					
					
					
				</div>';
				
				 
			$dbCon->close();
			return $dataAvailable;
			
			 
			
		}
	
		
		function dstrictProfessionalCompanyServiceList()
		{ 
		
			$dbCon = AppModel::createConnection();
			$subcatg_id=$this->encrypt_decrypt('decrypt',$_POST['subcatg_id']);
			$company_id=$this->encrypt_decrypt('decrypt',$_POST['company_id']);
			$whom_id=1;
			$domain_id=1;
			 
			$stmt = $dbCon->prepare("select * from professional_company_selected_service_todos_price_info where company_id=? and professional_subcategory_id=? and domain_id=1 and list_on_pickapro=1");
			$stmt->bind_param("ii",$company_id,$subcatg_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($rowCategory = $result->fetch_assoc())
			{
			$rowCategory['enc']=$this->encrypt_decrypt('encrypt',$rowCategory['id']);
			array_push($org,$rowCategory);
			}
				$stmt->close();
				$dbCon->close();
				return $org;	
			}
		function dstrictProfessionalCompanyList()
		{ 
		
			$dbCon = AppModel::createConnection();
			$subcatg_id=$this->encrypt_decrypt('decrypt',$_POST['subcatg_id']);
			$whom_id=1;
			$domain_id=1;
			 
			$stmt = $dbCon->prepare("select professional_company_selected_service_todos.id,company_name,company_id,company_email from professional_company_selected_service_todos left join companies on companies.id=professional_company_selected_service_todos.company_id where company_id in(select company_id from professional_company_selected_areas where area_id=? and is_selected=1) and professional_subcategory_id=?  and domain_id=1  and is_selected=1 limit 0,5");
			$stmt->bind_param("ii",$_POST['viarea_id'],$subcatg_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($rowCategory = $result->fetch_assoc())
			{
			$rowCategory['enc']=$this->encrypt_decrypt('encrypt',$rowCategory['company_id']);
			array_push($org,$rowCategory);
			}
				$stmt->close();
				$dbCon->close();
				return $org;	
			}
			
		
			
			
		function dstrictProfessionalSubCategoryDetailAreaBased()
		{ 
		
			$dbCon = AppModel::createConnection();
			$catg_id=$this->encrypt_decrypt('decrypt',$_POST['catg_id']);
			$whom_id=1;
			$domain_id=1;
			 
			$stmt = $dbCon->prepare("select * from professional_service_subcategory where professional_category_id=? and id in (select subcategory_id from professional_service_subcategory_available  where availablity_type=?) and id in (select professional_subcategory_id from professional_marketplace_service_todos where marketplace_id=? and is_selected=1 and professional_category_id=?) and id in (select professional_subcategory_id from professional_company_selected_service_todos where company_id in(select company_id from professional_company_selected_areas where area_id=? and is_selected=1) and is_selected=1 and professional_category_id=?)");
			$stmt->bind_param("iiiiii", $catg_id,$whom_id,$domain_id,$catg_id,$_POST['viarea_id'],$catg_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($rowCategory = $result->fetch_assoc())
			{
			$rowCategory['enc']=$this->encrypt_decrypt('encrypt',$rowCategory['id']);
			array_push($org,$rowCategory);
			}
				$stmt->close();
				$dbCon->close();
				return $org;	
			}
	function dstrictProfessionalCategoryDetailAreaBased()
		{ 
		
			$dbCon = AppModel::createConnection();
			$domain_id=1;
			$stmt = $dbCon->prepare("select * from professional_service_category where id in(select professional_category_id from professional_marketplace_service_todos where marketplace_id=? and is_selected=1) and id in (select professional_category_id from professional_company_selected_service_todos where company_id in(select company_id from professional_company_selected_areas where area_id=? and is_selected=1) and is_selected=1) and available_at_dstrict=1	order by category_completed desc");
			$stmt->bind_param("ii",$domain_id,$_POST['viarea_id']);	
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($rowCategory = $result->fetch_assoc())
			{
			$rowCategory['enc']=$this->encrypt_decrypt('encrypt',$rowCategory['id']);
			array_push($org,$rowCategory);
			}
				$stmt->close();
				$dbCon->close();
				return $org;	
			}	
			
			
	function selectedProfessionalCategoryDetailInfo()
		{ 
		 
			$dbCon = AppModel::createConnection();
			$catg_id=$this->encrypt_decrypt('decrypt',$_POST['catg_id']);
			$stmt = $dbCon->prepare("select * from professional_service_category where id =?");
			$stmt->bind_param("i", $catg_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCategory = $result->fetch_assoc();
				$stmt->close();
				$dbCon->close();
				return $rowCategory;	
			}
			function selectedProfessionalSubCategoryDetailInfo()
		{ 
		 
			$dbCon = AppModel::createConnection();
			$catg_id=$this->encrypt_decrypt('decrypt',$_POST['subcatg_id']);
			$stmt = $dbCon->prepare("select * from professional_service_subcategory where id =?");
			$stmt->bind_param("i", $catg_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCategory = $result->fetch_assoc();
				$stmt->close();
				$dbCon->close();
				return $rowCategory;	
			}
	function travelAppCompanyDstricts($data)
	{
		 $dbCon = AppModel::createConnection();
		  
		$emergency_id=$this->encrypt_decrypt('decrypt',$data['eid']);
		$stmt = $dbCon->prepare("select company_id,company_name,emergency_name from travel_app_company left join companies on companies.id=travel_app_company.company_id left join travel_emergency_list on travel_emergency_list.id=travel_app_company.emergency_id where travel_app_company.country_id=? and emergency_id=? limit 0,5");
        
        /* bind parameters for markers */
		$stmt->bind_param("ii", $data['country_id'],$emergency_id);
        $stmt->execute();
        $result = $stmt->get_result();
		$org=array();
		$j=0;
		while($row = $result->fetch_assoc())
		{
			array_push($org,$row);
			$org[$j]['enc']=$this->encrypt_decrypt('encrypt',$row['company_id']);
			$j++;
		}
		$stmt->close();
        $dbCon->close();
		return $org;
	}
	function addedAlamrs($data)
	{
		 $dbCon = AppModel::createConnection();
		  
		$stmt = $dbCon->prepare("select * from emergency_alarm_number where country_id=? limit 0,5");
        
        /* bind parameters for markers */
		$stmt->bind_param("i", $data['country_id']);
        $stmt->execute();
        $result = $stmt->get_result();
		$org=array();
		$j=0;
		while($row = $result->fetch_assoc())
		{
			array_push($org,$row);
			$org[$j]['enc']=$this->encrypt_decrypt('encrypt',$row['id']);
			$j++;
		}
		$stmt->close();
        $dbCon->close();
		 return $org;
	}

	function emergencyDetail($data)
	{
		$dbCon = AppModel::createConnection();
		$stmt = $dbCon->prepare("select * from travel_emergency_list");
        
        /* bind parameters for markers */
		
        $stmt->execute();
        $result = $stmt->get_result();
		$org=array();
		$j=0;
		while($row = $result->fetch_assoc())
		{
			 
		$stmt = $dbCon->prepare("select count(id) as num from travel_inactive_emergency where emergency_id=? and country_id=?");
        
        /* bind parameters for markers */
		$stmt->bind_param("ii", $row['id'],$_POST['country_id']);
        $stmt->execute();
        $result1 = $stmt->get_result();
		$rowCount = $result1->fetch_assoc();
		 if($rowCount['num']==1)
		 continue;
		
			array_push($org,$row);
			$org[$j]['enc']=$this->encrypt_decrypt('encrypt',$row['id']);
			$j++;
		}
		 
		$stmt->close();
        $dbCon->close();
		 return $org;
	}
	
		function reportFoundPublicAdult($data)
		{
			$dbCon = AppModel::createConnection();
			$data['id']= $this -> encrypt_decrypt('decrypt',$data['id']);
			$bookingInformationDetail=$this->bookingInformationDetail($data);
			$st=1;
			$stmt = $dbCon->prepare("insert into `notify_family_friends_found_info`(`reporting_person_id`,`last_seen`,`first_name`,`last_name`,`country_id`,`phone_number`,`which_time`,`which_date`,`which_location`,`location_description`,`missing_person_id`,`missing_person_type`,`created_on`) values (?,?,?,?,?,?,?,?,?,?,?,?,now())");
			$stmt->bind_param("iississsssii",$bookingInformationDetail['user_id'],$_POST['first_name'],$_POST['last_name'],$_POST['country_id'],$_POST['phone_number'],$_POST['which_time'],$_POST['which_date'],$_POST['which_location'],$_POST['description'], $data['id'],$st); // ss -> string string
			$stmt->execute();
			if($_POST['last_seen']==1 || $_POST['last_seen']==4)
			{
			$stmt = $dbCon->prepare("update notify_family_friends set is_found=1 where id=? and is_found=0");
			$stmt->bind_param("i", $data['id']); // ss -> string string
			$stmt->execute();
			}
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		
		function reportFoundPrivateAdult($data)
		{
			$dbCon = AppModel::createConnection();
			$data['id']= $this -> encrypt_decrypt('decrypt',$data['id']);
			$bookingInformationDetail=$this->bookingInformationDetail($data);
			$st=2;
			$stmt = $dbCon->prepare("insert into `notify_family_friends_found_info`(`reporting_person_id`,`last_seen`,`first_name`,`last_name`,`country_id`,`phone_number`,`which_time`,`which_date`,`which_location`,`location_description`,`missing_person_id`,`missing_person_type`,`created_on`) values (?,?,?,?,?,?,?,?,?,?,?,?,now())");
			$stmt->bind_param("iississsssii",$bookingInformationDetail['user_id'],$_POST['first_name'],$_POST['last_name'],$_POST['country_id'],$_POST['phone_number'],$_POST['which_time'],$_POST['which_date'],$_POST['which_location'],$_POST['description'], $data['id'],$st); // ss -> string string
			$stmt->execute();
			if($_POST['last_seen']==1 || $_POST['last_seen']==4)
			{
			$stmt = $dbCon->prepare("update notify_family_friends_private set is_found=1 where id=? and is_found=0");
			$stmt->bind_param("i", $data['id']); // ss -> string string
			$stmt->execute();
			
			
			$stmt = $dbCon->prepare("select * from notify_family_friends_private where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowBooking = $result->fetch_assoc();
			
			if($rowBooking['booking_id']>0)
			{
			$stmt = $dbCon->prepare("update hotel_checkout_invitation_info set is_missing=0 where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $rowBooking['booking_id']);
			$stmt->execute();	
			}
			
			}
			
			
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		
		function reportFoundPrivateChild($data)
		{
			$dbCon = AppModel::createConnection();
			$data['id']= $this -> encrypt_decrypt('decrypt',$data['id']);
			$bookingInformationDetail=$this->bookingInformationDetail($data);
			$st=3;
			$stmt = $dbCon->prepare("insert into `notify_family_friends_found_info`(`reporting_person_id`,`last_seen`,`first_name`,`last_name`,`country_id`,`phone_number`,`which_time`,`which_date`,`which_location`,`location_description`,`missing_person_id`,`missing_person_type`,`created_on`) values (?,?,?,?,?,?,?,?,?,?,?,?,now())");
			$stmt->bind_param("iississsssii",$bookingInformationDetail['user_id'],$_POST['first_name'],$_POST['last_name'],$_POST['country_id'],$_POST['phone_number'],$_POST['which_time'],$_POST['which_date'],$_POST['which_location'],$_POST['description'], $data['id'],$st); // ss -> string string
			$stmt->execute();
			if($_POST['last_seen']==1 || $_POST['last_seen']==4)
			{			
			$stmt = $dbCon->prepare("update notify_child_family_friends_private set is_found=1 where id=? and is_found=0");
			$st=0;
			$stmt->bind_param("i", $data['id']); // ss -> string string
			$stmt->execute();
			
			$stmt = $dbCon->prepare("select * from notify_child_family_friends_private where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowBooking = $result->fetch_assoc();
			
			if($rowBooking['booking_id']>0)
			{
			$stmt = $dbCon->prepare("update hotel_checkout_dependent_detail set is_missing=0 where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $rowBooking['booking_id']);
			$stmt->execute();	
			}
			}
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function bookingMissingAdultsList($data)
		{
			$dbCon = AppModel::createConnection();
					
			/*$stmt = $dbCon->prepare("select passport_image,user_logins.first_name,user_logins.last_name,notify_family_friends.id from notify_family_friends left join user_logins on user_logins.id=notify_family_friends.person_heart_user_id where is_found=0 and booking_id is not null");
			
			$stmt->execute();
			$result = $stmt->get_result();
			
			while($row = $result->fetch_assoc())
			{
				$filename="../estorecss/".$row ['passport_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['passport_image'].".txt"); $value_a=str_replace('"','',$value_a); $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['passport_image'].'.jpg' ); } else { $imgs="../html/usercontent/images/person-male.png"; } 
				$row['passport_image']=str_replace('../','',$imgs); $row['passport_image']='https://www.qloudid.com/'.$row['passport_image']; 
				
				$row['is_public']=1;
				$row['enc_public']=$this -> encrypt_decrypt('encrypt',$row['is_public']);	
				if($row['first_name']==null || $row['first_name']=='')
				{
					$row['first_name']='No';
					$row['last_name']='name';
				}
			$row['enc']= $this -> encrypt_decrypt('encrypt',$row['id']);	
			array_push($org,$row);
			}*/
			$org=array();
			$stmt = $dbCon->prepare("select passport_image,user_logins.first_name,user_logins.last_name,notify_family_friends_private.id from notify_family_friends_private left join user_logins on user_logins.id=notify_family_friends_private.person_heart_user_id where is_found=0 and booking_id is not null");
			
			$stmt->execute();
			$result = $stmt->get_result();
			while($row = $result->fetch_assoc())
			{
				$filename="../estorecss/".$row ['passport_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['passport_image'].".txt"); $value_a=str_replace('"','',$value_a); $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['passport_image'].'.jpg' ); } else { $imgs="../html/usercontent/images/person-male.png"; } 
				$row['passport_image']=str_replace('../','',$imgs); $row['passport_image']='https://www.qloudid.com/'.$row['passport_image']; 
				$row['is_public']=2;
				$row['enc_public']=$this -> encrypt_decrypt('encrypt',$row['is_public']);	
				if($row['first_name']==null || $row['first_name']=='')
				{
					$row['first_name']='No';
					$row['last_name']='name';
				}
			$row['enc']= $this -> encrypt_decrypt('encrypt',$row['id']);	
			array_push($org,$row);
			}
			
			$stmt = $dbCon->prepare("select dependents.image_path as passport_image,dependents.first_name,dependents.last_name,notify_child_family_friends_private.id from notify_child_family_friends_private left join dependents on dependents.id=notify_child_family_friends_private.child_heart_id where is_found=0 and booking_id is not null");
			
			$stmt->execute();
			$result = $stmt->get_result();
			while($row = $result->fetch_assoc())
			{
				$filename="../estorecss/".$row ['passport_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['passport_image'].".txt"); $value_a=str_replace('"','',$value_a); $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['passport_image'].'.jpg' ); } else { $imgs="../html/usercontent/images/person-male.png"; } 
				$row['passport_image']=str_replace('../','',$imgs); $row['passport_image']='https://www.qloudid.com/'.$row['passport_image'];
				$row['is_public']=3;
				$row['enc_public']=$this -> encrypt_decrypt('encrypt',$row['is_public']);	
				if($row['first_name']==null || $row['first_name']=='')
				{
					$row['first_name']='No';
					$row['last_name']='name';
				}
			$row['enc']= $this -> encrypt_decrypt('encrypt',$row['id']);	
			array_push($org,$row);
			}
			
			$stmt->close();
			$dbCon->close();
			return $org;
		}

		
		function missingPersonDetail($data)
		{
			$dbCon = AppModel::createConnection();
			$data['id']= $this -> encrypt_decrypt('decrypt',$data['id']);
			if($data['is_public']==1)
			{
			$stmt = $dbCon->prepare("select notify_family_friends.address,notify_family_friends.message_for_kin,passport_image,user_logins.first_name,user_logins.last_name,notify_family_friends.id from notify_family_friends left join user_logins on user_logins.id=notify_family_friends.person_heart_user_id where notify_family_friends.id=? and is_found=0 and notify_family_friends.id>0 and notify_family_friends.id is not null");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$filename="../estorecss/".$row ['passport_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['passport_image'].".txt"); $value_a=str_replace('"','',$value_a); $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['passport_image'].'.jpg' ); } else { $imgs="../html/usercontent/images/person-male.png"; } 
				$row['passport_image']=str_replace('../','',$imgs); $row['passport_image']='https://www.qloudid.com/'.$row['passport_image']; 
				
				$row['is_public']=1;
				$row['enc_public']=$this -> encrypt_decrypt('encrypt',$row['is_public']);	
				if($row['first_name']==null || $row['first_name']=='')
				{
					$row['first_name']='No';
					$row['last_name']='name';
				}
			$row['enc']= $this -> encrypt_decrypt('encrypt',$row['id']);	
			
				
			}	
			else if($data['is_public']==2)
			{
			$stmt = $dbCon->prepare("select notify_family_friends_private.address,notify_family_friends_private.message_for_kin,passport_image,user_logins.first_name,user_logins.last_name,notify_family_friends_private.id from notify_family_friends_private left join user_logins on user_logins.id=notify_family_friends_private.person_heart_user_id where  notify_family_friends_private.id=? and  is_found=0 and notify_family_friends_private.id>0 and notify_family_friends_private.id is not null");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
				$filename="../estorecss/".$row ['passport_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['passport_image'].".txt"); $value_a=str_replace('"','',$value_a); $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['passport_image'].'.jpg' ); } else { $imgs="../html/usercontent/images/person-male.png"; } 
				$row['passport_image']=str_replace('../','',$imgs); $row['passport_image']='https://www.qloudid.com/'.$row['passport_image']; 
				$row['is_public']=2;
				$row['enc_public']=$this -> encrypt_decrypt('encrypt',$row['is_public']);	
				if($row['first_name']==null || $row['first_name']=='')
				{
					$row['first_name']='No';
					$row['last_name']='name';
				}
			$row['enc']= $this -> encrypt_decrypt('encrypt',$row['id']);	
			 
			}
			else 
			{
			$stmt = $dbCon->prepare("select dependents.image_path,notify_child_family_friends_private.address,notify_child_family_friends_private.message_for_kin,dependents.first_name,dependents.last_name,notify_child_family_friends_private.id from notify_child_family_friends_private left join dependents on dependents.id=notify_child_family_friends_private.child_heart_id where notify_child_family_friends_private.id=? and is_found=0 and notify_child_family_friends_private.id>0 and notify_child_family_friends_private.id is not null");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
				$filename="../estorecss/".$row ['image_path'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['image_path'].".txt"); $value_a=str_replace('"','',$value_a); $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['image_path'].'.jpg' ); } else { $imgs="../html/usercontent/images/person-male.png"; } 
				$row['passport_image']=str_replace('../','',$imgs); $row['passport_image']='https://www.qloudid.com/'.$row['passport_image'];
				$row['is_public']=3;
				$row['enc_public']=$this -> encrypt_decrypt('encrypt',$row['is_public']);	
				if($row['first_name']==null || $row['first_name']=='')
				{
					$row['first_name']='No';
					$row['last_name']='name';
				}
			$row['enc']= $this -> encrypt_decrypt('encrypt',$row['id']);	
			 
			}
			
			$stmt->close();
			$dbCon->close();
			return $row;
		}

		
		function reportMissingChild($data)
		{
			$dbCon = AppModel::createConnection();
			$data['id']= $this -> encrypt_decrypt('decrypt',$data['id']);
			$hotel_checkin_id= $this -> encrypt_decrypt('decrypt',$data['hotel_checkin_id']);
		
			$stmt = $dbCon->prepare("update hotel_checkout_dependent_detail set is_missing=1 where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();	
			 
			
			$stmt = $dbCon->prepare("select hotel_checkout_detail.user_id,address,port_number from hotel_checkout_detail left join user_address on user_address.id=hotel_checkout_detail.room_type_id where hotel_checkout_detail.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $hotel_checkin_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowBooking = $result->fetch_assoc();
			 
			if($data['address_type']==1)
			{
			$data['address']=$rowBooking['address'].' '.$rowBooking['port_number'];
			}
			
			$stmt = $dbCon->prepare("select * from dependents where id=(select dependent_id from hotel_checkout_dependent_detail where id=?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select * from notify_child_family_friends_private where child_heart_id=? and is_found=0");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowEntry = $result->fetch_assoc();
			 
			if(empty($rowEntry))
			{
				
			$stmt = $dbCon->prepare("INSERT INTO notify_child_family_friends_private (address,child_heart_id, first_name, last_name, created_on,user_id,booking_id ) VALUES (?, ?, ?,  ?, now(),?, ?)");
			$st=0;
			$stmt->bind_param("sissii", $data['address'],$row['id'],$row['first_name'],$row['last_name'],$rowBooking['user_id'],$data['id']); // ss -> string string
			$stmt->execute();
			$id=$stmt->insert_id;	
			$data['new_id']=$id;
			return $data; 
			}
			else
			{
			$stmt = $dbCon->prepare("update notify_child_family_friends_private set address=?,is_found=0 where id=?");
			$st=0;
			$stmt->bind_param("si", $data['address'],$rowEntry['id']); // ss -> string string
			$stmt->execute();
			$id=$rowEntry['id'];
			$data['new_id1']=$id;
			}
			return $data; 
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function reportMissingChildPhoto($data)
		{
			$dbCon = AppModel::createConnection();
			$data['id']= $this -> encrypt_decrypt('decrypt',$data['id']);
			
			$data1 = strip_tags($data['image-data1']);
			
			define('UPLOAD_DIR','../estorecss/'); 
			$img_name1="new".microtime();
			file_put_contents(UPLOAD_DIR.$img_name1.".txt", $data1);
			
			 
			$stmt = $dbCon->prepare("select * from notify_child_family_friends_private where booking_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowEntry = $result->fetch_assoc();
			if(empty($rowEntry))
			{
			$stmt->close();
			$dbCon->close();
			return 1;
			}
			else
			{
			$id=$rowEntry['id'];
			$stmt = $dbCon->prepare("INSERT INTO notify_child_family_friends_private_images (missing_child_id,image_path) VALUES (?, ?)");
			$st=0;
			$stmt->bind_param("is", $id,$img_name1); // ss -> string string
			$stmt->execute();
			}
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		
		function reportFoundChild($data)
		{
			$dbCon = AppModel::createConnection();
			$data['id']= $this -> encrypt_decrypt('decrypt',$data['id']);
			$stmt = $dbCon->prepare("update hotel_checkout_dependent_detail set is_missing=0 where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		
		function reportMissingAdult($data)
		{
			$dbCon = AppModel::createConnection();
			$data['id']= $this -> encrypt_decrypt('decrypt',$data['id']);
			$hotel_checkin_id= $this -> encrypt_decrypt('decrypt',$data['hotel_checkin_id']);
			$stmt = $dbCon->prepare("update hotel_checkout_invitation_info set is_missing=1 where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();	
			 
			
			$stmt = $dbCon->prepare("select hotel_checkout_detail.user_id,address,port_number from hotel_checkout_detail left join user_address on user_address.id=hotel_checkout_detail.room_type_id where hotel_checkout_detail.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $hotel_checkin_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowBooking = $result->fetch_assoc();
			
			if($data['address_type']==1)
			{
			$data['address']=$rowBooking['address'].' '.$rowBooking['port_number'];
			}
			
			$stmt = $dbCon->prepare("select * from user_logins where id=(select invited_user_id from hotel_checkout_invitation_info where id=?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("delete from notify_family_friends where person_heart_user_id=? and is_found=0");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			
			
			$stmt = $dbCon->prepare("select * from notify_family_friends_private where person_heart_user_id=? and is_found=0");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowEntry = $result->fetch_assoc();
			
			
			if(empty($rowEntry))
			{
			$stmt = $dbCon->prepare("INSERT INTO notify_family_friends_private (address,person_heart_user_id, first_name, last_name, created_on,user_id,booking_id ) VALUES (?, ?, ?,  ?, now(),?, ?)");
			$st=0;
			$stmt->bind_param("sissii", $data['address'],$row['id'],$row['first_name'],$row['last_name'],$rowBooking['user_id'],$data['id']); // ss -> string string
			$stmt->execute();
			$id=$stmt->insert_id;	
			  
			return $data;
			}
			else
			{
			$stmt = $dbCon->prepare("update notify_family_friends_private set address=?,booking_id=? where id=?");
			$st=0;
			$stmt->bind_param("sii", $data['address'],$data['id'],$rowEntry['id']); // ss -> string string
			$stmt->execute();
			$id=$rowEntry['id'];
			}
			 
			 
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function reportMissingAdultPhoto($data)
		{
			$dbCon = AppModel::createConnection();
			$data['id']= $this -> encrypt_decrypt('decrypt',$data['id']);
			
			$data1 = strip_tags($data['image-data1']);
			
			define('UPLOAD_DIR','../estorecss/'); 
			$img_name1="new".microtime();
			file_put_contents(UPLOAD_DIR.$img_name1.".txt", $data1);
			
			 
			$stmt = $dbCon->prepare("select * from notify_family_friends_private where booking_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowEntry = $result->fetch_assoc();
			if(empty($rowEntry))
			{
			$stmt->close();
			$dbCon->close();
			return 1;
			}
			else
			{
			$id=$rowEntry['id'];
			$stmt = $dbCon->prepare("INSERT INTO notify_family_friends_private_images (missing_person_id,image_path) VALUES (?, ?)");
			$st=0;
			$stmt->bind_param("is", $id,$img_name1); // ss -> string string
			$stmt->execute();
			}
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function reportFoundAdult($data)
		{
			$dbCon = AppModel::createConnection();
			$data['id']= $this -> encrypt_decrypt('decrypt',$data['id']);
			$stmt = $dbCon->prepare("update hotel_checkout_invitation_info set is_missing=0 where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();	
			
			$stmt = $dbCon->prepare("update notify_family_friends_private set is_found=1 where booking_id=? and is_found=0");
			$st=0;
			$stmt->bind_param("i", $data['id']); // ss -> string string
			$stmt->execute();
			
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function bookingAdultsCheckedInList($data)
		{
			$dbCon = AppModel::createConnection();
			$data['checkid']= $this -> encrypt_decrypt('decrypt',$data['hotel_checkin_id']);
			
			$stmt = $dbCon->prepare("select checked_in from hotel_checkout_detail where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['checkid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowChecked = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select id,concat_ws(' ',first_name,last_name) as name from user_logins where id=(select user_id from hotel_checkout_detail where id=?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['checkid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$row = $result->fetch_assoc();
			$row['enc']=$data['hotel_checkin_id'];
			$row['checked_in']=$rowChecked['checked_in'];
			$row['is_confirmed']=1;
			$row['is_user']=1;
			$row['is_missing']=0;
			$row['name']=html_entity_decode($row['name'],ENT_NOQUOTES, 'UTF-8');	 
			array_push($org,$row);
			
			$stmt = $dbCon->prepare("select hotel_checkout_invitation_info.id,concat_ws(' ',first_name,last_name) as name,is_confirmed,invitation_type,hotel_checkout_invitation_info.email,country_code,phone_number,pre_checked,is_missing  from hotel_checkout_invitation_info left join user_logins on user_logins.id=hotel_checkout_invitation_info.invited_user_id where hotel_checkout_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['checkid']);
			$stmt->execute();
			$result = $stmt->get_result();
			 $j=1;
			while($row = $result->fetch_assoc())
			{
			$row['enc']= $this -> encrypt_decrypt('encrypt',$row['id']);	
			 if($row['is_confirmed']==1)
			 {
				$row['name']=html_entity_decode($row['name'],ENT_NOQUOTES, 'UTF-8');	 
			 }
			 else
			 {
				continue;
			 }
			 $org[$j]['enc']=$row['enc'];
			$org[$j]['is_user']=0;
			$org[$j]['is_confirmed']=$row['is_confirmed'];
			$org[$j]['name']=$row['name'];
			$org[$j]['id']=$row['id'];
			$org[$j]['is_missing']=$row['is_missing'];
			$j++;
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		}

		function bookingDependentsCheckedInList($data)
		{
			 $dbCon = AppModel::createConnection();
			$data['checkid']= $this -> encrypt_decrypt('decrypt',$data['hotel_checkin_id']);
			 
			$stmt = $dbCon->prepare("delete from hotel_checkout_dependent_detail where hotel_checkout_id=? and is_verified=0");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['checkid']);
			$stmt->execute();	
			
			$stmt = $dbCon->prepare("select checked_in_dependent,hotel_checkout_dependent_detail.id,concat_ws(' ',first_name,last_name) as name,dependent_id,is_missing from hotel_checkout_dependent_detail left join dependents on dependents.id=hotel_checkout_dependent_detail.dependent_id where hotel_checkout_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['checkid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			 $row['enc']= $this -> encrypt_decrypt('encrypt',$row['id']);	
			$row['name']=html_entity_decode($row['name'],ENT_NOQUOTES, 'UTF-8'); 
			array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
		function bookingSelectedGetsratedDetail($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			function base64_to_jpeg($base64_string, $output_file) {
			$ifp = fopen( $output_file, 'wb' ); 
			$data = explode( ',', $base64_string );
			fwrite( $ifp, base64_decode( $data[1] ) );
			fclose( $ifp ); 
			return $output_file; 
			}
			$gid= $this -> encrypt_decrypt('decrypt',$data['gid']);
			
			
			$stmt = $dbCon->prepare("select heading,subheading,get_started_description,user_apartment_get_started_id,is_updated,user_apartment_get_started_description.id,get_started_title,user_apartment_get_started_id,is_available,getstarted_code,getstarted_password from user_apartment_get_started_description left join user_apartment_get_started on user_apartment_get_started.id=user_apartment_get_started_description.user_apartment_get_started_id where user_apartment_get_started_description.id=?");
			$stmt->bind_param("i", $gid);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$j=0;
			$row = $result->fetch_assoc();
			 
			$row['get_started_description']=htmlentities($row['get_started_description'],ENT_NOQUOTES, 'UTF-8');
			if($row['user_apartment_get_started_id']<3)
			{
				$row['yes_no_required']=0;
				$row['code_required']=0;
			}
			else if($row['user_apartment_get_started_id']==3)
			{
				$row['yes_no_required']=1;
				$row['code_required']=1;
			}
			else
			{
				$row['yes_no_required']=1;
				$row['code_required']=0;
			}
			
			$row['images']=array(); 
			$stmt = $dbCon->prepare("select get_started_image_path,sorting_number,id from user_apartment_get_started_description_images where user_apartment_get_started_description_id=? order by sorting_number ");
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			while($row1 = $result1->fetch_assoc())
			{
				 
				 $filename="../estorecss/".$row1 ['get_started_image_path'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row1 ['get_started_image_path'].".txt"); $value_a=str_replace('"','',$value_a); $image = base64_to_jpeg( $value_a, '../estorecss/tmpgetstarted'.$row1['sorting_number'].''.$row1['id'].'.jpg' ); } else { $image="../html/usercontent/images/person-male.png"; } 
				 $row1['image_path']=str_replace('../','https://www.qloudid.com/',$image);
				 array_push($row['images'],$row1);
			}	
			
			$stmt->close();
			$dbCon->close();
			return $row;	
		}
		
		function bookingGetsratedDetail($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$bookingInformationDetail= $this -> bookingInformationDetail($data);
			$data['aid']=$bookingInformationDetail['room_type_id'];
			 
			$hotel_checkin_id= $this -> encrypt_decrypt('decrypt',$data['hotel_checkin_id']);
			$stmt = $dbCon->prepare("select * from user_apartment_get_started where id not in (select user_apartment_get_started_id from user_apartment_get_started_description where user_address_id=?)");
			$stmt->bind_param("i",$data['aid']);
			$stmt->execute();
			$result = $stmt->get_result();
			while($row = $result->fetch_assoc())
			{
			$stmt = $dbCon->prepare("insert into user_apartment_get_started_description (user_address_id, user_apartment_get_started_id) values (?,?)");
			$stmt->bind_param("ii", $data['aid'],$row['id']);
			$stmt->execute();	
			}
			
			
			$stmt = $dbCon->prepare("select is_updated,user_apartment_get_started_description.id,get_started_title,user_apartment_get_started_id,is_available,getstarted_code,getstarted_password from user_apartment_get_started_description left join user_apartment_get_started on user_apartment_get_started.id=user_apartment_get_started_description.user_apartment_get_started_id where user_address_id=? and is_available=1");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			$row['enc']=$this->encrypt_decrypt('encrypt',$row['id']);
			array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		
		function premiumUnaqasaMarketplaces($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			if($data['is_premium']==1)
			{
			$stmt = $dbCon->prepare("select professional_marketplace.id,marketplace_name from profession_dstricts_markeplace left join professional_marketplace on professional_marketplace.id=profession_dstricts_markeplace.marketplace_id where is_selected=1");	
			}
			else
			{
				$stmt = $dbCon->prepare("select professional_marketplace.id,marketplace_name from profession_dstricts_markeplace left join professional_marketplace on professional_marketplace.id=profession_dstricts_markeplace.marketplace_id where is_nonpremium=1");
			}
			 
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($rowCategory = $result->fetch_assoc())
			{
			$rowCategory['enc']=$this->encrypt_decrypt('encrypt',$rowCategory['id']);
			$data['domain_id']=$rowCategory['enc'];
			$marketplaceSelectedDomainList=$this->marketplaceSelectedDomainList($data);
			if(count($marketplaceSelectedDomainList)==0)
				continue;
			array_push($org,$rowCategory);
			}
				$stmt->close();
				$dbCon->close();
				return $org;	
			}
	 
		function marketplaceSelectedDomainList($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$marketplace_id=$this->encrypt_decrypt('decrypt',$data['domain_id']);
			$area_id=$this->encrypt_decrypt('decrypt',$data['city_id']);
			if($data['is_premium']==1)
			{
			$stmt = $dbCon->prepare("select * from professional_marketplace_domain_info where id not in (select marketplace_domain_id from professional_marketplace_premium_domain where marketplace_id=?)");
			$stmt->bind_param("i",$marketplace_id);
			$stmt->execute();
			$result = $stmt->get_result();
			while($rowCategory = $result->fetch_assoc())
			{
			$stmt = $dbCon->prepare("insert into `qloudid`.`professional_marketplace_premium_domain`(`marketplace_domain_id`,marketplace_id,created_on,modified_on) values (?,?,now(),now())");
			$stmt->bind_param("ii",$rowCategory['id'],$marketplace_id);
			$stmt->execute();
			}
			}
			else
			{
			$stmt = $dbCon->prepare("select * from professional_marketplace_domain_info where id not in (select marketplace_domain_id from professional_marketplace_nonpremium_domain where marketplace_id=?)");
			$stmt->bind_param("i",$marketplace_id);
			$stmt->execute();
			$result = $stmt->get_result();
			while($rowCategory = $result->fetch_assoc())
			{
			$stmt = $dbCon->prepare("insert into `qloudid`.`professional_marketplace_nonpremium_domain`(`marketplace_domain_id`,marketplace_id,created_on,modified_on) values (?,?,now(),now())");
			$stmt->bind_param("ii",$rowCategory['id'],$marketplace_id);
			$stmt->execute();
			}	
			}
			if($data['is_premium']==1)
			{
				$stmt = $dbCon->prepare("select * from professional_marketplace_domain_info where id in (select marketplace_domain_id from professional_marketplace_premium_domain where marketplace_id=? and is_selected=1) and id in(select available_at_domain from professional_service_category where id in(select professional_category_id from professional_marketplace_service_todos where is_selected=1 and marketplace_id=? and published_on_dstricts=1))");
			}
			else if($data['is_premium']==0)
			{
				$stmt = $dbCon->prepare("select * from professional_marketplace_domain_info where id in (select marketplace_domain_id from professional_marketplace_nonpremium_domain where marketplace_id=? and is_selected=1) and id in(select available_at_domain from professional_service_category where id in(select professional_category_id from professional_marketplace_service_todos where is_selected=1 and marketplace_id=? and unaqasa_nonpremium=1))");
			}
			$stmt->bind_param("ii",$marketplace_id,$marketplace_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($rowCategory = $result->fetch_assoc())
			{
				
				if($data['is_premium']==1)
				{
				$stmt = $dbCon->prepare("select count(dishes_detail_information.id) as num from dishes_detail_information where is_physical=2 and is_bookable=1 and is_active=1 and professional_subcategory_id in (select id from professional_service_subcategory where professional_category_id in (select id from professional_service_category where available_at_domain=?) and id in (select subcategory_id from professional_service_subcategory_available  where availablity_type=1) and id in (select professional_subcategory_id from professional_marketplace_service_todos where marketplace_id=? and is_selected=1 and professional_category_id in (select id from professional_service_category where available_at_domain=?)   and published_on_dstricts=1) and id in (select professional_subcategory_id from professional_company_selected_service_todos where company_id in(select company_id from professional_company_selected_areas where city_id=? and is_selected=1) and is_selected=1 and professional_category_id in (select id from professional_service_category where available_at_domain=?))) and dishes_detail_information.id in (select service_id from dish_marketplace_information where marketplace_id=? and is_published=1)");
				}
				else
				{
				$stmt = $dbCon->prepare("select count(dishes_detail_information.id) as num from dishes_detail_information where is_physical=2 and is_bookable=1 and is_active=1 and professional_subcategory_id in (select id from professional_service_subcategory where professional_category_id in (select id from professional_service_category where available_at_domain=?) and id in (select subcategory_id from professional_service_subcategory_available  where availablity_type=1) and id in (select professional_subcategory_id from professional_marketplace_service_todos where unaqasa_nonpremium=1 and marketplace_id=? and is_selected=1 and professional_category_id in (select id from professional_service_category where available_at_domain=?) ) and id in (select professional_subcategory_id from professional_company_selected_service_todos where   company_id in(select company_id from professional_company_selected_areas where city_id=? and is_selected=1) and is_selected=1 and professional_category_id in (select id from professional_service_category where available_at_domain=?))) and dishes_detail_information.id in (select service_id from dish_marketplace_information where marketplace_id=? and is_published=1)");	
				}
				$stmt->bind_param("iiiiii",$rowCategory['id'],$marketplace_id,$rowCategory['id'],$area_id,$rowCategory['id'],$marketplace_id);
				$stmt->execute();
				$result5 = $stmt->get_result();
				$row5 = $result5->fetch_assoc();
				if($row5['num']==0)
				{
					continue;
				}
				
			$row['profile_pic']=$rowCategory['marketplace_domain_image'];
					if($row['profile_pic']=="" || $row['profile_pic']==null)
					{
						$rowCategory['marketplace_domain_image']='https://www.qloudid.com/html/usercontent/images/default-profile-pic.jpg';
					}
					else
					{
					$filename="../estorecss/".$row['profile_pic'].".txt"; $value_a=file_get_contents("../estorecss/".$row['profile_pic'].".txt"); $value_a=str_replace('"','',$value_a); $image = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['profile_pic'].'.jpg' );
					$rowCategory['marketplace_domain_image']=str_replace('../','https://www.qloudid.com/',$image);	
					}
					 
			$rowCategory['enc']=$this->encrypt_decrypt('encrypt',$rowCategory['id']);
			array_push($org,$rowCategory);
			 
			}
				$stmt->close();
				$dbCon->close();
				return $org;	
			}	
			
			
			function professionalSelectedDomainDetail($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$md_id=$this->encrypt_decrypt('decrypt',$data['md_id']);
			$stmt = $dbCon->prepare("select * from professional_marketplace_domain_info where id=?");
			$stmt->bind_param("i",$md_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCategory = $result->fetch_assoc();
				$stmt->close();
				$dbCon->close();
				return $rowCategory;	
			}	
	 
		function bookingInformationDetail($data)
		{
			$dbCon = AppModel::createConnection();
			$hotel_checkin_id= $this -> encrypt_decrypt('decrypt',$data['hotel_checkin_id']);
			$stmt = $dbCon->prepare("select * from hotel_checkout_detail where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $hotel_checkin_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select  first_name,last_name,email,country_of_residence,phone_number  from user_logins  left join user_profiles on user_profiles.user_logins_id=user_logins.id where user_logins.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowUser = $result->fetch_assoc();	
			
			$stmt = $dbCon->prepare("select  vitech_city,first_name,last_name,email,country_of_residence,phone_number,user_address.entry_code,property_nickname as hotel_name,wifi_available,wifi_password,wifi_username from user_address left join user_logins on user_logins.id=user_address.user_id left join user_profiles on user_profiles.user_logins_id=user_address.user_id where user_address.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['room_type_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowPrice = $result->fetch_assoc();	
			
			$stmt = $dbCon->prepare("select * from user_address where id=?");
        
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['room_type_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowApartment = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select count(id) as num from user_aprtment_company_building_connect_request where user_address_id=?");
        
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['room_type_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRequest = $result->fetch_assoc();
			 
			
			$stmt = $dbCon->prepare("select * from vitech_city where id=?");
        
			/* bind parameters for markers */
			$stmt->bind_param("i", $rowApartment['vitech_city']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowVitech = $result->fetch_assoc();
			
			$address=$rowApartment['city'];
			$url = "http://api.locationiq.com/v1/autocomplete.php?key=pk.1daa15e048f0e38b45be79dc1ecad248&q=".$address;
			$ch = curl_init();
			curl_setopt($ch, CURLOPT_URL, $url);
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
			curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);   
			curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'GET');      
			$responseJson = curl_exec($ch);
			echo curl_error($ch);
			curl_close($ch);
			 
			$response = json_decode($responseJson,true);
	 
	 
			$select="select id,country_name from phone_country_code where country_name='".$response[0]['address']['country']."'";
		  
		   
			$result=mysqli_query($dbCon, $select); 
			
			$rowCountry=mysqli_fetch_array($result);
			$row['request_num']=$rowRequest['num'];
			$row['district_rent']=$rowApartment['district_rent'];
			$row['district_short_rent']=$rowApartment['district_short_rent'];
			$row['district_sale']=$rowApartment['district_sale'];
			$row['building_id']=$rowApartment['building_id'];
			$row['property_type']=$rowApartment['property_type'];
			$row['viarea_id']=$rowApartment['vitech_area'];
			$row['city_name']=$rowVitech['city_name'];
			$row['vicity_id']=$rowApartment['vitech_city'];
			$row['city_id']=$this->encrypt_decrypt('encrypt',$rowApartment['vitech_city']);
			$row['apartment_country_id']=$rowCountry['id'];
			$row['apartment_country_name']=$rowCountry['country_name'];
			$row['apartment_id']=$this->encrypt_decrypt('encrypt',$rowApartment['id']);
			$row['country_of_residence']=$rowPrice['country_of_residence'];
			$row['phone_number']=$rowPrice['phone_number'];
			$row['wifi_username']=$rowPrice['wifi_username'];	
			$row['wifi_password']=$rowPrice['wifi_password'];
			$row['wifi_available']=$rowPrice['wifi_available'];
			$row['wifi_username']=$rowPrice['wifi_username'];	
			$row['entry_code']=$rowPrice['entry_code'];		
			$row['hotel_name']=$rowPrice['hotel_name'];
			$row['uid']=$this->encrypt_decrypt('encrypt',$row['user_id']);
			$row['first_name']=$rowUser['first_name'];
			$row['last_name']=$rowUser['last_name'];
			$row['email']=$rowUser['email'];
			$row['buyer_country']=$rowUser['country_of_residence'];
			$row['buyer_phone']=$rowUser['phone_number'];
			$row['city']=$rowApartment['city'];
			$row['is_premium']=$rowApartment['is_premium'];
			$stmt->close();
			$dbCon->close();
			return $row;	
		}
	
		function bookingCityDetail($data)
		{
			$dbCon = AppModel::createConnection();
			$hotel_checkin_id= $this -> encrypt_decrypt('decrypt',$data['hotel_checkin_id']);
			$stmt = $dbCon->prepare("select * from hotel_checkout_detail where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $hotel_checkin_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			 
			$stmt = $dbCon->prepare("select * from user_address where id=?");
        
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['room_type_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowApartment = $result->fetch_assoc();
			 
			
			$stmt = $dbCon->prepare("select * from vitech_city where id=?");
        
			/* bind parameters for markers */
			$stmt->bind_param("i", $rowApartment['vitech_city']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowVitech = $result->fetch_assoc();
			 
			 
			$rowApartment['region_id']=$rowVitech['region_id'];
			 
			$stmt->close();
			$dbCon->close();
			return $rowApartment;	
		}
	
	
	
		function phoneCountryCode()
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select * from phone_country_code order by country_name");
			/* bind parameters for markers */
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				array_push($org,$row);
			}
			
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		function bookingApartmentInformationDetail($data)
		{
			$dbCon = AppModel::createConnection();
			$bookingInformationDetail= $this -> bookingInformationDetail($data);
			$hotel_checkin_id= $this -> encrypt_decrypt('decrypt',$data['hotel_checkin_id']);
			$stmt = $dbCon->prepare("select * from user_address where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $bookingInformationDetail['room_type_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$data['aid']=$bookingInformationDetail['room_type_id'];
			$row['childrenInfo']=$this->childrenInfoDstricts($data);
			$row['eventsInfo']=$this->eventsInfoDstricts($data);
			$stmt->close();
			$dbCon->close();
			return $row;	
		}
		
		
		
		 function childrenInfoDstricts($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select children_allowed,infants_allowed from user_address where id=?");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();
			$result = $stmt->get_result(); 
			$row = $result->fetch_assoc();
		$org='';
			 						
		if($row['children_allowed']==1)
		{
			$children_allowed='<a href="javascript:void(0);" >
										 <div class="css-cedhmb">
												  <div tabindex="0" role="button" class="css-1w0xfwu">
													 <span class="chip chip_is-selected" style="border:1px solid #E8681F!important; background-color:#E8681F !important; color:#000000;">
													 <span class="chip_content">
													 
														<span class="chip_text changedText">Children</span>
													 </span>
												  </span>
												  </div>
											   </div>
											   </a>';
		}
		else
		{
		$children_allowed='<a href="javascript:void(0);">
												<div  class="css-cedhmb">
														 <div tabindex="0" role="button"  class="css-1w0xfwu">
															<span class="chip chip_not-selected" style="border:1px solid #777E90 !important;">
															   <span class="chip_content">
																  
																  <span class="chip_text txt_777E90 changedText">Children</span>
															   </span>
															</span>
														 </div>
													  </div></a>';	
		}
		
		if($row['infants_allowed']==1)
		{
			$infants_allowed='<a href="javascript:void(0);">
			<div  class="css-cedhmb">
						   <div tabindex="0" role="button"   class="css-1w0xfwu">
							  <span class="chip chip_is-selected" style="border:1px solid #E8681F!important; background-color:#E8681F !important; color:#000000;">
													 <span class="chip_content">
														 
														<span class="chip_text changedText">infants</span>
													 </span>
												  </span>
						   </div>
						</div></a>';
		}
		else
		{
		$infants_allowed='<a href="javascript:void(0);">
		<div   class="css-cedhmb">
														 <div tabindex="0" role="button"   class="css-1w0xfwu">
															<span class="chip chip_not-selected" style="border:1px solid #777E90 !important;">
															   <span class="chip_content">
																 
																  <span class="chip_text txt_777E90 changedText">Infants</span>
															   </span>
															</span>
														 </div>
													  </div></a>';	
		}
		
		 $org=$org.''.$children_allowed.''.$infants_allowed;
			 
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		
			function eventsInfoDstricts($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select smoking_allowed,events_allowed,pets_allowed from user_address where id=?");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();
			$result = $stmt->get_result(); 
			$row = $result->fetch_assoc();
		    $org='';
			 						
		if($row['smoking_allowed']==1)
		{
			$smoking_allowed='<a href="javascript:void(0);"  >
										 <div class="css-cedhmb">
												  <div tabindex="0" role="button" class="css-1w0xfwu">
													 <span class="chip chip_is-selected" style="border:1px solid #E8681F!important; background-color:#E8681F !important; color:#000000;">
													 <span class="chip_content">
														 
														<span class="chip_text changedText">Smoking</span>
													 </span>
												  </span>
												  </div>
											   </div>
											   </a>';
		}
		else
		{
		$smoking_allowed='<a href="javascript:void(0);"  >
												<div  class="css-cedhmb">
														 <div tabindex="0" role="button"  class="css-1w0xfwu">
															<span class="chip chip_not-selected" style="border:1px solid #777E90 !important;">
															   <span class="chip_content">
																   
																  <span class="chip_text txt_777E90 changedText">Smoking</span>
															   </span>
															</span>
														 </div>
													  </div></a>';	
		}
		
		if($row['events_allowed']==1)
		{
			$events_allowed='<a href="javascript:void(0);"  >
			<div  class="css-cedhmb">
						   <div tabindex="0" role="button"   class="css-1w0xfwu">
							  <span class="chip chip_is-selected" style="border:1px solid #E8681F!important; background-color:#E8681F !important; color:#000000;">
													 <span class="chip_content">
														 
														<span class="chip_text changedText">Parties/Events</span>
													 </span>
												  </span>
						   </div>
						</div></a>';
		}
		else
		{
		$events_allowed='<a href="javascript:void(0);"  >
		<div   class="css-cedhmb">
														 <div tabindex="0" role="button"   class="css-1w0xfwu">
															<span class="chip chip_not-selected" style="border:1px solid #777E90 !important;">
															   <span class="chip_content">
																  
																  <span class="chip_text txt_777E90 changedText">Parties/Events</span>
															   </span>
															</span>
														 </div>
													  </div></a>';	
		}
		
		
		if($row['pets_allowed']==1)
		{
			$pets_allowed='<a href="javascript:void(0);" >
			<div  class="css-cedhmb">
						   <div tabindex="0" role="button"   class="css-1w0xfwu">
							  <span class="chip chip_is-selected" style="border:1px solid #E8681F!important; background-color:#E8681F !important; color:#000000;">
													 <span class="chip_content">
														 
														<span class="chip_text changedText">Pets</span>
													 </span>
												  </span>
						   </div>
						</div></a>';
		}
		else
		{
		$pets_allowed='<a href="javascript:void(0);"  >
		<div   class="css-cedhmb">
														 <div tabindex="0" role="button"   class="css-1w0xfwu">
															<span class="chip chip_not-selected" style="border:1px solid #777E90 !important;">
															   <span class="chip_content">
																   
																  <span class="chip_text txt_777E90 changedText">Pets</span>
															   </span>
															</span>
														 </div>
													  </div></a>';	
		}
		
		 $org=$org.''.$smoking_allowed.''.$events_allowed.''.$pets_allowed;
			 
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		
		
		 function childrenInfo($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select children_allowed,infants_allowed from user_address where id=?");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();
			$result = $stmt->get_result(); 
			$row = $result->fetch_assoc();
		$org='';
			 						
		if($row['children_allowed']==1)
		{
			$children_allowed='<a href="javascript:void(0);" >
										 <div class="css-cedhmb">
												  <div tabindex="0" role="button" class="css-1w0xfwu">
													 <span class="chip chip_is-selected" style="border:1px solid #777E90 !important;">
													 <span class="chip_content">
														<div class="css-utgzrm"></div>
														<span class="chip_text">Children</span>
													 </span>
												  </span>
												  </div>
											   </div>
											   </a>';
		}
		else
		{
		$children_allowed='<a href="javascript:void(0);">
												<div  class="css-cedhmb">
														 <div tabindex="0" role="button"  class="css-1w0xfwu">
															<span class="chip chip_not-selected" style="border:1px solid #777E90 !important;">
															   <span class="chip_content">
																  
																  <span class="chip_text txt_777E90 ">Children</span>
															   </span>
															</span>
														 </div>
													  </div></a>';	
		}
		
		if($row['infants_allowed']==1)
		{
			$infants_allowed='<a href="javascript:void(0);">
			<div  class="css-cedhmb">
						   <div tabindex="0" role="button"   class="css-1w0xfwu">
							  <span class="chip chip_is-selected" style="border:1px solid #777E90 !important;">
													 <span class="chip_content">
														<div class="css-utgzrm"></div>
														<span class="chip_text">infants</span>
													 </span>
												  </span>
						   </div>
						</div></a>';
		}
		else
		{
		$infants_allowed='<a href="javascript:void(0);">
		<div   class="css-cedhmb">
														 <div tabindex="0" role="button"   class="css-1w0xfwu">
															<span class="chip chip_not-selected" style="border:1px solid #777E90 !important;">
															   <span class="chip_content">
																 
																  <span class="chip_text txt_777E90">Infants</span>
															   </span>
															</span>
														 </div>
													  </div></a>';	
		}
		
		 $org=$org.''.$children_allowed.''.$infants_allowed;
			 
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		
		function workingHrs()
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select * from working_hrs");
			
			/* bind parameters for markers */
			 
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			 
			while($row = $result->fetch_assoc())
			{
				array_push($org,$row);
				 
			}
			 
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
	
		
		function eventsInfo($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select smoking_allowed,events_allowed,pets_allowed from user_address where id=?");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();
			$result = $stmt->get_result(); 
			$row = $result->fetch_assoc();
		    $org='';
			 						
		if($row['smoking_allowed']==1)
		{
			$smoking_allowed='<a href="javascript:void(0);"  >
										 <div class="css-cedhmb">
												  <div tabindex="0" role="button" class="css-1w0xfwu">
													 <span class="chip chip_is-selected" style="border:1px solid #777E90 !important;">
													 <span class="chip_content">
														<div class="css-utgzrm"></div>
														<span class="chip_text">Smoking</span>
													 </span>
												  </span>
												  </div>
											   </div>
											   </a>';
		}
		else
		{
		$smoking_allowed='<a href="javascript:void(0);"  >
												<div  class="css-cedhmb">
														 <div tabindex="0" role="button"  class="css-1w0xfwu">
															<span class="chip chip_not-selected" style="border:1px solid #777E90 !important;">
															   <span class="chip_content">
																   
																  <span class="chip_text txt_777E90 ">Smoking</span>
															   </span>
															</span>
														 </div>
													  </div></a>';	
		}
		
		if($row['events_allowed']==1)
		{
			$events_allowed='<a href="javascript:void(0);"  >
			<div  class="css-cedhmb">
						   <div tabindex="0" role="button"   class="css-1w0xfwu">
							  <span class="chip chip_is-selected" style="border:1px solid #777E90 !important;">
													 <span class="chip_content">
														<div class="css-utgzrm"></div>
														<span class="chip_text">Parties/Events</span>
													 </span>
												  </span>
						   </div>
						</div></a>';
		}
		else
		{
		$events_allowed='<a href="javascript:void(0);"  >
		<div   class="css-cedhmb">
														 <div tabindex="0" role="button"   class="css-1w0xfwu">
															<span class="chip chip_not-selected" style="border:1px solid #777E90 !important;">
															   <span class="chip_content">
																  
																  <span class="chip_text txt_777E90 ">Parties/Events</span>
															   </span>
															</span>
														 </div>
													  </div></a>';	
		}
		
		
		if($row['pets_allowed']==1)
		{
			$pets_allowed='<a href="javascript:void(0);" >
			<div  class="css-cedhmb">
						   <div tabindex="0" role="button"   class="css-1w0xfwu">
							  <span class="chip chip_is-selected" style="border:1px solid #777E90 !important;">
													 <span class="chip_content">
														<div class="css-utgzrm"></div>
														<span class="chip_text">Pets</span>
													 </span>
												  </span>
						   </div>
						</div></a>';
		}
		else
		{
		$pets_allowed='<a href="javascript:void(0);"  >
		<div   class="css-cedhmb">
														 <div tabindex="0" role="button"   class="css-1w0xfwu">
															<span class="chip chip_not-selected" style="border:1px solid #777E90 !important;">
															   <span class="chip_content">
																   
																  <span class="chip_text txt_777E90 ">Pets</span>
															   </span>
															</span>
														 </div>
													  </div></a>';	
		}
		
		 $org=$org.''.$smoking_allowed.''.$events_allowed.''.$pets_allowed;
			 
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		
		
		
		function jobReviewDetail()
		{ 
		
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select concat_ws(' ', first_name, last_name) as name,passport_image,review_star,review_description from  user_professional_service_request left join user_logins on user_logins.id=user_professional_service_request.user_id where user_professional_service_request.review_done=1 order by review_date desc");
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			$filename="../estorecss/".$row ['passport_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['passport_image'].".txt"); $value_a=str_replace('"','',$value_a); $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['passport_image'].'.jpg' ); } else { $imgs="../html/usercontent/images/person-male.png"; } 
			$row['passport_image']=str_replace('../','',$imgs); $row['passport_image']='https://www.qloudid.com/'.$row['passport_image']; 
			array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close(); 
			return $org;
		}
			
		function updateProfessionalJobStatus($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update user_professional_service_request set job_status=? where id=?");
			$stmt->bind_param("ii", $data['job_status'], $data['job_id']);
			$stmt->execute();
			if($data['job_status']==2)
			{
			$data['job_id']=$this->encrypt_decrypt('encrypt',$data['job_id']);
			$this->sendReviewEmail($data);	
			}
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function sendReviewEmail($data)
		{
			$dbCon = AppModel::createConnection();
			$job_id=$this->encrypt_decrypt('decrypt',$data['job_id']);
			$stmt = $dbCon->prepare("select email,concat_ws(' ', first_name, last_name) as name,passport_image,review_star,review_description from  user_professional_service_request left join user_logins on user_logins.id=user_professional_service_request.user_id where user_professional_service_request.id=?");
			$stmt->bind_param("i", $job_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$to            = $row['email'];
			$subject       = "Job completed!";
			$emailContent='<html xmlns="http://www.w3.org/1999/xhtml" style="background-color: rgb(240, 240, 240);"><head>
  <title>Reservation confirmed</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <style type="text/css">
    /* GT AMERICA */

    @font-face {
      font-display: fallback;
      font-family: "GT America Regular";
      font-weight: 400;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
    }

    @font-face {
      font-display: fallback;
      font-family: "GT America Medium";
      font-weight: 600;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
    }

    @font-face {
      font-display: fallback;
      font-family: "GT America Condensed Bold";
      font-weight: 700;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
    }

    /* CLIENT-SPECIFIC RESET */

    body,
    table,
    td,
    a {
      -webkit-text-size-adjust: 100%;
      -ms-text-size-adjust: 100%;
    }

    /* Prevent WebKit and Windows mobile changing default text sizes */

    table,
    td {
      mso-table-lspace: 0pt;
      mso-table-rspace: 0pt;
    }

    /* Remove spacing between tables in Outlook 2007 and up */

    img {
      -ms-interpolation-mode: bicubic;
    }

    /* Allow smoother rendering of resized image in Internet Explorer */

    .im {
      color: inherit !important;
    }

    /* DEVICE-SPECIFIC RESET */

    a[x-apple-data-detectors] {
      color: inherit !important;
      text-decoration: none !important;
      font-size: inherit !important;
      font-family: inherit !important;
      font-weight: inherit !important;
      line-height: inherit !important;
    }

    /* iOS BLUE LINKS */

    /* RESET */

    img {
      border: 0;
      height: auto;
      line-height: 100%;
      outline: none;
      text-decoration: none;
      display: block;
    }

    table {
      border-collapse: collapse;
    }

    table td {
      border-collapse: collapse;
      display: table-cell;
    }

    body {
      height: 100% !important;
      margin: 0 !important;
      padding: 0 !important;
      width: 100% !important;
    }

    /* BG COLORS */

    .mainTable {
      background-color: #F0F0F0;
    }

    .mainTable--hospitality {
      background-color: #f7f2ed;
    }

    html {
      background-color: #F0F0F0;
    }

    /* VARIABLES */

    .bg-white {
      background-color: white;
    }

    .hr {
      /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
      background-color: #d3d3d8;
      border-collapse: collapse;
      mso-table-lspace: 0pt;
      mso-table-rspace: 0pt;
      mso-line-height-rule: exactly;
      line-height: 1px;
    }

    .textAlignLeft {
      text-align: left !important;
    }

    .textAlignRight {
      text-align: right !important;
    }

    .textAlignCenter {
      text-align: center !important;
    }

    .mt1 {
      margin-top: 6px;
    }

    .list {
      padding-left: 18px;
      margin: 0;
    }

    /* TYPOGRAPHY */

    body {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      color: #4f4f65;
      -webkit-font-smoothing: antialiased;
      -ms-text-size-adjust: 100%;
      -moz-osx-font-smoothing: grayscale;
      font-smoothing: always;
      text-rendering: optimizeLegibility;
    }

    .h1 {
      font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 700;
      vertical-align: middle;
      font-size: 36px;
      line-height: 42px;
    }

    .h2 {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 600;
      vertical-align: middle;
      font-size: 16px;
      line-height: 24px;
    }

    .text {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 16px;
      line-height: 21px;
    }

    .text-list {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 16px;
      line-height: 25px;
    }

    .textSmall {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 14px;
    }

    .text-xsmall {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-size: 11px;
      text-transform: uppercase;
      line-height: 22px;
      letter-spacing: 1px;
    }

    .text-bold {
      font-weight: 600;
    }

    .text-link {
      text-decoration: underline;
    }

    .text-linkNoUnderline {
      text-decoration: none;
    }

    .text-strike {
      text-decoration: line-through;
    }

    /* FONT COLORS */

    .textColorDark {
      color: #23233e;
    }

    .textColorNormal {
      color: #4f4f65;
    }

    .textColorBlue {
      color: #2020c0;
    }

    .textColorGrayDark {
      color: #7B7B8B;
    }

    .textColorGray {
      color: #A5A8AD;
    }

    .textColorWhite {
      color: #FFFFFF;
    }

    .textColorRed {
      color: #df3232;
    }

    /* BUTTON */

    .Button-primary-wrapper {
      border-radius: 3px;
      background-color: #2020C0;
    }

    .Button-primary {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      border-radius: 3px;
      border: 1px solid #2020C0;
      color: #ffffff;
      display: block;
      font-size: 16px;
      font-weight: 600;
      padding: 18px;
      text-decoration: none;
    }

    .Button-secondary-wrapper {
      border-radius: 3px;
      background-color: #ffffff;
    }

    .Button-secondary {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      border-radius: 3px;
      border: 1px solid #2020C0;
      color: #2020C0;
      display: block;
      font-size: 16px;
      font-weight: 600;
      padding: 18px;
      text-decoration: none;
    }

    /* LAYOUT */

    .Content-container {
      padding-left: 60px;
      padding-right: 60px;
    }

    .Content-container--main {
      padding-top: 54px;
      padding-bottom: 60px;
    }

    .Content {
      width: 580px;
      margin: 0 auto;
    }

    .wrapper {
      max-width: 600px;
    }

    .section {
      padding: 24px 0px;
      border-bottom: 1px solid #d3d3d8;
    }

    .section--noBorder {
      padding: 24px 0px 0;
    }

    .section--last {
      padding: 24px 0px;
    }

    .message {
      background-color: #F4F4F5;
      padding: 18px;
    }

    .card {
      border: 1px solid #d3d3d8;
      padding: 18px;
    }

    /* HEADER */

    .header-tockLogoImage {
      display: block;
      color: #F0F0F0;
    }

    .header-heroImage {
      padding-bottom: 24px;
    }

    /* PREHEADER */

    .preheader {
      display: none;
      font-size: 1px;
      color: #FFFFFF;
      line-height: 1px;
      max-height: 0px;
      max-width: 0px;
      opacity: 0;
      overflow: hidden;
    }

    /* BANNER */

    .notice {
      padding: 12px;
      background: #23233E;
      color: #FFFFFF;
      display: block;
      font-size: 14px;
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 600;
    }

    /* INTRO */

    .section--intro {
      padding-bottom: 48px;
    }

    /* BOOKING INFO */

    .business-logo__container {
      width: 48px;
      height: 48px;
      border-radius: 3px;
      border: 1px solid #d3d3d8;
      overflow: hidden;
    }

    .business-logo__image {
      border: 1px solid transparent;
      border-radius: 3px;
      width: 48px;
      height: 48px;
      display: block;
    }

    .business-address--address {
      width: 50%;
    }

    .business-address--map {
      width: 50%;
    }

    .business-address--map-image {
      width: 100%;
    }

    /* MOBILE TICKETS */

    .mobile-ticket--description {
      width: 65%;
      margin-top: 12px;
      margin-right: 5%;
    }

    .mobile-ticket--code {
      width: 30%;
    }

    .mobile-ticket--code-image {
      width: 100%;
    }

    /* RESERVATION ACTIONS */

    .linksTable {
      border-bottom: 1px solid #d3d3d8;
    }

    .linksTableRow {
      padding: 24px 12px;
    }

    .actions-icon {
      vertical-align: middle;
    }

    .actions-text {
      vertical-align: middle;
    }

    /* RECEIPT */

    .receipt__container {
      border: 1px solid #d3d3d8;
      padding: 24px;
    }

    .receipt__row {
      border-top: 1px solid #d3d3d8;
    }

    /* FEEDBACK ICONS */

    .feedback-link {
      border: 1px solid #d4d5da;
      border-radius: 3px;
      display: inline-block;
      width: calc(32% - 2px);
      padding: 10px 0;
    }

    .feedback-link-bumper {
      display: inline-block;
      width: 1%;
    }

    .feedback-link img {
      height: 50px;
      width: 50px;
    }

    /* SOCIAL ICONS */

    .social-link {
      display: inline-block;
      width: auto;
    }

    .social-link-text {
      padding: 14px 24px 14px 14px;
    }

    /* TABLET STYLES */

    @media screen and (max-width: 648px) {
      /* DEVICE-SPECIFIC RESET */
      div[style*="margin: 16px 0;"] {
        margin: 0 !important;
      }
      /* ANDROID CENTER FIX */
      /* LAYOUT */
      .wrapper {
        width: 100% !important;
        max-width: 100% !important;
      }
      .Content {
        width: 90% !important;
      }
      .Content-container {
        padding-left: 36px !important;
        padding-right: 36px !important;
      }
      .Content-container--main {
        padding-top: 30px !important;
        padding-bottom: 42px !important;
      }
      .responsiveTable {
        width: 100% !important;
      }
      /* RESERVATION ACTIONS */
      .linksTableRow {
        padding-left: 0 !important;
        padding-right: 0 !important;
        padding-top: 12px !important;
        padding-bottom: 12px !important;
      }
      .linksTableRow--borderRight {
        border-right: none !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      /* FEEDBACK LINK */
      .feedback-link img {
        height: 38px !important;
        width: 38px !important;
      }
    }

    /* MOBILE STYLES */

    @media screen and (max-width: 480px) {
      /* TYPOGRAPHY */
      .h1 {
        font-size: 30px !important;
        line-height: 30px !important;
      }
      .text {
        font-size: 16px !important;
        line-height: 22px !important;
      }
      /* BUTTON */
      .mobile-buttonContainer {
        width: 100% !important;
      }
      /* LAYOUT */
      .Content {
        width: 100% !important;
      }
      .Content-container {
        padding-left: 18px !important;
        padding-right: 18px !important;
      }
      .Content-container--main {
        padding-top: 24px !important;
        padding-bottom: 30px !important;
      }
      .section {
        padding: 18px 0 !important;
      }
      .section--last {
        padding: 18px 0 !important;
      }
      .header {
        padding: 0 18px !important;
      }
      .business-address--address {
        width: 100% !important;
      }
      .business-address--map {
        margin-top: 30px !important;
        width: 100% !important;
      }
      .mobile-ticket--description {
        width: 100% !important;
        margin-top: 0px !important;
      }
      .mobile-ticket--code {
        margin-top: 30px !important;
        margin-left: 0;
        width: 100% !important;
      }
      /* RECEIPT */
      .receipt__container {
        padding: 12px !important;
      }
      /* SOCIAL ICONS */
      .social-link {
        display: block !important;
        width: 100% !important;
        border-bottom: 1px solid #d3d3d8 !important;
      }
      /* INTRO */
      .section--intro {
        padding-top: 18px !important;
        padding-bottom: 18px !important;
      }
    }
  </style>
</head>

<body style="margin: 0 !important; padding: 0 !important; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; height: 100%; margin: 0; padding: 0; width: 100%; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; color: rgb(79, 79, 101); -webkit-font-smoothing: antialiased; -ms-text-size-adjust: 100%; -moz-osx-font-smoothing: grayscale; font-smoothing: always; text-rendering: optimizeLegibility;">
   
  <!--[if mso]>
    <style type="text/css">
.h1 {font-family: "Helvetica", "Arial", sans-serif !important; font-weight: 700 !important; vertical-align: middle !important; font-size: 36px !important; mso-line-height-rule: exactly;line-height: 42px !important;}
.h2 {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 600 !important;vertical-align: middle !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 24px !important;}
.text {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 21px !important;}
.text-list {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 25px !important;}
.textSmall {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 14px !important;}
.text-xsmall {font-family: "Helvetica", "Arial", sans-serif !important;font-size: 11px !important;text-transform: uppercase !important;mso-line-height-rule: exactly;line-height: 22px !important;letter-spacing: 1px !important;}
.text-bold {font-weight: 600 !important;}
.text-link {text-decoration: underline !important;}
.text-linkNoUnderline {text-decoration: none !important;}
.text-strike {text-decoration: line-through !important;}
.textColorDark {color: #23233e !important;}
.textColorNormal {color: #4f4f65 !important;}
.textColorBlue {color: #2020c0 !important;}
.textColorGray {color: #A5A8AD !important;}
.textColorWhite {color: #FFFFFF !important;}
.Button-primary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #ffffff !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
.Button-secondary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #2020C0 !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
    </style>
    <![endif]-->
  <!-- HIDDEN PREHEADER TEXT -->
  <div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;">
  </div>
  <table border="0" cellpadding="0" cellspacing="0" width="100%" class=" mainTable  " style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: rgb(240, 240, 240);">
    <tbody>
<tr>
<td style="display:none !important;
 visibility:hidden;
 mso-hide:all;
 font-size:1px;
 color:#ffffff;
 line-height:1px;
 max-height:0px;
 max-width:0px;
 opacity:0;
 overflow:hidden; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> We are thrilled that you will be joining us. If yo... </td>
    <!-- HEADER -->
    </tr>
<tr>
      <td align="center" class="header" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 580px; margin: 0 auto;">
          <tbody>
<tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <h1 style="font-size: 33px;font-weight: 800;line-height: 30px;">Pickapro</h1>               </td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
        </tbody>
</table>
        <!--[if (gte mso 9)|(IE)]>
    </td>
    </tr>
    </table>
    <![endif]-->
      </td>
    </tr>
    <!-- CONTENT -->
    <tr>
      <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content bg-white" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: white; width: 580px; margin: 0 auto;">
          <tbody>
<tr>
            <td class="Content-container Content-container--main text textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101); padding-left: 60px; padding-right: 60px; padding-top: 54px; padding-bottom: 60px;">
              <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                <!-- RESTAURANT INFO -->
                <tbody>
<tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody>

                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                    </tbody>
</table>
                  </td>
                </tr>
                <!-- INTRO -->
                <tr>
                  <td valign="top" align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody>
<tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h1 textColorDark" style="font-family: &quot;GT America Condensed Bold&quot;, &quot;Roboto Condensed&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 700; vertical-align: middle; font-size: 36px; line-height: 42px; color: rgb(35, 35, 62);">Job Completed</span>                          </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                          <!--[if gte mso 15]>&nbsp;<![endif]-->
                        </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                    </tbody>
</table>
                  </td>
                </tr>
                <!-- MESSAGE -->
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr>
                  <td align="left" class="message" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(244, 244, 245); padding: 18px;">
                    <div class="text textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
                      <span class="text-bold textColorDark" style="font-weight: 600; color: rgb(35, 35, 62);">A message from Qloud ID</span>
                      <br> We are pleased to inform you that the job posted on Pikapro has been completed by the company. Please click on the button below to review the task.
                    </div>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr>
                  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                    <!--[if gte mso 15]>&nbsp;<![endif]-->
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- BOOKING INFO -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody>

                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="center" valign="center" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <table border="0" cellspacing="0" cellpadding="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody>
<tr>
                              <td align="center" valign="center" width="100%" class="Button-primary-wrapper" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; border-radius: 3px; background-color: rgb(32, 32, 192);">
                              <a href="https://www.qloudid.com/public/index.php/UserCompanySignUp/reviewJob/'.$data['job_id'].'" target="_blank" class="Button-primary" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; border-radius: 3px; border: 1px solid rgb(32, 32, 192); color: rgb(255, 255, 255); display: block; font-size: 16px; font-weight: 600; padding: 18px; text-decoration: none;">Review work</a>                                </td>
                            </tr>
                          </tbody>
</table>
                        </td>
                      </tr>
					  
					  <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
					  
					  
					  
                    </tbody>
</table>
                  </td>
                </tr>
                <!-- ADDRESS -->
                <tr>
                  <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody>

                      
                      
                      
                      
                      <tr>
                        <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          
                        </td>
                      </tr>
                    </tbody>
</table>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr>
                  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                    <!--[if gte mso 15]>&nbsp;<![endif]-->
                  </td>
                </tr>
                
                
                <!-- RECEIPT -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" width="100%" cellpadding="0" cellspacing="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      
</table>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- EDIT RECEIPT -->
                <!-- CANCELLATION POLICY -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody>
<tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; font-weight: 600; color: rgb(35, 35, 62);">Review</div>
                        </td>
                      </tr>
                      <tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text textColorNormal mt1" style="margin-top: 6px; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
                            <span>We are done with our job. Kindly review the job by clicking the button above.</span>
                            <span></span>
                          </div>
                        </td>
                      </tr>
                    </tbody>
</table>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- QUESTIONS -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody>
<tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; font-weight: 600; color: rgb(35, 35, 62);">
                            Questions?
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text textColorNormal mt1" style="margin-top: 6px; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
                            If you have questions about your reservation, contact us at&nbsp;
                            <a></a>                            or by calling
                            <a>+46 762072193</a>.
                          </div>
                        </td>
                      </tr>
                    </tbody>
</table>
                  </td>
                </tr>
              </tbody>
</table>
            </td>
          </tr>
        </tbody>
</table>
      </td>
    </tr>
    <!-- FOOTER -->
    <tr>
      <td align="center" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; width: 580px; margin: 0 auto;">
        <!-- Will most likely required a feature flag -->
        <!--[if (gte mso 9)|(IE)]>
<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
<tr>
<td align="center" valign="top" width="600">
<![endif]-->
        <table width="100%" border="0" cellspacing="0" cellpadding="0" align="center" class="Content-container" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; padding-left: 60px; padding-right: 60px;">
          <tbody>
<tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="center" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <a href="https://www.exploretock.com" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;"> <img src="https://storage.googleapis.com/tock-public-assets/images-email-template/tock-brandmark-color.png" width="30" height="30" alt="Tock" border="0" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block;"> </a>              </td>
          </tr>
          <tr class="spacer">
            <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
              <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                 2019 Tock, Inc.
              </div>
              <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                All Rights Reserved
              </div>
            </td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
        </tbody>
</table>
        <!--[if (gte mso 9)|(IE)]>
</td>
</tr>
</table>
<![endif]-->
      </td>
    </tr>
  </tbody>
</table>


</body></html>';
			try {
						  sendEmail($subject, $to, $emailContent);
						}

					 catch(Exception $e) {
						 $to="deservingchandan@gmail.com";
						 sendEmail($subject, $to, $emailContent);
					  
					}
		}
		
		
		function propertyDetail($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select concat_ws(' ', first_name, last_name) as name,address,port_number,apartment_floor,entrance_floor,floors_available,property_layout from  user_address left join user_logins on user_logins.id=user_address.user_id where user_address.id=?");
			$stmt->bind_param("i", $data['user_property_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_bedrooms where user_address_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['user_property_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowBed = $result->fetch_assoc();
			
			
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_bathroom_detail  where user_address_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['user_property_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowBath = $result->fetch_assoc();
			
			$row['bed_count']=$rowBed['num'];
			$row['bath_count']=$rowBath['num'];
			$row['address']=html_entity_decode($row['address'],ENT_NOQUOTES, 'UTF-8');
			$row['name']=html_entity_decode($row['name'],ENT_NOQUOTES, 'UTF-8');
			$stmt->close();
			$dbCon->close(); 
			return $row;
		}
		
		
		function dstrictProfessionalCompanyEmployeeList()
		{
			$dbCon = AppModel::createConnection();
			$company_id= $this -> encrypt_decrypt('decrypt',$_POST['company_id']);
			
			$stmt = $dbCon->prepare("select id,concat_ws(' ',first_name,last_name) as name,email from employees  where company_id=? and user_login_id!=43");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $company_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				$stmt = $dbCon->prepare("select * from employee_service_booking_rules  where employee_id=?");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $row['id']);
				$stmt->execute();
				$resultEmp = $stmt->get_result();
				$rowEmp = $resultEmp->fetch_assoc();
				if(empty($rowEmp))
				{
				$stmt = $dbCon->prepare("insert into employee_service_booking_rules(employee_id,company_id,created_on) values(?,?,now())");
				
				/* bind parameters for markers */
				$stmt->bind_param("ii", $row['id'],$company_id);
				$stmt->execute();	
				}
				$row['enc']= $this -> encrypt_decrypt('encrypt',$row['id']);
				array_push($org,$row);
			}
			 
			
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
		
	 function employeeProfessionalServiceProposals($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			//$dateToday=strtotime(date('Y-m-d'));
			$stmt = $dbCon->prepare("select job_status,booking_time,user_property_id,product_information,category_name,booking_employee_id,user_professional_service_request_company_info.id,job_id,subcategory_name,floor_area,city,is_accepted,project_fee from user_professional_service_request_company_info left join user_professional_service_request on user_professional_service_request.id=user_professional_service_request_company_info.job_id left join professional_service_category on professional_service_category.id=user_professional_service_request.category_id left join professional_service_subcategory on professional_service_subcategory.id=user_professional_service_request.subcategory_id left join user_address on user_address.id=user_professional_service_request.user_property_id where booking_employee_id=(select id from employees where employees.company_id=? and employees.user_login_id=?) and booking_date=? order by user_professional_service_request.created_on desc");
			$stmt->bind_param("iii", $data['company_id'], $data['user_id'],$data['booking_date']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			$stmt = $dbCon->prepare("select * from working_hrs  where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['booking_time']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();
			$row['product_information']= trim(strip_tags($row['product_information']));
			$row['product_information']=str_replace('\r','',$row['product_information']);
			$row['product_information']=str_replace('\n','',$row['product_information']);
			if($row['booking_time']<25)
			{
				$row['am_pm']='am';
			}
			else
			{
				$row['am_pm']='pm';
			}
			$row['booking_time']= $row2['work_time'];
			$row['enc']= $this -> encrypt_decrypt('encrypt',$row['id']);
			array_push($org,$row);
			 
			}
			  
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		
		
	 function employeeProfessionalServiceProposalsDates($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$dateToday=strtotime(date('Y-m-d'));
			$stmt = $dbCon->prepare("select distinct booking_date  from user_professional_service_request_company_info left join user_professional_service_request on user_professional_service_request.id=user_professional_service_request_company_info.job_id left join professional_service_subcategory on professional_service_subcategory.id=user_professional_service_request.subcategory_id left join user_address on user_address.id=user_professional_service_request.user_property_id where booking_employee_id=(select id from employees where employees.company_id=? and employees.user_login_id=?) and booking_date>=? order by booking_date");
			$stmt->bind_param("iii", $data['company_id'], $data['user_id'],$dateToday);
			 
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			$row['actual_date']=date('Y-m-d',$row['booking_date']);
			$row['date_display']=date('d',$row['booking_date']);
			$row['month_display']=date('M',$row['booking_date']);
			array_push($org,$row);
			 
			}
			  
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		
	
	function sendRequest($data)
	{
		 $dbCon = AppModel::createConnection();
		 $company_id= $data['company_id'];
		 
		 
			$stmt = $dbCon->prepare("select id from user_tenants  where user_property_id=? and is_approved not in (0,1,3)");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['b_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			if(empty($row))
			{
				$stmt = $dbCon->prepare("select user_id from user_address  where id=?");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $data['b_id']);
				$stmt->execute();
				$result = $stmt->get_result();
				
				$rowCompany = $result->fetch_assoc();
				$data['user_id']=$rowCompany['user_id'];
				
				$stmt = $dbCon->prepare("select company_name,company_email from companies  where id=?");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $company_id);
				$stmt->execute();
				$result = $stmt->get_result();
				
				$rowCompany = $result->fetch_assoc();
				$j=0;
					while($j==0)
					{
					$code=mt_rand(111111,999999); 
					$stmt = $dbCon->prepare("select id from user_tenants where verification_code=?");
					/* bind parameters for markers */
					$stmt->bind_param("s",$code);
					$stmt->execute();
					$result = $stmt->get_result();
					$rowCode = $result->fetch_assoc();
					if(empty($rowCode))
					{
						$j++;
					}
					}
				$stmt = $dbCon->prepare("INSERT INTO user_tenants (user_login_id, company_id, created_on,company_email,company_name,verification_code,user_property_id) VALUES (?, ?, now(),?,?,?,?)");
				$stmt->bind_param("iisssi", $data['user_id'],$company_id,$rowCompany ['company_email'],$rowCompany ['company_name'],$code,$data['b_id']);
				$stmt->execute();
				$id=$stmt->insert_id;
			 
				 
				
				
				
			$data['cid']=$this -> encrypt_decrypt('encrypt',$data['company_id']);
			$url="https://www.qloudid.com/company/index.php/Landloard/fetchRequestDetail/".$data['cid'];
			$surl=getShortUrl($url);
			$stmt = $dbCon->prepare("select manage_employee_permissions.id,concat_ws(' ', first_name, last_name) as name,is_admin,user_logins.email from manage_employee_permissions left join user_logins on user_logins.id=manage_employee_permissions.user_id where company_id=? and is_admin=1 limit 0,50");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("i", $company_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
				$to=$row['email'];
				$subject="Tenant request received";
				$emailContent='Please go to your landloard app and find the available request using code - '.$code.' or go to web and open '.$surl;
					try {
						  sendEmail($subject, $to, $emailContent);
						}

					 catch(Exception $e) {
					  
					}
			}
				
			}
					$stmt->close();
					$dbCon->close();
					return 1; 
	
	}
	

	function addLandloard($data)
	{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select id from companies  where company_email=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("s", $data['company_email']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if(empty($row))
			{
				$company_id=0;
				 
			}
			else
			{
				$company_id=$row['id'];
			}
				  
				$stmt = $dbCon->prepare("select country_code,country_name from country where id=?");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $data['country_id']);
				$stmt->execute();
				$result = $stmt->get_result();
				$row_country = $result->fetch_assoc();
				$j=0;
					while($j==0)
					{
					$code=mt_rand(111111,999999); 
					$stmt = $dbCon->prepare("select id from user_tenants where verification_code=?");
					/* bind parameters for markers */
					$stmt->bind_param("s",$code);
					$stmt->execute();
					$result = $stmt->get_result();
					$rowCode = $result->fetch_assoc();
					if(empty($rowCode))
					{
						$j++;
					}
					}
				$company_name=htmlentities($data['company_name'],ENT_NOQUOTES, 'ISO-8859-1');
				$stmt = $dbCon->prepare("INSERT INTO user_tenants (manager_email,chairmen_email,vice_chairmen_email,secratory_email,user_login_id, company_id, created_on, company_email,company_name,country_id,phone_number,verification_code,user_property_id) VALUES (?, ?,?, ?,?, ?, now(), ?, ?, ?, ?,?,?)");
				$stmt->bind_param("ssssiississi",$data['manager_email'],$data['chairmen_email'],$data['vice_chairmen_email'],$data['secratory_email'], $data['user_id'],$company_id, $data['company_email'], $company_name,$data['country_id'],$data['phone_number'],$code,$data['b_id']);
				$stmt->execute();
				$id=$stmt->insert_id;
				
				 
				$data['cid']=$this -> encrypt_decrypt('encrypt',$company_id);
				$url="https://www.qloudid.com/company/index.php/Landloard/fetchRequestDetail/".$data['cid'];
				$surl=getShortUrl($url);
		 
				$to=$data['company_email'];
				$subject="Tenant request received";
				$emailContent='Please go to your landloard app and find the available request using code - '.$code.' or go to web and open '.$surl;
					try {
						  sendEmail($subject, $to, $emailContent);
						}

						 
						catch(Exception $e) {
						  
						}
						$to=$data['secratory_email'];
						try {
						  sendEmail($subject, $to, $emailContent);
						}

						 
						catch(Exception $e) {
						  
						}
						$to=$data['manager_email'];
						try {
						  sendEmail($subject, $to, $emailContent);
						}

						 
						catch(Exception $e) {
						  
						}
						
						$to=$data['vice_chairmen_email'];
						try {
						  sendEmail($subject, $to, $emailContent);
						}

						 
						catch(Exception $e) {
						  
						}
						
						$to=$data['chairmen_email'];
						try {
						  sendEmail($subject, $to, $emailContent);
						}

						 
						catch(Exception $e) {
						  
						}
					$to            = '+'.trim($row_country['country_code']).''.trim($data['phone_number']);
					$res=sendSms($subject, $to, $emailContent);
					$stmt->close();
					$dbCon->close();
					return 1;	
		}
	
	function userProperty($data)
    {
        $dbCon = AppModel::createConnection();
       
		
        $stmt = $dbCon->prepare("select * from user_address where user_id = ?  and apartment_id=0 and id not in (select user_property_id from user_tenants where user_login_id=? and user_property_id is not null  and is_approved in(0,1,3)) and id not in (select user_address_id from user_aprtment_company_building_connect_request where is_approved in (0,1))");
        /* bind parameters for markers */
		$cont=1;
       $stmt->bind_param("ii", $data['user_id'],$data['user_id']);
        $stmt->execute();
        $result = $stmt->get_result();
		$org=array();
		while($row = $result->fetch_assoc())
		{
		array_push($org,$row);	
		}
		 $stmt->close();
        $dbCon->close();
		 return $org;
        
        
    }
	function companyListSearch($data)
    {
    $dbCon = AppModel::createConnection();
	ini_set('memory_limit', '-1');
		
	$p="%".htmlentities($data['message'],ENT_NOQUOTES, 'UTF-8')."%";
	$stmt = $dbCon->prepare("select companies.id,company_name,company_email,country_id,address  from companies left join company_profiles on company_profiles.company_id=companies.id   where company_name like ?  and email_verification_status=1  order by companies.id");
	$stmt->bind_param("s", $p);
	$stmt->execute();
	$result = $stmt->get_result();
	$org=array();
	$j=0;
	while($row=mysqli_fetch_array($result))
	{
		$org[$j]['address']=html_entity_decode($row['address'],ENT_NOQUOTES, 'UTF-8');
		$org[$j]['company_name']=html_entity_decode($row['company_name'],ENT_NOQUOTES, 'UTF-8');
		$org[$j]['id']=$row['id'];
		$j++;
	}	
	$stmt->close();
    $dbCon->close();
	return $org;
	}
	
	
	
	function homeRepairCompaniesList($data)
    {
        $dbCon = AppModel::createConnection();
        $request_id= $this -> encrypt_decrypt('decrypt',$data['request_id']);
		//$data['request_id']= $request_id;
		  
        $stmt = $dbCon->prepare("select professional_subcategory_id,subcategory_name,company_name,professional_company_selected_service_todos.company_id,address from professional_company_selected_service_todos left join companies on companies.id=professional_company_selected_service_todos.company_id left join company_profiles on company_profiles.company_id=companies.id left join professional_service_subcategory on professional_service_subcategory.id=professional_company_selected_service_todos.professional_subcategory_id where is_selected=1  and professional_company_selected_service_todos.domain_id=1 and professional_company_selected_service_todos.company_id in (select company_id from professional_company_selected_areas where is_selected=1 and domain_id=1 and area_id in (select vitech_area from user_address where id=?)) and landloard_ticket_subtitle_id=(select subproblem_id from landloard_property_problem_tickets where id=?)");
        /* bind parameters for markers */
		$cont=1;
        $stmt->bind_param("ii", $data['apartment_id'],$request_id);
        $stmt->execute();
        $result = $stmt->get_result();
		$org=array();
		$j=0;
		while($row = $result->fetch_assoc())
		{
			
			$row['enc']=$this -> encrypt_decrypt('encrypt',$row['company_id']);
			array_push($org,$row);
			$org[$j]['images']=array();
				$i=0;
				$stmt = $dbCon->prepare("select * from dish_detail_photos where dish_id in (select id from dishes_detail_information where is_physical=2 and is_bookable=1 and is_active=1 and professional_subcategory_id=? and company_id=?) limit 0,4");
				$stmt->bind_param("ii",$row['professional_subcategory_id'],$row['company_id']);
				$stmt->execute();
				$resultPrice1 = $stmt->get_result();
				while($rowProfile = $resultPrice1->fetch_assoc())
				{
					$row['profile_pic']=$rowProfile['dish_photo_path'];
					if($row['profile_pic']=="" || $row['profile_pic']==null)
					{
						continue;
					}
					else
					{
					$filename="../estorecss/".$row['profile_pic'].".txt"; $value_a=file_get_contents("../estorecss/".$row['profile_pic'].".txt"); $value_a=str_replace('"','',$value_a); $image = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['profile_pic'].'.jpg' );
					$row['profile_pic']=str_replace('../','https://www.qloudid.com/',$image);	
					}
					$org[$j]['images'][$i]['profile_pic']=$row['profile_pic'];
					$i++;
				}
				$j++;
		}
		 $stmt->close();
        $dbCon->close();
		 return $org;
        
        
    }
	 
		function userApartmentTicketList($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select ticket_status,landloard_property_problem_tickets.id,problem_description,landloard_property_problem_tickets.ticket_type,problem_subpart_name as ticket_title,subcategory_name as ticket_subtitle from landloard_property_problem_tickets left join landloard_ticket_title_new on landloard_ticket_title_new.id=landloard_property_problem_tickets.problem_id left join landloard_ticket_subtitle_new on landloard_ticket_subtitle_new.id=landloard_property_problem_tickets.subproblem_id left join landloard_property_problem_tickets_subpart on landloard_property_problem_tickets_subpart.id=landloard_property_problem_tickets.problem_part_id where apartment_id=? and landloard_property_problem_tickets.id not in (select problem_ticket_id from landloard_problem_tickets_company_request where request_status=0 or request_status=1) order by id desc");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			 
			while($row = $result->fetch_assoc())
			{
				$row['enc']=$this -> encrypt_decrypt('encrypt',$row['id']);
				array_push($org,$row);
			}	

			$stmt->close();
			$dbCon->close();
			return $org;			
		}	
		
		function createBookingUserApartmentTicket($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select building_id,company_id,building_type from user_address left join landloard_buildings on landloard_buildings.id=user_address.building_id where user_address.id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowApartment   = $result->fetch_assoc();  
			 
			$stmt = $dbCon->prepare("select who_will_fix_the_problem from `qloudid`.`user_apartment_amenities_subcategory_info` where is_available=1 and user_apartment_amenity_category_id=(select id from user_apartment_amenity_category_info where category_id=? and apartment_id=?) and subcategory_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("iii",$data['ticket_id'],$data['apartment_id'],$data['subticket_id']); 
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc(); 	
			 
			$data['ticket_type']=1;
			$stmt = $dbCon->prepare("insert into `landloard_property_problem_tickets`(qloud_checkout_id,problem_issue,problem_part_id,problem_description,`ticket_type`,`problem_id`,`subproblem_id`,`apartment_id`,`created_on`) values (?,?,?,?,?,?,?,?,now())");
			/* bind parameters for markers */
			$stmt->bind_param("isisiiii",$data['qloud_checkout_id'],$data['problem_issue'],$data['subpart_info'],$data['problem_description'],$data['ticket_type'],$data['ticket_id'],$data['subticket_id'],$data['apartment_id']);
			$stmt->execute();
			$id=$stmt->insert_id;
			
			if($rowApartment['building_id']!=0 && $rowApartment['building_type']>1 && $row2['who_will_fix_the_problem']>1)
			{
				$stmt = $dbCon->prepare("update `landloard_property_problem_tickets` set ticket_assined_to=2,accepting_company_id=? where id=?");
			/* bind parameters for markers */
				$stmt->bind_param("ii",$rowApartment['company_id'],$id);
			$stmt->execute();
			}
			$stmt->close();
			$dbCon->close();
			return $this -> encrypt_decrypt('encrypt',$id);			
			}	
		
		function createUserApartmentTicket($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select building_id,company_id,building_type from user_address left join landloard_buildings on landloard_buildings.id=user_address.building_id where user_address.id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowApartment   = $result->fetch_assoc();  
			 
			$stmt = $dbCon->prepare("select who_will_fix_the_problem from `qloudid`.`user_apartment_amenities_subcategory_info` where is_available=1 and user_apartment_amenity_category_id=(select id from user_apartment_amenity_category_info where category_id=? and apartment_id=?) and subcategory_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("iii",$data['ticket_id'],$data['apartment_id'],$data['subticket_id']); 
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc(); 	
			 
			$data['ticket_type']=1;
			$stmt = $dbCon->prepare("insert into `landloard_property_problem_tickets`(problem_issue,problem_part_id,problem_description,`ticket_type`,`problem_id`,`subproblem_id`,`apartment_id`,`created_on`) values (?,?,?,?,?,?,?,now())");
			/* bind parameters for markers */
			$stmt->bind_param("sisiiii",$data['problem_issue'],$data['subpart_info'],$data['problem_description'],$data['ticket_type'],$data['ticket_id'],$data['subticket_id'],$data['apartment_id']);
			$stmt->execute();
			$id=$stmt->insert_id;
			
			if($rowApartment['building_id']!=0 && $rowApartment['building_type']>1 && $row2['who_will_fix_the_problem']>1)
			{
				$stmt = $dbCon->prepare("update `landloard_property_problem_tickets` set ticket_assined_to=2,accepting_company_id=? where id=?");
			/* bind parameters for markers */
				$stmt->bind_param("ii",$rowApartment['company_id'],$id);
			$stmt->execute();
			}
			$stmt->close();
			$dbCon->close();
			return $id;			
			}	
		
		function addUserApartmentTicketImage($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$data1 = strip_tags($data['ImageData']);
			$data1='url("data:image/png;base64,'.$data1.'")';
			//echo $data; die;
			define('UPLOAD_DIR','../estorecss/'); // image dir path
			$img_name1="new".microtime();
			file_put_contents(UPLOAD_DIR.$img_name1.".txt", $data1);
				 
			$stmt = $dbCon->prepare("insert into `landloard_property_problem_tickets_images`(landloard_property_problem_tickets_id,image_path) values (?,?)");
			/* bind parameters for markers */
			$stmt->bind_param("is",$data['problem_id'],$img_name1);
			$stmt->execute();
			
			
			$stmt->close();
			$dbCon->close();
			return 1;	
			 
			 
		}
		
		function userApartmentProblemDetail($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$row=$this->otherRoomInfo($data);
			$stmt = $dbCon->prepare("select id as ticket_id,ticket_title from `qloudid`.`landloard_ticket_title_new`");
			/* bind parameters for markers */
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$i=1;
			while($row1 = $result->fetch_assoc())
			{
				$row1['enc']=$this->encrypt_decrypt('encrypt',$row1['ticket_id']);
				if($i==1)
				{
				$row1['subpart_info']=0;
				array_push($org,$row1);	
				}
				else
				{
				if($i==2)
				{
				$row1['subpart_info']=22;
				array_push($org,$row1);			
				}
				else if($i==3)
				{
				if($row['kitchen_available']==1)
				{
				$row1['subpart_info']=15;
				array_push($org,$row1);			
				}	
				}
				else if($i==4)
				{
				if($row['entrance_available']==1)
				{
				$row1['subpart_info']=16;
				array_push($org,$row1);			
				}	
				}
				else if($i==5)
				{
				if($row['balcony_available']==1)
				{
				$row1['subpart_info']=10;
				array_push($org,$row1);			
				}	
				}
				else if($i==6)
				{
				if(($row['waste_room_available']+$row['stroller_available']+$row['bicycle_available']+$row['storage_available'])>0)
				{
				$row1['subpart_info']=0;
				array_push($org,$row1);			
				}	
				}
				else if($i==7)
				{
				if($row['basement_available']==1)
				{
				$row1['subpart_info']=13;
				array_push($org,$row1);			
				}	
				}
				else if($i==8)
				{
				if($row['garage_available']==1)
				{
				$row1['subpart_info']=14;
				array_push($org,$row1);			
				}	
				}
				else if($i==9)
				{
				
				$stmt = $dbCon->prepare("select count(id) as num from `qloudid`.`user_apartment_amenities_subcategory_info` where is_available=1 and user_apartment_amenity_category_id=(select id from user_apartment_amenity_category_info where category_id=9 and apartment_id=?)");
				/* bind parameters for markers */
				$stmt->bind_param("i",$data['apartment_id']);
				$stmt->execute();
				$result2 = $stmt->get_result();
				$row2 = $result2->fetch_assoc();
				if($row2['num']>0)
				{
				$row1['subpart_info']=20;
				array_push($org,$row1);			
				}	
				}
				}
				$i++;
			}	
			
			 
			$stmt->close();
			$dbCon->close();
			return $org;			
		}
		
		function selectedProblemSubpartId($data)
		{ 
			$dbCon = AppModel::createConnection();
			  
			if($data['ticket_id']==1 || $data['ticket_id']==6)
			{
				$stmt = $dbCon->prepare("select * from landloard_property_problem_tickets_subpart where id=? ");
				$stmt->bind_param("i", $data['problem_subpart_id']);
			}
			else
			{
				$stmt = $dbCon->prepare("select * from landloard_property_problem_tickets_subpart where landloard_ticket_title_id=?");
				$stmt->bind_param("i", $data['ticket_id']);
			}
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			return $row;
		}
		
		function userApartmentSubpartProblemDetail($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$row=$this->otherRoomInfo($data);
			$org=array();
			$j=0;
			if($data['ticket_id']==1)
			{
				$org[$j]['subpart_info']=21;	
				$org[$j]['subpart_title']='Bedroom';	
				$j++;
				
				if($row['hall_room_available']==1)
				{
				$org[$j]['subpart_info']=1;	
				$org[$j]['subpart_title']='Hall room';	
				$j++;
				}	
				
				if($row['living_room_available']==1)
				{
				$org[$j]['subpart_info']=2;	
				$org[$j]['subpart_title']='Living room';	
				$j++;
				}
				
				if($row['work_room_available']==1)
				{
				$org[$j]['subpart_info']=3;	
				$org[$j]['subpart_title']='Work room';	
				$j++;
				}
				
				if($row['hobby_room_available']==1)
				{
				$org[$j]['subpart_info']=4;	
				$org[$j]['subpart_title']='Hobby room';	
				$j++;
				}
				
				if($row['sal_room_available']==1)
				{
				$org[$j]['subpart_info']=5;	
				$org[$j]['subpart_title']='Sal room';	
				$j++;
				}
				
				if($row['salon_room_available']==1)
				{
				$org[$j]['subpart_info']=6;	
				$org[$j]['subpart_title']='Salon room';	
				$j++;
				}
				
				if($row['vestibule_room_available']==1)
				{
				$org[$j]['subpart_info']=7;	
				$org[$j]['subpart_title']='Vestibule room';	
				$j++;
				}
				
				if($row['dining_room_available']==1)
				{
				$org[$j]['subpart_info']=8;	
				$org[$j]['subpart_title']='Dining room';	
				$j++;
				}
				
				if($row['chamber_room_available']==1)
				{
				$org[$j]['subpart_info']=9;	
				$org[$j]['subpart_title']='Chamber room';	
				$j++;
				}
				
				if($row['terrace_available']==1)
				{
				$org[$j]['subpart_info']=11;	
				$org[$j]['subpart_title']='Terrace';	
				$j++;
				}
			}				
			else if($data['ticket_id']==6)
			{
				if($row['storage_available']==1)
				{
				$org[$j]['subpart_info']=12;	
				$org[$j]['subpart_title']='Storage room';	
				$j++;
				}
				if($row['bicycle_available']==1)
				{
				$org[$j]['subpart_info']=17;	
				$org[$j]['subpart_title']='Bicycle room';	
				$j++;
				}
				if($row['waste_room_available']==1)
				{
				$org[$j]['subpart_info']=18;	
				$org[$j]['subpart_title']='Waste room';	
				$j++;
				}
				if($row['stroller_available']==1)
				{
				$org[$j]['subpart_info']=19;	
				$org[$j]['subpart_title']='Stroller room';	
				$j++;
				}
			}
			$dbCon->close();
			return $org;			
		}
		
		
		function getTicketSubTitleInfo($data)
		{
			$dbCon = AppModel::createConnection();
			   
			$stmt = $dbCon->prepare("select id,subcategory_name as ticket_subtitle from landloard_ticket_subtitle_new where id in (select subcategory_id from user_apartment_amenities_subcategory_info where is_available=1 and user_apartment_amenity_category_id=(select id from user_apartment_amenity_category_info where category_id=? and apartment_id=?))");
			/* bind parameters for markers */
			$stmt->bind_param("ii",$data['ticket_id'],$data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			$row['ticket_id']=$data['ticket_id'];
			array_push($org,$row);		
			}				
			 
			$stmt->close();
			$dbCon->close();
			return $org;			
		}	
		 
		function getTicketSubTitleIssueInfo($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select id,home_repair_issue  from landloard_ticket_subtitle_repair_issue where landloard_ticket_subtitle_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['subticket_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			array_push($org,$row);		
			}				
			 
			$stmt->close();
			$dbCon->close();
			return $org;			
		}	
		
		
		function requestedContactDetail($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select is_approved,passport_image,connect_email,receiver_id,concat_ws(' ', first_name, last_name) as name,connect_next_kin.id,last_name,first_name,email,connect_next_kin.created_on,country_phone_id,connect_phone,connect_by,country_phone,phone_number,country_code from connect_next_kin left join user_logins on user_logins.id=connect_next_kin.receiver_id left join user_profiles on connect_next_kin.receiver_id=user_profiles.user_logins_id left join phone_country_code on phone_country_code.country_name=user_profiles.country_phone where connect_next_kin.sender_id=? and is_approved!=2 order by connect_next_kin.created_on desc");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
				
				array_push($org,$row);
				$org[$j]['enc']= $this -> encrypt_decrypt('encrypt',$row['id']);
				$filename="../estorecss/".$row ['passport_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['passport_image'].".txt"); $value_a=str_replace('"','',$value_a); $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['passport_image'].'.jpg' ); } else { $imgs="../html/usercontent/images/person-male.png"; } 
				$imgs=str_replace('../','',$imgs); $imgs='https://www.qloudid.com/'.$imgs; 
				$org[$j]['image']=$imgs;
				if($row['receiver_id']==0)
				{
					$org[$j]['name']="Unregistered User";
					$org[$j]['first_name']="Unregistered";
					$org[$j]['last_name']="User";
					$org[$j]['email']=$row['connect_email'];
				}
				$j++;
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
		
		function approveConnectApartmentRequest($data)
		{
			$dbCon = AppModel::createConnection();
			$data['id']=$data['request_id'];
					
			$stmt = $dbCon->prepare("select * from user_aprtment_company_building_connect_request where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select first_name,last_name,ssn,country_of_residence,email,sex,dob_day,dob_month,dob_year,country_phone,phone_number, address,user_profiles.city,user_profiles.country,user_profiles.zipcode,grading_status,address,port_number,invoice_zipcode,invoice_city,identity_number,issue_month,issue_year,expiry_month,expiry_year,front_image_path,back_image_path from user_logins left join user_profiles on user_profiles.user_logins_id=user_logins.id left join user_identification on user_identification.user_id=user_logins.id  where user_logins.id=(select user_id from user_address where id=?)");
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['user_address_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowUser = $result->fetch_assoc();
			$full_name=$rowUser['first_name'].' '.$rowUser['last_name'];
			
			$stmt = $dbCon->prepare("select id,first_name,last_name  from landloard_building_tenant where building_id=? and tenant_email=?");
			$stmt->bind_param("is", $row['building_id'],$rowUser['email']);
			$stmt->execute();
			$result = $stmt->get_result();	
			$rowTenant = $result->fetch_assoc();
			if(empty($rowTenant))
			{
				$im=date('m');
				$iy=date('Y');
				$iddate=date('d');
				$data['tenant_rent_info']=0;
				$im=$im+1;	
				$data['tenant_type']=1;
				$idate=strtotime($iy.'-'.$im.'-'.$rowInvoice['invoice_date']);
				$stmt = $dbCon->prepare("insert into landloard_building_tenant (invoice_date,tenant_rent_info,tenant_type,building_id , company_id , first_name  , last_name  , tenant_email  , mobile_country , mobile_number  , fixed_phone_country , landline_number  , street_address  , port_number  , zipcode  , city  , country_of_residence , nationality , passport_number  , issue_month , issue_year , expiry_month , expiry_year , passport_front_image  , passport_back_image  , created_on) values (?,?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,?, now())");
				$stmt->bind_param("siiiisssisisssssiisiiiiss",$idate,$data['tenant_rent_info'],$data['tenant_type'], $row['building_id'],$row['company_id'],$rowUser['first_name'],$rowUser['last_name'],$rowUser['email'],$rowUser['country_of_residence'],$rowUser['phone_number'],$rowUser['country_of_residence'],$rowUser['phone_number'],$rowUser['address'],$rowUser['port_number'],$rowUser['invoice_zipcode'],$rowUser['city'],$rowUser['country'],$rowUser['country_of_residence'],$rowUser['identity_number'],$rowUser['issue_month'],$rowUser['issue_year'],$rowUser['expiry_month'],$rowUser['expiry_year'],$rowUser['front_image_path'],$rowUser['back_image_path']);
				$stmt->execute();	
				$t_id=$stmt->insert_id;
				$tenant_id=$t_id.',';
			}
			else
			{
				$t_id=$rowTenant['id'];
				$tenant_id=$rowTenant['id'].',';
			}
			
			$stmt = $dbCon->prepare("select * from user_address where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['user_address_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowApartment = $result->fetch_assoc();
			
			if($data['apartment_available']==0)
			{
			
			$apartment_orientation=5;
			$apartment_tenant=$rowUser['first_name'].' '.$rowUser['last_name'];;
			$stmt = $dbCon->prepare("insert into landloard_building_port_floors_offices (sale_price, price_m2, orientation, floor_id, office_apartment_number,tenant_name,apartment_size,private_door_info,elevator_info,created_on,teanat_details) values (?, ?,?,?, ?,?, ?,?, ?, now(),?)");
			$stmt->bind_param("idiiisiiii",$rowApartment['sale_price'],$rowApartment['sale_price_per_m'],$apartment_orientation, $row['floor_id'],$data['apartment_number'],$apartment_tenant,$rowApartment['property_layout'],$rowApartment['private_entrance'],$rowApartment['elevator'],$tenant_id);
			$stmt->execute();	
			$id=$stmt->insert_id;
			 
			$is_app=1;
			$stmt = $dbCon->prepare("INSERT INTO user_tenants (property_id,is_approved,user_login_id, company_id, created_on,user_email,user_first_name,user_last_name,user_country,user_phone_number,tenant_id) VALUES (?, ?, ?, ?, now(),?,?, ?, ?, ?,?)");
			$stmt->bind_param("iiiisssisi",$id,$is_app, $rowUser['id'],$data['company_id'],$rowUser['email'],$rowUser['first_name'],$rowUser['last_name'],$rowUser['country_of_residence'],$rowUser['phone_number'],$t_id);
			$stmt->execute();
					 
			
			$stmt = $dbCon->prepare("update user_aprtment_company_building_connect_request set is_approved=1 where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("update  user_address set floor_id=?,apartment_id=?,building_id=?, `port_number`=? where id=?");
				/* bind parameters for markers */
			$stmt->bind_param("iiiii",$row['floor_id'],$id,$row['building_id'],$row['port_id'],$row['user_address_id']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("select * from user_apartment_bedrooms where user_address_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['user_address_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$bedroomCount=0;
			while($rowBed = $result->fetch_assoc())
			{
			$stmt = $dbCon->prepare("insert into  landloard_building_port_floors_offices_bedrooms (apartment_id ,created_on) values(?,now())");
				/* bind parameters for markers */
			$stmt->bind_param("i",$id);
			$stmt->execute();	
			$bedroomCount++;
			}
			
			
			$stmt = $dbCon->prepare("select * from user_apartment_bathroom_detail  where user_address_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['user_address_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$bathroomCount=0;
			while($rowBed = $result->fetch_assoc())
			{
			$stmt = $dbCon->prepare("insert into  landloard_apartment_bathroom_detail (apartment_id,toilet_and_sink  , bath , shower  , standalone_shower  , over_bath_shower , is_private  , is_wheelchair_accessible , is_ensuit , created_on  , modified_on  ) values(?,?,?,?,?,?,?,?,?,now(),now())");
				/* bind parameters for markers */
			$stmt->bind_param("iiiiiiiii",$id,$rowBed['toilet_and_sink'],$rowBed['bath'],$rowBed['shower'],$rowBed['standalone_shower'],$rowBed['over_bath_shower'],$rowBed['is_private'],$rowBed['is_wheelchair_accessible'],$rowBed['is_ensuit']);
			$stmt->execute();
			$bathroomCount++;			
			}
			
			$stmt = $dbCon->prepare("update  landloard_building_port_floors_offices set bathroom_count=?,bedroom_count=? where id=?");
				/* bind parameters for markers */
			$stmt->bind_param("iii",$bathroomCount,$bedroomCount,$id);
			$stmt->execute();	
			
			$stmt = $dbCon->prepare("insert into  landloard_apartment_description(selling_heading,short_selling_description,apartment_id)values(?,?,?)");
				/* bind parameters for markers */
			$stmt->bind_param("ssi",$rowApartment['property_heading'],$rowApartment['apartment_description'],$id);
			$stmt->execute();	
			
			$stmt = $dbCon->prepare("select * from user_apartment_other_room_detail  where apartment_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['user_address_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowOther = $result->fetch_assoc();
			
			
			$stmt = $dbCon->prepare("insert into landloard_apartment_other_room_detail (apartment_id) values (?)");
			$stmt->bind_param("i", $id);
			$stmt->execute();
			
			
			$stmt = $dbCon->prepare("update landloard_apartment_other_room_detail set hall_room_available=?,living_room_available=?,work_room_available=? , hobby_room_available=?,sal_room_available=?,salon_room_available=?,vestibule_room_available=?,dining_room_available=?,chamber_room_available=?,balcony_available=?,terrace_available=?,storage_available=?,basement_available=?,garage_available=?,kitchen_available=?,entrance_available=? where apartment_id=?");
			$stmt->bind_param("iiiiiiiiiiiiiiiii",$rowOther['hall_room_available'],$rowOther['living_room_available'],$rowOther['work_room_available'],$rowOther['hobby_room_available'],$rowOther['sal_room_available'],$rowOther['salon_room_available'],$rowOther['vestibule_room_available'],$rowOther['dining_room_available'],$rowOther['chamber_room_available'],$rowOther['balcony_available'],$rowOther['terrace_available'],$rowOther['storage_available'],$rowOther['basement_available'],$rowOther['garage_available'],$rowOther['kitchen_available'],$rowOther['entrance_available'], $id);
			$stmt->execute();
			
			
			$stmt = $dbCon->prepare("select count(id) as num from `qloudid`.`user_apartment_amenity_category_info` where apartment_id=?");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $row['user_address_id']);
				$stmt->execute();
				$result = $stmt->get_result();
				$rowHomeRepair = $result->fetch_assoc();
				if($rowHomeRepair['num']==0)
				{
					
					$stmt = $dbCon->prepare("select * from landloard_ticket_title_new where id not in (select category_id from user_apartment_amenity_category_info where apartment_id=?) and ticket_type=1");
					$stmt->bind_param("i", $row['user_address_id']);
					$stmt->execute();
					$result = $stmt->get_result();
					while($rowCategory = $result->fetch_assoc())
					{
						if($rowCategory['id']<=2)
						{
							$selected=1;
						}
						else
						{	
							if($rowCategory['id']==3)
							{
							if($rowOther['kitchen_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==4)
							{
							if($rowOther['entrance_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==5)
							{
							if($rowOther['balcony_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==6)
							{
							if($rowOther['storage_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==7)
							{
							if($rowOther['basement_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==8)
							{
							if($rowOther['garage_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==9)
							{
								$selected=1;
							}
							
						}
					$stmt = $dbCon->prepare("insert into user_apartment_amenity_category_info (category_id,apartment_id,is_selected) values (?,?,?)");
					$stmt->bind_param("iii",$rowCategory['id'], $row['user_address_id'],$selected);
					$stmt->execute();		
					$catid=$stmt->insert_id;
						$indexValue='category_id_'.$rowCategory['id'];
						$stmt = $dbCon->prepare("select * from landloard_ticket_subtitle_new");
						$stmt->execute();
						$result1 = $stmt->get_result();
						while($row1 = $result1->fetch_assoc())
						{
							if($row1[$indexValue]==2)
								continue;
							$stmt = $dbCon->prepare("insert into user_apartment_amenities_subcategory_info (user_apartment_amenity_category_id,subcategory_id,is_available,advance_values,created_on,modified_on) values (?,?,?,?,now(),now())");
							$stmt->bind_param("iiii",$catid, $row1['id'],$row1[$indexValue],$row1[$indexValue]);
							$stmt->execute();
						}
					}
				}
				
			
			$stmt = $dbCon->prepare("select * from `qloudid`.`user_apartment_amenity_category_info` where apartment_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['user_address_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			while($rowCategory = $result->fetch_assoc())
			{
				$stmt = $dbCon->prepare("insert into landloard_apartment_amenity_category_info (category_id,apartment_id,is_selected) values (?,?,?)");
				$stmt->bind_param("iii",$rowCategory['category_id'], $id,$rowCategory['is_selected']);
				$stmt->execute();		
				$category_id=$stmt->insert_id;
				$stmt = $dbCon->prepare("select subcategory_name,user_apartment_amenities_subcategory_info.id,is_available,who_will_fix_the_problem,advance_values from user_apartment_amenities_subcategory_info left join landloard_ticket_subtitle_new on landloard_ticket_subtitle_new.id=user_apartment_amenities_subcategory_info.subcategory_id where user_apartment_amenity_category_id=?");
				$stmt->bind_param("i", $rowCategory['id']);
				$stmt->execute();
				$result = $stmt->get_result();
				while($rowSubcategory = $result->fetch_assoc())
				{
					 
				$stmt = $dbCon->prepare("insert into landloard_apartment_amenities_subcategory_info (user_apartment_amenity_category_id,subcategory_id,is_available,advance_values,created_on,modified_on) values (?,?,?,?,now(),now())");
					$stmt->bind_param("iiii",$category_id, $rowCategory['subcategory_id'],$rowCategory['is_available'],$rowCategory['advance_values']);
					$stmt->execute();	
				}
			}
			
				
			}
			
			else 
			{
				
				$apartment_orientation=5;
				$apartment_tenant=$rowUser['first_name'].' '.$rowUser['last_name'];;
				$stmt = $dbCon->prepare("update landloard_building_port_floors_offices set teanat_details=? where id=?");
				$stmt->bind_param("ii",$tenant_id,$data['apartment_id']);
				$stmt->execute();	
				 
				$is_app=1;
				$stmt = $dbCon->prepare("INSERT INTO user_tenants (property_id,is_approved,user_login_id, company_id, created_on,user_email,user_first_name,user_last_name,user_country,user_phone_number,tenant_id) VALUES (?, ?, ?, ?, now(),?,?, ?, ?, ?,?)");
				$stmt->bind_param("iiiisssisi",$data['apartment_id'],$is_app, $rowUser['id'],$data['company_id'],$rowUser['email'],$rowUser['first_name'],$rowUser['last_name'],$rowUser['country_of_residence'],$rowUser['phone_number'],$t_id);
				$stmt->execute();
						
				
				$stmt = $dbCon->prepare("update user_aprtment_company_building_connect_request set is_approved=1 where id=?");
				
				/* bind parameters for markers */
				$stmt->bind_param("i", $data['id']);
				$stmt->execute();
			
				$stmt = $dbCon->prepare("update  user_address set floor_id=?,apartment_id=?,building_id=?, `port_number`=? where id=?");
				/* bind parameters for markers */
				$stmt->bind_param("iiiii",$row['floor_id'],$data['apartment_id'],$row['building_id'],$row['port_id'],$row['user_address_id']);
				$stmt->execute();
				
				$stmt = $dbCon->prepare("select id from landloard_apartment_other_room_detail where apartment_id=?");
				$stmt->bind_param("i", $id);
				$stmt->execute();
				$result = $stmt->get_result();
				$rowOtherCount = $result->fetch_assoc();
				if(empty($rowOtherCount))
				{
				$stmt = $dbCon->prepare("insert into landloard_apartment_other_room_detail (apartment_id) values (?)");
				$stmt->bind_param("i", $id);
				$stmt->execute();	
				}
				
				$stmt = $dbCon->prepare("select * from user_apartment_other_room_detail  where apartment_id=?");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $row['user_address_id']);
				$stmt->execute();
				$result = $stmt->get_result();
				$rowOther = $result->fetch_assoc();
				
				$stmt = $dbCon->prepare("update landloard_apartment_other_room_detail set hall_room_available=?,living_room_available=?,work_room_available=? , hobby_room_available=?,sal_room_available=?,salon_room_available=?,vestibule_room_available=?,dining_room_available=?,chamber_room_available=?,balcony_available=?,terrace_available=?,storage_available=?,basement_available=?,garage_available=?,kitchen_available=?,entrance_available=? where apartment_id=?");
				$stmt->bind_param("iiiiiiiiiiiiiiiii",$rowOther['hall_room_available'],$rowOther['living_room_available'],$rowOther['work_room_available'],$rowOther['hobby_room_available'],$rowOther['sal_room_available'],$rowOther['salon_room_available'],$rowOther['vestibule_room_available'],$rowOther['dining_room_available'],$rowOther['chamber_room_available'],$rowOther['balcony_available'],$rowOther['terrace_available'],$rowOther['storage_available'],$rowOther['basement_available'],$rowOther['garage_available'],$rowOther['kitchen_available'],$rowOther['entrance_available'], $id);
				$stmt->execute();
				
				$stmt = $dbCon->prepare("select count(id) as num from `qloudid`.`landloard_apartment_amenity_category_info` where apartment_id=?");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $id);
				$stmt->execute();
				$result = $stmt->get_result();
				$rowHomeRepair = $result->fetch_assoc();
				if($rowHomeRepair['num']==0)
				{
				$stmt = $dbCon->prepare("select count(id) as num from `qloudid`.`user_apartment_amenity_category_info` where apartment_id=?");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $row['user_address_id']);
				$stmt->execute();
				$result = $stmt->get_result();
				$rowHomeRepair = $result->fetch_assoc();
				if($rowHomeRepair['num']==0)
				{
					
					$stmt = $dbCon->prepare("select * from landloard_ticket_title_new where id not in (select category_id from user_apartment_amenity_category_info where apartment_id=?) and ticket_type=1");
					$stmt->bind_param("i", $row['user_address_id']);
					$stmt->execute();
					$result = $stmt->get_result();
					while($rowCategory = $result->fetch_assoc())
					{
						if($rowCategory['id']<=2)
						{
							$selected=1;
						}
						else
						{	
							if($rowCategory['id']==3)
							{
							if($rowOther['kitchen_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==4)
							{
							if($rowOther['entrance_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==5)
							{
							if($rowOther['balcony_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==6)
							{
							if($rowOther['storage_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==7)
							{
							if($rowOther['basement_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==8)
							{
							if($rowOther['garage_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==9)
							{
								$selected=1;
							}
							
						}
					$stmt = $dbCon->prepare("insert into user_apartment_amenity_category_info (category_id,apartment_id,is_selected) values (?,?,?)");
					$stmt->bind_param("iii",$rowCategory['id'], $row['user_address_id'],$selected);
					$stmt->execute();		
					$catid=$stmt->insert_id;
						$indexValue='category_id_'.$rowCategory['id'];
						$stmt = $dbCon->prepare("select * from landloard_ticket_subtitle_new");
						$stmt->execute();
						$result1 = $stmt->get_result();
						while($row1 = $result1->fetch_assoc())
						{
							if($row1[$indexValue]==2)
								continue;
							$stmt = $dbCon->prepare("insert into user_apartment_amenities_subcategory_info (user_apartment_amenity_category_id,subcategory_id,is_available,advance_values,created_on,modified_on) values (?,?,?,?,now(),now())");
							$stmt->bind_param("iiii",$catid, $row1['id'],$row1[$indexValue],$row1[$indexValue]);
							$stmt->execute();
						}
					}
				}
				$stmt = $dbCon->prepare("select * from `qloudid`.`user_apartment_amenity_category_info` where apartment_id=?");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $row['user_address_id']);
				$stmt->execute();
				$result = $stmt->get_result();
				while($rowCategory = $result->fetch_assoc())
				{
					$stmt = $dbCon->prepare("insert into landloard_apartment_amenity_category_info (category_id,apartment_id,is_selected) values (?,?,?)");
					$stmt->bind_param("iii",$rowCategory['category_id'], $id,$rowCategory['is_selected']);
					$stmt->execute();		
					$category_id=$stmt->insert_id;
					$stmt = $dbCon->prepare("select subcategory_name,user_apartment_amenities_subcategory_info.id,is_available,who_will_fix_the_problem,advance_values from user_apartment_amenities_subcategory_info left join landloard_ticket_subtitle_new on landloard_ticket_subtitle_new.id=user_apartment_amenities_subcategory_info.subcategory_id where user_apartment_amenity_category_id=?");
					$stmt->bind_param("i", $rowCategory['id']);
					$stmt->execute();
					$resultSubCatg = $stmt->get_result();
					while($rowSubcategory = $resultSubCatg->fetch_assoc())
					{
						 
					$stmt = $dbCon->prepare("insert into landloard_apartment_amenities_subcategory_info (user_apartment_amenity_category_id,subcategory_id,is_available,advance_values,created_on,modified_on) values (?,?,?,?,now(),now())");
						$stmt->bind_param("iiii",$category_id, $rowCategory['subcategory_id'],$rowCategory['is_available'],$rowCategory['advance_values']);
						$stmt->execute();	
					}
				}	
				}					
				else
				{
				$stmt = $dbCon->prepare("select count(id) as num from `qloudid`.`user_apartment_amenity_category_info` where apartment_id=?");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $row['user_address_id']);
				$stmt->execute();
				$result = $stmt->get_result();
				$rowHomeRepair = $result->fetch_assoc();
				if($rowHomeRepair['num']==0)
				{
					
					$stmt = $dbCon->prepare("select * from landloard_ticket_title_new where id not in (select category_id from user_apartment_amenity_category_info where apartment_id=?) and ticket_type=1");
					$stmt->bind_param("i", $row['user_address_id']);
					$stmt->execute();
					$result = $stmt->get_result();
					while($rowCategory = $result->fetch_assoc())
					{
						if($rowCategory['id']<=2)
						{
							$selected=1;
						}
						else
						{	
							if($rowCategory['id']==3)
							{
							if($rowOther['kitchen_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==4)
							{
							if($rowOther['entrance_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==5)
							{
							if($rowOther['balcony_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==6)
							{
							if($rowOther['storage_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==7)
							{
							if($rowOther['basement_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==8)
							{
							if($rowOther['garage_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==9)
							{
								$selected=1;
							}
							
						}
					$stmt = $dbCon->prepare("insert into user_apartment_amenity_category_info (category_id,apartment_id,is_selected) values (?,?,?)");
					$stmt->bind_param("iii",$rowCategory['id'], $row['user_address_id'],$selected);
					$stmt->execute();		
					$catid=$stmt->insert_id;
						$indexValue='category_id_'.$rowCategory['id'];
						$stmt = $dbCon->prepare("select * from landloard_ticket_subtitle_new");
						$stmt->execute();
						$result1 = $stmt->get_result();
						while($row1 = $result1->fetch_assoc())
						{
							if($row1[$indexValue]==2)
								continue;
							$stmt = $dbCon->prepare("insert into user_apartment_amenities_subcategory_info (user_apartment_amenity_category_id,subcategory_id,is_available,advance_values,created_on,modified_on) values (?,?,?,?,now(),now())");
							$stmt->bind_param("iiii",$catid, $row1['id'],$row1[$indexValue],$row1[$indexValue]);
							$stmt->execute();
						}
					}
				}
				
				$stmt = $dbCon->prepare("select * from `qloudid`.`landloard_apartment_amenity_category_info` where apartment_id=?");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $id);
				$stmt->execute();
				$result = $stmt->get_result();
				while($rowCategory = $result->fetch_assoc())
				{
					$stmt = $dbCon->prepare("update user_apartment_amenity_category_info set is_selected=? where category_id=? and apartment_id=?");
					$stmt->bind_param("iii",$rowCategory['is_selected'],$rowCategory['category_id'],$row['user_address_id']);
					$stmt->execute();		
					
					$stmt = $dbCon->prepare("select id from user_apartment_amenity_category_info where category_id=? and apartment_id=?");
					$stmt->bind_param("ii",$rowCategory['category_id'],$row['user_address_id']);
					$stmt->execute();	
					$resultCat = $stmt->get_result();
					$Usercategory = $resultCat->fetch_assoc();
					$category_id= $Usercategory['id'];
					
					$stmt = $dbCon->prepare("select * from landloard_apartment_amenities_subcategory_info where user_apartment_amenity_category_id=?");
					$stmt->bind_param("i", $rowCategory['id']);
					$stmt->execute();
					$resultSubCatg = $stmt->get_result();
					while($rowSubcategory = $resultSubCatg->fetch_assoc())
					{
						 
					$stmt = $dbCon->prepare("update user_apartment_amenities_subcategory_info set is_available=? where user_apartment_amenity_category_id=? and subcategory_id=?");
					$stmt->bind_param("iii",$category_id, $rowSubcategory['subcategory_id'],$rowSubcategory['is_available']);
					$stmt->execute();	
					}
				}
				}
				
			}
			
			$stmt->close();
			$dbCon->close();
			 
			return 1;
			
			
		}
			
		function rejectConnectApartmentRequest($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update user_aprtment_company_building_connect_request set is_approved=2 where id=?");
			$stmt->bind_param("i", $data['request_id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		function getAvailableApartment($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select id,office_apartment_number from landloard_building_port_floors_offices where floor_id=(select floor_id from user_aprtment_company_building_connect_request where id=?) and is_office=0 and teanat_details=0");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['request_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				array_push($org,$row);
				 
			}
			 
			 $stmt->close();
			$dbCon->close();
			 return $org;
			
			
		}
		function apartmentConnectRequestReceived($data)
		{
        $dbCon = AppModel::createConnection();
		 
         $stmt = $dbCon->prepare("select first_name,last_name,property_layout,entrance_floor,address,user_address.port_number,floors_available,apartment_floor,user_address_id,user_aprtment_company_building_connect_request.id,property_nickname,building_name,landloard_building_ports.port_number,floor_number,user_aprtment_company_building_connect_request.building_id from user_aprtment_company_building_connect_request left join user_address on user_address.id=user_aprtment_company_building_connect_request.user_address_id left join user_logins on user_logins.id=user_address.user_id left join landloard_buildings on landloard_buildings.id=user_aprtment_company_building_connect_request.building_id left join landloard_building_ports on landloard_building_ports.id=user_aprtment_company_building_connect_request.port_id  left join landloard_building_port_floors on landloard_building_port_floors.id=user_aprtment_company_building_connect_request.floor_id where user_aprtment_company_building_connect_request.company_id=? and is_approved=0");
        $stmt->bind_param("i", $data['company_id']);
        $stmt->execute();
        $result = $stmt->get_result();
		$org=array();
		while($row = $result->fetch_assoc())
		{
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_bedrooms where user_address_id=?");
			$stmt->bind_param("i", $row['user_address_id']);
			$stmt->execute();
			$resultBed = $stmt->get_result();
			$rowBed = $resultBed->fetch_assoc();
			$row['bedroomCount']=$rowBed['num'];
			
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_bathroom_detail where user_address_id=?");
			$stmt->bind_param("i", $row['user_address_id']);
			$stmt->execute();
			$resultBed = $stmt->get_result();
			$rowBed = $resultBed->fetch_assoc();
			$row['bathroomCount']=$rowBed['num'];
			
			$row['enc']=$this->encrypt_decrypt('encrypt',$row['id']);
			array_push($org,$row);
		}
        $stmt->close();
        $dbCon->close();
        return $org;
		}
		
		function apartmentConnectRequestRejected($data)
		{
        $dbCon = AppModel::createConnection();
         $stmt = $dbCon->prepare("select first_name,last_name,property_layout,entrance_floor,address,user_address.port_number,floors_available,apartment_floor,user_address_id,user_aprtment_company_building_connect_request.id,property_nickname,building_name,landloard_building_ports.port_number,floor_number,user_aprtment_company_building_connect_request.building_id from user_aprtment_company_building_connect_request left join user_address on user_address.id=user_aprtment_company_building_connect_request.user_address_id left join user_logins on user_logins.id=user_address.user_id left join landloard_buildings on landloard_buildings.id=user_aprtment_company_building_connect_request.building_id left join landloard_building_ports on landloard_building_ports.id=user_aprtment_company_building_connect_request.port_id  left join landloard_building_port_floors on landloard_building_port_floors.id=user_aprtment_company_building_connect_request.floor_id where user_aprtment_company_building_connect_request.company_id=? and is_approved=2");
        $stmt->bind_param("i", $data['company_id']);
        $stmt->execute();
        $result = $stmt->get_result();
		$org=array();
		while($row = $result->fetch_assoc())
		{
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_bedrooms where user_address_id=?");
			$stmt->bind_param("i", $row['user_address_id']);
			$stmt->execute();
			$resultBed = $stmt->get_result();
			$rowBed = $resultBed->fetch_assoc();
			$row['bedroomCount']=$rowBed['num'];
			
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_bathroom_detail where user_address_id=?");
			$stmt->bind_param("i", $row['user_address_id']);
			$stmt->execute();
			$resultBed = $stmt->get_result();
			$rowBed = $resultBed->fetch_assoc();
			$row['bathroomCount']=$rowBed['num'];
			
			$row['enc']=$this->encrypt_decrypt('encrypt',$row['id']);
			array_push($org,$row);
		}
        $stmt->close();
        $dbCon->close();
        return $org;
		}
		
		
		
		function addNewContactInfo($data)
		{
			$dbCon = AppModel::createConnection();
			if($data['ImageData']=='' || $data['ImageData']==null)
			{
			$img_name1='';	
			}
			else
			{
			$data1 = strip_tags($data['ImageData']);
			$data1='url("data:image/png;base64,'.$data1.'")';
			
			define('UPLOAD_DIR','../estorecss/'); // image dir path
			$img_name1="new".microtime();
			file_put_contents(UPLOAD_DIR.$img_name1.".txt", $data1);	
			}
			
			if(!isset($data['contact_relation']))
			{
				$data['contact_relation']='Friend';
			}
			$data['first_name']=htmlentities($data['first_name'],ENT_NOQUOTES, 'UTF-8');
			$data['last_name']=htmlentities($data['last_name'],ENT_NOQUOTES, 'UTF-8');
			$stmt = $dbCon->prepare("insert into `user_contact_address_book`(contact_relation,`contact_first_name`,`contact_last_name`,`contact_image`,`created_on`,`user_id`) values ( ?,?,?,?,now(),?);");
			/* bind parameters for markers */
			$stmt->bind_param("ssssi",$data['contact_relation'],$data['first_name'],$data['last_name'],$img_name1,$data['user_id']);
			$stmt->execute();
			$id=$stmt->insert_id;
			foreach($data['address_info'] as $key)
			{
			$key['contact_address_type']=1;
			$key['address']=htmlentities($key['address'],ENT_NOQUOTES, 'UTF-8');
			$key['city']=htmlentities($key['city'],ENT_NOQUOTES, 'UTF-8');
			$key['state']=htmlentities($key['state'],ENT_NOQUOTES, 'UTF-8');
			$stmt = $dbCon->prepare("insert into `user_contact_address_book_address`(`contact_street_address`,`contact_port_number`,`contact_zip`,`contact_city`,`contact_state`,`contact_country`,`user_contact_address_book_id`,`contact_address_type`,`user_id`) values (?,?,?,?,?,?,?,?,?)");
			/* bind parameters for markers */
			$stmt->bind_param("sssssiisi",$key['address'],$key['code_number'],$key['zip_code'],$key['city'],$key['state'],$key['country_code'],$id,$key['contact_address_type'],$data['user_id']);
			$stmt->execute(); 	
			}
			
			foreach($data['phone_info'] as $key)
			{
			$stmt = $dbCon->prepare("insert into `user_contact_address_book_phone`(`contact_country_id`,`contact_phone_number`,`contact_phone_number_type`,`user_contact_address_book_id`,`user_id`) values (?,?,?,?,?)");
			/* bind parameters for markers */
			$stmt->bind_param("issii",$key['country_code'],$key['phone_number'],$key['phone_type'],$id,$data['user_id']);
			$stmt->execute(); 	
			}
			
			foreach($data['email_info'] as $key)
			{
			$stmt = $dbCon->prepare("insert into `user_contact_address_book_email`(`contact_email`,`user_contact_address_book_id`,`contact_email_type`,`user_id`) values (?,?,?,?);");
			/* bind parameters for markers */
			$stmt->bind_param("sisi",$key['email_address'],$id,$key['email_type'],$data['user_id']);
			$stmt->execute(); 	
			}
			
			foreach($data['card_info'] as $key)
			{
			$stmt = $dbCon->prepare("insert into `user_contact_address_book_card_info`(`contact_card_number`,`user_contact_address_book_id`,`user_id`,`contact_card_type`) values ( ?,?,?,?)");
			/* bind parameters for markers */
			$stmt->bind_param("siis",$key['card_number'],$id,$data['user_id'],$key['card_type']);
			$stmt->execute(); 	
			}
			$stmt->close();
			$dbCon->close();
			return 1;	
			 			
		}	
		
		function checkValidEmails($data)
		{
			$dbCon = AppModel::createConnection();
			$j=0;
			foreach($data as $key)
			{
				if($key['EmailAddress']=='' || $key['EmailAddress']==null)
				{
					continue;
				}
			$stmt = $dbCon->prepare("select email from user_logins where id=? and email=?");
			/* bind parameters for markers */
			$stmt->bind_param("is",$key['UserId'],$key['EmailAddress']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if(empty($row))
			{
			$stmt = $dbCon->prepare("select contact_email from user_contact_address_book_email where user_id=? and contact_email=?");
			/* bind parameters for markers */
			$stmt->bind_param("is",$key['UserId'],$key['EmailAddress']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();	
			if(!empty($row))
			{
			$data[$j]['IsError']=1;
			}
			}
			else
			{
			$data[$j]['IsError']=1;
			
			}
			$j++;
			}
			$stmt->close();
			$dbCon->close();
			return $data;			
		}	
		
		function checkValidPhoneNumbers($data)
		{
			$dbCon = AppModel::createConnection();
			$j=0;
			foreach($data as $key)
			{
				 
			$stmt = $dbCon->prepare("select user_logins.id from user_logins left join user_profiles on user_profiles.user_logins_id=user_logins.id where user_logins.id=? and phone_number=? and country_of_residence=?");
			/* bind parameters for markers */
			$stmt->bind_param("isi",$key['UserId'],$key['phone_number'],$key['SelectedCountry']['Id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if(empty($row))
			{
			$stmt = $dbCon->prepare("select contact_phone_number from user_contact_address_book_phone where user_id=? and contact_phone_number=? and contact_country_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("isi",$key['UserId'],$key['phone_number'],$key['SelectedCountry']['Id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();	
			if(!empty($row))
			{
			$data[$j]['IsError']=1;	
			}
			
			}
			else
			{
			$data[$j]['IsError']=1;
				
			}	
			$j++;
			}
			$stmt->close();
			$dbCon->close();
			return $data;
		}	
		
		
	 
		 
		 function userPersonalAddessBookContactDetailinfo($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			 
			function base64_to_jpeg($base64_string, $output_file) {
			$ifp = fopen( $output_file, 'wb' ); 
			$data = explode( ',', $base64_string );
			fwrite( $ifp, base64_decode( $data[1] ) );
			fclose( $ifp ); 
			return $output_file; 
		}
			$stmt = $dbCon->prepare("select id,first_name as contact_first_name,last_name as contact_last_name,passport_image as contact_image,created_on,country_of_residence from user_logins where id=?");
			$stmt->bind_param("i", $data['contact_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$row = $result1->fetch_assoc();
			$row['user_id']=$data['contact_id'];
			$row['contact_relation']='You';
			$row['contact_first_name']=html_entity_decode($row['contact_first_name'],ENT_NOQUOTES, 'UTF-8');
			$row['contact_last_name']=html_entity_decode($row['contact_last_name'],ENT_NOQUOTES, 'UTF-8');
			if($row ['contact_image']==''){ $imgs='';} else { $filename="../estorecss/".$row ['contact_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['contact_image'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row ['contact_image'].'.jpg' ); $imgs=str_replace('../','',$imgs); $imgs='https://www.qloudid.com/'.$imgs; } else {
			$imgs=""; } }
			
			$row['contact_image']=$imgs;
			$row['emails']=array();
			$row['phones']=array();
			$row['addresses']=array();
			$row['cards']=array();
			
			$stmt = $dbCon->prepare("select email as contact_email from user_logins where id=?");
			$stmt->bind_param("i", $data['contact_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			while($row1 = $result1->fetch_assoc())
			{
			
			$row1['contact_email_type']='Home';
			$row1['user_contact_address_book_id']=$data['contact_id'];
			$row['user_id']=$data['contact_id'];	
			array_push($row['emails'],$row1); 
			}	
			
			$stmt = $dbCon->prepare("select phone_number as contact_phone_number from user_profiles where user_logins_id=?");
			$stmt->bind_param("i", $data['contact_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			while($row1 = $result1->fetch_assoc())
			{
			$stmt = $dbCon->prepare("select country_code from phone_country_code where id=?");
			$stmt->bind_param("i", $row['country_of_residence']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();
			$row1['contact_country_id']=$row['country_of_residence'];
			$row1['country_code']=$row2['country_code'];
			$row1['contact_phone_number_type']='Mobile';
			$row1['user_contact_address_book_id']=$data['contact_id'];
			$row['user_id']=$data['contact_id'];
			array_push($row['phones'],$row1); 
			}	
			
			$stmt = $dbCon->prepare("select id,address as contact_street_address,city as contact_city,zipcode as contact_zip,port_number as contact_port_number from user_address where user_id=?");
			$stmt->bind_param("i", $data['contact_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			while($row1 = $result1->fetch_assoc())
			{
			$stmt = $dbCon->prepare("select country_name from phone_country_code where id=?");
			$stmt->bind_param("i", $row['country_of_residence']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();
			$row1['contact_state']='';
			$row1['contact_country']=$row['country_of_residence'];
			$row1['country_name']=$row2['country_name'];
			$row1['user_contact_address_book_id']=$data['contact_id'];
			$row['user_id']=$data['contact_id'];
			$row['contact_address_type']=1;
			$row1['contact_street_address']=html_entity_decode($row1['contact_street_address'],ENT_NOQUOTES, 'UTF-8');
			$row1['contact_city']=html_entity_decode($row1['contact_city'],ENT_NOQUOTES, 'UTF-8');
			$row1['contact_state']=html_entity_decode($row1['contact_state'],ENT_NOQUOTES, 'UTF-8');
			array_push($row['addresses'],$row1); 
			}
			
			
			$stmt = $dbCon->prepare("select id,card_number as contact_card_number from user_cards where user_login_id=?");
			$stmt->bind_param("i", $data['contact_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			while($row1 = $result1->fetch_assoc())
			{
			$row1['contact_card_type']='Visa';
			$row1['user_contact_address_book_id']=$data['contact_id'];
			$row['user_id']=$data['contact_id'];
			array_push($row['cards'],$row1); 
			}
			
			
			$stmt->close();
			$dbCon->close();
			return $row;
		}
		

		 function userAddessBookContactDetailinfo($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			function base64_to_jpeg($base64_string, $output_file) {
			$ifp = fopen( $output_file, 'wb' ); 
			$data = explode( ',', $base64_string );
			fwrite( $ifp, base64_decode( $data[1] ) );
			fclose( $ifp ); 
			return $output_file; 
		}
			$stmt = $dbCon->prepare("select * from user_contact_address_book where id=?");
			$stmt->bind_param("i", $data['contact_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$row = $result1->fetch_assoc();
			$row['contact_first_name']=html_entity_decode($row['contact_first_name'],ENT_NOQUOTES, 'UTF-8');
			$row['contact_last_name']=html_entity_decode($row['contact_last_name'],ENT_NOQUOTES, 'UTF-8');
			if($row ['contact_image']==''){ $imgs='';} else {$filename="../estorecss/".$row ['contact_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['contact_image'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row ['contact_image'].'.jpg' ); $imgs=str_replace('../','',$imgs); $imgs='https://www.qloudid.com/'.$imgs; } else {
			$imgs=""; }}
			
			$row['contact_image']=$imgs;
			$row['emails']=array();
			$row['phones']=array();
			$row['addresses']=array();
			$row['cards']=array();
			
			$stmt = $dbCon->prepare("select * from user_contact_address_book_email where user_contact_address_book_id=?");
			$stmt->bind_param("i", $data['contact_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			while($row1 = $result1->fetch_assoc())
			{
			
			array_push($row['emails'],$row1); 
			}	
			
			$stmt = $dbCon->prepare("select * from user_contact_address_book_phone where user_contact_address_book_id=?");
			$stmt->bind_param("i", $data['contact_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			while($row1 = $result1->fetch_assoc())
			{
			
			$stmt = $dbCon->prepare("select country_code from phone_country_code where id=?");
			$stmt->bind_param("i", $row1['contact_country_id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();

			$row1['country_code']=$row2['country_code'];
			array_push($row['phones'],$row1); 
			}	
			
			$stmt = $dbCon->prepare("select * from user_contact_address_book_address where user_contact_address_book_id=?");
			$stmt->bind_param("i", $data['contact_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			while($row1 = $result1->fetch_assoc())
			{
			$row1['contact_street_address']=html_entity_decode($row1['contact_street_address'],ENT_NOQUOTES, 'UTF-8');
			$row1['contact_city']=html_entity_decode($row1['contact_city'],ENT_NOQUOTES, 'UTF-8');
			$row1['contact_state']=html_entity_decode($row1['contact_state'],ENT_NOQUOTES, 'UTF-8');
			$stmt = $dbCon->prepare("select country_name from phone_country_code where id=?");
			$stmt->bind_param("i", $row1['contact_country']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();
			$row1['country_name']=$row2['country_name'];
			array_push($row['addresses'],$row1); 
			}
			
			
			$stmt = $dbCon->prepare("select * from user_contact_address_book_card_info where user_contact_address_book_id=?");
			$stmt->bind_param("i", $data['contact_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			while($row1 = $result1->fetch_assoc())
			{
				$row1['contact_card_type']=substr($row1['contact_card_type'],0,-5);
			array_push($row['cards'],$row1); 
			}
			
			
			$stmt->close();
			$dbCon->close();
			return $row;
		}
		
		function userAddressBookContactDetails($data)
	{
		$dbCon = AppModel::createConnection();
		 
		 $stmt = $dbCon->prepare("select * from user_contact_address_book where user_id=?");
			/* bind parameters for markers */
		$stmt->bind_param("i", $data['user_id']);
		$stmt->execute();
		$result = $stmt->get_result();
		$org=array();
		while($row = $result->fetch_assoc())
		{
		$filename="../estorecss/".$row ['contact_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['contact_image'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row ['contact_image'].'.jpg' ); $imgs=str_replace('../','',$imgs); $imgs='https://www.qloudid.com/'.$imgs; } else {
			$imgs="https:\/\/www.qloudid.com\/estorecss\/tmpnew0.95293900 1680505278.jpg"; }
			$row['contact_first_name']=html_entity_decode($row['contact_first_name'],ENT_NOQUOTES, 'UTF-8');
			$row['contact_last_name']=html_entity_decode($row['contact_last_name'],ENT_NOQUOTES, 'UTF-8');
			$row['UserImage']=$imgs;
		array_push($org,$row);			
		}
		
			$stmt->close();
			$dbCon->close();
			return $org;	
	}

		function updateApartmentKeyInfo($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			if($data['key_available']==0)
			{
			$stmt = $dbCon->prepare("update user_address set key_available=0,key_description='',total_keys=0,key_updated=1 where id=?");
			$stmt->bind_param("i",$data['apartment_id']);
			$stmt->execute();
			$stmt = $dbCon->prepare("delete from  user_apartment_key_photos where user_address_id=?");
			$stmt->bind_param("i",$data['apartment_id']);
			$stmt->execute();
			}
			else
			{
			$data['key_description']=htmlentities($data['key_description'],ENT_NOQUOTES, 'UTF-8');
			$stmt = $dbCon->prepare("update user_address set key_available=1,key_description=?,total_keys=?,key_updated=1 where id=?");
			$stmt->bind_param("sii",$data['key_description'],$data['total_keys'],$data['apartment_id']);
			$stmt->execute();
			}
			 
				
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		function displayKeyPhotos($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select apartment_photo_path,sorting_number,id from user_apartment_key_photos where user_address_id=? order by sorting_number ");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$i=1;
			$org=array();
			function base64_to_jpeg($base64_string, $output_file) {
			$ifp = fopen( $output_file, 'wb' ); 
			$data = explode( ',', $base64_string );
			fwrite( $ifp, base64_decode( $data[1] ) );
			fclose( $ifp ); 
			return $output_file; 
		}
			while($row1 = $result1->fetch_assoc())
			{
			 
				$filename="../estorecss/".$row1['apartment_photo_path'].".txt"; $value_a=file_get_contents("../estorecss/".$row1['apartment_photo_path'].".txt"); $value_a=str_replace('"','',$value_a); $row1['apartment_photo_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row1['sorting_number'].'_'.$data['apartment_id'].'.jpg' );
				$row1['apartment_photo_path']=str_replace('../','https://www.qloudid.com/',$row1['apartment_photo_path']);
				array_push($org,$row1); 
			}	
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
		 
		function addApartmentKeyPhotos($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$data['update_info']='data:image/jpeg;base64,'.$data['update_info'];
			$data1 = strip_tags($data['update_info']);
			define('UPLOAD_DIR','../estorecss/'); 
			$img_name1="new".microtime();
			file_put_contents(UPLOAD_DIR.$img_name1.".txt", $data1);
			
			
			$stmt = $dbCon->prepare("select count(user_address_id) as num from user_apartment_key_photos where user_address_id=?");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$snumber=$row['num']+1;
			
			$stmt = $dbCon->prepare("insert into user_apartment_key_photos (apartment_photo_path,user_address_id,sorting_number) values(?, ?, ?)");
			$stmt->bind_param("sii",$img_name1, $data['apartment_id'],$snumber);
			$stmt->execute();	
				
			$stmt->close();
			$dbCon->close();
			return 1;
		}


			
		function resendPrecheckinInfo($data)
		{
			 
			$dbCon = AppModel::createConnection();
			$data['qloud_checkout_id']=$this -> encrypt_decrypt('encrypt',$data['check_id']);
			$stmt = $dbCon->prepare("select user_address.id,property_nickname,user_id,concat_ws(' ', first_name,last_name) as name,email from user_address left join user_logins on user_logins.id=user_address.user_id where user_address.id=(select room_type_id from hotel_checkout_detail where hotel_checkout_detail.id=?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['check_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowInfo = $result->fetch_assoc();
			$subject="Precheckin info";
			$to      = $rowInfo['email'];
			
			$emailContent='<html xmlns="http://www.w3.org/1999/xhtml" style="background-color: rgb(240, 240, 240);"><head>
  <title>Reservation confirmed</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <style type="text/css">
    /* GT AMERICA */

    @font-face {
      font-display: fallback;
      font-family: "GT America Regular";
      font-weight: 400;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
    }

    @font-face {
      font-display: fallback;
      font-family: "GT America Medium";
      font-weight: 600;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
    }

    @font-face {
      font-display: fallback;
      font-family: "GT America Condensed Bold";
      font-weight: 700;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
    }

    /* CLIENT-SPECIFIC RESET */

    body,
    table,
    td,
    a {
      -webkit-text-size-adjust: 100%;
      -ms-text-size-adjust: 100%;
    }

    /* Prevent WebKit and Windows mobile changing default text sizes */

    table,
    td {
      mso-table-lspace: 0pt;
      mso-table-rspace: 0pt;
    }

    /* Remove spacing between tables in Outlook 2007 and up */

    img {
      -ms-interpolation-mode: bicubic;
    }

    /* Allow smoother rendering of resized image in Internet Explorer */

    .im {
      color: inherit !important;
    }

    /* DEVICE-SPECIFIC RESET */

    a[x-apple-data-detectors] {
      color: inherit !important;
      text-decoration: none !important;
      font-size: inherit !important;
      font-family: inherit !important;
      font-weight: inherit !important;
      line-height: inherit !important;
    }

    /* iOS BLUE LINKS */

    /* RESET */

    img {
      border: 0;
      height: auto;
      line-height: 100%;
      outline: none;
      text-decoration: none;
      display: block;
    }

    table {
      border-collapse: collapse;
    }

    table td {
      border-collapse: collapse;
      display: table-cell;
    }

    body {
      height: 100% !important;
      margin: 0 !important;
      padding: 0 !important;
      width: 100% !important;
    }

    /* BG COLORS */

    .mainTable {
      background-color: #F0F0F0;
    }

    .mainTable--hospitality {
      background-color: #f7f2ed;
    }

    html {
      background-color: #F0F0F0;
    }

    /* VARIABLES */

    .bg-white {
      background-color: white;
    }

    .hr {
      /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
      background-color: #d3d3d8;
      border-collapse: collapse;
      mso-table-lspace: 0pt;
      mso-table-rspace: 0pt;
      mso-line-height-rule: exactly;
      line-height: 1px;
    }

    .textAlignLeft {
      text-align: left !important;
    }

    .textAlignRight {
      text-align: right !important;
    }

    .textAlignCenter {
      text-align: center !important;
    }

    .mt1 {
      margin-top: 6px;
    }

    .list {
      padding-left: 18px;
      margin: 0;
    }

    /* TYPOGRAPHY */

    body {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      color: #4f4f65;
      -webkit-font-smoothing: antialiased;
      -ms-text-size-adjust: 100%;
      -moz-osx-font-smoothing: grayscale;
      font-smoothing: always;
      text-rendering: optimizeLegibility;
    }

    .h1 {
      font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 700;
      vertical-align: middle;
      font-size: 36px;
      line-height: 42px;
    }

    .h2 {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 600;
      vertical-align: middle;
      font-size: 16px;
      line-height: 24px;
    }

    .text {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 16px;
      line-height: 21px;
    }

    .text-list {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 16px;
      line-height: 25px;
    }

    .textSmall {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 14px;
    }

    .text-xsmall {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-size: 11px;
      text-transform: uppercase;
      line-height: 22px;
      letter-spacing: 1px;
    }

    .text-bold {
      font-weight: 600;
    }

    .text-link {
      text-decoration: underline;
    }

    .text-linkNoUnderline {
      text-decoration: none;
    }

    .text-strike {
      text-decoration: line-through;
    }

    /* FONT COLORS */

    .textColorDark {
      color: #23233e;
    }

    .textColorNormal {
      color: #4f4f65;
    }

    .textColorBlue {
      color: #2020c0;
    }

    .textColorGrayDark {
      color: #7B7B8B;
    }

    .textColorGray {
      color: #A5A8AD;
    }

    .textColorWhite {
      color: #FFFFFF;
    }

    .textColorRed {
      color: #df3232;
    }

    /* BUTTON */

    .Button-primary-wrapper {
      border-radius: 3px;
      background-color: #2020C0;
    }

    .Button-primary {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      border-radius: 3px;
      border: 1px solid #2020C0;
      color: #ffffff;
      display: block;
      font-size: 16px;
      font-weight: 600;
      padding: 18px;
      text-decoration: none;
    }

    .Button-secondary-wrapper {
      border-radius: 3px;
      background-color: #ffffff;
    }

    .Button-secondary {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      border-radius: 3px;
      border: 1px solid #2020C0;
      color: #2020C0;
      display: block;
      font-size: 16px;
      font-weight: 600;
      padding: 18px;
      text-decoration: none;
    }

    /* LAYOUT */

    .Content-container {
      padding-left: 60px;
      padding-right: 60px;
    }

    .Content-container--main {
      padding-top: 54px;
      padding-bottom: 60px;
    }

    .Content {
      width: 580px;
      margin: 0 auto;
    }

    .wrapper {
      max-width: 600px;
    }

    .section {
      padding: 24px 0px;
      border-bottom: 1px solid #d3d3d8;
    }

    .section--noBorder {
      padding: 24px 0px 0;
    }

    .section--last {
      padding: 24px 0px;
    }

    .message {
      background-color: #F4F4F5;
      padding: 18px;
    }

    .card {
      border: 1px solid #d3d3d8;
      padding: 18px;
    }

    /* HEADER */

    .header-tockLogoImage {
      display: block;
      color: #F0F0F0;
    }

    .header-heroImage {
      padding-bottom: 24px;
    }

    /* PREHEADER */

    .preheader {
      display: none;
      font-size: 1px;
      color: #FFFFFF;
      line-height: 1px;
      max-height: 0px;
      max-width: 0px;
      opacity: 0;
      overflow: hidden;
    }

    /* BANNER */

    .notice {
      padding: 12px;
      background: #23233E;
      color: #FFFFFF;
      display: block;
      font-size: 14px;
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 600;
    }

    /* INTRO */

    .section--intro {
      padding-bottom: 48px;
    }

    /* BOOKING INFO */

    .business-logo__container {
      width: 48px;
      height: 48px;
      border-radius: 3px;
      border: 1px solid #d3d3d8;
      overflow: hidden;
    }

    .business-logo__image {
      border: 1px solid transparent;
      border-radius: 3px;
      width: 48px;
      height: 48px;
      display: block;
    }

    .business-address--address {
      width: 50%;
    }

    .business-address--map {
      width: 50%;
    }

    .business-address--map-image {
      width: 100%;
    }

    /* MOBILE TICKETS */

    .mobile-ticket--description {
      width: 65%;
      margin-top: 12px;
      margin-right: 5%;
    }

    .mobile-ticket--code {
      width: 30%;
    }

    .mobile-ticket--code-image {
      width: 100%;
    }

    /* RESERVATION ACTIONS */

    .linksTable {
      border-bottom: 1px solid #d3d3d8;
    }

    .linksTableRow {
      padding: 24px 12px;
    }

    .actions-icon {
      vertical-align: middle;
    }

    .actions-text {
      vertical-align: middle;
    }

    /* RECEIPT */

    .receipt__container {
      border: 1px solid #d3d3d8;
      padding: 24px;
    }

    .receipt__row {
      border-top: 1px solid #d3d3d8;
    }

    /* FEEDBACK ICONS */

    .feedback-link {
      border: 1px solid #d4d5da;
      border-radius: 3px;
      display: inline-block;
      width: calc(32% - 2px);
      padding: 10px 0;
    }

    .feedback-link-bumper {
      display: inline-block;
      width: 1%;
    }

    .feedback-link img {
      height: 50px;
      width: 50px;
    }

    /* SOCIAL ICONS */

    .social-link {
      display: inline-block;
      width: auto;
    }

    .social-link-text {
      padding: 14px 24px 14px 14px;
    }

    /* TABLET STYLES */

    @media screen and (max-width: 648px) {
      /* DEVICE-SPECIFIC RESET */
      div[style*="margin: 16px 0;"] {
        margin: 0 !important;
      }
      /* ANDROID CENTER FIX */
      /* LAYOUT */
      .wrapper {
        width: 100% !important;
        max-width: 100% !important;
      }
      .Content {
        width: 90% !important;
      }
      .Content-container {
        padding-left: 36px !important;
        padding-right: 36px !important;
      }
      .Content-container--main {
        padding-top: 30px !important;
        padding-bottom: 42px !important;
      }
      .responsiveTable {
        width: 100% !important;
      }
      /* RESERVATION ACTIONS */
      .linksTableRow {
        padding-left: 0 !important;
        padding-right: 0 !important;
        padding-top: 12px !important;
        padding-bottom: 12px !important;
      }
      .linksTableRow--borderRight {
        border-right: none !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      /* FEEDBACK LINK */
      .feedback-link img {
        height: 38px !important;
        width: 38px !important;
      }
    }

    /* MOBILE STYLES */

    @media screen and (max-width: 480px) {
      /* TYPOGRAPHY */
      .h1 {
        font-size: 30px !important;
        line-height: 30px !important;
      }
      .text {
        font-size: 16px !important;
        line-height: 22px !important;
      }
      /* BUTTON */
      .mobile-buttonContainer {
        width: 100% !important;
      }
      /* LAYOUT */
      .Content {
        width: 100% !important;
      }
      .Content-container {
        padding-left: 18px !important;
        padding-right: 18px !important;
      }
      .Content-container--main {
        padding-top: 24px !important;
        padding-bottom: 30px !important;
      }
      .section {
        padding: 18px 0 !important;
      }
      .section--last {
        padding: 18px 0 !important;
      }
      .header {
        padding: 0 18px !important;
      }
      .business-address--address {
        width: 100% !important;
      }
      .business-address--map {
        margin-top: 30px !important;
        width: 100% !important;
      }
      .mobile-ticket--description {
        width: 100% !important;
        margin-top: 0px !important;
      }
      .mobile-ticket--code {
        margin-top: 30px !important;
        margin-left: 0;
        width: 100% !important;
      }
      /* RECEIPT */
      .receipt__container {
        padding: 12px !important;
      }
      /* SOCIAL ICONS */
      .social-link {
        display: block !important;
        width: 100% !important;
        border-bottom: 1px solid #d3d3d8 !important;
      }
      /* INTRO */
      .section--intro {
        padding-top: 18px !important;
        padding-bottom: 18px !important;
      }
    }
  </style>
</head>

<body style="margin: 0 !important; padding: 0 !important; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; height: 100%; margin: 0; padding: 0; width: 100%; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; color: rgb(79, 79, 101); -webkit-font-smoothing: antialiased; -ms-text-size-adjust: 100%; -moz-osx-font-smoothing: grayscale; font-smoothing: always; text-rendering: optimizeLegibility;">
   
  <!--[if mso]>
    <style type="text/css">
.h1 {font-family: "Helvetica", "Arial", sans-serif !important; font-weight: 700 !important; vertical-align: middle !important; font-size: 36px !important; mso-line-height-rule: exactly;line-height: 42px !important;}
.h2 {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 600 !important;vertical-align: middle !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 24px !important;}
.text {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 21px !important;}
.text-list {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 25px !important;}
.textSmall {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 14px !important;}
.text-xsmall {font-family: "Helvetica", "Arial", sans-serif !important;font-size: 11px !important;text-transform: uppercase !important;mso-line-height-rule: exactly;line-height: 22px !important;letter-spacing: 1px !important;}
.text-bold {font-weight: 600 !important;}
.text-link {text-decoration: underline !important;}
.text-linkNoUnderline {text-decoration: none !important;}
.text-strike {text-decoration: line-through !important;}
.textColorDark {color: #23233e !important;}
.textColorNormal {color: #4f4f65 !important;}
.textColorBlue {color: #2020c0 !important;}
.textColorGray {color: #A5A8AD !important;}
.textColorWhite {color: #FFFFFF !important;}
.Button-primary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #ffffff !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
.Button-secondary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #2020C0 !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
    </style>
    <![endif]-->
  <!-- HIDDEN PREHEADER TEXT -->
  <div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;">
  </div>
  <table border="0" cellpadding="0" cellspacing="0" width="100%" class=" mainTable  " style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: rgb(240, 240, 240);">
    <tbody><tr><td style="display:none !important;
 visibility:hidden;
 mso-hide:all;
 font-size:1px;
 color:#ffffff;
 line-height:1px;
 max-height:0px;
 max-width:0px;
 opacity:0;
 overflow:hidden; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> We are thrilled that you will be joining us. If yo... </td>
    <!-- HEADER -->
    </tr><tr>
      <td align="center" class="header" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 580px; margin: 0 auto;">
          <tbody><tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <h1 style="font-size: 33px;font-weight: 800;line-height: 30px;">Qloud ID</h1>               </td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
        </tbody></table>
        <!--[if (gte mso 9)|(IE)]>
    </td>
    </tr>
    </table>
    <![endif]-->
      </td>
    </tr>
    <!-- CONTENT -->
    <tr>
      <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content bg-white" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: white; width: 580px; margin: 0 auto;">
          <tbody><tr>
            <td class="Content-container Content-container--main text textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101); padding-left: 60px; padding-right: 60px; padding-top: 54px; padding-bottom: 60px;">
              <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                <!-- RESTAURANT INFO -->
                <tbody><tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" valign="center" width="48" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="business-logo__container" style="width: 48px; height: 48px; border-radius: 3px; border: 1px solid rgb(211, 211, 216); overflow: hidden;">
                            <img src="'.$rowImage['image_path'].'" class="business-logo__image" width="48" height="48" alt="Logo" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block; border: 1px solid transparent; border-radius: 3px; width: 48px; height: 48px; display: block;">
                          </div>
                        </td>
                        <td width="12" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                        <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">'.$rowInfo["hotel_name"].'</span>                          </td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <!-- INTRO -->
                <tr>
                  <td valign="top" align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h1 textColorDark" style="font-family: &quot;GT America Condensed Bold&quot;, &quot;Roboto Condensed&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 700; vertical-align: middle; font-size: 36px; line-height: 42px; color: rgb(35, 35, 62);">Reservation confirmed</span>                          </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                          <!--[if gte mso 15]>&nbsp;<![endif]-->
                        </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <!-- MESSAGE -->
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr>
                  <td align="left" class="message" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(244, 244, 245); padding: 18px;">
                    <div class="text textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
                      <span class="text-bold textColorDark" style="font-weight: 600; color: rgb(35, 35, 62);">A message from '.$rowInfo["hotel_name"].'</span>
                      <br> We are thrilled that you will be joining us. If you would like to make any special arrangements or have questions about your reservation, please do not hesitate to reach out.
                    </div>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr>
                  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                    <!--[if gte mso 15]>&nbsp;<![endif]-->
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- BOOKING INFO -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody>
                      
                      
                      



<tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>

<tr>
                        <td align="center" valign="center" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <table border="0" cellspacing="0" cellpadding="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody><tr>
                              <td align="center" valign="center" width="100%" class="Button-primary-wrapper" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; border-radius: 3px; background-color: rgb(32, 32, 192);">
                              <a href="https://qloudid.com/public/index.php/Hotel/verifyPreCheckinQr/'.$data['qloud_checkout_id'].'" target="_blank" class="Button-primary" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; border-radius: 3px; border: 1px solid rgb(32, 32, 192); color: rgb(255, 255, 255); display: block; font-size: 16px; font-weight: 600; padding: 18px; text-decoration: none;">Precheckin Hotel</a>                                </td>
                            </tr>
                          </tbody></table>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <!-- ADDRESS -->
                <tr>
                  <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      
                      
                      
                      
                      <tr>
                        <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            </table>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                
                
                <tr>
                  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                    <!--[if gte mso 15]>&nbsp;<![endif]-->
                  </td>
                </tr>
                
                
                <!-- RECEIPT -->
                
                
                
                <!-- EDIT RECEIPT -->
                <!-- CANCELLATION POLICY -->
                
                
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- QUESTIONS -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; font-weight: 600; color: rgb(35, 35, 62);">
                            Questions?
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text textColorNormal mt1" style="margin-top: 6px; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
                            If you have questions about your reservation, contact us at&nbsp;
                            <a href="mailto:'.$rowInfo['fdesk_email'].'">'.$rowInfo["fdesk_email"].'</a>                            or by calling
                            <a href="tel:+'.$rowInfo[" fdesk_country_code"].'="" '.$rowinfo["fdesk_phone_number"].'"="">+'.$rowInfo["fdesk_country_code"].' '.$rowInfo["fdesk_phone_number"].'</a>.
                          </div>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
              </tbody></table>
            </td>
          </tr>
        </tbody></table>
      </td>
    </tr>
    <!-- FOOTER -->
    <tr>
      <td align="center" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; width: 580px; margin: 0 auto;">
        <!-- Will most likely required a feature flag -->
        <!--[if (gte mso 9)|(IE)]>
<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
<tr>
<td align="center" valign="top" width="600">
<![endif]-->
        <table width="100%" border="0" cellspacing="0" cellpadding="0" align="center" class="Content-container" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; padding-left: 60px; padding-right: 60px;">
          <tbody><tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="center" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <a href="https://www.exploretock.com" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;"> <img src="https://storage.googleapis.com/tock-public-assets/images-email-template/tock-brandmark-color.png" width="30" height="30" alt="Tock" border="0" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block;"> </a>              </td>
          </tr>
          <tr class="spacer">
            <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
              <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                 2019 Tock, Inc.
              </div>
              <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                All Rights Reserved
              </div>
            </td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
        </tbody></table>
        <!--[if (gte mso 9)|(IE)]>
</td>
</tr>
</table>
<![endif]-->
      </td>
    </tr>
  </tbody></table>



</body></html>';
			try {
				sendEmail($subject, $to, $emailContent);
			}
			catch(Exception $e) {
				  
				}
			 
			return 1;
		}
	
		function apartmentCheckedinInfo($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select precheckin_status,guest_adult,guest_children,hotel_checkout_detail.id,concat_ws(' ',first_name,last_name) as name,checkin_date,checkout_date,checkin_booking_date,checkout_booking_date from hotel_checkout_detail left join user_logins on user_logins.id=hotel_checkout_detail.user_id where room_type_id=? and hotel_property_type=2  order by checkin_booking_date desc");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			$date=strtotime(date('Y-m-d'));
			$row['enc']=$this->encrypt_decrypt('encrypt',$row['id']);
			$row['duration']=date('d M',strtotime($row['checkin_date'])).'-'.date('d M',strtotime($row['checkout_date']));
			$row['checkin_date']=date('d M Y',strtotime($row['checkin_date']));
			$row['checked_out_date']=date('d M Y',strtotime($row['checkout_date']));
			if($row['checkout_booking_date']<$date && $row['checked_in']==0)
			{
				$row['list_status']=0;
				$row['subheading']='Never checked-in';
			}
			else if($row['checkout_booking_date']>$date && $row['checked_in']==0 && $row['precheckin_status']!=1)
			{
				$row['list_status']=1;
				$row['subheading']='Not checked-in';
			}
			else if($row['checkout_booking_date']>$date && $row['checked_in']==0 && $row['precheckin_status']==1)
			{
				$row['list_status']=2;
				$row['subheading']='Pre-checked in';
			}
			else if($row['checked_in']>0)
			{
				$row['list_status']=3;
				$row['subheading']='Checked in';
			}
			/*if($row['checkin_booking_date']==$date)
			{
				$row['checkin_date']='Today';
			}*/
			 
		
			
			if($row['checkout_date']=='' || $row['checkout_date']==null)
			{
			$row['checked_out_date']='Not applicable';	
			continue;
			}
			$row['guest']=$row['guest_adult'].' adults & '.$row['guest_children'].' children';
			
			array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		
		
			function apartmentCheckedOutInfo($data)
			{ 
		
			$dbCon = AppModel::createConnection();
			$date=strtotime(date('Y-m-d'));
			$stmt = $dbCon->prepare("select actual_checkout_date,guest_adult,guest_children,hotel_checkout_detail.id,concat_ws(' ',first_name,last_name) as name,checkin_date,checkout_date,checkin_booking_date,checkout_booking_date,checked_in from hotel_checkout_detail left join user_logins on user_logins.id=hotel_checkout_detail.user_id where room_type_id=? and hotel_property_type=2 and checked_in in (1,2) order by checked_in,actual_checkout_date desc");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			$row['enc']=$this->encrypt_decrypt('encrypt',$row['id']);
			$row['duration']=date('d M',strtotime($row['checkin_date'])).'-'.date('d M',strtotime($row['checkout_date']));
			$row['check_in_date']=date('d M Y',strtotime($row['checkin_date']));
			$row['checked_out_date']=date('d M Y',strtotime($row['checkout_date']));
			/*if($row['checkout_booking_date']==$date)
			{
				$row['checked_out_date']='Today';
			}*/
			if($row['checkout_date']=='' || $row['checkout_date']==null)
			{
			$row['checked_out_date']='Not applicable';
			continue;			
			}
			$row['got_to_cleaning']=0;
			if($row['checked_in']==2 && $j==0)
			{
				$row['got_to_cleaning']=1;
				$j++;
			}
			$row['guest']=$row['guest_adult'].' adults & '.$row['guest_children'].' children';
			
			array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		
		
		function apartmentCheckedOutCleeningHistory($data)
			{ 
		
			$dbCon = AppModel::createConnection();
			$date=strtotime(date('Y-m-d'));
			$stmt = $dbCon->prepare("select is_rentable,is_cleaned,actual_checkout_date,guest_adult,guest_children,hotel_checkout_detail.id,concat_ws(' ',first_name,last_name) as name,checkin_date,checkout_date,checkin_booking_date,checkout_booking_date,checked_in from hotel_checkout_detail left join user_logins on user_logins.id=hotel_checkout_detail.user_id where room_type_id=? and hotel_property_type=2 and checked_in=2 order by checked_in,actual_checkout_date desc");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			$row['enc']=$this->encrypt_decrypt('encrypt',$row['id']);
			$row['duration']=date('d M',strtotime($row['checkin_date'])).'-'.date('d M',strtotime($row['checkout_date']));
			$row['check_in_date']=date('d M Y',strtotime($row['checkin_date']));
			$row['checked_out_date']=date('d M Y',strtotime($row['checkout_date']));
			if($row['actual_checkout_date']==$date)
			{
				$row['actual_checkout_date']='Today';
			}
			else
			{
				$row['actual_checkout_date']=date('Y-m-d',$row['actual_checkout_date']);
			}
			
			if($row['is_cleaned']==0)
			{
				$row['status']='Not clean';
			}
			else if($row['is_cleaned']==1 && $row['is_rentable']==0)
			{
				$row['status']='Clean but not rentable';
			}
			else if($row['is_cleaned']==1 && $row['is_rentable']==1)
			{
				$row['status']='Clean & rentable';
			}
			
			$row['guest']=$row['guest_adult'].' adults & '.$row['guest_children'].' children';
			
			array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		
		function reservationHistoryList($data)
		{
			$dbCon = AppModel::createConnection();
			$date=strtotime(date('Y-m-d'));
			$stmt = $dbCon->prepare("select id,checkin_date,checked_in,precheckin_status,checkin_booking_date from hotel_checkout_detail where room_type_id=? and hotel_property_type=2 order by checkin_booking_date desc");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			 $row['checkin_date']=date('Y-m-d',strtotime($row['checkin_date'])); 
			$date=strtotime(date('Y-m-d'));
			if($row['checkin_booking_date']<$date && $row['checked_in']==0 && $row['precheckin_status']!=1)
			{
				$row['precheckin_status']=3;
			}
			else if($row['checkin_booking_date']==$date)
			{
				$row['checkin_date']='Today';
			}
			else if(($row['checked_in']==1 || $row['checked_in']==2) && $row['precheckin_status']!=1)
			{
				$row['precheckin_status']=3;
			}
			array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
		}
		
		
		function cleaningJobStatusInfo($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select job_started,cleaning_company_user_service_request.service_type_id,cleaning_company_user_service_request.id,category_name,address,port_number,cleaning_job_status from cleaning_company_user_service_request left join user_address on user_address.id=cleaning_company_user_service_request.user_address_id left join cleaning_service_category_availability on cleaning_service_category_availability.id=cleaning_company_user_service_request.category_available_id left join cleaning_service_category on cleaning_service_category.id=cleaning_service_category_availability.category_id where cleaning_company_user_service_request.id=?");
			
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("i", $data['cleaning_job_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if($row['service_type_id']==1)
			{
				$service='Reg_';
			}
			else if($row['service_type_id']==2)
			{
				$service='Dee_';
			}
			else if($row['service_type_id']==3)
			{
				$service='Ten_';
			}
			$row['category_name']=$service.$row['category_name'];
			$row['job_started']=date('d M-h:i',strtotime($row['job_started']));
			$row['job_end']=date('d M-h:i');
			$stmt = $dbCon->prepare("select cleaning_company_employee_jobs.id,concat_ws(' ',first_name,last_name) as name,is_inspector,is_leader from cleaning_company_employee_jobs left join employees on employees.id=cleaning_company_employee_jobs.employee_id where cleaning_job_id=? and is_leader=1");
			$stmt->bind_param("i", $data['cleaning_job_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowTeam = $result->fetch_assoc();
			$row['team_leader']=$rowTeam['name'];
			
			$stmt = $dbCon->prepare("select count(cleaning_company_employee_jobs.id) as num from cleaning_company_employee_jobs   where cleaning_job_id=? and checked_in_status=1");
			$stmt->bind_param("i", $data['cleaning_job_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowTeamCount = $result->fetch_assoc();
			$row['team_count']=$rowTeamCount['num'];
			$stmt->close();
			$dbCon->close();
			return $row;
			
			
		}
		
		
		function startCleaningJob($data)
		{
			$dbCon = AppModel::createConnection();
			$a=explode(',',$data['cleaners_active']);
			foreach($a as $key)
			{
			$stmt = $dbCon->prepare("update cleaning_company_employee_jobs set checked_in_status=1 where id=?");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("i", $key);
			$stmt->execute();	
			}
			
			$stmt = $dbCon->prepare("update cleaning_company_user_service_request set cleaning_job_status=1,job_started=now() where id=?");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("i", $data['cleaning_job_id']);
			$stmt->execute();
			
			$stmt->close();
			$dbCon->close();
			return 1;
			
			
		}
		
		function updateCleaningJobDone($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update cleaning_company_user_service_request set updated_cleaning_todos=? where id=?");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("si",$data['updated_cleaning_todos'], $data['cleaning_job_id']);
			$stmt->execute();
			
			$stmt->close();
			$dbCon->close();
			return 1;
			
			
		}
		
		function updateCleaningFinalStatus($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update cleaning_company_employee_jobs set checked_in_status=2 where cleaning_job_id=? and checked_in_status=1");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("i", $data['cleaning_job_id']);
			$stmt->execute();	
			$stmt = $dbCon->prepare("update cleaning_company_user_service_request set cleaning_job_status=2,job_finalized=now() where id=?");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("i",$data['cleaning_job_id']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("update user_address set whether_it_is_cleen=1,if_rentable=? where id=(select user_address_id from cleaning_company_user_service_request where id=?)"); 
			$stmt->bind_param("ii",$data['if_rentable'], $data['cleaning_job_id']);
			$stmt->execute();
			
			$stmt->close();
			$dbCon->close();
			return 1;
			
			
		}
		
		
		function cleanersAssignedList($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select cleaning_company_employee_jobs.id,concat_ws(' ',first_name,last_name) as name,is_inspector,is_leader from cleaning_company_employee_jobs left join employees on employees.id=cleaning_company_employee_jobs.employee_id where cleaning_job_id=?");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("i", $data['cleaning_job_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				if($row['is_leader']==1)
				{
					$row['name']="You";
				}
				array_push($org,$row);
				 
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
		

		function cleaningServiceAvailableTodoDetail($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select cleaning_company_user_service_request.id,category_name,address,port_number,cleaning_job_status,cleaning_service_category_availability.service_type_id,cleaning_service_category_availability.category_id,cleaning_service_category_availability.company_id from cleaning_company_user_service_request left join user_address on user_address.id=cleaning_company_user_service_request.user_address_id left join cleaning_service_category_availability on cleaning_service_category_availability.id=cleaning_company_user_service_request.category_available_id left join cleaning_service_category on cleaning_service_category.id=cleaning_service_category_availability.category_id where cleaning_company_user_service_request.id=?");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("i", $data['cleaning_job_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCategory = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select * from cleaning_service_subcategory where cleaning_category_id=?");
			$stmt->bind_param("i", $rowCategory['category_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
				array_push($org,$row);
				
			 $org[$j]['todos']=array();
		 	$stmt = $dbCon->prepare("select cleaning_company_selected_service_todos.id,is_selected,todo_name from cleaning_company_selected_service_todos left join cleaning_subcategory_todo on cleaning_subcategory_todo.id=cleaning_company_selected_service_todos.cleaning_todo_id where cleaning_company_selected_service_todos.cleaning_subcategory_id=? and cleaning_company_selected_service_todos.cleaning_category_id=? and cleaning_company_selected_service_todos.company_id=? and cleaning_company_selected_service_todos.service_type_id=? and is_selected=1");
			$stmt->bind_param("iiii", $row['id'], $rowCategory['category_id'], $rowCategory['company_id'], $rowCategory['service_type_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			 
			while($row1 = $result1->fetch_assoc())
			{
				array_push($org[$j]['todos'],$row1);	 
			 
			}			
											
			 $j++;
			 
			}
			  
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		
		function teamLeaderCleaningJobs($data)
		{
			$dbCon = AppModel::createConnection();
			
			$apartment_id= $this -> encrypt_decrypt('decrypt',$data['aid']);
			$stmt = $dbCon->prepare("select cleaning_company_user_service_request.id,category_name,address,port_number,cleaning_job_status from cleaning_company_user_service_request left join user_address on user_address.id=cleaning_company_user_service_request.user_address_id left join cleaning_service_category_availability on cleaning_service_category_availability.id=cleaning_company_user_service_request.category_available_id left join cleaning_service_category on cleaning_service_category.id=cleaning_service_category_availability.category_id where cleaning_company_user_service_request.id in (select cleaning_job_id from cleaning_company_employee_jobs where employee_id=(select id from employees where company_id=? and user_login_id=?) and is_leader=1) and cleaning_company_user_service_request.user_address_id=?");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("iii", $data['company_id'],$data['user_id'],$apartment_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
				
				array_push($org,$row);
				$org[$j]['enc']=$this->encrypt_decrypt('encrypt',$row['id']);
				
				$j++;
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
		function updateDamagedRentableInfo($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update user_address set whether_it_is_cleen=?,if_damaged=?,if_rentable=? where id=?"); 
			$stmt->bind_param("iiii",$data['is_cleened'],$data['if_damaged'],$data['if_rentable'], $data['apartment_id']);
			$stmt->execute();	
			
			$stmt = $dbCon->prepare("update hotel_checkout_detail set is_cleaned=?,if_damaged=?,is_rentable=? where id=?"); 
			$stmt->bind_param("iiii",$data['is_cleened'],$data['if_damaged'],$data['if_rentable'], $data['checkout_id']);
			$stmt->execute();	
			if($_POST['is_cleened']==1)
			{
			$stmt = $dbCon->prepare("insert into user_apartment_cleening_history (apartment_id,cleening_date,checkout_id) values (?,?,?)");
			$stmt->bind_param("isi", $data['apartment_id'],$data['cleening_date'],$data['checkout_id']);
			$stmt->execute();	
			}
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		function retriveUserDeliveryAddressesDetail($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select id,address,city,zipcode,port_number,name_on_house,bedroom_updated,bathroom_updated,property_nickname, ownership_updated,other_room_updated,property_composition_updated from  user_address where id=?");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$row['address']=html_entity_decode($row['address'],ENT_NOQUOTES, 'UTF-8');
			$row['name_on_house']= html_entity_decode($row['name_on_house'],ENT_NOQUOTES, 'UTF-8');
			$row['property_nickname']= html_entity_decode($row['property_nickname'],ENT_NOQUOTES, 'UTF-8');
			$row['user_address']=1;
			$row['heading_address']=html_entity_decode($row['name_on_house'],ENT_NOQUOTES, 'UTF-8').','.html_entity_decode($row['address'],ENT_NOQUOTES, 'UTF-8').'-'.$row['port_number']; 
			$row['subheading_address']=html_entity_decode($row['city'],ENT_NOQUOTES, 'UTF-8').' - '.$row['zipcode']; 
			$stmt->close();
			$dbCon->close(); 
			 
			return $row;
		}
		function checkoutApartmentGuest($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$data['actual_checkout_date']=strtotime($data['actual_checkout_date']);
			$stmt = $dbCon->prepare("update hotel_checkout_detail set checked_in=2,actual_checkout_date=? where id=?"); 
			$stmt->bind_param("si",$data['actual_checkout_date'],$data['checkout_id']);
			$stmt->execute();	
			
			$stmt = $dbCon->prepare("update hotel_checkout_dependent_detail set checked_in_dependent=2 where hotel_checkout_id=?"); 
			$stmt->bind_param("i",$data['checkout_id']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("update user_address set whether_it_is_cleen=0 where id=(select room_type_id from hotel_checkout_detail where id=?)"); 
			$stmt->bind_param("i",$data['checkout_id']);
			$stmt->execute();	
			
			$curl = curl_init();
			curl_setopt_array($curl, array(
			  CURLOPT_URL => 'https://dstricts.com/user/index.php/DstrictsApp/checkOutApartmentGuest',
			  CURLOPT_RETURNTRANSFER => true,
			  CURLOPT_ENCODING => '',
			  CURLOPT_MAXREDIRS => 10,
			  CURLOPT_TIMEOUT => 0,
			  CURLOPT_FOLLOWLOCATION => true,
			  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
			  CURLOPT_CUSTOMREQUEST => 'POST',
			  CURLOPT_POSTFIELDS => array('checkout_id' => $data['checkout_id']),
			)); 
			$response = curl_exec($curl);
			curl_close($curl);
			
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		
		
		
		function updateOwnerInfo($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("update user_address set ownership_updated=1,property_type=?,ownership_detail=?,bought_by_you=?,bought_rent_allowed=?,rent_contract_on_you=?,allowed_to_rent_out=? where id=?"); 
			$stmt->bind_param("iiiiiii",$data['property_type'],$data['ownership_detail'],$data['bought_by_you'],$data['bought_rent_allowed'],$data['rent_contract_on_you'],$data['allowed_to_rent_out'], $data['apartment_id']);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		function updatePropertyStart($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("update user_logins set property_started=1 where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['user_id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;	
		}
		
		
		function userIdentificationCount($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select count(id) as num  from user_identification where user_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			return $row['num'];	
		}
		
		
		function userCardsCount($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select count(id) as num  from user_cards where user_login_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			return $row['num'];	
		}
		
		
		
		function addIdentificatorRegisteredUser($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select user_identification.id,country_of_residence  from user_identification left join user_logins on user_logins.id= user_identification.user_id where  identity_number=? and country_of_residence=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("si", $data['IdentificatorText'],$data['CountryId']);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();
			 
			$img_name1='';
			$img_name2='';
			$a=array();
			$b=array();
			$a=explode('/',$data['IssueDate']);
			$b=explode('/',$data['ExpiryDate']);
			if($a[1]<10)
			{
				$a[1]='0'.$a[1];
			}
			if($b[1]<10)
			{
				$b[1]='0'.$b[1];
			}
			$arr=array();
			if(empty($row))
			{
			 
			$stmt = $dbCon->prepare("insert into user_identification(user_id,identification_type,identity_number,issue_month,issue_year,expiry_month, expiry_year,created_on,front_image_path, back_image_path,issue_date,expiry_date)
			values(?, ?, ?, ?, ?, ?, ?, now(),?,?, ?, ?)");
			$stmt->bind_param("iissisissss", $data['guest_user_Id'],$data['IdentificatorId'],$data['IdentificatorText'],$a[1],$a[2],$b[1],$b[2],$img_name1,$img_name2,$data['IssueDate'],$data['ExpiryDate']);	
			$stmt->execute();
			 
			
			$stmt->close();
			$dbCon->close();
			return 1;	
			}
			else
			{
			$stmt->close();
			$dbCon->close();
			return 0;	
			 
			}
			
			 
		}
		
		function addIdentificatorImagesRegisteredUser($data)
		{
			$dbCon = AppModel::createConnection();
			 
			 
			$stmt = $dbCon->prepare("select user_identification.id  from user_identification where  user_id=? and identification_type=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['guest_user_Id']);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();
			
			$data1 = strip_tags($data['ImageData']);
			$data1='url("data:image/png;base64,'.$data1.'")';
			//echo $data; die;
			define('UPLOAD_DIR','../estorecss/'); // image dir path
			$img_name1="new".microtime();
			file_put_contents(UPLOAD_DIR.$img_name1.".txt", $data1);
				 
			$arr=array();
			 
			if($data['imageId']==1)
			{
			$stmt = $dbCon->prepare("update user_identification set front_image_path=? where id=?");
			}
			else
			{
			$stmt = $dbCon->prepare("update user_identification set back_image_path=?,is_completed=1 where id=?");	
			}
			$stmt->bind_param("si",  $img_name1,$row['id']);	
			$stmt->execute();
			
			$stmt->close();
			$dbCon->close();
			 
			return 1;	
			 
			 
		}
		

		function apartmentBookingDetailInfo($data)
		{
			$dbCon = AppModel::createConnection();
			$id= $data['booking_id']; 
			$stmt = $dbCon->prepare("select checkin_code,is_paid,passport_image,buyer_id,is_buyer_company,hotel_checkout_detail.user_id,user_address.address as visiting_address,user_address.port_number,user_address.city as visiting_city,user_address.state as visiting_state,user_address.id as p_id,room_type_id,total_days,price,property_nickname as hotel_name,country_code as fdesk_country_code,phone_number as fdesk_phone_number from hotel_checkout_detail left join user_address on user_address.id= hotel_checkout_detail.room_type_id left join user_profiles on user_profiles.user_logins_id=user_address.user_id left join user_logins on user_logins.id=user_address.user_id left join phone_country_code on user_logins.country_of_residence=phone_country_code.id where hotel_checkout_detail.id=?");
				
			/* bind parameters for markers */
			$stmt->bind_param("i", $id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowPrice = $result->fetch_assoc();
			
			$stmt->close();
			$dbCon->close();
			return $rowPrice;
		}
		function saveCompanyDetails($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$id= $data['booking_id']; 
			$bookingDetail=$this->apartmentBookingDetailInfo($data);
			$data['is_paid']=$bookingDetail['is_paid'];
			$data['price']=$bookingDetail['price']*$bookingDetail['total_days'];
			$data['d_address']=htmlentities($data['d_address'],ENT_NOQUOTES, 'ISO-8859-1');
			if($bookingDetail['is_paid']==0)
			$code=0;
			else
			{
				$code=$bookingDetail['checkin_code'];
			}
			if($data['is_paid']==0)
			{
			$data['name_on_card']= htmlentities($data['name_on_card'],ENT_NOQUOTES, 'ISO-8859-1');	
			}
			else
			{
				$data['name_on_card']= '';
				$data['cvv']= ''; 
				$data['expiry_month']= '';
				$data['expiry_year']= '';
			}
			$stmt = $dbCon->prepare("update hotel_checkout_detail set reservation_confirmed=1,company_name=?,cid_number=?,d_address=?,dcity=?,dzip=?,dpo_number=?,`card_number`=?,cvv_number=?,expiry_month=?,expiry_year=?,name_on_card=? where id=?");
			$stmt->bind_param("sssssssssssi",$data['company_name'],$data['cid_number'],$data['d_address'],$data['dcity'], $data['dzip'],$data['dpo_number'],$data['card_number'],$data['cvv'],$data['expiry_month'],$data['expiry_year'],$data['name_on_card'],$id);
			$stmt->execute();
			
			if($data['is_paid']==0)
			{
			$ch = curl_init();
			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/tokens');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPTdata, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "card[number]=4242424242424242&card[exp_month]=2&card[exp_year]=2040&card[cvc]=314");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);
			$a=json_decode($result,true);
			 
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/customers');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPTdata, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "name=".$row['first_name']."&email=".$row['email']."&source=".$a['id']."&description=My");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);
			$b=json_decode($result,true);
			$cuId=$b['id'];
			
			$total_price=$data['price']*100;
			if($total_price<500)
			{
				$total_price=500;
			}
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/charges');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPTdata, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "customer=".$b['id']."&amount=".$total_price."&currency=sek&description=My");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);			
			$c=json_decode($result,true);
			$Chargeid=$c['id'];	
			$j=0;
					while($j==0)
					{
					$code=mt_rand(1111,9999); 
					$stmt = $dbCon->prepare("select id from hotel_checkout_detail where checkin_code=?");
					/* bind parameters for markers */
					$stmt->bind_param("s",$code);
					$stmt->execute();
					$result = $stmt->get_result();
					$rowCode = $result->fetch_assoc();
					if(empty($rowCode))
					{
						$j++;
					}
					}
			 
			$data['property_id']=$data['booking_id'];
			$stmt = $dbCon->prepare("update hotel_checkout_detail set checkin_code=?,is_paid=1,cust_id=?,transection_id=? where id=?");
			$stmt->bind_param("sssi",$code, $cuId,$Chargeid,$id);
			$stmt->execute();
			
			$this->sendBookingInfo($data);
			}
			else
			{
			$cuId='';
			$Chargeid='';
			}
			$address_id='';
			$card_id='';
			
			$curl = curl_init();
			curl_setopt_array($curl, array(
			  CURLOPT_URL => 'https://dstricts.com/user/index.php/DstrictsApp/updateApartmentBooking',
			  CURLOPT_RETURNTRANSFER => true,
			  CURLOPT_ENCODING => '',
			  CURLOPT_MAXREDIRS => 10,
			  CURLOPT_TIMEOUT => 0,
			  CURLOPT_FOLLOWLOCATION => true,
			  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
			  CURLOPT_CUSTOMREQUEST => 'POST',
			  CURLOPT_POSTFIELDS => array('checkin_code'=>$code,'is_paid' =>1,'card_id' => $card_id,'address_id' => $address_id,'cuId' => $cuId,'Chargeid' => $Chargeid,'checkout_id' => $id),
			)); 
			$response = curl_exec($curl);
			curl_close($curl);
			
			
			$stmt->close();
			$dbCon->close();
			return 1;
			 
		}
		
		function updateUserPersonalAddress($data)
		{
		$dbCon = AppModel::createConnection($data);
		$id=$data['booking_id']; 
		$stmt = $dbCon->prepare("select checkin_code,is_paid,passport_image,buyer_id,is_buyer_company,hotel_checkout_detail.user_id,user_address.address as visiting_address,user_address.port_number,user_address.city as visiting_city,user_address.state as visiting_state,user_address.id as p_id,room_type_id,total_days,price,property_nickname as hotel_name,country_code as fdesk_country_code,phone_number as fdesk_phone_number from hotel_checkout_detail left join user_address on user_address.id= hotel_checkout_detail.room_type_id left join user_profiles on user_profiles.user_logins_id=user_address.user_id left join user_logins on user_logins.id=user_address.user_id left join phone_country_code on user_logins.country_of_residence=phone_country_code.id where hotel_checkout_detail.id=?");
			
		/* bind parameters for markers */
		$stmt->bind_param("i", $id);
		$stmt->execute();
		$result = $stmt->get_result();
		$rowPrice = $result->fetch_assoc();
		$address_id=$this->addDeliveryAdddress($data);
		$card_id=$this->saveUserCardDetails($data);
		 
		$code=0;
		 
		if($data['is_company']==0 && $rowPrice['is_paid']==0)
			{
			$ch = curl_init();
			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/tokens');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPTdata, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "card[number]=4242424242424242&card[exp_month]=2&card[exp_year]=2040&card[cvc]=314");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);
			$a=json_decode($result,true);
			 
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/customers');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPTdata, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "name=".$row['first_name']."&email=".$row['email']."&source=".$a['id']."&description=My");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);
			$b=json_decode($result,true);
			$cuId=$b['id'];
			
			$total_price=$rowPrice['price']*$rowPrice['total_days']*100;
			if($total_price<500)
			{
				$total_price=500;
			}
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/charges');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPTdata, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "customer=".$b['id']."&amount=".$total_price."&currency=sek&description=My");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);			
			$c=json_decode($result,true);
			$Chargeid=$c['id'];	
			$rowPrice['is_paid']=1;
			
					$j=0;
					while($j==0)
					{
					$code=mt_rand(1111,9999); 
					$stmt = $dbCon->prepare("select id from hotel_checkout_detail where checkin_code=?");
					/* bind parameters for markers */
					$stmt->bind_param("s",$code);
					$stmt->execute();
					$result = $stmt->get_result();
					$rowCode = $result->fetch_assoc();
					if(empty($rowCode))
					{
						$j++;
					}
					}
			 
			
			$data['property_id']=$data['booking_id'];
			$stmt = $dbCon->prepare("update hotel_checkout_detail set reservation_confirmed=1,checkin_code=?,is_paid=1,card_id=?,delivery_address_id=?,cust_id=?,transection_id=? where id=?");
			$stmt->bind_param("siissi",$code, $card_id,$address_id,$cuId,$Chargeid,$id);
			$stmt->execute();
			
			$this->sendBookingInfo($data);
			}
		
			$curl = curl_init();
			curl_setopt_array($curl, array(
			  CURLOPT_URL => 'https://dstricts.com/user/index.php/DstrictsApp/updateApartmentBooking',
			  CURLOPT_RETURNTRANSFER => true,
			  CURLOPT_ENCODING => '',
			  CURLOPT_MAXREDIRS => 10,
			  CURLOPT_TIMEOUT => 0,
			  CURLOPT_FOLLOWLOCATION => true,
			  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
			  CURLOPT_CUSTOMREQUEST => 'POST',
			  CURLOPT_POSTFIELDS => array('checkin_code'=>$code,'is_paid' =>$rowPrice['is_paid'],'card_id' => $card_id,'address_id' => $address_id,'cuId' => $cuId,'Chargeid' => $Chargeid,'checkout_id' => $id),
			)); 
			$response = curl_exec($curl);
			curl_close($curl);
		$stmt->close();	 
		$dbCon->close();
		return 1;
		}
		

		function saveUserCardDetails($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$id= $this -> encrypt_decrypt('decrypt',$data['booking_id']); 
			$data['card_type']='Visa';			
			$stmt = $dbCon->prepare("select user_logins.id,first_name,last_name,ssn,country_of_residence,email,sex,dob_day,dob_month,dob_year,country_phone,phone_number, address,user_profiles.city,user_profiles.country,user_profiles.zipcode,grading_status from user_logins left join user_profiles on user_profiles.user_logins_id=user_logins.id  where user_logins.id=(select user_id from hotel_checkout_detail where id=?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $id);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();
			$stmt = $dbCon->prepare("insert into user_cards(`user_login_id`,`created_on`,`card_number`,card_cvv,exp_month,exp_year,name_on_card,card_type) values(?, now(), ?, ?, ?, ?, ?, ?)");
			$stmt->bind_param("isiiiss", $row['id'],$data['card_number'],$data['cvv'],$data['expiry_month'],$data['expiry_year'],htmlentities($data['name_on_card'],ENT_NOQUOTES, 'ISO-8859-1'),$data['card_type']);
			$stmt->execute();
			$id=$stmt->insert_id;
			$stmt->close();
			$dbCon->close();
			return $id;
			 
		}
		
		function addDeliveryAdddress($data)
		{
			$dbCon = AppModel::createConnection();
			$id= $this -> encrypt_decrypt('decrypt',$data['booking_id']);    
			$data['same_invoice']=1;
			$data['same_name']=1;
			$stmt = $dbCon->prepare("select user_logins.id,first_name,last_name,ssn,country_of_residence,email,sex,dob_day,dob_month,dob_year,country_phone,phone_number, address,user_profiles.city,user_profiles.country,user_profiles.zipcode,grading_status from user_logins left join user_profiles on user_profiles.user_logins_id=user_logins.id  where user_logins.id=(select user_id from hotel_checkout_detail where id=?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $id);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();
			
			if($data['same_name']==1)
			{
			$full_name=$row['first_name'].' '.$row['last_name'];	
			}
			else
			{
			$full_name=	htmlentities($data['flname'],ENT_NOQUOTES, 'ISO-8859-1');
			}
			if($data['same_invoice']==1)
			{
			$data['iaddress']=$data['d_address'];	
			$data['i_port_number']=$data['dpo_number'];	
			$data['izip']=$data['dzip'];
			$data['icity']=$data['dcity'];
			}
			$data['entry_code']='';
			$st=0;
			$data['d_address']=htmlentities($data['d_address'],ENT_NOQUOTES, 'ISO-8859-1');
			$data['iaddress']=htmlentities($data['iaddress'],ENT_NOQUOTES, 'ISO-8859-1');
			$stmt = $dbCon->prepare("insert into  user_address (`address`  , `city`  , `zipcode` , `port_number` , `invoice_address`  , `invoice_city`  , `invoice_zipcode`  , `invoice_port_number`  , `is_name_same` , `is_invoice_same`  , `name_on_house`  ,entry_code , user_id, created_on, is_personal_address) values(?,?,?,?,?,?,?,?,?,?,?,?,?,now(),?)");
				/* bind parameters for markers */
			$stmt->bind_param("ssssssssiissii",$data['d_address'],$data['dcity'], $data['dzip'],$data['dpo_number'],$data['iaddress'],$data['icity'],$data['izip'],$data['i_port_number'],$data['same_invoice'],$data['same_name'],$full_name,$data['entry_code'],$row['id'],$st);
			$stmt->execute();
			$id=$stmt->insert_id;
			$stmt = $dbCon->prepare("update user_profiles set name_on_door=?, entry_code=?, full_address=?, port_number=?, address=?, city=?, zipcode=?,invoice_address=?,invoice_zipcode=?,invoice_city=?,invoice_port=?,is_invoice_same=?,is_name_on_house_same=?, is_id_active=1  where user_logins_id=?");
				/* bind parameters for markers */
			$stmt->bind_param("sssssssssssiii",$full_name,$data['entry_code'], $data['d_address'],$data['dpo_number'],$data['d_address'],$data['dcity'],$data['dzip'],$data['d_address'],$data['dzip'],$data['dcity'],$data['dpo_number'],$data['same_invoice'],$data['same_name'],$row['id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return $id;
		}
		
		function sendBookingToNewUser($data)
		{
			$dbCon = AppModel::createConnection($data);
			$id= $data['apartment_id'];    
			 
			$date1=strtotime($data['checkin_date']);  
			$date2=strtotime($data['checkout_date']);
			$start_date=strtotime($data['checkin_date']);  
			$end_date=strtotime($data['checkout_date']);
			$total_days=($end_date-$start_date) / (60 * 60 * 24);
			$data['guest_infants']=0;
			$data['hotel_property_type']=2;
			$user_id=$data['guest_user_id'];
			$stmt = $dbCon->prepare("select email from user_logins where id=?");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("i", $user_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$data['guest_email']=$row['email'];
			$code=0; 
			$st=1;
			if($data['is_paid']==3)
			{
				$data['is_paid']=0;
			}
			else
			{
				$data['is_paid']=1;
			}
			$stmt = $dbCon->prepare("insert into `hotel_checkout_detail`(price,is_paid,checkin_code,guest_email,user_id,buyer_id,`guest_adult`,`guest_children`,`guest_infant`,`checkin_date`,`checkout_date`,`room_type_id`,`total_days`,`created_on`,hotel_property_type,checkin_booking_date,checkout_booking_date,reservation_confirmed) values (?,?,?,?,?,?, ?, ?, ?, ?, ?,  ?, ?, now(), ?,?,?,?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("iiisiiiiissiiissi",$data['room_price'],$data['is_paid'],$code,$data['guest_email'],$user_id,$user_id, $data['guest_adults'], $data['guest_children'], $data['guest_infants'],$data['checkin_date'],$data['checkout_date'],$id,$total_days,$data['hotel_property_type'],$date1,$date2,$code);
			$stmt->execute();
			$checkid=$stmt->insert_id;
			 $curl = curl_init();
			curl_setopt_array($curl, array(
			  CURLOPT_URL => 'https://dstricts.com/user/index.php/DstrictsApp/mannualApartmentBooking',
			  CURLOPT_RETURNTRANSFER => true,
			  CURLOPT_ENCODING => '',
			  CURLOPT_MAXREDIRS => 10,
			  CURLOPT_TIMEOUT => 0,
			  CURLOPT_FOLLOWLOCATION => true,
			  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
			  CURLOPT_CUSTOMREQUEST => 'POST',
			  CURLOPT_POSTFIELDS => array('checkin_code' => $code,'user_id' => $user_id,'guest_email' => $data['guest_email'],'guest_adults' => $data['guest_adults'],'guest_children' => $data['guest_children'],'guest_infants' => $data['guest_infants'],'date1' => $data['checkin_date'],'date2' => $data['checkout_date'],'id' => $id,'checkout_id' => $checkid,'total_days' => $total_days,'price' => $data['room_price'],'hotel_property_type' => 2,'is_paid' => $data['is_paid']),
			));

			$response = curl_exec($curl);
  
			curl_close($curl);
			
			$stmt = $dbCon->prepare("select passport_image,buyer_id,is_buyer_company,hotel_checkout_detail.user_id,user_address.address as visiting_address,user_address.port_number,user_address.city as visiting_city,user_address.state as visiting_state,user_address.id as p_id,room_type_id,total_days,price,property_nickname as hotel_name,country_code as fdesk_country_code,phone_number as fdesk_phone_number from hotel_checkout_detail left join user_address on user_address.id= hotel_checkout_detail.room_type_id left join user_profiles on user_profiles.user_logins_id=user_address.user_id left join user_logins on user_logins.id=user_address.user_id left join phone_country_code on user_logins.country_of_residence=phone_country_code.id where hotel_checkout_detail.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $checkid);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowInfo = $result->fetch_assoc();
			$rowInfo['enc_p_id']= $this -> encrypt_decrypt('encrypt',$rowInfo['p_id']);  
			$stmt = $dbCon->prepare("select concat_ws(' ', first_name,last_name) as name,email from user_logins where id = ?");
        
			/* bind parameters for markers */
			$stmt->bind_param("i", $rowInfo['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowUser    = $result->fetch_assoc();
			$data['checkid']= $this -> encrypt_decrypt('encrypt',$checkid);
			$rowInfo['name']=$rowUser['name'];
			$rowInfo['email']=$rowUser['email'];	 
			$to      = $rowInfo['email'];
			
			$emailContent='<html xmlns="http://www.w3.org/1999/xhtml" style="background-color: rgb(240, 240, 240);"><head>
  <title>Reservation confirmed</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <style type="text/css">
    /* GT AMERICA */

    @font-face {
      font-display: fallback;
      font-family: "GT America Regular";
      font-weight: 400;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
    }

    @font-face {
      font-display: fallback;
      font-family: "GT America Medium";
      font-weight: 600;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
    }

    @font-face {
      font-display: fallback;
      font-family: "GT America Condensed Bold";
      font-weight: 700;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
    }

    /* CLIENT-SPECIFIC RESET */

    body,
    table,
    td,
    a {
      -webkit-text-size-adjust: 100%;
      -ms-text-size-adjust: 100%;
    }

    /* Prevent WebKit and Windows mobile changing default text sizes */

    table,
    td {
      mso-table-lspace: 0pt;
      mso-table-rspace: 0pt;
    }

    /* Remove spacing between tables in Outlook 2007 and up */

    img {
      -ms-interpolation-mode: bicubic;
    }

    /* Allow smoother rendering of resized image in Internet Explorer */

    .im {
      color: inherit !important;
    }

    /* DEVICE-SPECIFIC RESET */

    a[x-apple-data-detectors] {
      color: inherit !important;
      text-decoration: none !important;
      font-size: inherit !important;
      font-family: inherit !important;
      font-weight: inherit !important;
      line-height: inherit !important;
    }

    /* iOS BLUE LINKS */

    /* RESET */

    img {
      border: 0;
      height: auto;
      line-height: 100%;
      outline: none;
      text-decoration: none;
      display: block;
    }

    table {
      border-collapse: collapse;
    }

    table td {
      border-collapse: collapse;
      display: table-cell;
    }

    body {
      height: 100% !important;
      margin: 0 !important;
      padding: 0 !important;
      width: 100% !important;
    }

    /* BG COLORS */

    .mainTable {
      background-color: #F0F0F0;
    }

    .mainTable--hospitality {
      background-color: #f7f2ed;
    }

    html {
      background-color: #F0F0F0;
    }

    /* VARIABLES */

    .bg-white {
      background-color: white;
    }

    .hr {
      /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
      background-color: #d3d3d8;
      border-collapse: collapse;
      mso-table-lspace: 0pt;
      mso-table-rspace: 0pt;
      mso-line-height-rule: exactly;
      line-height: 1px;
    }

    .textAlignLeft {
      text-align: left !important;
    }

    .textAlignRight {
      text-align: right !important;
    }

    .textAlignCenter {
      text-align: center !important;
    }

    .mt1 {
      margin-top: 6px;
    }

    .list {
      padding-left: 18px;
      margin: 0;
    }

    /* TYPOGRAPHY */

    body {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      color: #4f4f65;
      -webkit-font-smoothing: antialiased;
      -ms-text-size-adjust: 100%;
      -moz-osx-font-smoothing: grayscale;
      font-smoothing: always;
      text-rendering: optimizeLegibility;
    }

    .h1 {
      font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 700;
      vertical-align: middle;
      font-size: 36px;
      line-height: 42px;
    }

    .h2 {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 600;
      vertical-align: middle;
      font-size: 16px;
      line-height: 24px;
    }

    .text {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 16px;
      line-height: 21px;
    }

    .text-list {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 16px;
      line-height: 25px;
    }

    .textSmall {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 14px;
    }

    .text-xsmall {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-size: 11px;
      text-transform: uppercase;
      line-height: 22px;
      letter-spacing: 1px;
    }

    .text-bold {
      font-weight: 600;
    }

    .text-link {
      text-decoration: underline;
    }

    .text-linkNoUnderline {
      text-decoration: none;
    }

    .text-strike {
      text-decoration: line-through;
    }

    /* FONT COLORS */

    .textColorDark {
      color: #23233e;
    }

    .textColorNormal {
      color: #4f4f65;
    }

    .textColorBlue {
      color: #2020c0;
    }

    .textColorGrayDark {
      color: #7B7B8B;
    }

    .textColorGray {
      color: #A5A8AD;
    }

    .textColorWhite {
      color: #FFFFFF;
    }

    .textColorRed {
      color: #df3232;
    }

    /* BUTTON */

    .Button-primary-wrapper {
      border-radius: 3px;
      background-color: #2020C0;
    }

    .Button-primary {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      border-radius: 3px;
      border: 1px solid #2020C0;
      color: #ffffff;
      display: block;
      font-size: 16px;
      font-weight: 600;
      padding: 18px;
      text-decoration: none;
    }

    .Button-secondary-wrapper {
      border-radius: 3px;
      background-color: #ffffff;
    }

    .Button-secondary {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      border-radius: 3px;
      border: 1px solid #2020C0;
      color: #2020C0;
      display: block;
      font-size: 16px;
      font-weight: 600;
      padding: 18px;
      text-decoration: none;
    }

    /* LAYOUT */

    .Content-container {
      padding-left: 60px;
      padding-right: 60px;
    }

    .Content-container--main {
      padding-top: 54px;
      padding-bottom: 60px;
    }

    .Content {
      width: 580px;
      margin: 0 auto;
    }

    .wrapper {
      max-width: 600px;
    }

    .section {
      padding: 24px 0px;
      border-bottom: 1px solid #d3d3d8;
    }

    .section--noBorder {
      padding: 24px 0px 0;
    }

    .section--last {
      padding: 24px 0px;
    }

    .message {
      background-color: #F4F4F5;
      padding: 18px;
    }

    .card {
      border: 1px solid #d3d3d8;
      padding: 18px;
    }

    /* HEADER */

    .header-tockLogoImage {
      display: block;
      color: #F0F0F0;
    }

    .header-heroImage {
      padding-bottom: 24px;
    }

    /* PREHEADER */

    .preheader {
      display: none;
      font-size: 1px;
      color: #FFFFFF;
      line-height: 1px;
      max-height: 0px;
      max-width: 0px;
      opacity: 0;
      overflow: hidden;
    }

    /* BANNER */

    .notice {
      padding: 12px;
      background: #23233E;
      color: #FFFFFF;
      display: block;
      font-size: 14px;
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 600;
    }

    /* INTRO */

    .section--intro {
      padding-bottom: 48px;
    }

    /* BOOKING INFO */

    .business-logo__container {
      width: 48px;
      height: 48px;
      border-radius: 3px;
      border: 1px solid #d3d3d8;
      overflow: hidden;
    }

    .business-logo__image {
      border: 1px solid transparent;
      border-radius: 3px;
      width: 48px;
      height: 48px;
      display: block;
    }

    .business-address--address {
      width: 50%;
    }

    .business-address--map {
      width: 50%;
    }

    .business-address--map-image {
      width: 100%;
    }

    /* MOBILE TICKETS */

    .mobile-ticket--description {
      width: 65%;
      margin-top: 12px;
      margin-right: 5%;
    }

    .mobile-ticket--code {
      width: 30%;
    }

    .mobile-ticket--code-image {
      width: 100%;
    }

    /* RESERVATION ACTIONS */

    .linksTable {
      border-bottom: 1px solid #d3d3d8;
    }

    .linksTableRow {
      padding: 24px 12px;
    }

    .actions-icon {
      vertical-align: middle;
    }

    .actions-text {
      vertical-align: middle;
    }

    /* RECEIPT */

    .receipt__container {
      border: 1px solid #d3d3d8;
      padding: 24px;
    }

    .receipt__row {
      border-top: 1px solid #d3d3d8;
    }

    /* FEEDBACK ICONS */

    .feedback-link {
      border: 1px solid #d4d5da;
      border-radius: 3px;
      display: inline-block;
      width: calc(32% - 2px);
      padding: 10px 0;
    }

    .feedback-link-bumper {
      display: inline-block;
      width: 1%;
    }

    .feedback-link img {
      height: 50px;
      width: 50px;
    }

    /* SOCIAL ICONS */

    .social-link {
      display: inline-block;
      width: auto;
    }

    .social-link-text {
      padding: 14px 24px 14px 14px;
    }

    /* TABLET STYLES */

    @media screen and (max-width: 648px) {
      /* DEVICE-SPECIFIC RESET */
      div[style*="margin: 16px 0;"] {
        margin: 0 !important;
      }
      /* ANDROID CENTER FIX */
      /* LAYOUT */
      .wrapper {
        width: 100% !important;
        max-width: 100% !important;
      }
      .Content {
        width: 90% !important;
      }
      .Content-container {
        padding-left: 36px !important;
        padding-right: 36px !important;
      }
      .Content-container--main {
        padding-top: 30px !important;
        padding-bottom: 42px !important;
      }
      .responsiveTable {
        width: 100% !important;
      }
      /* RESERVATION ACTIONS */
      .linksTableRow {
        padding-left: 0 !important;
        padding-right: 0 !important;
        padding-top: 12px !important;
        padding-bottom: 12px !important;
      }
      .linksTableRow--borderRight {
        border-right: none !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      /* FEEDBACK LINK */
      .feedback-link img {
        height: 38px !important;
        width: 38px !important;
      }
    }

    /* MOBILE STYLES */

    @media screen and (max-width: 480px) {
      /* TYPOGRAPHY */
      .h1 {
        font-size: 30px !important;
        line-height: 30px !important;
      }
      .text {
        font-size: 16px !important;
        line-height: 22px !important;
      }
      /* BUTTON */
      .mobile-buttonContainer {
        width: 100% !important;
      }
      /* LAYOUT */
      .Content {
        width: 100% !important;
      }
      .Content-container {
        padding-left: 18px !important;
        padding-right: 18px !important;
      }
      .Content-container--main {
        padding-top: 24px !important;
        padding-bottom: 30px !important;
      }
      .section {
        padding: 18px 0 !important;
      }
      .section--last {
        padding: 18px 0 !important;
      }
      .header {
        padding: 0 18px !important;
      }
      .business-address--address {
        width: 100% !important;
      }
      .business-address--map {
        margin-top: 30px !important;
        width: 100% !important;
      }
      .mobile-ticket--description {
        width: 100% !important;
        margin-top: 0px !important;
      }
      .mobile-ticket--code {
        margin-top: 30px !important;
        margin-left: 0;
        width: 100% !important;
      }
      /* RECEIPT */
      .receipt__container {
        padding: 12px !important;
      }
      /* SOCIAL ICONS */
      .social-link {
        display: block !important;
        width: 100% !important;
        border-bottom: 1px solid #d3d3d8 !important;
      }
      /* INTRO */
      .section--intro {
        padding-top: 18px !important;
        padding-bottom: 18px !important;
      }
    }
  </style>
</head>

<body style="margin: 0 !important; padding: 0 !important; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; height: 100%; margin: 0; padding: 0; width: 100%; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; color: rgb(79, 79, 101); -webkit-font-smoothing: antialiased; -ms-text-size-adjust: 100%; -moz-osx-font-smoothing: grayscale; font-smoothing: always; text-rendering: optimizeLegibility;">
   
  <!--[if mso]>
    <style type="text/css">
.h1 {font-family: "Helvetica", "Arial", sans-serif !important; font-weight: 700 !important; vertical-align: middle !important; font-size: 36px !important; mso-line-height-rule: exactly;line-height: 42px !important;}
.h2 {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 600 !important;vertical-align: middle !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 24px !important;}
.text {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 21px !important;}
.text-list {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 25px !important;}
.textSmall {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 14px !important;}
.text-xsmall {font-family: "Helvetica", "Arial", sans-serif !important;font-size: 11px !important;text-transform: uppercase !important;mso-line-height-rule: exactly;line-height: 22px !important;letter-spacing: 1px !important;}
.text-bold {font-weight: 600 !important;}
.text-link {text-decoration: underline !important;}
.text-linkNoUnderline {text-decoration: none !important;}
.text-strike {text-decoration: line-through !important;}
.textColorDark {color: #23233e !important;}
.textColorNormal {color: #4f4f65 !important;}
.textColorBlue {color: #2020c0 !important;}
.textColorGray {color: #A5A8AD !important;}
.textColorWhite {color: #FFFFFF !important;}
.Button-primary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #ffffff !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
.Button-secondary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #2020C0 !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
    </style>
    <![endif]-->
  <!-- HIDDEN PREHEADER TEXT -->
  <div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;">
  </div>
  <table border="0" cellpadding="0" cellspacing="0" width="100%" class=" mainTable  " style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: rgb(240, 240, 240);">
    <tbody><tr><td style="display:none !important;
 visibility:hidden;
 mso-hide:all;
 font-size:1px;
 color:#ffffff;
 line-height:1px;
 max-height:0px;
 max-width:0px;
 opacity:0;
 overflow:hidden; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> We are thrilled that you will be joining us. If yo... </td>
    <!-- HEADER -->
    </tr><tr>
      <td align="center" class="header" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 580px; margin: 0 auto;">
          <tbody><tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <h1 style="font-size: 33px;font-weight: 800;line-height: 30px;">Dstricts</h1>               </td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
        </tbody></table>
        <!--[if (gte mso 9)|(IE)]>
    </td>
    </tr>
    </table>
    <![endif]-->
      </td>
    </tr>
    <!-- CONTENT -->
    <tr>
      <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content bg-white" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: white; width: 580px; margin: 0 auto;">
          <tbody><tr>
            <td class="Content-container Content-container--main text textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101); padding-left: 60px; padding-right: 60px; padding-top: 54px; padding-bottom: 60px;">
              <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                <!-- RESTAURANT INFO -->
                <tbody><tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" valign="center" width="48" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="business-logo__container" style="width: 48px; height: 48px; border-radius: 3px; border: 1px solid rgb(211, 211, 216); overflow: hidden;">
                            <img src="'.$rowImage['image_path'].'" class="business-logo__image" width="48" height="48" alt="Logo" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block; border: 1px solid transparent; border-radius: 3px; width: 48px; height: 48px; display: block;">
                          </div>
                        </td>
                        <td width="12" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                        <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">'.$rowInfo["hotel_name"].'</span>                          </td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <!-- INTRO -->
                <tr>
                  <td valign="top" align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h1 textColorDark" style="font-family: &quot;GT America Condensed Bold&quot;, &quot;Roboto Condensed&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 700; vertical-align: middle; font-size: 36px; line-height: 42px; color: rgb(35, 35, 62);">Reservation confirmed</span>                          </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                          <!--[if gte mso 15]>&nbsp;<![endif]-->
                        </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <!-- MESSAGE -->
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr>
                  <td align="left" class="message" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(244, 244, 245); padding: 18px;">
                    <div class="text textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
                      <span class="text-bold textColorDark" style="font-weight: 600; color: rgb(35, 35, 62);">A message from '.$rowInfo["hotel_name"].'</span>
                      <br>We have made a reservation for you kindly confirm the same on your Qloud ID app.</div>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr>
                  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                    <!--[if gte mso 15]>&nbsp;<![endif]-->
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- BOOKING INFO -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" valign="middle" width="468" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text-list textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
                            <span class="text-bold textColorDark" style="font-weight: 600; color: rgb(35, 35, 62);">'.date("F j, Y, g:i a").'</span>
                            <br> Party of '.$data['guest_adults'].' for Smiles Davis 
                            <br>
From '.$data['checkin_date'].' to '.$data['checkout_date'].'
<br> Reservation  2
                            <br>


                              <table border="0" cellspacing="0" cellpadding="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody><tr>
                              <td align="center" valign="center" width="100%" class="Button-primary-wrapper" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; border-radius: 3px; background-color: rgb(32, 32, 192);">
                              <a href="https://www.qloudid.com/public/index.php/BookingInformation/verifyBookingDetail/'.$data['checkid'].'" target="_blank" class="Button-primary" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; border-radius: 3px; border: 1px solid rgb(32, 32, 192); color: rgb(255, 255, 255); display: block; font-size: 16px; font-weight: 600; padding: 18px; text-decoration: none;">Confirm booking</a>                                </td>
                            </tr>
                          </tbody></table>
                          </div>
                        </td>
                      </tr>
                      
                      
                      <tr>
                        <td align="center" valign="center" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <table border="0" cellspacing="0" cellpadding="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody>
                          </tbody></table>
                        </td>
                      </tr>
					  
					  
                      
					  
					  
					  
                    </tbody></table>
                  </td>
                </tr>
                <!-- ADDRESS -->
                <tr>
                  <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                          <!--[if gte mso 15]>&nbsp;<![endif]-->
                        </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody><tr>
                              <td style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                <table align="left" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--address" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 50%;">
                                  <tbody><tr>
                                    <td align="left" width="100%" class="text-list textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
                                    <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">'.$rowInfo["hotel_name"].'</span><br>'.$rowInfo["visiting_address"].' '.$rowInfo["port_number"].'<br>'.$rowInfo["visiting_city"].' '.$rowInfo["visiting_state"].'<br> <a href="tel:+' .$rowInfo[" fdesk_country_code"].'="" '.$rowinfo["fdesk_phone_number"].'"="">+'.$rowInfo["fdesk_country_code"].' '.$rowInfo["fdesk_phone_number"].'</a><br> <br> <a href="https://www.google.com/maps/dir//'.$rowInfo['visiting_address'].' '.$rowInfo['port_number'].'/" class="text text-link textColorBlue" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; text-decoration: underline; color: rgb(32, 32, 192);" target="_blank">Get directions</a>                                      </td>
                                  </tr>
                                </tbody></table>
                                <!--[if mso]></td><td><![endif]-->
                                <table align="right" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--map" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 50%;">
                                  <tbody><tr>
                                    <td width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <a href="https://www.google.com/maps/dir//1350+W+Randolph%2C+Chicago%2C+IL%2C+US+60607/" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;"> <img width="230" class="business-address--map-image" height="auto" alt="Map of Elske" src="https://maps.googleapis.com/maps/api/staticmap?key=AIzaSyCPd%2DxSabI7QOfKX5NxVVup6bPfcovwFiQ&amp;center=1350+W+Randolph%2C+Chicago%2C+IL%2C+US+60607&amp;size=300x200&amp;zoom=15&amp;scale=2&amp;format=png&amp;visual%5Frefresh=true&amp;markers=scale%3A2%7Cicon%3Ahttps%3A%2F%2Fstorage.googleapis.com%2Ftock%2Dpublic%2Dassets%2Fimages%2Demail%2Dtemplate%2Femail%2Dmap%2Dmarker.png%7Cshadow%3Afalse%7C1350+W+Randolph%2C+Chicago%2C+IL%2C+US+60607&amp;style=feature%3Aall%7Celement%3Alabels.text.fill%7Ccolor%3A0x4b505b&amp;style=feature%3Aall%7Celement%3Alabels.text.stroke%7Ccolor%3A0xffffff%7Cvisibility%3Aon&amp;style=feature%3Aadministrative.land%5Fparcel%7Celement%3Aall%7Cvisibility%3Aoff&amp;style=feature%3Alandscape.man%5Fmade%7Celement%3Aall%7Cvisibility%3Aon&amp;style=feature%3Alandscape.man%5Fmade%7Celement%3Ageometry.fill%7Ccolor%3A0xe9e9eb&amp;style=feature%3Apoi%7Celement%3Aall%7Cvisibility%3Aoff&amp;style=feature%3Aroad%7Celement%3Ageometry.fill%7Ccolor%3A0xffffff&amp;style=feature%3Aroad%7Celement%3Alabels.text.fill%7Ccolor%3A0x787c84&amp;style=feature%3Aroad%7Celement%3Alabels.icon%7Cvisibility%3Aoff&amp;style=feature%3Aroad.highway%7Celement%3Ageometry.fill%7Ccolor%3A0xffbe32&amp;style=feature%3Aroad.highway%7Celement%3Ageometry.stroke%7Ccolor%3A0xffbe32&amp;style=feature%3Atransit%7Celement%3Alabels.text.fill%7Cvisibility%3Aon%7Ccolor%3A0x787c84&amp;style=feature%3Atransit.line%7Celement%3Ageometry.fill%7Ccolor%3A0xd2d4d6&amp;signature=3yCSyIXfsSilvB5wcd4OElw40QU=" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block; width: 100%;"> </a>                                      </td>
                                  </tr>
                                </tbody></table>
                              </td>
                            </tr>
                          </tbody></table>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr>
                  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                    <!--[if gte mso 15]>&nbsp;<![endif]-->
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- RECEIPT -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" width="100%" cellpadding="0" cellspacing="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td class="receipt__container" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; border: 1px solid rgb(211, 211, 216); padding: 24px;">
                          <table border="0" width="100%" cellpadding="0" cellspacing="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody><tr>
                              <td width="80%" class="textAlignLeft" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; text-align: left;">
                                <div class="text-list textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
                                  Reservation  2 (Deposit)
                                </div>
                                <div class="textColorGrayDark textSmall" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 14px; color: rgb(123, 123, 139);">
                                  Your deposit secures your booking and will be applied to your final bill.
                                </div>
                              </td>
                              <td width="20%" align="right" class="textAlignRight" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; text-align: right;">
                                <div class="text-list textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
                                  $'.($rowInfo['price']*$rowInfo['total_days']).'.00
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td colspan="2" style="height: 12px; line-height: 12px; max-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"></td>
                            </tr>
                          </tbody></table>
                          <table border="0" width="100%" cellpadding="0" cellspacing="0" class="receipt__row" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; border-top: 1px solid rgb(211, 211, 216);">
                            <tbody><tr>
                              <td colspan="2" style="height: 12px; line-height: 12px; max-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"></td>
                            </tr>
                            <tr>
                              <td width="80%" class="textAlignLeft" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; text-align: left;">
                                <div class="text-list textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
                                  Subtotal
                                </div>
                              </td>
                              <td width="20%" align="right" class="textAlignRight" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; text-align: right;">
                                <div class="text-list textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
                                  $'.($rowInfo['price']*$rowInfo['total_days']).'.00
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td colspan="2" style="height: 12px; line-height: 12px; max-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"></td>
                            </tr>
                          </tbody></table>
                          <table border="0" width="100%" cellpadding="0" cellspacing="0" class="receipt__row" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; border-top: 1px solid rgb(211, 211, 216);">
                            <tbody><tr>
                              <td colspan="2" style="height: 12px; line-height: 12px; max-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"></td>
                            </tr>
                            <tr>
                              <td width="80%" class="textAlignLeft" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; text-align: left;">
                                <div class="text-list text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; font-weight: 600; color: rgb(35, 35, 62);">
                                  Total
                                </div>
                              </td>
                              <td width="20%" align="right" class="textAlignRight" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; text-align: right;">
                                <div class="text-list text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; font-weight: 600; color: rgb(35, 35, 62);">
                                  $'.($rowInfo['price']*$rowInfo['total_days']).'.00
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td colspan="2" style="height: 12px; line-height: 12px; max-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"></td>
                            </tr>
                            <tr style="padding: 10px">
                              <td colspan="2" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                <table border="0" width="100%" cellpadding="0px" cellspacing="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                  <tbody><tr>
                                    <td class="message" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(244, 244, 245); padding: 18px;">
                                      <table border="0" width="100%" cellpadding="0px" cellspacing="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                        <tbody><tr>
                                          <td colspan="2" padding="0px" class="textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; color: rgb(79, 79, 101);"> Paid with Visa **** 6555 (4/12/19) </td>
                                        </tr>
                                        <tr class="spacer">
                                          <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                                        </tr>
                                        <tr>
                                          <td class="textSmall textColorGrayDark" colspan="2" padding="0px" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 14px; color: rgb(123, 123, 139);">
                                          On your statement, this charge will appear as<br> "Tock at*Elske" </td>
                                        </tr>
                                      </tbody></table>
                                    </td>
                                  </tr>
                                </tbody></table>
                              </td>
                            </tr>
                          </tbody></table>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- EDIT RECEIPT -->
                <!-- CANCELLATION POLICY -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; font-weight: 600; color: rgb(35, 35, 62);">
                            Cancellation policy
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text textColorNormal mt1" style="margin-top: 6px; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
                            <span>Your reservation can be canceled for a full refund 24 hours prior to the reservation time. </span>
                            <span>You can always transfer your reservation to another person.</span>
                          </div>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- QUESTIONS -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; font-weight: 600; color: rgb(35, 35, 62);">
                            Questions?
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text textColorNormal mt1" style="margin-top: 6px; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
                            If you have questions about your reservation, contact us at&nbsp;
                            <a href="mailto:'.$rowInfo['fdesk_email'].'">'.$rowInfo["fdesk_email"].'</a>                            or by calling
                            <a href="tel:+'.$rowInfo[" fdesk_country_code"].'="" '.$rowinfo["fdesk_phone_number"].'"="">+'.$rowInfo["fdesk_country_code"].' '.$rowInfo["fdesk_phone_number"].'</a>.
                          </div>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
              </tbody></table>
            </td>
          </tr>
        </tbody></table>
      </td>
    </tr>
    <!-- FOOTER -->
    <tr>
      <td align="center" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; width: 580px; margin: 0 auto;">
        <!-- Will most likely required a feature flag -->
        <!--[if (gte mso 9)|(IE)]>
<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
<tr>
<td align="center" valign="top" width="600">
<![endif]-->
        <table width="100%" border="0" cellspacing="0" cellpadding="0" align="center" class="Content-container" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; padding-left: 60px; padding-right: 60px;">
          <tbody><tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="center" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <a href="https://www.exploretock.com" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;"> <img src="https://storage.googleapis.com/tock-public-assets/images-email-template/tock-brandmark-color.png" width="30" height="30" alt="Tock" border="0" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block;"> </a>              </td>
          </tr>
          <tr class="spacer">
            <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
              <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                 2019 Tock, Inc.
              </div>
              <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                All Rights Reserved
              </div>
            </td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
        </tbody></table>
        <!--[if (gte mso 9)|(IE)]>
</td>
</tr>

  
			
</table>
<![endif]-->
      </td>
    </tr>
  </tbody></table>



</body></html>';
			 sendEmail($subject, $to, $emailContent);
			$stmt->close();
			$dbCon->close();
			return $checkid;
			
		}

		function createUser($data)
		{
			$dbCon = AppModel::createConnection($data);
			$org=array();
			$stmt = $dbCon->prepare("select count(id) as num from user_logins where email=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("s",$data['email']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			if($row['num']>0)
			{
				$org['id']=0;
				$org['message']='User with given email alreay exist';
				$stmt->close();
				$dbCon->close();
				return $org;
			}
			
			$stmt = $dbCon->prepare("select count(user_logins.id) as num from user_logins left join user_profiles on user_profiles.user_logins_id=user_logins.id where country_of_residence=? and phone_number=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("is",$data['pcountry'],$data['p_number']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			if($row['num']>0)
			{
				$org['id']=0;
				$org['message']='User with given phone number alreay exist';
				$stmt->close();
				$dbCon->close();
				return $org;
			}
			
			$stmt = $dbCon->prepare("select count(id) as num from user_visiting_countries where id_number=? and country_info=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("si",$data['id_number'],$data['pcountry']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			if($row['num']>0)
			{
				$org['id']=0;
				$org['message']='User with given passport alreay exist';
				$stmt->close();
				$dbCon->close();
				return $org;
			}
			
			$data['password']='';
			$data['random_hash']='';
			$stmt = $dbCon->prepare("INSERT INTO user_logins (first_name,last_name,registered_from,get_started_wizard_status,email, password, email_verification_code , created_on , modified_on, country_of_residence ) VALUES (?,?,?, ?,  ?, ?, ?, now(), now(), ?)");
			$st=0;
			$rf=1;
			$stmt->bind_param("ssiisssi",$data['first_name'],$data['last_name'], $rf,$st,$data['email'], $data['password'], $data['random_hash'], $data['pcountry']); // ss -> string string
			$stmt->execute();
			$id=$stmt->insert_id;
			$org['id']=$id;
			$org['message']='Success';
			$stmt = $dbCon->prepare("INSERT INTO user_profiles (user_logins_id,phone_number ) VALUES (?, ?)");
			$stmt->bind_param("is",$id,$data['p_number']); // ss -> string string
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
		function checkEmailInfo($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select count(id) as num from user_logins where email=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("s",$data['email']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			return $row['num'];
		}
		
		function checkPhoneInfo($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select count(user_logins.id) as num from user_logins left join user_profiles on user_profiles.user_logins_id=user_logins.id where country_of_residence=? and phone_number=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("is",$data['country_id'],$data['phone_number']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if($row['num']==0)
			{
			$stmt = $dbCon->prepare("select count(id) as num from user_visiting_countries where country_info=? and phone_number=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("is",$data['pass_country'],$data['id_number']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();	
			
			$stmt->close();
			$dbCon->close();
			return $row['num'];	
			}
			else
			{
			$stmt->close();
			$dbCon->close();
			return $row['num'];	
			}
		}
		 
		
		function sendBookingRequestInfo($data)
		{
			$dbCon = AppModel::createConnection($data);
			$id= $data['apartment_id'];    
			 
			$date1=strtotime($data['checkin_date']);  
			$date2=strtotime($data['checkout_date']);
			$start_date=strtotime($data['checkin_date']);  
			$end_date=strtotime($data['checkout_date']);
			$total_days=($end_date-$start_date) / (60 * 60 * 24);
			$data['guest_infants']=0;
			$data['hotel_property_type']=2;
			$user_id=$data['guest_user_id'];
			$stmt = $dbCon->prepare("select email from user_logins where id=?");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("i", $user_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$data['guest_email']=$row['email'];
			$code=0; 
			$st=1;
			if($data['is_paid']<3)
			{
				$data['is_paid']=1;
			}
			else
			{
				$data['is_paid']=0;
			}
			$stmt = $dbCon->prepare("insert into `hotel_checkout_detail`(price,is_paid,checkin_code,guest_email,user_id,buyer_id,`guest_adult`,`guest_children`,`guest_infant`,`checkin_date`,`checkout_date`,`room_type_id`,`total_days`,`created_on`,hotel_property_type,checkin_booking_date,checkout_booking_date,reservation_confirmed) values (?,?,?,?,?,?, ?, ?, ?, ?, ?,  ?, ?, now(), ?,?,?,?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("iiisiiiiissiiissi",$data['room_price'],$data['is_paid'],$code,$data['guest_email'],$user_id,$user_id, $data['guest_adults'], $data['guest_children'], $data['guest_infants'],$data['checkin_date'],$data['checkout_date'],$id,$total_days,$data['hotel_property_type'],$date1,$date2,$code);
			$stmt->execute();
			$checkid=$stmt->insert_id;
			 $curl = curl_init();
			curl_setopt_array($curl, array(
			  CURLOPT_URL => 'https://dstricts.com/user/index.php/DstrictsApp/mannualApartmentBooking',
			  CURLOPT_RETURNTRANSFER => true,
			  CURLOPT_ENCODING => '',
			  CURLOPT_MAXREDIRS => 10,
			  CURLOPT_TIMEOUT => 0,
			  CURLOPT_FOLLOWLOCATION => true,
			  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
			  CURLOPT_CUSTOMREQUEST => 'POST',
			  CURLOPT_POSTFIELDS => array('checkin_code' => $code,'user_id' => $user_id,'guest_email' => $data['guest_email'],'guest_adults' => $data['guest_adults'],'guest_children' => $data['guest_children'],'guest_infants' => $data['guest_infants'],'date1' => $data['checkin_date'],'date2' => $data['checkout_date'],'id' => $id,'checkout_id' => $checkid,'total_days' => $total_days,'price' => $data['room_price'],'hotel_property_type' => 2,'is_paid' => $data['is_paid']),
			));

			//$response = curl_exec($curl);
  
			//curl_close($curl);
			
			$stmt = $dbCon->prepare("select passport_image,buyer_id,is_buyer_company,hotel_checkout_detail.user_id,user_address.address as visiting_address,user_address.port_number,user_address.city as visiting_city,user_address.state as visiting_state,user_address.id as p_id,room_type_id,total_days,price,property_nickname as hotel_name,country_code as fdesk_country_code,phone_number as fdesk_phone_number from hotel_checkout_detail left join user_address on user_address.id= hotel_checkout_detail.room_type_id left join user_profiles on user_profiles.user_logins_id=user_address.user_id left join user_logins on user_logins.id=user_address.user_id left join phone_country_code on user_logins.country_of_residence=phone_country_code.id where hotel_checkout_detail.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $checkid);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowInfo = $result->fetch_assoc();
			$rowInfo['enc_p_id']= $this -> encrypt_decrypt('encrypt',$rowInfo['p_id']);  
			$stmt = $dbCon->prepare("select concat_ws(' ', first_name,last_name) as name,email from user_logins where id = ?");
        
			/* bind parameters for markers */
			$stmt->bind_param("i", $rowInfo['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowUser    = $result->fetch_assoc();
			$data['checkid']= $this -> encrypt_decrypt('encrypt',$checkid);  
			$rowInfo['name']=$rowUser['name'];
			$rowInfo['email']=$rowUser['email'];	 
			$to      = $rowInfo['email'];
			
			$emailContent='<html xmlns="http://www.w3.org/1999/xhtml" style="background-color: rgb(240, 240, 240);"><head>
  <title>Reservation confirmed</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <style type="text/css">
    /* GT AMERICA */

    @font-face {
      font-display: fallback;
      font-family: "GT America Regular";
      font-weight: 400;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
    }

    @font-face {
      font-display: fallback;
      font-family: "GT America Medium";
      font-weight: 600;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
    }

    @font-face {
      font-display: fallback;
      font-family: "GT America Condensed Bold";
      font-weight: 700;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
    }

    /* CLIENT-SPECIFIC RESET */

    body,
    table,
    td,
    a {
      -webkit-text-size-adjust: 100%;
      -ms-text-size-adjust: 100%;
    }

    /* Prevent WebKit and Windows mobile changing default text sizes */

    table,
    td {
      mso-table-lspace: 0pt;
      mso-table-rspace: 0pt;
    }

    /* Remove spacing between tables in Outlook 2007 and up */

    img {
      -ms-interpolation-mode: bicubic;
    }

    /* Allow smoother rendering of resized image in Internet Explorer */

    .im {
      color: inherit !important;
    }

    /* DEVICE-SPECIFIC RESET */

    a[x-apple-data-detectors] {
      color: inherit !important;
      text-decoration: none !important;
      font-size: inherit !important;
      font-family: inherit !important;
      font-weight: inherit !important;
      line-height: inherit !important;
    }

    /* iOS BLUE LINKS */

    /* RESET */

    img {
      border: 0;
      height: auto;
      line-height: 100%;
      outline: none;
      text-decoration: none;
      display: block;
    }

    table {
      border-collapse: collapse;
    }

    table td {
      border-collapse: collapse;
      display: table-cell;
    }

    body {
      height: 100% !important;
      margin: 0 !important;
      padding: 0 !important;
      width: 100% !important;
    }

    /* BG COLORS */

    .mainTable {
      background-color: #F0F0F0;
    }

    .mainTable--hospitality {
      background-color: #f7f2ed;
    }

    html {
      background-color: #F0F0F0;
    }

    /* VARIABLES */

    .bg-white {
      background-color: white;
    }

    .hr {
      /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
      background-color: #d3d3d8;
      border-collapse: collapse;
      mso-table-lspace: 0pt;
      mso-table-rspace: 0pt;
      mso-line-height-rule: exactly;
      line-height: 1px;
    }

    .textAlignLeft {
      text-align: left !important;
    }

    .textAlignRight {
      text-align: right !important;
    }

    .textAlignCenter {
      text-align: center !important;
    }

    .mt1 {
      margin-top: 6px;
    }

    .list {
      padding-left: 18px;
      margin: 0;
    }

    /* TYPOGRAPHY */

    body {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      color: #4f4f65;
      -webkit-font-smoothing: antialiased;
      -ms-text-size-adjust: 100%;
      -moz-osx-font-smoothing: grayscale;
      font-smoothing: always;
      text-rendering: optimizeLegibility;
    }

    .h1 {
      font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 700;
      vertical-align: middle;
      font-size: 36px;
      line-height: 42px;
    }

    .h2 {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 600;
      vertical-align: middle;
      font-size: 16px;
      line-height: 24px;
    }

    .text {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 16px;
      line-height: 21px;
    }

    .text-list {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 16px;
      line-height: 25px;
    }

    .textSmall {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 14px;
    }

    .text-xsmall {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-size: 11px;
      text-transform: uppercase;
      line-height: 22px;
      letter-spacing: 1px;
    }

    .text-bold {
      font-weight: 600;
    }

    .text-link {
      text-decoration: underline;
    }

    .text-linkNoUnderline {
      text-decoration: none;
    }

    .text-strike {
      text-decoration: line-through;
    }

    /* FONT COLORS */

    .textColorDark {
      color: #23233e;
    }

    .textColorNormal {
      color: #4f4f65;
    }

    .textColorBlue {
      color: #2020c0;
    }

    .textColorGrayDark {
      color: #7B7B8B;
    }

    .textColorGray {
      color: #A5A8AD;
    }

    .textColorWhite {
      color: #FFFFFF;
    }

    .textColorRed {
      color: #df3232;
    }

    /* BUTTON */

    .Button-primary-wrapper {
      border-radius: 3px;
      background-color: #2020C0;
    }

    .Button-primary {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      border-radius: 3px;
      border: 1px solid #2020C0;
      color: #ffffff;
      display: block;
      font-size: 16px;
      font-weight: 600;
      padding: 18px;
      text-decoration: none;
    }

    .Button-secondary-wrapper {
      border-radius: 3px;
      background-color: #ffffff;
    }

    .Button-secondary {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      border-radius: 3px;
      border: 1px solid #2020C0;
      color: #2020C0;
      display: block;
      font-size: 16px;
      font-weight: 600;
      padding: 18px;
      text-decoration: none;
    }

    /* LAYOUT */

    .Content-container {
      padding-left: 60px;
      padding-right: 60px;
    }

    .Content-container--main {
      padding-top: 54px;
      padding-bottom: 60px;
    }

    .Content {
      width: 580px;
      margin: 0 auto;
    }

    .wrapper {
      max-width: 600px;
    }

    .section {
      padding: 24px 0px;
      border-bottom: 1px solid #d3d3d8;
    }

    .section--noBorder {
      padding: 24px 0px 0;
    }

    .section--last {
      padding: 24px 0px;
    }

    .message {
      background-color: #F4F4F5;
      padding: 18px;
    }

    .card {
      border: 1px solid #d3d3d8;
      padding: 18px;
    }

    /* HEADER */

    .header-tockLogoImage {
      display: block;
      color: #F0F0F0;
    }

    .header-heroImage {
      padding-bottom: 24px;
    }

    /* PREHEADER */

    .preheader {
      display: none;
      font-size: 1px;
      color: #FFFFFF;
      line-height: 1px;
      max-height: 0px;
      max-width: 0px;
      opacity: 0;
      overflow: hidden;
    }

    /* BANNER */

    .notice {
      padding: 12px;
      background: #23233E;
      color: #FFFFFF;
      display: block;
      font-size: 14px;
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 600;
    }

    /* INTRO */

    .section--intro {
      padding-bottom: 48px;
    }

    /* BOOKING INFO */

    .business-logo__container {
      width: 48px;
      height: 48px;
      border-radius: 3px;
      border: 1px solid #d3d3d8;
      overflow: hidden;
    }

    .business-logo__image {
      border: 1px solid transparent;
      border-radius: 3px;
      width: 48px;
      height: 48px;
      display: block;
    }

    .business-address--address {
      width: 50%;
    }

    .business-address--map {
      width: 50%;
    }

    .business-address--map-image {
      width: 100%;
    }

    /* MOBILE TICKETS */

    .mobile-ticket--description {
      width: 65%;
      margin-top: 12px;
      margin-right: 5%;
    }

    .mobile-ticket--code {
      width: 30%;
    }

    .mobile-ticket--code-image {
      width: 100%;
    }

    /* RESERVATION ACTIONS */

    .linksTable {
      border-bottom: 1px solid #d3d3d8;
    }

    .linksTableRow {
      padding: 24px 12px;
    }

    .actions-icon {
      vertical-align: middle;
    }

    .actions-text {
      vertical-align: middle;
    }

    /* RECEIPT */

    .receipt__container {
      border: 1px solid #d3d3d8;
      padding: 24px;
    }

    .receipt__row {
      border-top: 1px solid #d3d3d8;
    }

    /* FEEDBACK ICONS */

    .feedback-link {
      border: 1px solid #d4d5da;
      border-radius: 3px;
      display: inline-block;
      width: calc(32% - 2px);
      padding: 10px 0;
    }

    .feedback-link-bumper {
      display: inline-block;
      width: 1%;
    }

    .feedback-link img {
      height: 50px;
      width: 50px;
    }

    /* SOCIAL ICONS */

    .social-link {
      display: inline-block;
      width: auto;
    }

    .social-link-text {
      padding: 14px 24px 14px 14px;
    }

    /* TABLET STYLES */

    @media screen and (max-width: 648px) {
      /* DEVICE-SPECIFIC RESET */
      div[style*="margin: 16px 0;"] {
        margin: 0 !important;
      }
      /* ANDROID CENTER FIX */
      /* LAYOUT */
      .wrapper {
        width: 100% !important;
        max-width: 100% !important;
      }
      .Content {
        width: 90% !important;
      }
      .Content-container {
        padding-left: 36px !important;
        padding-right: 36px !important;
      }
      .Content-container--main {
        padding-top: 30px !important;
        padding-bottom: 42px !important;
      }
      .responsiveTable {
        width: 100% !important;
      }
      /* RESERVATION ACTIONS */
      .linksTableRow {
        padding-left: 0 !important;
        padding-right: 0 !important;
        padding-top: 12px !important;
        padding-bottom: 12px !important;
      }
      .linksTableRow--borderRight {
        border-right: none !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      /* FEEDBACK LINK */
      .feedback-link img {
        height: 38px !important;
        width: 38px !important;
      }
    }

    /* MOBILE STYLES */

    @media screen and (max-width: 480px) {
      /* TYPOGRAPHY */
      .h1 {
        font-size: 30px !important;
        line-height: 30px !important;
      }
      .text {
        font-size: 16px !important;
        line-height: 22px !important;
      }
      /* BUTTON */
      .mobile-buttonContainer {
        width: 100% !important;
      }
      /* LAYOUT */
      .Content {
        width: 100% !important;
      }
      .Content-container {
        padding-left: 18px !important;
        padding-right: 18px !important;
      }
      .Content-container--main {
        padding-top: 24px !important;
        padding-bottom: 30px !important;
      }
      .section {
        padding: 18px 0 !important;
      }
      .section--last {
        padding: 18px 0 !important;
      }
      .header {
        padding: 0 18px !important;
      }
      .business-address--address {
        width: 100% !important;
      }
      .business-address--map {
        margin-top: 30px !important;
        width: 100% !important;
      }
      .mobile-ticket--description {
        width: 100% !important;
        margin-top: 0px !important;
      }
      .mobile-ticket--code {
        margin-top: 30px !important;
        margin-left: 0;
        width: 100% !important;
      }
      /* RECEIPT */
      .receipt__container {
        padding: 12px !important;
      }
      /* SOCIAL ICONS */
      .social-link {
        display: block !important;
        width: 100% !important;
        border-bottom: 1px solid #d3d3d8 !important;
      }
      /* INTRO */
      .section--intro {
        padding-top: 18px !important;
        padding-bottom: 18px !important;
      }
    }
  </style>
</head>

<body style="margin: 0 !important; padding: 0 !important; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; height: 100%; margin: 0; padding: 0; width: 100%; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; color: rgb(79, 79, 101); -webkit-font-smoothing: antialiased; -ms-text-size-adjust: 100%; -moz-osx-font-smoothing: grayscale; font-smoothing: always; text-rendering: optimizeLegibility;">
   
  <!--[if mso]>
    <style type="text/css">
.h1 {font-family: "Helvetica", "Arial", sans-serif !important; font-weight: 700 !important; vertical-align: middle !important; font-size: 36px !important; mso-line-height-rule: exactly;line-height: 42px !important;}
.h2 {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 600 !important;vertical-align: middle !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 24px !important;}
.text {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 21px !important;}
.text-list {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 25px !important;}
.textSmall {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 14px !important;}
.text-xsmall {font-family: "Helvetica", "Arial", sans-serif !important;font-size: 11px !important;text-transform: uppercase !important;mso-line-height-rule: exactly;line-height: 22px !important;letter-spacing: 1px !important;}
.text-bold {font-weight: 600 !important;}
.text-link {text-decoration: underline !important;}
.text-linkNoUnderline {text-decoration: none !important;}
.text-strike {text-decoration: line-through !important;}
.textColorDark {color: #23233e !important;}
.textColorNormal {color: #4f4f65 !important;}
.textColorBlue {color: #2020c0 !important;}
.textColorGray {color: #A5A8AD !important;}
.textColorWhite {color: #FFFFFF !important;}
.Button-primary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #ffffff !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
.Button-secondary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #2020C0 !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
    </style>
    <![endif]-->
  <!-- HIDDEN PREHEADER TEXT -->
  <div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;">
  </div>
  <table border="0" cellpadding="0" cellspacing="0" width="100%" class=" mainTable  " style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: rgb(240, 240, 240);">
    <tbody><tr><td style="display:none !important;
 visibility:hidden;
 mso-hide:all;
 font-size:1px;
 color:#ffffff;
 line-height:1px;
 max-height:0px;
 max-width:0px;
 opacity:0;
 overflow:hidden; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> We are thrilled that you will be joining us. If yo... </td>
    <!-- HEADER -->
    </tr><tr>
      <td align="center" class="header" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 580px; margin: 0 auto;">
          <tbody><tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <h1 style="font-size: 33px;font-weight: 800;line-height: 30px;">Dstricts</h1>               </td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
        </tbody></table>
        <!--[if (gte mso 9)|(IE)]>
    </td>
    </tr>
    </table>
    <![endif]-->
      </td>
    </tr>
    <!-- CONTENT -->
    <tr>
      <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content bg-white" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: white; width: 580px; margin: 0 auto;">
          <tbody><tr>
            <td class="Content-container Content-container--main text textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101); padding-left: 60px; padding-right: 60px; padding-top: 54px; padding-bottom: 60px;">
              <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                <!-- RESTAURANT INFO -->
                <tbody><tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" valign="center" width="48" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="business-logo__container" style="width: 48px; height: 48px; border-radius: 3px; border: 1px solid rgb(211, 211, 216); overflow: hidden;">
                            <img src="'.$rowImage['image_path'].'" class="business-logo__image" width="48" height="48" alt="Logo" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block; border: 1px solid transparent; border-radius: 3px; width: 48px; height: 48px; display: block;">
                          </div>
                        </td>
                        <td width="12" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                        <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">'.$rowInfo["hotel_name"].'</span>                          </td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <!-- INTRO -->
                <tr>
                  <td valign="top" align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h1 textColorDark" style="font-family: &quot;GT America Condensed Bold&quot;, &quot;Roboto Condensed&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 700; vertical-align: middle; font-size: 36px; line-height: 42px; color: rgb(35, 35, 62);">Reservation confirmed</span>                          </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                          <!--[if gte mso 15]>&nbsp;<![endif]-->
                        </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <!-- MESSAGE -->
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr>
                  <td align="left" class="message" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(244, 244, 245); padding: 18px;">
                    <div class="text textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
                      <span class="text-bold textColorDark" style="font-weight: 600; color: rgb(35, 35, 62);">A message from '.$rowInfo["hotel_name"].'</span>
                      <br>We have made a reservation for you kindly confirm the same on your Qloud ID app.</div>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr>
                  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                    <!--[if gte mso 15]>&nbsp;<![endif]-->
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- BOOKING INFO -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" valign="middle" width="468" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text-list textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
                            <span class="text-bold textColorDark" style="font-weight: 600; color: rgb(35, 35, 62);">'.date("F j, Y, g:i a").'</span>
                            <br> Party of '.$data['guest_adults'].' for Smiles Davis 
                            <br>
From '.$data['checkin_date'].' to '.$data['checkout_date'].'
<br> Reservation  2
                            <br>
							
							<table border="0" cellspacing="0" cellpadding="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody><tr>
                              <td align="center" valign="center" width="100%" class="Button-primary-wrapper" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; border-radius: 3px; background-color: rgb(32, 32, 192);">
                              <a href="https://www.qloudid.com/public/index.php/BookingInformation/verifyBookingDetail/'.$data['checkid'].'" target="_blank" class="Button-primary" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; border-radius: 3px; border: 1px solid rgb(32, 32, 192); color: rgb(255, 255, 255); display: block; font-size: 16px; font-weight: 600; padding: 18px; text-decoration: none;">Confirm booking</a>                                </td>
                            </tr>
                          </tbody></table>
                          </div>
                        </td>
                      </tr>
                      
                      
                      <tr>
                        <td align="center" valign="center" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <table border="0" cellspacing="0" cellpadding="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody>
                          </tbody></table>
                        </td>
                      </tr>
					  
					  
                      
					  
					  
					  
                    </tbody></table>
                  </td>
                </tr>
                <!-- ADDRESS -->
                <tr>
                  <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                          <!--[if gte mso 15]>&nbsp;<![endif]-->
                        </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody><tr>
                              <td style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                <table align="left" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--address" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 50%;">
                                  <tbody><tr>
                                    <td align="left" width="100%" class="text-list textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
                                    <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">'.$rowInfo["hotel_name"].'</span><br>'.$rowInfo["visiting_address"].' '.$rowInfo["port_number"].'<br>'.$rowInfo["visiting_city"].' '.$rowInfo["visiting_state"].'<br> <a href="tel:+' .$rowInfo[" fdesk_country_code"].'="" '.$rowinfo["fdesk_phone_number"].'"="">+'.$rowInfo["fdesk_country_code"].' '.$rowInfo["fdesk_phone_number"].'</a><br> <br> <a href="https://www.google.com/maps/dir//'.$rowInfo['visiting_address'].' '.$rowInfo['port_number'].'/" class="text text-link textColorBlue" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; text-decoration: underline; color: rgb(32, 32, 192);" target="_blank">Get directions</a>                                      </td>
                                  </tr>
                                </tbody></table>
                                <!--[if mso]></td><td><![endif]-->
                                <table align="right" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--map" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 50%;">
                                  <tbody><tr>
                                    <td width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <a href="https://www.google.com/maps/dir//1350+W+Randolph%2C+Chicago%2C+IL%2C+US+60607/" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;"> <img width="230" class="business-address--map-image" height="auto" alt="Map of Elske" src="https://maps.googleapis.com/maps/api/staticmap?key=AIzaSyCPd%2DxSabI7QOfKX5NxVVup6bPfcovwFiQ&amp;center=1350+W+Randolph%2C+Chicago%2C+IL%2C+US+60607&amp;size=300x200&amp;zoom=15&amp;scale=2&amp;format=png&amp;visual%5Frefresh=true&amp;markers=scale%3A2%7Cicon%3Ahttps%3A%2F%2Fstorage.googleapis.com%2Ftock%2Dpublic%2Dassets%2Fimages%2Demail%2Dtemplate%2Femail%2Dmap%2Dmarker.png%7Cshadow%3Afalse%7C1350+W+Randolph%2C+Chicago%2C+IL%2C+US+60607&amp;style=feature%3Aall%7Celement%3Alabels.text.fill%7Ccolor%3A0x4b505b&amp;style=feature%3Aall%7Celement%3Alabels.text.stroke%7Ccolor%3A0xffffff%7Cvisibility%3Aon&amp;style=feature%3Aadministrative.land%5Fparcel%7Celement%3Aall%7Cvisibility%3Aoff&amp;style=feature%3Alandscape.man%5Fmade%7Celement%3Aall%7Cvisibility%3Aon&amp;style=feature%3Alandscape.man%5Fmade%7Celement%3Ageometry.fill%7Ccolor%3A0xe9e9eb&amp;style=feature%3Apoi%7Celement%3Aall%7Cvisibility%3Aoff&amp;style=feature%3Aroad%7Celement%3Ageometry.fill%7Ccolor%3A0xffffff&amp;style=feature%3Aroad%7Celement%3Alabels.text.fill%7Ccolor%3A0x787c84&amp;style=feature%3Aroad%7Celement%3Alabels.icon%7Cvisibility%3Aoff&amp;style=feature%3Aroad.highway%7Celement%3Ageometry.fill%7Ccolor%3A0xffbe32&amp;style=feature%3Aroad.highway%7Celement%3Ageometry.stroke%7Ccolor%3A0xffbe32&amp;style=feature%3Atransit%7Celement%3Alabels.text.fill%7Cvisibility%3Aon%7Ccolor%3A0x787c84&amp;style=feature%3Atransit.line%7Celement%3Ageometry.fill%7Ccolor%3A0xd2d4d6&amp;signature=3yCSyIXfsSilvB5wcd4OElw40QU=" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block; width: 100%;"> </a>                                      </td>
                                  </tr>
                                </tbody></table>
                              </td>
                            </tr>
                          </tbody></table>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr>
                  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                    <!--[if gte mso 15]>&nbsp;<![endif]-->
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- RECEIPT -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" width="100%" cellpadding="0" cellspacing="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td class="receipt__container" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; border: 1px solid rgb(211, 211, 216); padding: 24px;">
                          <table border="0" width="100%" cellpadding="0" cellspacing="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody><tr>
                              <td width="80%" class="textAlignLeft" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; text-align: left;">
                                <div class="text-list textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
                                  Reservation  2 (Deposit)
                                </div>
                                <div class="textColorGrayDark textSmall" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 14px; color: rgb(123, 123, 139);">
                                  Your deposit secures your booking and will be applied to your final bill.
                                </div>
                              </td>
                              <td width="20%" align="right" class="textAlignRight" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; text-align: right;">
                                <div class="text-list textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
                                  $'.($rowInfo['price']*$rowInfo['total_days']).'.00
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td colspan="2" style="height: 12px; line-height: 12px; max-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"></td>
                            </tr>
                          </tbody></table>
                          <table border="0" width="100%" cellpadding="0" cellspacing="0" class="receipt__row" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; border-top: 1px solid rgb(211, 211, 216);">
                            <tbody><tr>
                              <td colspan="2" style="height: 12px; line-height: 12px; max-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"></td>
                            </tr>
                            <tr>
                              <td width="80%" class="textAlignLeft" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; text-align: left;">
                                <div class="text-list textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
                                  Subtotal
                                </div>
                              </td>
                              <td width="20%" align="right" class="textAlignRight" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; text-align: right;">
                                <div class="text-list textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
                                  $'.($rowInfo['price']*$rowInfo['total_days']).'.00
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td colspan="2" style="height: 12px; line-height: 12px; max-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"></td>
                            </tr>
                          </tbody></table>
                          <table border="0" width="100%" cellpadding="0" cellspacing="0" class="receipt__row" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; border-top: 1px solid rgb(211, 211, 216);">
                            <tbody><tr>
                              <td colspan="2" style="height: 12px; line-height: 12px; max-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"></td>
                            </tr>
                            <tr>
                              <td width="80%" class="textAlignLeft" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; text-align: left;">
                                <div class="text-list text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; font-weight: 600; color: rgb(35, 35, 62);">
                                  Total
                                </div>
                              </td>
                              <td width="20%" align="right" class="textAlignRight" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; text-align: right;">
                                <div class="text-list text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; font-weight: 600; color: rgb(35, 35, 62);">
                                  $'.($rowInfo['price']*$rowInfo['total_days']).'.00
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td colspan="2" style="height: 12px; line-height: 12px; max-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"></td>
                            </tr>
                            <tr style="padding: 10px">
                              <td colspan="2" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                <table border="0" width="100%" cellpadding="0px" cellspacing="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                  <tbody><tr>
                                    <td class="message" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(244, 244, 245); padding: 18px;">
                                      <table border="0" width="100%" cellpadding="0px" cellspacing="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                        <tbody><tr>
                                          <td colspan="2" padding="0px" class="textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; color: rgb(79, 79, 101);"> Paid with Visa **** 6555 (4/12/19) </td>
                                        </tr>
                                        <tr class="spacer">
                                          <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                                        </tr>
                                        <tr>
                                          <td class="textSmall textColorGrayDark" colspan="2" padding="0px" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 14px; color: rgb(123, 123, 139);">
                                          On your statement, this charge will appear as<br> "Tock at*Elske" </td>
                                        </tr>
                                      </tbody></table>
                                    </td>
                                  </tr>
                                </tbody></table>
                              </td>
                            </tr>
                          </tbody></table>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- EDIT RECEIPT -->
                <!-- CANCELLATION POLICY -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; font-weight: 600; color: rgb(35, 35, 62);">
                            Cancellation policy
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text textColorNormal mt1" style="margin-top: 6px; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
                            <span>Your reservation can be canceled for a full refund 24 hours prior to the reservation time. </span>
                            <span>You can always transfer your reservation to another person.</span>
                          </div>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- QUESTIONS -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; font-weight: 600; color: rgb(35, 35, 62);">
                            Questions?
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text textColorNormal mt1" style="margin-top: 6px; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
                            If you have questions about your reservation, contact us at&nbsp;
                            <a href="mailto:'.$rowInfo['fdesk_email'].'">'.$rowInfo["fdesk_email"].'</a>                            or by calling
                            <a href="tel:+'.$rowInfo[" fdesk_country_code"].'="" '.$rowinfo["fdesk_phone_number"].'"="">+'.$rowInfo["fdesk_country_code"].' '.$rowInfo["fdesk_phone_number"].'</a>.
                          </div>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
              </tbody></table>
            </td>
          </tr>
        </tbody></table>
      </td>
    </tr>
    <!-- FOOTER -->
    <tr>
      <td align="center" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; width: 580px; margin: 0 auto;">
        <!-- Will most likely required a feature flag -->
        <!--[if (gte mso 9)|(IE)]>
<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
<tr>
<td align="center" valign="top" width="600">
<![endif]-->
        <table width="100%" border="0" cellspacing="0" cellpadding="0" align="center" class="Content-container" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; padding-left: 60px; padding-right: 60px;">
          <tbody><tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="center" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <a href="https://www.exploretock.com" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;"> <img src="https://storage.googleapis.com/tock-public-assets/images-email-template/tock-brandmark-color.png" width="30" height="30" alt="Tock" border="0" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block;"> </a>              </td>
          </tr>
          <tr class="spacer">
            <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
              <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                 2019 Tock, Inc.
              </div>
              <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                All Rights Reserved
              </div>
            </td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
        </tbody></table>
        <!--[if (gte mso 9)|(IE)]>
</td>
</tr>

  
			
</table>
<![endif]-->
      </td>
    </tr>
  </tbody></table>



</body></html>';
			 sendEmail($subject, $to, $emailContent);
			$stmt->close();
			$dbCon->close();
			return $checkid;
			
		}
		
		
		function verifyUserUsingPhoneDetail($data)
		{
		$dbCon = AppModel::createConnection();
		$id=$data['apartment_id'];
 		
		$stmt = $dbCon->prepare("select user_logins.id,first_name,last_name,country_name from user_logins left join user_profiles on user_profiles.user_logins_id=user_logins.id left join phone_country_code on phone_country_code.id=user_logins.country_of_residence where country_of_residence=? and phone_number=?");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("is", $data['country_id'], $data['uphno']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			 
			if(empty($row))
			{
				$stmt = $dbCon->prepare("select user_login_id from user_visiting_countries where country_info=? and phone_number=?");
			
				/* bind parameters for markers */
				$stmt->bind_param("is",$data['country_id'], $data['uphno']);
				$stmt->execute();
				$result = $stmt->get_result();
				$row = $result->fetch_assoc();	
				 
				if(empty($row))
				{
				$row['id']=0;
				$row['first_name']='';
				$row['last_name']='';
				$row['country_name']='';
				$stmt->close();
				$dbCon->close();
				return $row;
				}
				else
				{
				$stmt = $dbCon->prepare("select user_logins.id,first_name,last_name,country_name from user_logins left join user_profiles on user_profiles.user_logins_id=user_logins.id left join phone_country_code on phone_country_code.id=user_logins.country_of_residence where user_logins.id=?");
				/* bind parameters for markers */
				$cont=1;
				$stmt->bind_param("i", $row['user_login_id']);
				$stmt->execute();
				$result = $stmt->get_result();
				$row = $result->fetch_assoc();
				$stmt->close();
				$dbCon->close();
				return $row;
				}
				
			}
			else
			{
			$stmt->close();
			$dbCon->close();
			return $row;	
			}
			
		}
		

		function checkAvailablityDates($data)
		{
			$dbCon = AppModel::createConnection();
			$aid=$data['apartment_id'];
			$start_date=strtotime($data['start_date']);  
			$end_date=strtotime($data['end_date']);
			$total_days=($end_date-$start_date) / (60 * 60 * 24);
			 
			$strt=date('Y-m-d',$start_date);
			$end=date('Y-m-d',$end_date);
			for($i=0;$i<$total_days;$i++)
			{
			$currentdate=strtotime("+".$i." days", $start_date);
			$c=date('Y-m-d',$currentdate);	
			$stmt = $dbCon->prepare("select count(blocked_date) as num from user_apartment_blocked_dates where blocked_date=? and user_address_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("si", $currentdate,$aid);
			$stmt->execute();
			$blockedDate = $stmt->get_result();
			$rowBlocked = $blockedDate->fetch_assoc();
			 
			if($rowBlocked['num']>0)
			{
			$stmt->close();
			$dbCon->close();
			return 1;
			}
			}
			$data['start_date']=strtotime($data['start_date']);
			$data['end_date']=strtotime($data['end_date']);
			$stmt = $dbCon->prepare("SELECT count(id) as num  from hotel_checkout_detail where hotel_property_type=2  and ((checkin_booking_date BETWEEN ? AND ?) or (checkout_booking_date BETWEEN ? AND ?)) and room_type_id=?");
			$stmt->bind_param("ssssi",$start_date,$end_date, $start_date,$end_date,$aid);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if($row['num']>0)
			{
			$stmt->close();
			$dbCon->close();
			return 1;
			}
			else
			{
			$stmt->close();
			$dbCon->close();
			return 0;	
			}
			
		}
		
		
		
		function apartmentBookingList($data)
		{
		$dbCon = AppModel::createConnection();
		 
		$stmt = $dbCon->prepare("select id,checkin_date,guest_adult,guest_children from hotel_checkout_detail where room_type_id=? and checked_in=0 and hotel_property_type=2 and reservation_confirmed=0");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=1;
			while($row = $result->fetch_assoc())
			{
				$row['checkin_date']=date('Y-m-d',strtotime($row['checkin_date']));
				$row['circle_count']=$j;
				if($row['guest_children']==0)
				{
					$row['guests']=$row['guest_adult'].' adults';
				}
				else
				{
					$row['guests']=$row['guest_adult'].' adults & '.$row['guest_children'].' children';	
				}
				if($row['user_id']!=0)
				{
				$stmt = $dbCon->prepare("select email from user_logins where id=?");
				/* bind parameters for markers */
				$cont=1;
				$stmt->bind_param("i", $row['user_id']);
				$stmt->execute();
				$resultUser = $stmt->get_result();	
				$rowUser = $resultUser->fetch_assoc();
				$row['guest_email']=$rowUser['email'];
				}
				array_push($org,$row);
				$j++;
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
		function confirmApartmentReservation($data)
		{
		$dbCon = AppModel::createConnection();
		$stmt = $dbCon->prepare("select is_paid,passport_image,buyer_id,is_buyer_company,hotel_checkout_detail.user_id,user_address.address as visiting_address,user_address.port_number,user_address.city as visiting_city,user_address.state as visiting_state,user_address.id as p_id,room_type_id,total_days,price,property_nickname as hotel_name,country_code as fdesk_country_code,phone_number as fdesk_phone_number from hotel_checkout_detail left join user_address on user_address.id= hotel_checkout_detail.room_type_id left join user_profiles on user_profiles.user_logins_id=user_address.user_id left join user_logins on user_logins.id=user_address.user_id left join phone_country_code on user_logins.country_of_residence=phone_country_code.id where hotel_checkout_detail.id=?");
			
		/* bind parameters for markers */
		$stmt->bind_param("i", $data['property_id']);
		$stmt->execute();
		$result = $stmt->get_result();
		$rowPrice = $result->fetch_assoc();
		  
		
		if($rowPrice['is_paid']==0)
			{
			$ch = curl_init();
			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/tokens');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "card[number]=4242424242424242&card[exp_month]=2&card[exp_year]=2040&card[cvc]=314");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);
			$a=json_decode($result,true);
			 
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/customers');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "name=".$row['first_name']."&email=".$row['email']."&source=".$a['id']."&description=My");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);
			$b=json_decode($result,true);
			$cuId=$b['id'];
			
			$total_price=$rowPrice['price']*$rowPrice['total_days']*100;
			if($total_price<500)
			{
				$total_price=500;
			}
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/charges');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "customer=".$b['id']."&amount=".$total_price."&currency=sek&description=My");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);			
			$c=json_decode($result,true);
			$Chargeid=$c['id'];	
			
			
			}
			else
			{
			$cuId='';
			$Chargeid='';			
			}
			if($data['is_company']==0)
			{
				$buyer_id=$data['user_id'];
				$is_company=0;
			}
			else
			{
				$buyer_id=$data['is_company'];
				$is_company=1;
			}
			
					$j=0;
					while($j==0)
					{
					$code=mt_rand(1111,9999); 
					$stmt = $dbCon->prepare("select id from hotel_checkout_detail where checkin_code=?");
					/* bind parameters for markers */
					$stmt->bind_param("s",$code);
					$stmt->execute();
					$result = $stmt->get_result();
					$rowCode = $result->fetch_assoc();
					if(empty($rowCode))
					{
						$j++;
					}
					}
			 
			
			
			
			$stmt = $dbCon->prepare("update hotel_checkout_detail set reservation_confirmed=1,checkin_code=?,buyer_id=?,is_buyer_company=?,is_paid=1,card_id=?,delivery_address_id=?,cust_id=?,transection_id=? where id=?");
			$stmt->bind_param("siiiissi",$code, $buyer_id,$is_company,$data['card_id'],$data['invoice_address_id'],$cuId,$Chargeid,$data['property_id']);
			$stmt->execute();
		
				$curl = curl_init();
				curl_setopt_array($curl, array(
			  CURLOPT_URL => 'https://dstricts.com/user/index.php/DstrictsApp/updateApartmentBookingConfirmation',
			  CURLOPT_RETURNTRANSFER => true,
			  CURLOPT_ENCODING => '',
			  CURLOPT_MAXREDIRS => 10,
			  CURLOPT_TIMEOUT => 0,
			  CURLOPT_FOLLOWLOCATION => true,
			  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
			  CURLOPT_CUSTOMREQUEST => 'POST',
			  CURLOPT_POSTFIELDS => array('checkin_code'=>$code,'is_paid' =>1,'card_id' => $data['card_id'],'address_id' => $data['invoice_address_id'],'cuId' => $cuId,'Chargeid' => $Chargeid,'checkout_id' => $data['property_id'],'is_company'=>$is_company,'buyer_id'=>$buyer_id),
			)); 
			$response = curl_exec($curl);
			curl_close($curl);
			
			$this->sendBookingInfo($data);
			$stmt->close();
			$dbCon->close();
			return 1; 
			
		}
		
		
		function sendBookingInfo($data)
		{
			$dbCon = AppModel::createConnection($data);
			$checkid= $data['property_id'];    
			 
			$stmt = $dbCon->prepare("select checkin_code,passport_image,buyer_id,is_buyer_company,hotel_checkout_detail.user_id,user_address.address as visiting_address,user_address.port_number,user_address.city as visiting_city,user_address.state as visiting_state,user_address.id as p_id,room_type_id,total_days,price,property_nickname as hotel_name,country_code as fdesk_country_code,phone_number as fdesk_phone_number from hotel_checkout_detail left join user_address on user_address.id= hotel_checkout_detail.room_type_id left join user_profiles on user_profiles.user_logins_id=user_address.user_id left join user_logins on user_logins.id=user_address.user_id left join phone_country_code on user_logins.country_of_residence=phone_country_code.id where hotel_checkout_detail.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $checkid);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowInfo = $result->fetch_assoc();
			$data['checkid']=$this -> encrypt_decrypt('encrypt',$data['property_id']); 
			 $data['room_type_id_enc']= $this -> encrypt_decrypt('encrypt',$rowInfo['room_type_id']);
			$rowInfo['enc_p_id']= $this -> encrypt_decrypt('encrypt',$rowInfo['p_id']);  
			 $code=$rowInfo['checkin_code'];
			$stmt = $dbCon->prepare("select concat_ws(' ', first_name,last_name) as name,email from user_logins where id = ?");
        
			/* bind parameters for markers */
			$stmt->bind_param("i", $rowInfo['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowUser    = $result->fetch_assoc();
		 
			$rowInfo['name']=$rowUser['name'];
			$rowInfo['email']=$rowUser['email'];	 
			 
			$url="https://dstricts.com/public/index.php/VisitorSelectSearch/selectYourRole/".$data['room_type_id_enc'];  ;
			$surl=getShortUrl($url);
			$to      = $rowInfo['email'];
			$emailContent='<html xmlns="http://www.w3.org/1999/xhtml" style="background-color: rgb(240, 240, 240);"><head>
  <title>Reservation confirmed</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <style type="text/css">
    /* GT AMERICA */

    @font-face {
      font-display: fallback;
      font-family: "GT America Regular";
      font-weight: 400;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
    }

    @font-face {
      font-display: fallback;
      font-family: "GT America Medium";
      font-weight: 600;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
    }

    @font-face {
      font-display: fallback;
      font-family: "GT America Condensed Bold";
      font-weight: 700;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
    }

    /* CLIENT-SPECIFIC RESET */

    body,
    table,
    td,
    a {
      -webkit-text-size-adjust: 100%;
      -ms-text-size-adjust: 100%;
    }

    /* Prevent WebKit and Windows mobile changing default text sizes */

    table,
    td {
      mso-table-lspace: 0pt;
      mso-table-rspace: 0pt;
    }

    /* Remove spacing between tables in Outlook 2007 and up */

    img {
      -ms-interpolation-mode: bicubic;
    }

    /* Allow smoother rendering of resized image in Internet Explorer */

    .im {
      color: inherit !important;
    }

    /* DEVICE-SPECIFIC RESET */

    a[x-apple-data-detectors] {
      color: inherit !important;
      text-decoration: none !important;
      font-size: inherit !important;
      font-family: inherit !important;
      font-weight: inherit !important;
      line-height: inherit !important;
    }

    /* iOS BLUE LINKS */

    /* RESET */

    img {
      border: 0;
      height: auto;
      line-height: 100%;
      outline: none;
      text-decoration: none;
      display: block;
    }

    table {
      border-collapse: collapse;
    }

    table td {
      border-collapse: collapse;
      display: table-cell;
    }

    body {
      height: 100% !important;
      margin: 0 !important;
      padding: 0 !important;
      width: 100% !important;
    }

    /* BG COLORS */

    .mainTable {
      background-color: #F0F0F0;
    }

    .mainTable--hospitality {
      background-color: #f7f2ed;
    }

    html {
      background-color: #F0F0F0;
    }

    /* VARIABLES */

    .bg-white {
      background-color: white;
    }

    .hr {
      /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
      background-color: #d3d3d8;
      border-collapse: collapse;
      mso-table-lspace: 0pt;
      mso-table-rspace: 0pt;
      mso-line-height-rule: exactly;
      line-height: 1px;
    }

    .textAlignLeft {
      text-align: left !important;
    }

    .textAlignRight {
      text-align: right !important;
    }

    .textAlignCenter {
      text-align: center !important;
    }

    .mt1 {
      margin-top: 6px;
    }

    .list {
      padding-left: 18px;
      margin: 0;
    }

    /* TYPOGRAPHY */

    body {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      color: #4f4f65;
      -webkit-font-smoothing: antialiased;
      -ms-text-size-adjust: 100%;
      -moz-osx-font-smoothing: grayscale;
      font-smoothing: always;
      text-rendering: optimizeLegibility;
    }

    .h1 {
      font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 700;
      vertical-align: middle;
      font-size: 36px;
      line-height: 42px;
    }

    .h2 {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 600;
      vertical-align: middle;
      font-size: 16px;
      line-height: 24px;
    }

    .text {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 16px;
      line-height: 21px;
    }

    .text-list {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 16px;
      line-height: 25px;
    }

    .textSmall {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 14px;
    }

    .text-xsmall {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-size: 11px;
      text-transform: uppercase;
      line-height: 22px;
      letter-spacing: 1px;
    }

    .text-bold {
      font-weight: 600;
    }

    .text-link {
      text-decoration: underline;
    }

    .text-linkNoUnderline {
      text-decoration: none;
    }

    .text-strike {
      text-decoration: line-through;
    }

    /* FONT COLORS */

    .textColorDark {
      color: #23233e;
    }

    .textColorNormal {
      color: #4f4f65;
    }

    .textColorBlue {
      color: #2020c0;
    }

    .textColorGrayDark {
      color: #7B7B8B;
    }

    .textColorGray {
      color: #A5A8AD;
    }

    .textColorWhite {
      color: #FFFFFF;
    }

    .textColorRed {
      color: #df3232;
    }

    /* BUTTON */

    .Button-primary-wrapper {
      border-radius: 3px;
      background-color: #2020C0;
    }

    .Button-primary {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      border-radius: 3px;
      border: 1px solid #2020C0;
      color: #ffffff;
      display: block;
      font-size: 16px;
      font-weight: 600;
      padding: 18px;
      text-decoration: none;
    }

    .Button-secondary-wrapper {
      border-radius: 3px;
      background-color: #ffffff;
    }

    .Button-secondary {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      border-radius: 3px;
      border: 1px solid #2020C0;
      color: #2020C0;
      display: block;
      font-size: 16px;
      font-weight: 600;
      padding: 18px;
      text-decoration: none;
    }

    /* LAYOUT */

    .Content-container {
      padding-left: 60px;
      padding-right: 60px;
    }

    .Content-container--main {
      padding-top: 54px;
      padding-bottom: 60px;
    }

    .Content {
      width: 580px;
      margin: 0 auto;
    }

    .wrapper {
      max-width: 600px;
    }

    .section {
      padding: 24px 0px;
      border-bottom: 1px solid #d3d3d8;
    }

    .section--noBorder {
      padding: 24px 0px 0;
    }

    .section--last {
      padding: 24px 0px;
    }

    .message {
      background-color: #F4F4F5;
      padding: 18px;
    }

    .card {
      border: 1px solid #d3d3d8;
      padding: 18px;
    }

    /* HEADER */

    .header-tockLogoImage {
      display: block;
      color: #F0F0F0;
    }

    .header-heroImage {
      padding-bottom: 24px;
    }

    /* PREHEADER */

    .preheader {
      display: none;
      font-size: 1px;
      color: #FFFFFF;
      line-height: 1px;
      max-height: 0px;
      max-width: 0px;
      opacity: 0;
      overflow: hidden;
    }

    /* BANNER */

    .notice {
      padding: 12px;
      background: #23233E;
      color: #FFFFFF;
      display: block;
      font-size: 14px;
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 600;
    }

    /* INTRO */

    .section--intro {
      padding-bottom: 48px;
    }

    /* BOOKING INFO */

    .business-logo__container {
      width: 48px;
      height: 48px;
      border-radius: 3px;
      border: 1px solid #d3d3d8;
      overflow: hidden;
    }

    .business-logo__image {
      border: 1px solid transparent;
      border-radius: 3px;
      width: 48px;
      height: 48px;
      display: block;
    }

    .business-address--address {
      width: 50%;
    }

    .business-address--map {
      width: 50%;
    }

    .business-address--map-image {
      width: 100%;
    }

    /* MOBILE TICKETS */

    .mobile-ticket--description {
      width: 65%;
      margin-top: 12px;
      margin-right: 5%;
    }

    .mobile-ticket--code {
      width: 30%;
    }

    .mobile-ticket--code-image {
      width: 100%;
    }

    /* RESERVATION ACTIONS */

    .linksTable {
      border-bottom: 1px solid #d3d3d8;
    }

    .linksTableRow {
      padding: 24px 12px;
    }

    .actions-icon {
      vertical-align: middle;
    }

    .actions-text {
      vertical-align: middle;
    }

    /* RECEIPT */

    .receipt__container {
      border: 1px solid #d3d3d8;
      padding: 24px;
    }

    .receipt__row {
      border-top: 1px solid #d3d3d8;
    }

    /* FEEDBACK ICONS */

    .feedback-link {
      border: 1px solid #d4d5da;
      border-radius: 3px;
      display: inline-block;
      width: calc(32% - 2px);
      padding: 10px 0;
    }

    .feedback-link-bumper {
      display: inline-block;
      width: 1%;
    }

    .feedback-link img {
      height: 50px;
      width: 50px;
    }

    /* SOCIAL ICONS */

    .social-link {
      display: inline-block;
      width: auto;
    }

    .social-link-text {
      padding: 14px 24px 14px 14px;
    }

    /* TABLET STYLES */

    @media screen and (max-width: 648px) {
      /* DEVICE-SPECIFIC RESET */
      div[style*="margin: 16px 0;"] {
        margin: 0 !important;
      }
      /* ANDROID CENTER FIX */
      /* LAYOUT */
      .wrapper {
        width: 100% !important;
        max-width: 100% !important;
      }
      .Content {
        width: 90% !important;
      }
      .Content-container {
        padding-left: 36px !important;
        padding-right: 36px !important;
      }
      .Content-container--main {
        padding-top: 30px !important;
        padding-bottom: 42px !important;
      }
      .responsiveTable {
        width: 100% !important;
      }
      /* RESERVATION ACTIONS */
      .linksTableRow {
        padding-left: 0 !important;
        padding-right: 0 !important;
        padding-top: 12px !important;
        padding-bottom: 12px !important;
      }
      .linksTableRow--borderRight {
        border-right: none !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      /* FEEDBACK LINK */
      .feedback-link img {
        height: 38px !important;
        width: 38px !important;
      }
    }

    /* MOBILE STYLES */

    @media screen and (max-width: 480px) {
      /* TYPOGRAPHY */
      .h1 {
        font-size: 30px !important;
        line-height: 30px !important;
      }
      .text {
        font-size: 16px !important;
        line-height: 22px !important;
      }
      /* BUTTON */
      .mobile-buttonContainer {
        width: 100% !important;
      }
      /* LAYOUT */
      .Content {
        width: 100% !important;
      }
      .Content-container {
        padding-left: 18px !important;
        padding-right: 18px !important;
      }
      .Content-container--main {
        padding-top: 24px !important;
        padding-bottom: 30px !important;
      }
      .section {
        padding: 18px 0 !important;
      }
      .section--last {
        padding: 18px 0 !important;
      }
      .header {
        padding: 0 18px !important;
      }
      .business-address--address {
        width: 100% !important;
      }
      .business-address--map {
        margin-top: 30px !important;
        width: 100% !important;
      }
      .mobile-ticket--description {
        width: 100% !important;
        margin-top: 0px !important;
      }
      .mobile-ticket--code {
        margin-top: 30px !important;
        margin-left: 0;
        width: 100% !important;
      }
      /* RECEIPT */
      .receipt__container {
        padding: 12px !important;
      }
      /* SOCIAL ICONS */
      .social-link {
        display: block !important;
        width: 100% !important;
        border-bottom: 1px solid #d3d3d8 !important;
      }
      /* INTRO */
      .section--intro {
        padding-top: 18px !important;
        padding-bottom: 18px !important;
      }
    }
  </style>
</head>

<body style="margin: 0 !important; padding: 0 !important; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; height: 100%; margin: 0; padding: 0; width: 100%; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; color: rgb(79, 79, 101); -webkit-font-smoothing: antialiased; -ms-text-size-adjust: 100%; -moz-osx-font-smoothing: grayscale; font-smoothing: always; text-rendering: optimizeLegibility;">
   
  <!--[if mso]>
    <style type="text/css">
.h1 {font-family: "Helvetica", "Arial", sans-serif !important; font-weight: 700 !important; vertical-align: middle !important; font-size: 36px !important; mso-line-height-rule: exactly;line-height: 42px !important;}
.h2 {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 600 !important;vertical-align: middle !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 24px !important;}
.text {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 21px !important;}
.text-list {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 25px !important;}
.textSmall {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 14px !important;}
.text-xsmall {font-family: "Helvetica", "Arial", sans-serif !important;font-size: 11px !important;text-transform: uppercase !important;mso-line-height-rule: exactly;line-height: 22px !important;letter-spacing: 1px !important;}
.text-bold {font-weight: 600 !important;}
.text-link {text-decoration: underline !important;}
.text-linkNoUnderline {text-decoration: none !important;}
.text-strike {text-decoration: line-through !important;}
.textColorDark {color: #23233e !important;}
.textColorNormal {color: #4f4f65 !important;}
.textColorBlue {color: #2020c0 !important;}
.textColorGray {color: #A5A8AD !important;}
.textColorWhite {color: #FFFFFF !important;}
.Button-primary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #ffffff !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
.Button-secondary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #2020C0 !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
    </style>
    <![endif]-->
  <!-- HIDDEN PREHEADER TEXT -->
  <div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;">
  </div>
  <table border="0" cellpadding="0" cellspacing="0" width="100%" class=" mainTable  " style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: rgb(240, 240, 240);">
    <tbody><tr><td style="display:none !important;
 visibility:hidden;
 mso-hide:all;
 font-size:1px;
 color:#ffffff;
 line-height:1px;
 max-height:0px;
 max-width:0px;
 opacity:0;
 overflow:hidden; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> We are thrilled that you will be joining us. If yo... </td>
    <!-- HEADER -->
    </tr><tr>
      <td align="center" class="header" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 580px; margin: 0 auto;">
          <tbody><tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <h1 style="font-size: 33px;font-weight: 800;line-height: 30px;">Dstricts</h1>               </td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
        </tbody></table>
        <!--[if (gte mso 9)|(IE)]>
    </td>
    </tr>
    </table>
    <![endif]-->
      </td>
    </tr>
    <!-- CONTENT -->
    <tr>
      <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content bg-white" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: white; width: 580px; margin: 0 auto;">
          <tbody><tr>
            <td class="Content-container Content-container--main text textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101); padding-left: 60px; padding-right: 60px; padding-top: 54px; padding-bottom: 60px;">
              <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                <!-- RESTAURANT INFO -->
                <tbody><tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" valign="center" width="48" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="business-logo__container" style="width: 48px; height: 48px; border-radius: 3px; border: 1px solid rgb(211, 211, 216); overflow: hidden;">
                            <img src="'.$rowImage['image_path'].'" class="business-logo__image" width="48" height="48" alt="Logo" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block; border: 1px solid transparent; border-radius: 3px; width: 48px; height: 48px; display: block;">
                          </div>
                        </td>
                        <td width="12" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                        <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">'.$rowInfo["hotel_name"].'</span>                          </td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <!-- INTRO -->
                <tr>
                  <td valign="top" align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h1 textColorDark" style="font-family: &quot;GT America Condensed Bold&quot;, &quot;Roboto Condensed&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 700; vertical-align: middle; font-size: 36px; line-height: 42px; color: rgb(35, 35, 62);">Reservation confirmed</span>                          </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                          <!--[if gte mso 15]>&nbsp;<![endif]-->
                        </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <!-- MESSAGE -->
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr>
                  <td align="left" class="message" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(244, 244, 245); padding: 18px;">
                    <div class="text textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
                      <span class="text-bold textColorDark" style="font-weight: 600; color: rgb(35, 35, 62);">A message from '.$rowInfo["hotel_name"].'</span>
                      <br> We are thrilled that you will be joining us. If you would like to make any special arrangements or have questions about your reservation, please do not hesitate to reach out.
                    </div>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr>
                  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                    <!--[if gte mso 15]>&nbsp;<![endif]-->
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- BOOKING INFO -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" valign="middle" width="468" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text-list textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
                            <span class="text-bold textColorDark" style="font-weight: 600; color: rgb(35, 35, 62);">'.date("F j, Y, g:i a").'</span>
                            <br> Party of 2 for Smiles Davis 
                            <br> Confirmation code #: '.$code.'
                            <br> Reservation  2
                            <br>
                          </div>
                        </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="center" valign="center" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <table border="0" cellspacing="0" cellpadding="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody><tr>
                              <td align="center" valign="center" width="100%" class="Button-primary-wrapper" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; border-radius: 3px; background-color: rgb(32, 32, 192);">
                              <a href="'.$url.'" target="_blank" class="Button-primary" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; border-radius: 3px; border: 1px solid rgb(32, 32, 192); color: rgb(255, 255, 255); display: block; font-size: 16px; font-weight: 600; padding: 18px; text-decoration: none;"> Manage your reservation </a>                                </td>
                            </tr>
                          </tbody></table>
                        </td>
                      </tr>
					  
					  <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
					  
					  

<tr>
                        <td align="center" valign="center" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <table border="0" cellspacing="0" cellpadding="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody><tr>
                              <td align="center" valign="center" width="100%" class="Button-primary-wrapper" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; border-radius: 3px; background-color: rgb(32, 32, 192);">
                              <a href="https://dstricts.com/public/index.php/VisitorSelectSearch/selectYourRole/'.$data['room_type_id_enc'].'" target="_blank" class="Button-primary" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; border-radius: 3px; border: 1px solid rgb(32, 32, 192); color: rgb(255, 255, 255); display: block; font-size: 16px; font-weight: 600; padding: 18px; text-decoration: none;"> Checkin with app</a>                                </td>
                            </tr>
                          </tbody></table>
                        </td>
                      </tr><tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>

<tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>

<tr>
                        <td align="center" valign="center" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <table border="0" cellspacing="0" cellpadding="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody><tr>
                              <td align="center" valign="center" width="100%" class="Button-primary-wrapper" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; border-radius: 3px; background-color: rgb(32, 32, 192);">
                              <a href="https://www.qloudid.com/public/index.php/PrecheckinInformation/precheckedinInfo/'.$data['checkid'].'" target="_blank" class="Button-primary" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; border-radius: 3px; border: 1px solid rgb(32, 32, 192); color: rgb(255, 255, 255); display: block; font-size: 16px; font-weight: 600; padding: 18px; text-decoration: none;">Precheckin on web</a>                                </td>
                            </tr>
                          </tbody></table>
                        </td>
                      </tr>
					  
                    </tbody></table>
                  </td>
                </tr>
                <!-- ADDRESS -->
                <tr>
                  <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                          <!--[if gte mso 15]>&nbsp;<![endif]-->
                        </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody><tr>
                              <td style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                <table align="left" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--address" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 50%;">
                                  <tbody><tr>
                                    <td align="left" width="100%" class="text-list textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
                                    <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">'.$rowInfo["hotel_name"].'</span><br>'.$rowInfo["visiting_address"].' '.$rowInfo["port_number"].'<br>'.$rowInfo["visiting_city"].' '.$rowInfo["visiting_state"].'<br> <a href="tel:+' .$rowInfo[" fdesk_country_code"].'="" '.$rowinfo["fdesk_phone_number"].'"="">+'.$rowInfo["fdesk_country_code"].' '.$rowInfo["fdesk_phone_number"].'</a><br> <br> <a href="https://www.google.com/maps/dir//'.$rowInfo['visiting_address'].' '.$rowInfo['port_number'].'/" class="text text-link textColorBlue" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; text-decoration: underline; color: rgb(32, 32, 192);" target="_blank">Get directions</a>                                      </td>
                                  </tr>
                                </tbody></table>
                                <!--[if mso]></td><td><![endif]-->
                                <table align="right" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--map" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 50%;">
                                  <tbody><tr>
                                    <td width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <a href="https://www.google.com/maps/dir//1350+W+Randolph%2C+Chicago%2C+IL%2C+US+60607/" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;"> <img width="230" class="business-address--map-image" height="auto" alt="Map of Elske" src="https://maps.googleapis.com/maps/api/staticmap?key=AIzaSyCPd%2DxSabI7QOfKX5NxVVup6bPfcovwFiQ&amp;center=1350+W+Randolph%2C+Chicago%2C+IL%2C+US+60607&amp;size=300x200&amp;zoom=15&amp;scale=2&amp;format=png&amp;visual%5Frefresh=true&amp;markers=scale%3A2%7Cicon%3Ahttps%3A%2F%2Fstorage.googleapis.com%2Ftock%2Dpublic%2Dassets%2Fimages%2Demail%2Dtemplate%2Femail%2Dmap%2Dmarker.png%7Cshadow%3Afalse%7C1350+W+Randolph%2C+Chicago%2C+IL%2C+US+60607&amp;style=feature%3Aall%7Celement%3Alabels.text.fill%7Ccolor%3A0x4b505b&amp;style=feature%3Aall%7Celement%3Alabels.text.stroke%7Ccolor%3A0xffffff%7Cvisibility%3Aon&amp;style=feature%3Aadministrative.land%5Fparcel%7Celement%3Aall%7Cvisibility%3Aoff&amp;style=feature%3Alandscape.man%5Fmade%7Celement%3Aall%7Cvisibility%3Aon&amp;style=feature%3Alandscape.man%5Fmade%7Celement%3Ageometry.fill%7Ccolor%3A0xe9e9eb&amp;style=feature%3Apoi%7Celement%3Aall%7Cvisibility%3Aoff&amp;style=feature%3Aroad%7Celement%3Ageometry.fill%7Ccolor%3A0xffffff&amp;style=feature%3Aroad%7Celement%3Alabels.text.fill%7Ccolor%3A0x787c84&amp;style=feature%3Aroad%7Celement%3Alabels.icon%7Cvisibility%3Aoff&amp;style=feature%3Aroad.highway%7Celement%3Ageometry.fill%7Ccolor%3A0xffbe32&amp;style=feature%3Aroad.highway%7Celement%3Ageometry.stroke%7Ccolor%3A0xffbe32&amp;style=feature%3Atransit%7Celement%3Alabels.text.fill%7Cvisibility%3Aon%7Ccolor%3A0x787c84&amp;style=feature%3Atransit.line%7Celement%3Ageometry.fill%7Ccolor%3A0xd2d4d6&amp;signature=3yCSyIXfsSilvB5wcd4OElw40QU=" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block; width: 100%;"> </a>                                      </td>
                                  </tr>
                                </tbody></table>
                              </td>
                            </tr>
                          </tbody></table>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr>
                  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                    <!--[if gte mso 15]>&nbsp;<![endif]-->
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- RECEIPT -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" width="100%" cellpadding="0" cellspacing="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td class="receipt__container" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; border: 1px solid rgb(211, 211, 216); padding: 24px;">
                          <table border="0" width="100%" cellpadding="0" cellspacing="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody><tr>
                              <td width="80%" class="textAlignLeft" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; text-align: left;">
                                <div class="text-list textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
                                  Reservation  2 (Deposit)
                                </div>
                                <div class="textColorGrayDark textSmall" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 14px; color: rgb(123, 123, 139);">
                                  Your deposit secures your booking and will be applied to your final bill.
                                </div>
                              </td>
                              <td width="20%" align="right" class="textAlignRight" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; text-align: right;">
                                <div class="text-list textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
                                  $'.($rowInfo['price']/100).'.00
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td colspan="2" style="height: 12px; line-height: 12px; max-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"></td>
                            </tr>
                          </tbody></table>
                          <table border="0" width="100%" cellpadding="0" cellspacing="0" class="receipt__row" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; border-top: 1px solid rgb(211, 211, 216);">
                            <tbody><tr>
                              <td colspan="2" style="height: 12px; line-height: 12px; max-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"></td>
                            </tr>
                            <tr>
                              <td width="80%" class="textAlignLeft" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; text-align: left;">
                                <div class="text-list textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
                                  Subtotal
                                </div>
                              </td>
                              <td width="20%" align="right" class="textAlignRight" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; text-align: right;">
                                <div class="text-list textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
                                  $'.($rowInfo['price']/100).'.00
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td colspan="2" style="height: 12px; line-height: 12px; max-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"></td>
                            </tr>
                          </tbody></table>
                          <table border="0" width="100%" cellpadding="0" cellspacing="0" class="receipt__row" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; border-top: 1px solid rgb(211, 211, 216);">
                            <tbody><tr>
                              <td colspan="2" style="height: 12px; line-height: 12px; max-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"></td>
                            </tr>
                            <tr>
                              <td width="80%" class="textAlignLeft" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; text-align: left;">
                                <div class="text-list text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; font-weight: 600; color: rgb(35, 35, 62);">
                                  Total
                                </div>
                              </td>
                              <td width="20%" align="right" class="textAlignRight" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; text-align: right;">
                                <div class="text-list text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; font-weight: 600; color: rgb(35, 35, 62);">
                                  $'.($rowInfo['price']/100).'.00
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td colspan="2" style="height: 12px; line-height: 12px; max-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"></td>
                            </tr>
                            <tr style="padding: 10px">
                              <td colspan="2" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                <table border="0" width="100%" cellpadding="0px" cellspacing="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                  <tbody><tr>
                                    <td class="message" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(244, 244, 245); padding: 18px;">
                                      <table border="0" width="100%" cellpadding="0px" cellspacing="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                        <tbody><tr>
                                          <td colspan="2" padding="0px" class="textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; color: rgb(79, 79, 101);"> Paid with Visa **** 6555 (4/12/19) </td>
                                        </tr>
                                        <tr class="spacer">
                                          <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                                        </tr>
                                        <tr>
                                          <td class="textSmall textColorGrayDark" colspan="2" padding="0px" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 14px; color: rgb(123, 123, 139);">
                                          On your statement, this charge will appear as<br> "Tock at*Elske" </td>
                                        </tr>
                                      </tbody></table>
                                    </td>
                                  </tr>
                                </tbody></table>
                              </td>
                            </tr>
                          </tbody></table>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- EDIT RECEIPT -->
                <!-- CANCELLATION POLICY -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; font-weight: 600; color: rgb(35, 35, 62);">
                            Cancellation policy
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text textColorNormal mt1" style="margin-top: 6px; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
                            <span>Your reservation can be canceled for a full refund 24 hours prior to the reservation time. </span>
                            <span>You can always transfer your reservation to another person.</span>
                          </div>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- QUESTIONS -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; font-weight: 600; color: rgb(35, 35, 62);">
                            Questions?
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text textColorNormal mt1" style="margin-top: 6px; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
                            If you have questions about your reservation, contact us at&nbsp;
                            <a href="mailto:'.$rowInfo['fdesk_email'].'">'.$rowInfo["fdesk_email"].'</a>                            or by calling
                            <a href="tel:+'.$rowInfo[" fdesk_country_code"].'="" '.$rowinfo["fdesk_phone_number"].'"="">+'.$rowInfo["fdesk_country_code"].' '.$rowInfo["fdesk_phone_number"].'</a>.
                          </div>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
              </tbody></table>
            </td>
          </tr>
        </tbody></table>
      </td>
    </tr>
    <!-- FOOTER -->
    <tr>
      <td align="center" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; width: 580px; margin: 0 auto;">
        <!-- Will most likely required a feature flag -->
        <!--[if (gte mso 9)|(IE)]>
<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
<tr>
<td align="center" valign="top" width="600">
<![endif]-->
        <table width="100%" border="0" cellspacing="0" cellpadding="0" align="center" class="Content-container" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; padding-left: 60px; padding-right: 60px;">
          <tbody><tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="center" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <a href="https://www.exploretock.com" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;"> <img src="https://storage.googleapis.com/tock-public-assets/images-email-template/tock-brandmark-color.png" width="30" height="30" alt="Tock" border="0" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block;"> </a>              </td>
          </tr>
          <tr class="spacer">
            <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
              <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                 2019 Tock, Inc.
              </div>
              <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                All Rights Reserved
              </div>
            </td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
        </tbody></table>
        <!--[if (gte mso 9)|(IE)]>
</td>
</tr>
</table>
<![endif]-->
      </td>
    </tr>
  </tbody></table>';

  
			sendEmail($subject, $to, $emailContent);
			 
			$url="https://dstricts.com/public/index.php/VisitorSelectSearch/selectYourRole/".$data['room_type_id_enc']; 
			$surl=getShortUrl($url);
			$to      = $rowInfo['email'];
			
			$emailContent='
  <title>Reservation confirmed</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <style type="text/css">
    /* GT AMERICA */

    @font-face {
      font-display: fallback;
      font-family: "GT America Regular";
      font-weight: 400;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
    }

    @font-face {
      font-display: fallback;
      font-family: "GT America Medium";
      font-weight: 600;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
    }

    @font-face {
      font-display: fallback;
      font-family: "GT America Condensed Bold";
      font-weight: 700;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
    }

    /* CLIENT-SPECIFIC RESET */

    body,
    table,
    td,
    a {
      -webkit-text-size-adjust: 100%;
      -ms-text-size-adjust: 100%;
    }

    /* Prevent WebKit and Windows mobile changing default text sizes */

    table,
    td {
      mso-table-lspace: 0pt;
      mso-table-rspace: 0pt;
    }

    /* Remove spacing between tables in Outlook 2007 and up */

    img {
      -ms-interpolation-mode: bicubic;
    }

    /* Allow smoother rendering of resized image in Internet Explorer */

    .im {
      color: inherit !important;
    }

    /* DEVICE-SPECIFIC RESET */

    a[x-apple-data-detectors] {
      color: inherit !important;
      text-decoration: none !important;
      font-size: inherit !important;
      font-family: inherit !important;
      font-weight: inherit !important;
      line-height: inherit !important;
    }

    /* iOS BLUE LINKS */

    /* RESET */

    img {
      border: 0;
      height: auto;
      line-height: 100%;
      outline: none;
      text-decoration: none;
      display: block;
    }

    table {
      border-collapse: collapse;
    }

    table td {
      border-collapse: collapse;
      display: table-cell;
    }

    body {
      height: 100% !important;
      margin: 0 !important;
      padding: 0 !important;
      width: 100% !important;
    }

    /* BG COLORS */

    .mainTable {
      background-color: #F0F0F0;
    }

    .mainTable--hospitality {
      background-color: #f7f2ed;
    }

    html {
      background-color: #F0F0F0;
    }

    /* VARIABLES */

    .bg-white {
      background-color: white;
    }

    .hr {
      /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
      background-color: #d3d3d8;
      border-collapse: collapse;
      mso-table-lspace: 0pt;
      mso-table-rspace: 0pt;
      mso-line-height-rule: exactly;
      line-height: 1px;
    }

    .textAlignLeft {
      text-align: left !important;
    }

    .textAlignRight {
      text-align: right !important;
    }

    .textAlignCenter {
      text-align: center !important;
    }

    .mt1 {
      margin-top: 6px;
    }

    .list {
      padding-left: 18px;
      margin: 0;
    }

    /* TYPOGRAPHY */

    body {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      color: #4f4f65;
      -webkit-font-smoothing: antialiased;
      -ms-text-size-adjust: 100%;
      -moz-osx-font-smoothing: grayscale;
      font-smoothing: always;
      text-rendering: optimizeLegibility;
    }

    .h1 {
      font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 700;
      vertical-align: middle;
      font-size: 36px;
      line-height: 42px;
    }

    .h2 {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 600;
      vertical-align: middle;
      font-size: 16px;
      line-height: 24px;
    }

    .text {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 16px;
      line-height: 21px;
    }

    .text-list {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 16px;
      line-height: 25px;
    }

    .textSmall {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 14px;
    }

    .text-xsmall {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-size: 11px;
      text-transform: uppercase;
      line-height: 22px;
      letter-spacing: 1px;
    }

    .text-bold {
      font-weight: 600;
    }

    .text-link {
      text-decoration: underline;
    }

    .text-linkNoUnderline {
      text-decoration: none;
    }

    .text-strike {
      text-decoration: line-through;
    }

    /* FONT COLORS */

    .textColorDark {
      color: #23233e;
    }

    .textColorNormal {
      color: #4f4f65;
    }

    .textColorBlue {
      color: #2020c0;
    }

    .textColorGrayDark {
      color: #7B7B8B;
    }

    .textColorGray {
      color: #A5A8AD;
    }

    .textColorWhite {
      color: #FFFFFF;
    }

    .textColorRed {
      color: #df3232;
    }

    /* BUTTON */

    .Button-primary-wrapper {
      border-radius: 3px;
      background-color: #2020C0;
    }

    .Button-primary {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      border-radius: 3px;
      border: 1px solid #2020C0;
      color: #ffffff;
      display: block;
      font-size: 16px;
      font-weight: 600;
      padding: 18px;
      text-decoration: none;
    }

    .Button-secondary-wrapper {
      border-radius: 3px;
      background-color: #ffffff;
    }

    .Button-secondary {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      border-radius: 3px;
      border: 1px solid #2020C0;
      color: #2020C0;
      display: block;
      font-size: 16px;
      font-weight: 600;
      padding: 18px;
      text-decoration: none;
    }

    /* LAYOUT */

    .Content-container {
      padding-left: 60px;
      padding-right: 60px;
    }

    .Content-container--main {
      padding-top: 54px;
      padding-bottom: 60px;
    }

    .Content {
      width: 580px;
      margin: 0 auto;
    }

    .wrapper {
      max-width: 600px;
    }

    .section {
      padding: 24px 0px;
      border-bottom: 1px solid #d3d3d8;
    }

    .section--noBorder {
      padding: 24px 0px 0;
    }

    .section--last {
      padding: 24px 0px;
    }

    .message {
      background-color: #F4F4F5;
      padding: 18px;
    }

    .card {
      border: 1px solid #d3d3d8;
      padding: 18px;
    }

    /* HEADER */

    .header-tockLogoImage {
      display: block;
      color: #F0F0F0;
    }

    .header-heroImage {
      padding-bottom: 24px;
    }

    /* PREHEADER */

    .preheader {
      display: none;
      font-size: 1px;
      color: #FFFFFF;
      line-height: 1px;
      max-height: 0px;
      max-width: 0px;
      opacity: 0;
      overflow: hidden;
    }

    /* BANNER */

    .notice {
      padding: 12px;
      background: #23233E;
      color: #FFFFFF;
      display: block;
      font-size: 14px;
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 600;
    }

    /* INTRO */

    .section--intro {
      padding-bottom: 48px;
    }

    /* BOOKING INFO */

    .business-logo__container {
      width: 48px;
      height: 48px;
      border-radius: 3px;
      border: 1px solid #d3d3d8;
      overflow: hidden;
    }

    .business-logo__image {
      border: 1px solid transparent;
      border-radius: 3px;
      width: 48px;
      height: 48px;
      display: block;
    }

    .business-address--address {
      width: 50%;
    }

    .business-address--map {
      width: 50%;
    }

    .business-address--map-image {
      width: 100%;
    }

    /* MOBILE TICKETS */

    .mobile-ticket--description {
      width: 65%;
      margin-top: 12px;
      margin-right: 5%;
    }

    .mobile-ticket--code {
      width: 30%;
    }

    .mobile-ticket--code-image {
      width: 100%;
    }

    /* RESERVATION ACTIONS */

    .linksTable {
      border-bottom: 1px solid #d3d3d8;
    }

    .linksTableRow {
      padding: 24px 12px;
    }

    .actions-icon {
      vertical-align: middle;
    }

    .actions-text {
      vertical-align: middle;
    }

    /* RECEIPT */

    .receipt__container {
      border: 1px solid #d3d3d8;
      padding: 24px;
    }

    .receipt__row {
      border-top: 1px solid #d3d3d8;
    }

    /* FEEDBACK ICONS */

    .feedback-link {
      border: 1px solid #d4d5da;
      border-radius: 3px;
      display: inline-block;
      width: calc(32% - 2px);
      padding: 10px 0;
    }

    .feedback-link-bumper {
      display: inline-block;
      width: 1%;
    }

    .feedback-link img {
      height: 50px;
      width: 50px;
    }

    /* SOCIAL ICONS */

    .social-link {
      display: inline-block;
      width: auto;
    }

    .social-link-text {
      padding: 14px 24px 14px 14px;
    }

    /* TABLET STYLES */

    @media screen and (max-width: 648px) {
      /* DEVICE-SPECIFIC RESET */
      div[style*="margin: 16px 0;"] {
        margin: 0 !important;
      }
      /* ANDROID CENTER FIX */
      /* LAYOUT */
      .wrapper {
        width: 100% !important;
        max-width: 100% !important;
      }
      .Content {
        width: 90% !important;
      }
      .Content-container {
        padding-left: 36px !important;
        padding-right: 36px !important;
      }
      .Content-container--main {
        padding-top: 30px !important;
        padding-bottom: 42px !important;
      }
      .responsiveTable {
        width: 100% !important;
      }
      /* RESERVATION ACTIONS */
      .linksTableRow {
        padding-left: 0 !important;
        padding-right: 0 !important;
        padding-top: 12px !important;
        padding-bottom: 12px !important;
      }
      .linksTableRow--borderRight {
        border-right: none !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      /* FEEDBACK LINK */
      .feedback-link img {
        height: 38px !important;
        width: 38px !important;
      }
    }

    /* MOBILE STYLES */

    @media screen and (max-width: 480px) {
      /* TYPOGRAPHY */
      .h1 {
        font-size: 30px !important;
        line-height: 30px !important;
      }
      .text {
        font-size: 16px !important;
        line-height: 22px !important;
      }
      /* BUTTON */
      .mobile-buttonContainer {
        width: 100% !important;
      }
      /* LAYOUT */
      .Content {
        width: 100% !important;
      }
      .Content-container {
        padding-left: 18px !important;
        padding-right: 18px !important;
      }
      .Content-container--main {
        padding-top: 24px !important;
        padding-bottom: 30px !important;
      }
      .section {
        padding: 18px 0 !important;
      }
      .section--last {
        padding: 18px 0 !important;
      }
      .header {
        padding: 0 18px !important;
      }
      .business-address--address {
        width: 100% !important;
      }
      .business-address--map {
        margin-top: 30px !important;
        width: 100% !important;
      }
      .mobile-ticket--description {
        width: 100% !important;
        margin-top: 0px !important;
      }
      .mobile-ticket--code {
        margin-top: 30px !important;
        margin-left: 0;
        width: 100% !important;
      }
      /* RECEIPT */
      .receipt__container {
        padding: 12px !important;
      }
      /* SOCIAL ICONS */
      .social-link {
        display: block !important;
        width: 100% !important;
        border-bottom: 1px solid #d3d3d8 !important;
      }
      /* INTRO */
      .section--intro {
        padding-top: 18px !important;
        padding-bottom: 18px !important;
      }
    }
  </style>



   
  <!--[if mso]>
    <style type="text/css">
.h1 {font-family: "Helvetica", "Arial", sans-serif !important; font-weight: 700 !important; vertical-align: middle !important; font-size: 36px !important; mso-line-height-rule: exactly;line-height: 42px !important;}
.h2 {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 600 !important;vertical-align: middle !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 24px !important;}
.text {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 21px !important;}
.text-list {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 25px !important;}
.textSmall {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 14px !important;}
.text-xsmall {font-family: "Helvetica", "Arial", sans-serif !important;font-size: 11px !important;text-transform: uppercase !important;mso-line-height-rule: exactly;line-height: 22px !important;letter-spacing: 1px !important;}
.text-bold {font-weight: 600 !important;}
.text-link {text-decoration: underline !important;}
.text-linkNoUnderline {text-decoration: none !important;}
.text-strike {text-decoration: line-through !important;}
.textColorDark {color: #23233e !important;}
.textColorNormal {color: #4f4f65 !important;}
.textColorBlue {color: #2020c0 !important;}
.textColorGray {color: #A5A8AD !important;}
.textColorWhite {color: #FFFFFF !important;}
.Button-primary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #ffffff !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
.Button-secondary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #2020C0 !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
    </style>
    <![endif]-->
  <!-- HIDDEN PREHEADER TEXT -->
  <div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;">
  </div>
  <table border="0" cellpadding="0" cellspacing="0" width="100%" class=" mainTable  " style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: rgb(240, 240, 240);">
    <tbody><tr><td style="display:none !important;
 visibility:hidden;
 mso-hide:all;
 font-size:1px;
 color:#ffffff;
 line-height:1px;
 max-height:0px;
 max-width:0px;
 opacity:0;
 overflow:hidden; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> We are thrilled that you will be joining us. If yo... </td>
    <!-- HEADER -->
    </tr><tr>
      <td align="center" class="header" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 580px; margin: 0 auto;">
          <tbody><tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <h1 style="font-size: 33px;font-weight: 800;line-height: 30px;">Dstricts</h1>               </td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
        </tbody></table>
        <!--[if (gte mso 9)|(IE)]>
    </td>
    </tr>
    </table>
    <![endif]-->
      </td>
    </tr>
    <!-- CONTENT -->
    <tr>
      <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content bg-white" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: white; width: 580px; margin: 0 auto;">
          <tbody><tr>
            <td class="Content-container Content-container--main text textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101); padding-left: 60px; padding-right: 60px; padding-top: 54px; padding-bottom: 60px;">
              <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                <!-- RESTAURANT INFO -->
                <tbody><tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" valign="center" width="48" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="business-logo__container" style="width: 48px; height: 48px; border-radius: 3px; border: 1px solid rgb(211, 211, 216); overflow: hidden;">
                            <img src="'.$rowImage['image_path'].'" class="business-logo__image" width="48" height="48" alt="Logo" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block; border: 1px solid transparent; border-radius: 3px; width: 48px; height: 48px; display: block;">
                          </div>
                        </td>
                        <td width="12" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                        <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">'.$rowInfo["hotel_name"].'</span>                          </td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <!-- INTRO -->
                <tr>
                  <td valign="top" align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h1 textColorDark" style="font-family: &quot;GT America Condensed Bold&quot;, &quot;Roboto Condensed&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 700; vertical-align: middle; font-size: 36px; line-height: 42px; color: rgb(35, 35, 62);">You may checkin now</span>                          </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                          <!--[if gte mso 15]>&nbsp;<![endif]-->
                        </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <!-- MESSAGE -->
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr>
                  <td align="left" class="message" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(244, 244, 245); padding: 18px;">
                    <div class="text textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
                      <span class="text-bold textColorDark" style="font-weight: 600; color: rgb(35, 35, 62);">Checkin code #: '.$code.'</span>
                      </div>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr>
                  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                    <!--[if gte mso 15]>&nbsp;<![endif]-->
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- BOOKING INFO -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" valign="middle" width="468" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          
                        </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="center" valign="center" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <table border="0" cellspacing="0" cellpadding="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody><tr>
                              <td align="center" valign="center" width="100%" class="Button-primary-wrapper" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; border-radius: 3px; background-color: rgb(32, 32, 192);">
                              <a href="'.$url.'" target="_blank" class="Button-primary" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; border-radius: 3px; border: 1px solid rgb(32, 32, 192); color: rgb(255, 255, 255); display: block; font-size: 16px; font-weight: 600; padding: 18px; text-decoration: none;"> Manage your reservation </a>                                </td>
                            </tr>
                          </tbody></table>
                        </td>
                      </tr>
					  
					   <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
					  
					  <tr>
                        <td align="center" valign="center" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <table border="0" cellspacing="0" cellpadding="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody><tr>
                              <td align="center" valign="center" width="100%" class="Button-primary-wrapper" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; border-radius: 3px; background-color: rgb(32, 32, 192);">
                              <a href="https://dstricts.com/public/index.php/VisitorSelectSearch/selectYourRole/'.$data['room_type_id_enc'].'" target="_blank" class="Button-primary" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; border-radius: 3px; border: 1px solid rgb(32, 32, 192); color: rgb(255, 255, 255); display: block; font-size: 16px; font-weight: 600; padding: 18px; text-decoration: none;"> Checkin with app</a>                                </td>
                            </tr>
                          </tbody></table>
                        </td>
                      </tr>
					  
					  
                    </tbody></table>
                  </td>
                </tr>
                <!-- ADDRESS -->
                <tr>
                  <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                          <!--[if gte mso 15]>&nbsp;<![endif]-->
                        </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody><tr>
                              <td style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                <table align="left" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--address" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 70%;">
                                  <tbody><tr>
                                    <td align="left" width="100%" class="text-list textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
                                    <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">If button dont work please copy and paste the link in browser: '.$surl.'</span>                                         </td>
                                  </tr>
                                </tbody></table>
                                <!--[if mso]></td><td><![endif]-->
                                <table align="right" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--map" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 50%;">
                                  <tbody><tr>
                                    
                                  </tr>
                                </tbody></table>
                              </td>
                            </tr>
                          </tbody></table>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr>
                  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                    <!--[if gte mso 15]>&nbsp;<![endif]-->
                  </td>
                </tr>
                
                
                <!-- RECEIPT -->
                
                
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- EDIT RECEIPT -->
                <!-- CANCELLATION POLICY -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; font-weight: 600; color: rgb(35, 35, 62);">
                            Cancellation policy
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text textColorNormal mt1" style="margin-top: 6px; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
                            <span>Your reservation can be canceled for a full refund 24 hours prior to the reservation time. </span>
                            <span>You can always transfer your reservation to another person.</span>
                          </div>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- QUESTIONS -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; font-weight: 600; color: rgb(35, 35, 62);">
                            Questions?
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text textColorNormal mt1" style="margin-top: 6px; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
                            If you have questions about your reservation, contact us at&nbsp;
                            <a href="mailto:'.$rowInfo['fdesk_email'].'">'.$rowInfo["fdesk_email"].'</a>                            or by calling
                            <a href="tel:+'.$rowInfo[" fdesk_country_code"].'="" '.$rowinfo["fdesk_phone_number"].'"="">+'.$rowInfo["fdesk_country_code"].' '.$rowInfo["fdesk_phone_number"].'</a>.
                          </div>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
              </tbody></table>
            </td>
          </tr>
        </tbody></table>
      </td>
    </tr>
    <!-- FOOTER -->
    <tr>
      <td align="center" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; width: 580px; margin: 0 auto;">
        <!-- Will most likely required a feature flag -->
        <!--[if (gte mso 9)|(IE)]>
<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
<tr>
<td align="center" valign="top" width="600">
<![endif]-->
        <table width="100%" border="0" cellspacing="0" cellpadding="0" align="center" class="Content-container" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; padding-left: 60px; padding-right: 60px;">
          <tbody><tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="center" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <a href="https://www.exploretock.com" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;"> <img src="https://storage.googleapis.com/tock-public-assets/images-email-template/tock-brandmark-color.png" width="30" height="30" alt="Tock" border="0" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block;"> </a>              </td>
          </tr>
          <tr class="spacer">
            <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
              <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                 2019 Tock, Inc.
              </div>
              <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                All Rights Reserved
              </div>
            </td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
        </tbody></table>
        <!--[if (gte mso 9)|(IE)]>
</td>
</tr>
</table>
<![endif]-->
      </td>
    </tr>
  </tbody></table>';
			
			sendEmail($subject, $to, $emailContent);
			
			$to      = $rowInfo['email'];
			$emailContent='
  <title>Reservation confirmed</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <style type="text/css">
    /* GT AMERICA */

    @font-face {
      font-display: fallback;
      font-family: "GT America Regular";
      font-weight: 400;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
    }

    @font-face {
      font-display: fallback;
      font-family: "GT America Medium";
      font-weight: 600;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
    }

    @font-face {
      font-display: fallback;
      font-family: "GT America Condensed Bold";
      font-weight: 700;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
    }

    /* CLIENT-SPECIFIC RESET */

    body,
    table,
    td,
    a {
      -webkit-text-size-adjust: 100%;
      -ms-text-size-adjust: 100%;
    }

    /* Prevent WebKit and Windows mobile changing default text sizes */

    table,
    td {
      mso-table-lspace: 0pt;
      mso-table-rspace: 0pt;
    }

    /* Remove spacing between tables in Outlook 2007 and up */

    img {
      -ms-interpolation-mode: bicubic;
    }

    /* Allow smoother rendering of resized image in Internet Explorer */

    .im {
      color: inherit !important;
    }

    /* DEVICE-SPECIFIC RESET */

    a[x-apple-data-detectors] {
      color: inherit !important;
      text-decoration: none !important;
      font-size: inherit !important;
      font-family: inherit !important;
      font-weight: inherit !important;
      line-height: inherit !important;
    }

    /* iOS BLUE LINKS */

    /* RESET */

    img {
      border: 0;
      height: auto;
      line-height: 100%;
      outline: none;
      text-decoration: none;
      display: block;
    }

    table {
      border-collapse: collapse;
    }

    table td {
      border-collapse: collapse;
      display: table-cell;
    }

    body {
      height: 100% !important;
      margin: 0 !important;
      padding: 0 !important;
      width: 100% !important;
    }

    /* BG COLORS */

    .mainTable {
      background-color: #F0F0F0;
    }

    .mainTable--hospitality {
      background-color: #f7f2ed;
    }

    html {
      background-color: #F0F0F0;
    }

    /* VARIABLES */

    .bg-white {
      background-color: white;
    }

    .hr {
      /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
      background-color: #d3d3d8;
      border-collapse: collapse;
      mso-table-lspace: 0pt;
      mso-table-rspace: 0pt;
      mso-line-height-rule: exactly;
      line-height: 1px;
    }

    .textAlignLeft {
      text-align: left !important;
    }

    .textAlignRight {
      text-align: right !important;
    }

    .textAlignCenter {
      text-align: center !important;
    }

    .mt1 {
      margin-top: 6px;
    }

    .list {
      padding-left: 18px;
      margin: 0;
    }

    /* TYPOGRAPHY */

    body {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      color: #4f4f65;
      -webkit-font-smoothing: antialiased;
      -ms-text-size-adjust: 100%;
      -moz-osx-font-smoothing: grayscale;
      font-smoothing: always;
      text-rendering: optimizeLegibility;
    }

    .h1 {
      font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 700;
      vertical-align: middle;
      font-size: 36px;
      line-height: 42px;
    }

    .h2 {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 600;
      vertical-align: middle;
      font-size: 16px;
      line-height: 24px;
    }

    .text {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 16px;
      line-height: 21px;
    }

    .text-list {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 16px;
      line-height: 25px;
    }

    .textSmall {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 14px;
    }

    .text-xsmall {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-size: 11px;
      text-transform: uppercase;
      line-height: 22px;
      letter-spacing: 1px;
    }

    .text-bold {
      font-weight: 600;
    }

    .text-link {
      text-decoration: underline;
    }

    .text-linkNoUnderline {
      text-decoration: none;
    }

    .text-strike {
      text-decoration: line-through;
    }

    /* FONT COLORS */

    .textColorDark {
      color: #23233e;
    }

    .textColorNormal {
      color: #4f4f65;
    }

    .textColorBlue {
      color: #2020c0;
    }

    .textColorGrayDark {
      color: #7B7B8B;
    }

    .textColorGray {
      color: #A5A8AD;
    }

    .textColorWhite {
      color: #FFFFFF;
    }

    .textColorRed {
      color: #df3232;
    }

    /* BUTTON */

    .Button-primary-wrapper {
      border-radius: 3px;
      background-color: #2020C0;
    }

    .Button-primary {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      border-radius: 3px;
      border: 1px solid #2020C0;
      color: #ffffff;
      display: block;
      font-size: 16px;
      font-weight: 600;
      padding: 18px;
      text-decoration: none;
    }

    .Button-secondary-wrapper {
      border-radius: 3px;
      background-color: #ffffff;
    }

    .Button-secondary {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      border-radius: 3px;
      border: 1px solid #2020C0;
      color: #2020C0;
      display: block;
      font-size: 16px;
      font-weight: 600;
      padding: 18px;
      text-decoration: none;
    }

    /* LAYOUT */

    .Content-container {
      padding-left: 60px;
      padding-right: 60px;
    }

    .Content-container--main {
      padding-top: 54px;
      padding-bottom: 60px;
    }

    .Content {
      width: 580px;
      margin: 0 auto;
    }

    .wrapper {
      max-width: 600px;
    }

    .section {
      padding: 24px 0px;
      border-bottom: 1px solid #d3d3d8;
    }

    .section--noBorder {
      padding: 24px 0px 0;
    }

    .section--last {
      padding: 24px 0px;
    }

    .message {
      background-color: #F4F4F5;
      padding: 18px;
    }

    .card {
      border: 1px solid #d3d3d8;
      padding: 18px;
    }

    /* HEADER */

    .header-tockLogoImage {
      display: block;
      color: #F0F0F0;
    }

    .header-heroImage {
      padding-bottom: 24px;
    }

    /* PREHEADER */

    .preheader {
      display: none;
      font-size: 1px;
      color: #FFFFFF;
      line-height: 1px;
      max-height: 0px;
      max-width: 0px;
      opacity: 0;
      overflow: hidden;
    }

    /* BANNER */

    .notice {
      padding: 12px;
      background: #23233E;
      color: #FFFFFF;
      display: block;
      font-size: 14px;
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 600;
    }

    /* INTRO */

    .section--intro {
      padding-bottom: 48px;
    }

    /* BOOKING INFO */

    .business-logo__container {
      width: 48px;
      height: 48px;
      border-radius: 3px;
      border: 1px solid #d3d3d8;
      overflow: hidden;
    }

    .business-logo__image {
      border: 1px solid transparent;
      border-radius: 3px;
      width: 48px;
      height: 48px;
      display: block;
    }

    .business-address--address {
      width: 50%;
    }

    .business-address--map {
      width: 50%;
    }

    .business-address--map-image {
      width: 100%;
    }

    /* MOBILE TICKETS */

    .mobile-ticket--description {
      width: 65%;
      margin-top: 12px;
      margin-right: 5%;
    }

    .mobile-ticket--code {
      width: 30%;
    }

    .mobile-ticket--code-image {
      width: 100%;
    }

    /* RESERVATION ACTIONS */

    .linksTable {
      border-bottom: 1px solid #d3d3d8;
    }

    .linksTableRow {
      padding: 24px 12px;
    }

    .actions-icon {
      vertical-align: middle;
    }

    .actions-text {
      vertical-align: middle;
    }

    /* RECEIPT */

    .receipt__container {
      border: 1px solid #d3d3d8;
      padding: 24px;
    }

    .receipt__row {
      border-top: 1px solid #d3d3d8;
    }

    /* FEEDBACK ICONS */

    .feedback-link {
      border: 1px solid #d4d5da;
      border-radius: 3px;
      display: inline-block;
      width: calc(32% - 2px);
      padding: 10px 0;
    }

    .feedback-link-bumper {
      display: inline-block;
      width: 1%;
    }

    .feedback-link img {
      height: 50px;
      width: 50px;
    }

    /* SOCIAL ICONS */

    .social-link {
      display: inline-block;
      width: auto;
    }

    .social-link-text {
      padding: 14px 24px 14px 14px;
    }

    /* TABLET STYLES */

    @media screen and (max-width: 648px) {
      /* DEVICE-SPECIFIC RESET */
      div[style*="margin: 16px 0;"] {
        margin: 0 !important;
      }
      /* ANDROID CENTER FIX */
      /* LAYOUT */
      .wrapper {
        width: 100% !important;
        max-width: 100% !important;
      }
      .Content {
        width: 90% !important;
      }
      .Content-container {
        padding-left: 36px !important;
        padding-right: 36px !important;
      }
      .Content-container--main {
        padding-top: 30px !important;
        padding-bottom: 42px !important;
      }
      .responsiveTable {
        width: 100% !important;
      }
      /* RESERVATION ACTIONS */
      .linksTableRow {
        padding-left: 0 !important;
        padding-right: 0 !important;
        padding-top: 12px !important;
        padding-bottom: 12px !important;
      }
      .linksTableRow--borderRight {
        border-right: none !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      /* FEEDBACK LINK */
      .feedback-link img {
        height: 38px !important;
        width: 38px !important;
      }
    }

    /* MOBILE STYLES */

    @media screen and (max-width: 480px) {
      /* TYPOGRAPHY */
      .h1 {
        font-size: 30px !important;
        line-height: 30px !important;
      }
      .text {
        font-size: 16px !important;
        line-height: 22px !important;
      }
      /* BUTTON */
      .mobile-buttonContainer {
        width: 100% !important;
      }
      /* LAYOUT */
      .Content {
        width: 100% !important;
      }
      .Content-container {
        padding-left: 18px !important;
        padding-right: 18px !important;
      }
      .Content-container--main {
        padding-top: 24px !important;
        padding-bottom: 30px !important;
      }
      .section {
        padding: 18px 0 !important;
      }
      .section--last {
        padding: 18px 0 !important;
      }
      .header {
        padding: 0 18px !important;
      }
      .business-address--address {
        width: 100% !important;
      }
      .business-address--map {
        margin-top: 30px !important;
        width: 100% !important;
      }
      .mobile-ticket--description {
        width: 100% !important;
        margin-top: 0px !important;
      }
      .mobile-ticket--code {
        margin-top: 30px !important;
        margin-left: 0;
        width: 100% !important;
      }
      /* RECEIPT */
      .receipt__container {
        padding: 12px !important;
      }
      /* SOCIAL ICONS */
      .social-link {
        display: block !important;
        width: 100% !important;
        border-bottom: 1px solid #d3d3d8 !important;
      }
      /* INTRO */
      .section--intro {
        padding-top: 18px !important;
        padding-bottom: 18px !important;
      }
    }
  </style>



   
  <!--[if mso]>
    <style type="text/css">
.h1 {font-family: "Helvetica", "Arial", sans-serif !important; font-weight: 700 !important; vertical-align: middle !important; font-size: 36px !important; mso-line-height-rule: exactly;line-height: 42px !important;}
.h2 {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 600 !important;vertical-align: middle !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 24px !important;}
.text {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 21px !important;}
.text-list {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 25px !important;}
.textSmall {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 14px !important;}
.text-xsmall {font-family: "Helvetica", "Arial", sans-serif !important;font-size: 11px !important;text-transform: uppercase !important;mso-line-height-rule: exactly;line-height: 22px !important;letter-spacing: 1px !important;}
.text-bold {font-weight: 600 !important;}
.text-link {text-decoration: underline !important;}
.text-linkNoUnderline {text-decoration: none !important;}
.text-strike {text-decoration: line-through !important;}
.textColorDark {color: #23233e !important;}
.textColorNormal {color: #4f4f65 !important;}
.textColorBlue {color: #2020c0 !important;}
.textColorGray {color: #A5A8AD !important;}
.textColorWhite {color: #FFFFFF !important;}
.Button-primary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #ffffff !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
.Button-secondary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #2020C0 !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
    </style>
    <![endif]-->
  <!-- HIDDEN PREHEADER TEXT -->
  <div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;">
  </div>
  <table border="0" cellpadding="0" cellspacing="0" width="100%" class=" mainTable  " style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: rgb(240, 240, 240);">
    <tbody><tr><td style="display:none !important;
 visibility:hidden;
 mso-hide:all;
 font-size:1px;
 color:#ffffff;
 line-height:1px;
 max-height:0px;
 max-width:0px;
 opacity:0;
 overflow:hidden; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> We are thrilled that you will be joining us. If yo... </td>
    <!-- HEADER -->
    </tr><tr>
      <td align="center" class="header" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 580px; margin: 0 auto;">
          <tbody><tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <h1 style="font-size: 33px;font-weight: 800;line-height: 30px;">Qloud ID</h1>               </td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
        </tbody></table>
        <!--[if (gte mso 9)|(IE)]>
    </td>
    </tr>
    </table>
    <![endif]-->
      </td>
    </tr>
    <!-- CONTENT -->
    <tr>
      <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content bg-white" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: white; width: 580px; margin: 0 auto;">
          <tbody><tr>
            <td class="Content-container Content-container--main text textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101); padding-left: 60px; padding-right: 60px; padding-top: 54px; padding-bottom: 60px;">
              <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                <!-- RESTAURANT INFO -->
                <tbody><tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" valign="center" width="48" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="business-logo__container" style="width: 48px; height: 48px; border-radius: 3px; border: 1px solid rgb(211, 211, 216); overflow: hidden;">
                            <img src="'.$rowImage['image_path'].'" class="business-logo__image" width="48" height="48" alt="Logo" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block; border: 1px solid transparent; border-radius: 3px; width: 48px; height: 48px; display: block;">
                          </div>
                        </td>
                        <td width="12" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                        <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">'.$rowInfo["hotel_name"].'</span>                          </td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <!-- INTRO -->
                <tr>
                  <td valign="top" align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h1 textColorDark" style="font-family: &quot;GT America Condensed Bold&quot;, &quot;Roboto Condensed&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 700; vertical-align: middle; font-size: 36px; line-height: 42px; color: rgb(35, 35, 62);">Reservation confirmed</span>                          </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                          <!--[if gte mso 15]>&nbsp;<![endif]-->
                        </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <!-- MESSAGE -->
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr>
                  <td align="left" class="message" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(244, 244, 245); padding: 18px;">
                    <div class="text textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
                      <span class="text-bold textColorDark" style="font-weight: 600; color: rgb(35, 35, 62);">A message from '.$rowInfo["hotel_name"].'</span>
                      <br> We are thrilled that you will be joining us. If you would like to make any special arrangements or have questions about your reservation, please do not hesitate to reach out.
                    </div>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr>
                  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                    <!--[if gte mso 15]>&nbsp;<![endif]-->
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- BOOKING INFO -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody>
                      
                      
                      



<tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>

<tr>
                        <td align="center" valign="center" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <table border="0" cellspacing="0" cellpadding="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody><tr>
                              <td align="center" valign="center" width="100%" class="Button-primary-wrapper" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; border-radius: 3px; background-color: rgb(32, 32, 192);">
                              <a href="https://qloudid.com/public/index.php/Hotel/verifyPreCheckinQr/'.$data['checkid'].'" target="_blank" class="Button-primary" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; border-radius: 3px; border: 1px solid rgb(32, 32, 192); color: rgb(255, 255, 255); display: block; font-size: 16px; font-weight: 600; padding: 18px; text-decoration: none;">Precheckin Hotel</a>                                </td>
                            </tr>
                          </tbody></table>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <!-- ADDRESS -->
                <tr>
                  <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      
                      
                      
                      
                      <tr>
                        <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            </table>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                
                
                <tr>
                  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                    <!--[if gte mso 15]>&nbsp;<![endif]-->
                  </td>
                </tr>
                
                
                <!-- RECEIPT -->
                
                
                
                <!-- EDIT RECEIPT -->
                <!-- CANCELLATION POLICY -->
                
                
                <tr class="spacer">
                  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <!-- QUESTIONS -->
                <tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; font-weight: 600; color: rgb(35, 35, 62);">
                            Questions?
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <div class="text textColorNormal mt1" style="margin-top: 6px; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
                            If you have questions about your reservation, contact us at&nbsp;
                            <a href="mailto:'.$rowInfo['fdesk_email'].'">'.$rowInfo["fdesk_email"].'</a>                            or by calling
                            <a href="tel:+'.$rowInfo[" fdesk_country_code"].'="" '.$rowinfo["fdesk_phone_number"].'"="">+'.$rowInfo["fdesk_country_code"].' '.$rowInfo["fdesk_phone_number"].'</a>.
                          </div>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
              </tbody></table>
            </td>
          </tr>
        </tbody></table>
      </td>
    </tr>
    <!-- FOOTER -->
    <tr>
      <td align="center" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; width: 580px; margin: 0 auto;">
        <!-- Will most likely required a feature flag -->
        <!--[if (gte mso 9)|(IE)]>
<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
<tr>
<td align="center" valign="top" width="600">
<![endif]-->
        <table width="100%" border="0" cellspacing="0" cellpadding="0" align="center" class="Content-container" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; padding-left: 60px; padding-right: 60px;">
          <tbody><tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="center" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <a href="https://www.exploretock.com" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;"> <img src="https://storage.googleapis.com/tock-public-assets/images-email-template/tock-brandmark-color.png" width="30" height="30" alt="Tock" border="0" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block;"> </a>              </td>
          </tr>
          <tr class="spacer">
            <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
              <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                 2019 Tock, Inc.
              </div>
              <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                All Rights Reserved
              </div>
            </td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
        </tbody></table>
        <!--[if (gte mso 9)|(IE)]>
</td>
</tr>
</table>
<![endif]-->
      </td>
    </tr>
  </tbody></table>



</body></html>';
			sendEmail($subject, $to, $emailContent);
			
			$stmt->close();
			$dbCon->close();
			return 1;
			
		}
		
		 
		
		
	function apartmentReservationConfermationRequiredList($data)
		{
			$dbCon = AppModel::createConnection();
			$date=strtotime(date('Y-m-d'));
			 
			$stmt = $dbCon->prepare("select * from hotel_checkout_detail where user_id=? and reservation_confirmed=0 and hotel_property_type=2 and checkout_booking_date>?");
			/* bind parameters for markers */
			$stmt->bind_param("is", $data['user_id'],$date);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				$row['enc']=$this->encrypt_decrypt('encrypt',$row['id']);
			$stmt = $dbCon->prepare("select id,property_nickname,address,building_id from user_address where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['room_type_id']);
			$stmt->execute();
			$resultRoom = $stmt->get_result();
			$rowRoom = $resultRoom->fetch_assoc();
			$row['property_nickname']	=	$rowRoom['property_nickname'];
			$row['duration']=date('d M',strtotime($row['checkin_date'])).'-'.date('d M',strtotime($row['checkout_date']));
			$row['guest']=$row['guest_adult'].' adults & '.$row['guest_children'].' children';
			array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
		}
		
		
		function apartmentReservationHistoryList($data)
		{
			$dbCon = AppModel::createConnection();
			$date=strtotime(date('Y-m-d'));
			 
			$stmt = $dbCon->prepare("select * from hotel_checkout_detail where user_id=? and hotel_property_type=2 and checkout_booking_date<?");
			/* bind parameters for markers */
			$stmt->bind_param("is", $data['user_id'],$date);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				$row['enc']=$this->encrypt_decrypt('encrypt',$row['id']);
			$stmt = $dbCon->prepare("select id,property_nickname,address,building_id from user_address where id=? ");
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['room_type_id']);
			$stmt->execute();
			$resultRoom = $stmt->get_result();
			$rowRoom = $resultRoom->fetch_assoc();
			$row['property_nickname']	=	$rowRoom['property_nickname'];
			array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
		}
	
	
	
	function publishApartmentonChannel($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update user_address set is_published=1 where id=?");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return 1; 
		}
		
	function getBlockedDates($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select * from user_apartment_blocked_dates where user_address_id=? ");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$org=array();
			while($row1 = $result1->fetch_assoc())
			{
				$row1['blocked_date']=date('Y-m-d',$row1['blocked_date']);
				array_push($org,$row1);
			}
			  
			 			
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
	function updateNickname($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			 $data['propertyNickname']=htmlentities($data['propertyNickname'],ENT_NOQUOTES, 'ISO-8859-1');
			$stmt = $dbCon->prepare("update user_address set nickname_updated=1,property_nickname=? where id=?");
			$stmt->bind_param("si",$data['propertyNickname'], $data['apartment_id']);
			$stmt->execute();	
				
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function changeDescription($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select * from user_address where id=? ");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$row1 = $result1->fetch_assoc();
			$org='';
			 
				$org=$org.'Welcome to our beautiful house in '.$row1['address'].'. We hope you enjoy your stay! We have personally thought through all of the amenities and hope to provide you with all the comforts of home. The surrounding area has a lot to offer and is sure to make your holiday one of a kind.

				
As a self-catering house, you will find everything you need for a perfect stay.

';
				if($row1['smoking_allowed']==1)
				{
					$smoking='allowed';
				}
				else
				{
				$smoking='not allowed';
				}
				
				if($row1['pets_allowed']==1)
				{
					$pets='allowed';
				}
				else
				{
				$pets='not allowed';
				}
				
				if($row1['cleening_fee_applicable']==1)
				{
					$clening='Cleaning fee is applicable '.$row1['cleening_fee'].' to its guests
';
				}
				else
				{
				$cleaning='Cleaning fee is not charged to its guests';
				}
				
				$stmt = $dbCon->prepare("select count(id) as num from user_apartment_bedrooms where user_address_id=? ");
				$stmt->bind_param("i", $data['apartment_id']);
				$stmt->execute();
				$result2 = $stmt->get_result();
				$row2 = $result2->fetch_assoc();
				
				$bedrooms='This property have total '.$row2['num'].' bedrooms and beds available are
';
				$beds='';
				$stmt = $dbCon->prepare("select bed_info from user_apartment_bedrooms_beds where bedroom_id in(select id from user_apartment_bedrooms where user_address_id=?)");
				$stmt->bind_param("i", $data['apartment_id']);
				$stmt->execute();
				$result2 = $stmt->get_result();
				while($row2 = $result2->fetch_assoc())
				{
					$beds=$beds.'-'.$row2['bed_info'].'
';
				}
				  
				
				
				$stmt = $dbCon->prepare("select count(id) as num from user_apartment_bathroom_detail where user_address_id=? ");
				$stmt->bind_param("i", $aid);
				$stmt->execute();
				$result2 = $stmt->get_result();
				$row2 = $result2->fetch_assoc();
				
				$bathrooms='
This property have total '.$row2['num'].'bathrooms 
';
				
$houseRules='
House rules
- Check-in time is '.$row1['arrival_time'].' and check-out is '.$row1['departure_time'].' 
-  Smoking is '.$smoking.'
-  Pets are '.$pets.' at the property. 
-  '.$clening;
				
				$org=$org.''.$bedrooms.$beds.$bathrooms.$houseRules;
				$org=htmlentities($org);
				$stmt = $dbCon->prepare("update user_address set apartment_description=? where id=? ");
				$stmt->bind_param("si", $org,$data['apartment_id']);
				$stmt->execute();
			 
			$stmt = $dbCon->prepare("select apartment_description from user_address where id=? ");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$row1 = $result1->fetch_assoc();	
				 
			$stmt->close();
			$dbCon->close();
			return $row1['apartment_description'];
		}
		
		function changeListing($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select heading_type,address from user_address where id=?");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$htype=$row['heading_type']+1;
			if($htype>8)
			{
			$htype=1;	       
			}
			if($htype==1)
			{
				$heading='Captivating';
			}
			else if($htype==2)
			{
				$heading='Stunning';
			}
			else if($htype==3)
			{
				$heading='Remarkable';
			}
			else if($htype==4)
			{
				$heading='Lovely';
			}
			else if($htype==5)
			{
				$heading='Inviting';
			}
			else if($htype==6)
			{
				$heading='Beautiful';
			}
			else if($htype==7)
			{
				$heading='Charming';
			}
			else if($htype==8)
			{
				$heading='Immaculate';
			}
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_bedrooms where user_address_id=?");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowNum = $result->fetch_assoc();
			if($rowNum['num']==0)
			{
				$heading=$heading.' 1-Bed House in '.$row['address'];
			}
			else
			{
				$heading=$heading.' '.$rowNum['num'].'-Bed House in '.$row['address'];	
			}
			
			$stmt = $dbCon->prepare("update user_address set property_heading=?,heading_type=? where id=?");
			$stmt->bind_param("sii",$heading,$htype, $data['apartment_id']);
			$stmt->execute();
			 	
				
			$stmt->close();
			$dbCon->close();
			return html_entity_decode($heading);
		}
		
		function updateHeading($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$data['propertyNickname']=htmlentities($data['propertyNickname'],ENT_NOQUOTES, 'ISO-8859-1');
			$stmt = $dbCon->prepare("update user_address set headline_updated=1,property_heading=? where id=?");
			$stmt->bind_param("si",$data['propertyNickname'],$data['apartment_id']);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function updateDescription($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$data['propertyNickname']=htmlentities($data['propertyNickname'],ENT_NOQUOTES, 'ISO-8859-1');
			$stmt = $dbCon->prepare("update user_address set description_updated=1,apartment_description=? where id=?");
			$stmt->bind_param("si",$data['propertyNickname'],$data['apartment_id']);
			$stmt->execute();	
				
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function updateChannelPublish($data)
		{
			
		$dbCon = AppModel::createConnection();
		$stmt = $dbCon->prepare("update user_address set channels_updated=1 where id=?");
		$stmt->bind_param("i",$data['apartment_id']);
		$stmt->execute();		
		if($data['channel_id']==1)
		{
		$result=$this->updateRent($data);	
		}
		else if($data['channel_id']==2)
		{
		$result=$this->updatePublishRentLong($data);	
		}		
		else if($data['channel_id']==3)
		{
		$result=$this->updateSale($data);	
		}		
		else if($data['channel_id']==4)
		{
		$result=$this->updateAir($data);	
		}
		else if($data['channel_id']==5)
		{
		$result=$this->updateVrbo($data);	
		}
		else if($data['channel_id']==6)
		{
		$result=$this->updateBookingChannel($data);	
		}
		else if($data['channel_id']==7)
		{
		$result=$this->updateTrip($data);	
		}
		else if($data['channel_id']==8)
		{
		$result=$this->updateExpedia($data);	
		}
		else if($data['channel_id']==9)
		{
		$result=$this->updateTui($data);	
		}
		$stmt->close();
		$dbCon->close();
		return $result;
		}
		
		function updateRent($data)
		{
			$dbCon = AppModel::createConnection();
			$aid=$data['apartment_id'];
			
			$stmt = $dbCon->prepare("select publish_dstrict_rent, total_channels from user_address where id=?");
			$stmt->bind_param("i", $aid);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			 
			if($row['publish_dstrict_rent']==0)
			{
				$ttl=$row['total_channels']+1;
				$stmt = $dbCon->prepare("update user_address set publish_dstrict_rent=1, total_channels=? where id=?");
			}
			else
			{
				$ttl=$row['total_channels']-1;
				$stmt = $dbCon->prepare("update user_address set publish_dstrict_rent=0, total_channels=? where id=?");
			}
			 
			$stmt->bind_param("ii", $ttl,$aid);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return $ttl;
		}
		
		
		function updatePublishRentLong($data)
		{
			$dbCon = AppModel::createConnection();
			$aid=$data['apartment_id'];
			
			$stmt = $dbCon->prepare("select publish_dstrict_long_rent, total_channels from user_address where id=?");
			$stmt->bind_param("i", $aid);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			 
			if($row['publish_dstrict_long_rent']==0)
			{
				$ttl=$row['total_channels']+1;
				$stmt = $dbCon->prepare("update user_address set publish_dstrict_long_rent=1, total_channels=? where id=?");
			}
			else
			{
				$ttl=$row['total_channels']-1;
				$stmt = $dbCon->prepare("update user_address set publish_dstrict_long_rent=0, total_channels=? where id=?");
			}
			 
			$stmt->bind_param("ii", $ttl,$aid);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return $ttl;
		}
		
		function updateSale($data)
		{
			$dbCon = AppModel::createConnection();
			$aid=$data['apartment_id'];
			
			$stmt = $dbCon->prepare("select publish_dstrict_sale, total_channels from user_address where id=?");
			$stmt->bind_param("i", $aid);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			 
			if($row['publish_dstrict_sale']==0)
			{
				$ttl=$row['total_channels']+1;
				$stmt = $dbCon->prepare("update user_address set publish_dstrict_sale=1, total_channels=? where id=?");
			}
			else
			{
				$ttl=$row['total_channels']-1;
				$stmt = $dbCon->prepare("update user_address set publish_dstrict_sale=0, total_channels=? where id=?");
			}
			 
			$stmt->bind_param("ii", $ttl,$aid);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return $ttl;
		}
		
		
		
		function updateAir($data)
		{
			$dbCon = AppModel::createConnection();
			$aid=$data['apartment_id'];
			
			$stmt = $dbCon->prepare("select publish_airnub, total_channels from user_address where id=?");
			$stmt->bind_param("i", $aid);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			 
			if($row['publish_airnub']==0)
			{
				$ttl=$row['total_channels']+1;
				$stmt = $dbCon->prepare("update user_address set publish_airnub=1, total_channels=? where id=?");
			}
			else
			{
				$ttl=$row['total_channels']-1;
				$stmt = $dbCon->prepare("update user_address set publish_airnub=0, total_channels=? where id=?");
			}
			 
			$stmt->bind_param("ii", $ttl,$aid);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return $ttl;
		}
		
		
		function updateBookingChannel($data)
		{
			$dbCon = AppModel::createConnection();
			$aid=$data['apartment_id'];
			
			$stmt = $dbCon->prepare("select publish_booking, total_channels from user_address where id=?");
			$stmt->bind_param("i", $aid);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			if($row['publish_booking']==0)
			{
				$ttl=$row['total_channels']+4;
				$stmt = $dbCon->prepare("update user_address set publish_booking=1, total_channels=? where id=?");
			}
			else
			{
				$ttl=$row['total_channels']-4;
				$stmt = $dbCon->prepare("update user_address set publish_booking=0, total_channels=? where id=?");
			}
			 
			$stmt->bind_param("ii", $ttl,$aid);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return $ttl;
		}
		
		
		function updateExpedia($data)
		{
			$dbCon = AppModel::createConnection();
			$aid=$data['apartment_id'];
			
			$stmt = $dbCon->prepare("select publish_exptd, total_channels from user_address where id=?");
			$stmt->bind_param("i", $aid);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			 
			if($row['publish_exptd']==0)
			{
				$ttl=$row['total_channels']+20;
				$stmt = $dbCon->prepare("update user_address set publish_exptd=1, total_channels=? where id=?");
			}
			else
			{
				$ttl=$row['total_channels']-20;
				$stmt = $dbCon->prepare("update user_address set publish_exptd=0, total_channels=? where id=?");
			}
			 
			$stmt->bind_param("ii", $ttl,$aid);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return $ttl;
		}
		
		function updateVrbo($data)
		{
			$dbCon = AppModel::createConnection();
			$aid=$data['apartment_id'];
			
			$stmt = $dbCon->prepare("select publish_vrbo, total_channels from user_address where id=?");
			$stmt->bind_param("i", $aid);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			 
			if($row['publish_vrbo']==0)
			{
				$ttl=$row['total_channels']+2;
				$stmt = $dbCon->prepare("update user_address set publish_vrbo=1, total_channels=? where id=?");
			}
			else
			{
				$ttl=$row['total_channels']-2;
				$stmt = $dbCon->prepare("update user_address set publish_vrbo=0, total_channels=? where id=?");
			}
			 
			$stmt->bind_param("ii", $ttl,$aid);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return $ttl;
		}
		
		
		function updateTrip($data)
		{
			$dbCon = AppModel::createConnection();
			$aid=$data['apartment_id'];
			
			$stmt = $dbCon->prepare("select publish_trip,total_channels from user_address where id=?");
			$stmt->bind_param("i", $aid);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			 
			if($row['publish_trip']==0)
			{
				$ttl=$row['total_channels']+2;
				$stmt = $dbCon->prepare("update user_address set publish_trip=1, total_channels=? where id=?");
			}
			else
			{
				$ttl=$row['total_channels']-2;
				$stmt = $dbCon->prepare("update user_address set publish_trip=0, total_channels=? where id=?");
			}
			 
			$stmt->bind_param("ii", $ttl,$aid);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return $ttl;
		}
		
		
		function updateTui($data)
		{
			$dbCon = AppModel::createConnection();
			$aid=$data['apartment_id'];
			
			$stmt = $dbCon->prepare("select publish_tui, total_channels from user_address where id=?");
			$stmt->bind_param("i", $aid);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			 
			if($row['publish_tui']==0)
			{
				$ttl=$row['total_channels']+2;
				$stmt = $dbCon->prepare("update user_address set publish_tui=1, total_channels=? where id=?");
			}
			else
			{
				$ttl=$row['total_channels']-2;
				$stmt = $dbCon->prepare("update user_address set publish_tui=0, total_channels=? where id=?");
			}
			 
			$stmt->bind_param("ii", $ttl,$aid);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return $ttl;
		}
		
			function getUserAppsDetail($data)
			{
			$dbCon = AppModel::createConnection();
			
			$country_id= $data['country_id'];
			$stmt = $dbCon->prepare("select id from manage_apps_permission where country_id=?");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("i", $country_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if(!empty($row))
			{
			$stmt = $dbCon->prepare("select sub_heading,app_id,app_link,manage_apps_permission.id,is_permission,app_name,is_downloaded,is_business,app_icon,app_bg from manage_apps_permission left join apps_detail on apps_detail.id=manage_apps_permission.app_id where country_id=?  and app_type=1 and is_mandatory=0 and app_id!=35");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("i", $country_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			array_push($org,$row);
			$stmt = $dbCon->prepare("select count(id) as num from user_app_download where permission_id=? and user_id=?");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("ii", $row['id'],$data['user_id']);
			$stmt->execute();
			$result_down = $stmt->get_result();
			$row_down = $result_down->fetch_assoc();
			if($row_down['num']==0)
			{
				$org[$j]['is_downloaded']=0;
			}
			else
			{
			$org[$j]['is_downloaded']=1;	
			}
			$org[$j]['enc']=$this->encrypt_decrypt('encrypt',$row['id']);
			$j++;
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			}
			else
			{
		
			$stmt = $dbCon->prepare("select id,app_name from apps_detail");
			$stmt->execute();
			$result = $stmt->get_result();
			
			while($row = $result->fetch_assoc())
			{
			$stmt = $dbCon->prepare("insert into manage_apps_permission (country_id,app_id,created_on) values(?, ?, now())");
			/* bind parameters for markers */
			$stmt->bind_param("ii",$country_id,$row['id']);
			$stmt->execute();
			}
			
			$stmt = $dbCon->prepare("select sub_heading,app_id,app_link,manage_apps_permission.id,is_permission,app_name,is_business,app_icon,app_bg from manage_apps_permission left join apps_detail on apps_detail.id=manage_apps_permission.app_id where country_id=?  and app_type=1  and is_mandatory=0 and app_id!=35");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("i", $country_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			array_push($org,$row);
			$stmt = $dbCon->prepare("select count(id) as num from user_app_download where permission_id=? and user_id=?");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("ii", $row['id'],$data['user_id']);
			$stmt->execute();
			$result_down = $stmt->get_result();
			$row_down = $result_down->fetch_assoc();
			if($row_down['num']==0)
			{
				$org[$j]['is_downloaded']=0;
			}
			else
			{
			$org[$j]['is_downloaded']=1;	
			}
			$org[$j]['enc']=$this->encrypt_decrypt('encrypt',$row['id']);
			$j++;
			}
			$stmt->close();
			$dbCon->close();
			
			return $org;
			}
			}
		
		function addCurrency($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_pricing_info where user_address_id=?  order by pricing_start_date");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCount = $result->fetch_assoc();
			
			if($rowCount['num']==0)
			{
			$stmt = $dbCon->prepare("insert into user_apartment_pricing_currency (user_address_id,currency_id) values(?, ?)");
			$stmt->bind_param("ii", $data['apartment_id'],$data['currency_id']);
			$stmt->execute();	
			$id=$stmt->insert_id;	
			}
			
			$stmt = $dbCon->prepare("update user_address set currency_updated=1 where id=?");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();	
			
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		 function listPricing($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select * from user_apartment_pricing_currency where user_address_id=?");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCurrency = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_pricing_info where user_address_id=?  order by is_deleted desc, pricing_start_date");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCount = $result->fetch_assoc();
			
			if($rowCount['num']>0)
			{
			$stmt = $dbCon->prepare("update user_address set pricing_updated=1 where id=?");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();	
			}
			
			$stmt = $dbCon->prepare("select * from user_apartment_pricing_info where user_address_id=?  order by is_deleted desc,pricing_start_date");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				if($row['is_deleted']==0)
				{
				$row['pricingDate']=date('F jS Y',$row['pricing_start_date']);
				}
				else
				{
					$row['pricing_title']="Pricing gap";
					$row['pricingDate']=date('D M d Y', $row['pricing_start_date']).' - '.date('D M d Y', $row['pricing_end_date']);
				}
				
				$row['pricing_start_date']=date('Y-m-d', $row['pricing_start_date']);
				$row['pricing_end_date']=date('Y-m-d', $row['pricing_end_date']); 
				
				if($rowCurrency['currency_id']==1)
				{
					$row['currency']='';
				}
				else if($rowCurrency['currency_id']==2)
				{
					$row['currency']='';
				}
				else if($rowCurrency['currency_id']==3)
				{
					$row['currency']='$';
				}
				array_push($org,$row); 
			}
			 
				
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
		function removePricingGap($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update user_apartment_pricing_info set is_deleted=0 where id=?");
			$stmt->bind_param("i",$data['id']);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function timeInfo($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			 $org=array();
			for($i=0; $i<24;$i++)
			{
			
			if($i==0)
			{
			$org[$i]['id']='00:00:00';
			$org[$i]['time']='12am'; 	
			}
			else if($i>0 && $i<10)
			{
			$org[$i]['id']='0'.$i.':00:00';	
			$org[$i]['time']=$i.'am'; 	
			}
			else if($i>9 && $i<12)
			{
			$org[$i]['id']=$i.':00:00';	
			$org[$i]['time']=$i.'am'; 	
			}
			else if($i==12)
			{
			$org[$i]['id']=$i.':00:00';
			$org[$i]['time']='12pm'; 	
			}
			else if($i>12)
			{
			$org[$i]['id']=$i.':00:00';
			$org[$i]['time']=($i-12).'pm'; 	
			}
			 } 			
			 
			$dbCon->close();
			return $org;
		}
		
		function timeHouserulesInfo($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			 $org=array();
			for($i=0; $i<24;$i++)
			{
			
			if($i==0)
			{
			$org[$i]['id']='00:00';
			$org[$i]['time']='12am'; 	
			}
			else if($i>0 && $i<10)
			{
			$org[$i]['id']='0'.$i.':00';	
			$org[$i]['time']=$i.'am'; 	
			}
			else if($i>9 && $i<12)
			{
			$org[$i]['id']=$i.':00';	
			$org[$i]['time']=$i.'am'; 	
			}
			else if($i==12)
			{
			$org[$i]['id']=$i.':00';
			$org[$i]['time']='12pm'; 	
			}
			else if($i>12)
			{
			$org[$i]['id']=$i.':00';
			$org[$i]['time']=($i-12).'pm'; 	
			}
			 } 			
			 
			$dbCon->close();
			return $org;
		}
		
		
		function floorsInfo($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			  
			$stmt = $dbCon->prepare("select floors_available from user_address where id=?");
			$stmt->bind_param("i",$data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$row['floors_available']=4;
			$org=array();
			$j=0;
			for($i=0;$i<=$row['floors_available']; $i++)
			{
				$org[$i]['id']=$i;
				if($i==0)
				{
				$org[$i]['floor_name']='Ground';	
				}
				else if($i==1)
				{
				$org[$i]['floor_name']='First';	
				}
				else if($i==2)
				{
				$org[$i]['floor_name']='Second';	
				}
				else if($i==3)
				{
				$org[$i]['floor_name']='Third';	
				}
				else  
				{
				$org[$i]['floor_name']=$i.'th';	
				}
			}
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		
		
		
		function updateAvailable($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$data['start_date1']=strtotime($data['start_date']);
			$data['end_date1']=strtotime($data['end_date']);
			$datediff=$data['end_date1']-$data['start_date1'];
			 $datediff=round($datediff / (60 * 60 * 24));
			for($i=0; $i<=$datediff;$i++)
			{
			$key=strtotime($data['start_date'] . ' +'.$i.' day'); 
			$stmt = $dbCon->prepare("delete from user_apartment_blocked_dates where blocked_date=? and user_address_id=?");
			$stmt->bind_param("si",$key, $data['apartment_id']);
			$stmt->execute();	
			 } 			
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		
		function updateBlocked($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$data['start_date1']=strtotime($data['start_date']);
			$data['end_date1']=strtotime($data['end_date']);
			$datediff=$data['end_date1']-$data['start_date1'];
			 $datediff=round($datediff / (60 * 60 * 24));
			for($i=0; $i<=$datediff;$i++)
			{
			$key=strtotime($data['start_date'] . ' +'.$i.' day');
			$stmt = $dbCon->prepare("insert into user_apartment_blocked_dates (blocked_date,user_address_id) values(?, ?)");
			$stmt->bind_param("ii",$key, $data['apartment_id']);
			$stmt->execute();		 
			 }
			
			 			
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		
		
		function updateSelectedAvailable($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			//$data['selected_dates']=substr($data['selected_dates'],0,-1);
			 $a=explode(',',$data['selected_dates']);
			 foreach($a as $key)
			 { 
			 //  $key=substr($key,0,-9);
				// $b=explode('-',$key);
				// $key=substr($b['2'],0,4).'-'.$b['1'].'-'.$b['0'];
				
			 $dateData=strtotime($key);
			
			 $stmt = $dbCon->prepare("delete from user_apartment_blocked_dates where blocked_date=? and user_address_id=?");
			$stmt->bind_param("si",$dateData, $data['apartment_id']);
			$stmt->execute();	
			 } 			
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		
		function updateSelectedBlocked($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			//$data['selected_dates']=substr($data['selected_dates'],0,-1);
			 $a=explode(',',$data['selected_dates']);
			 foreach($a as $key)
			 {
				 //$key=substr($key,0,-9);
				// $b=explode('-',$key);
				// $key=substr($b['2'],0,4).'-'.$b['1'].'-'.$b['0'];
				
			 $dateData=strtotime($key);
			 
			 $stmt = $dbCon->prepare("insert into user_apartment_blocked_dates (blocked_date,user_address_id) values(?, ?)");
			$stmt->bind_param("si",$dateData, $data['apartment_id']);
			$stmt->execute();		 
			 }
			
			 			
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		
		function propertyType()
		{ 
		
			$dbCon = AppModel::createConnection();
			  
			$stmt = $dbCon->prepare("select * from apartment_property_type");
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		
		
		function updatePropertyComposition($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("update user_address set property_composition_updated=1,property_layout=?,apartment_floor=?,floors_available=?,entrance_floor=?,elevator=?,private_entrance=?,property_type=? where id=?");
			$stmt->bind_param("diiiiiii",$data['property_layout'],$data['apartment_floor'],$data['floors_available'],$data['entrance_floor'],$data['elevator'],$data['private_entrance'],$data['property_type'], $data['apartment_id']);
			$stmt->execute();	
				
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		
		function generatePricing($data)
		{
			$dbCon = AppModel::createConnection();
			$today=strtotime(date('Y-m-d'));
			$endDate=strtotime($data['date_picker']);
			
			$stmt = $dbCon->prepare("delete from user_apartment_pricing_info where user_address_id=?");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();	
			$data['monday']=1;
			$data['tuesday']=1;
			$data['wednesday']=1;
			$data['thursday']=1;
			$data['friday']=1;
			$data['saturday']=1;
			$data['sunday']=1;
			if($endDate>$today)
			{
			$gapEnd=strtotime("-1 days", $endDate);
			$st=1;
			$stmt = $dbCon->prepare("insert into user_apartment_pricing_info (pricing_start_date,pricing_end_date,user_address_id,created_on,is_deleted,monday_open,tuesday_open,wednesday_open,thursday_open,friday_open,saturday_open,sunday_open) values(?, ?, ?, now(),?,?, ?, ?,?, ?, ?,?)");
			$stmt->bind_param("iiiiiiiiiii",$today,$gapEnd, $data['apartment_id'],$st,$data['monday'],$data['tuesday'],$data['wednesday'],$data['thursday'],$data['friday'],$data['saturday'],$data['sunday']);
			$stmt->execute();	
			}
			 
			
			$endDate=strtotime($data['date_picker']);
			for($i=0; $i<24;$i++)
			{
				 $startDate=strtotime("+".$i." days", $endDate);
				 $month=date('m',$startDate);
				 $title=date('M Y',$startDate);
				 $d=date('Y-m-d',$startDate);
				 $date = new DateTime($d);
				 $date->modify('last day of this month');
				 $endDate=strtotime($date->format('Y-m-d'));  
				 $stmt = $dbCon->prepare("select * from season_apartment_price where season_id=? and month_id=?");
				 $stmt->bind_param("ii", $data['seasonality_template'],$month);
				 $stmt->execute();
				 $result = $stmt->get_result();
				 $row = $result->fetch_assoc();
				 $monday_price=round($row['mon']*($data['standard_price_per_night']/100),0);
				 $tuesday_price=round($row['tue']*($data['standard_price_per_night']/100),0);
				 $wednesday_price=round($row['wed']*($data['standard_price_per_night']/100),0);
				 $thursday_price=round($row['thu']*($data['standard_price_per_night']/100),0);
				 $friday_price=round($row['fri']*($data['standard_price_per_night']/100),0);
				 $saturday_price=round($row['sat']*($data['standard_price_per_night']/100),0);
				 $sunday_price=round($row['sun']*($data['standard_price_per_night']/100),0);
				 $minimum_price=round($row['min_price']*($data['standard_price_per_night']/100),0);
				 $maximum_price=round($row['max_price']*($data['standard_price_per_night']/100),0); 
				 $stmt = $dbCon->prepare("insert into user_apartment_pricing_info (pricing_start_date,pricing_end_date,user_address_id,created_on,monday_open,tuesday_open,wednesday_open,thursday_open,friday_open,saturday_open,sunday_open,pricing_title,shortest_duration,monday_price,tuesday_price,wednesday_price,thursday_price,friday_price,saturday_price,sunday_price,minimum_price,maximum_price) values(?, ?, ?, now(),?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)");
				 $stmt->bind_param("ssiiiiiiiisiiiiiiiiii",$startDate,$endDate, $data['apartment_id'],$data['monday'],$data['tuesday'],$data['wednesday'],$data['thursday'],$data['friday'],$data['saturday'],$data['sunday'],$title,$data['t_nights'],$monday_price,$tuesday_price,$wednesday_price,$thursday_price,$friday_price,$saturday_price,$sunday_price,$minimum_price,$maximum_price);
				$stmt->execute();
				
			}
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		
		function addPricing($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			
			$startdate=strtotime($data['startdate']);	
			$enddate=strtotime($data['enddate']);	
			
			$stmt = $dbCon->prepare("insert into user_apartment_pricing_info (pricing_start_date,pricing_end_date,user_address_id,created_on) values(?, ?, ?, now())");
			$stmt->bind_param("iii",$startdate,$enddate, $data['apartment_id']);
			$stmt->execute();	
			$data['pid']=$stmt->insert_id;	
			$this->updatePricing($data);
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		
		function addPricingPeriod($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_pricing_info where user_address_id=?");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$org=array();
			if($row['num']==0)
			{
				 
				$org['startdate']=date('Y-m-d');
				$org['enddate']=date('Y-m-d',strtotime("+30 days", strtotime(date('Y-m-d'))));
			}
			else
			{
			$stmt = $dbCon->prepare("select max(pricing_end_date) as edate from user_apartment_pricing_info where user_address_id=?");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
		 
			$org['startdate']=date('Y-m-d',strtotime("+1 days", $row['edate']));	
			$org['enddate']=date('Y-m-d',strtotime("+30 days", strtotime($org['startdate'])));	
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
		
		function pricingDetail($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select * from user_apartment_pricing_info where id=?");
			$stmt->bind_param("i", $data['pid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			return $row;	
		}
		
		function deletePricing($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select id,pricing_end_date,pricing_start_date from user_apartment_pricing_info where pricing_end_date=(select max(pricing_end_date) as max from user_apartment_pricing_info where user_address_id=? and is_deleted=0)");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowMax = $result->fetch_assoc();
			
			 
			
			if($rowMax['id']==$data['pid'])
			{
			$stmt = $dbCon->prepare("select max(pricing_end_date) as maxD from user_apartment_pricing_info where user_address_id=? and is_deleted=0 and id<?");
			$stmt->bind_param("ii",$data['apartment_id'],$data['pid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowStart = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("delete from user_apartment_pricing_info where pricing_start_date>?");
			$stmt->bind_param("s",$rowStart['maxD']);
			$stmt->execute();		
			}
			else
			{
			$stmt = $dbCon->prepare("select pricing_start_date,pricing_end_date  from user_apartment_pricing_info where id=?");
			$stmt->bind_param("i",$data['pid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowStart = $result->fetch_assoc();	
				 
			$deletedStart=strtotime("-1 days", $rowStart['pricing_start_date']);
			 
			$stmt = $dbCon->prepare("select id  from user_apartment_pricing_info where pricing_end_date=? and is_deleted=1");
			$stmt->bind_param("s",$deletedStart);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowStartDelete = $result->fetch_assoc();	
			 
			if(empty($rowStartDelete))
			{
				
			$deletedStart=strtotime("+1 days", $rowStart['pricing_end_date']);
			 
			$stmt = $dbCon->prepare("select id,pricing_end_date  from user_apartment_pricing_info where pricing_start_date=? and is_deleted=1");
			$stmt->bind_param("s",$deletedStart);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowStartDelete = $result->fetch_assoc();		
				
			if(empty($rowStartDelete))
			{	
			$stmt = $dbCon->prepare("update user_apartment_pricing_info set is_deleted=1 where id=?");
			$stmt->bind_param("i",$data['pid']);
			$stmt->execute();
			}
			else
			{
			$stmt = $dbCon->prepare("update user_apartment_pricing_info set pricing_end_date=? where id=?");
			$stmt->bind_param("si",$rowStartDelete['pricing_end_date'],$data['pid']);
			$stmt->execute();
			$stmt = $dbCon->prepare("delete from user_apartment_pricing_info where id=?");
			$stmt->bind_param("i",$rowStartDelete['id']);
			$stmt->execute();
			}

			}
			else
			{
			$deletedStart=strtotime("+1 days", $rowStart['pricing_end_date']);
			 
			$stmt = $dbCon->prepare("select id,pricing_end_date  from user_apartment_pricing_info where pricing_start_date=? and is_deleted=1");
			$stmt->bind_param("s",$deletedStart);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowStartDeleteNext = $result->fetch_assoc();		
			if(empty($rowStartDeleteNext))
			{	
			$stmt = $dbCon->prepare("update user_apartment_pricing_info set pricing_end_date=? where id=?");
			$stmt->bind_param("si",$rowStart['pricing_end_date'],$rowStartDelete['id']);
			$stmt->execute();
			$stmt = $dbCon->prepare("delete from user_apartment_pricing_info where id=?");
			$stmt->bind_param("i",$data['pid']);
			$stmt->execute();
			}
			else
			{
			$stmt = $dbCon->prepare("update user_apartment_pricing_info set pricing_end_date=? where id=?");
			$stmt->bind_param("si",$rowStartDeleteNext['pricing_end_date'],$rowStartDelete['id']);
			$stmt->execute();
			$stmt = $dbCon->prepare("delete from user_apartment_pricing_info where id=?");
			$stmt->bind_param("i",$data['pid']);
			$stmt->execute();	
			$stmt = $dbCon->prepare("delete from user_apartment_pricing_info where id=?");
			$stmt->bind_param("i",$rowStartDeleteNext['id']);
			$stmt->execute();
			}
			}
					
			}				
			
			
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_pricing_info where user_address_id=? and is_deleted=0");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCount = $result->fetch_assoc();
			if($rowCount['num']==0)
			{
			$stmt = $dbCon->prepare("delete from user_apartment_pricing_info where user_address_id=?");
			$stmt->bind_param("i",$data['apartment_id']);
			$stmt->execute();		
			}
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		
		function updatePricing($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("update user_apartment_pricing_info set pricing_title=?,monday_open=?,tuesday_open=?,wednesday_open=?,thursday_open=?,friday_open=?,saturday_open=?,sunday_open=?,monday_price=?,tuesday_price=?,wednesday_price=?,thursday_price=?,friday_price=?,saturday_price=?,sunday_price=?,maximum_price=?,minimum_price=?,discount_for_seven=?,shortest_duration=? where id=?");
			$stmt->bind_param("siiiiiiiiiiiiiiiiiii",$data['title'],$data['monday_open'],$data['tuesday_open'],$data['wednesday_open'],$data['thursday_open'],$data['friday_open'],$data['saturday_open'],$data['sunday_open'],$data['monday_price'],$data['tuesday_price'],$data['wednesday_price'],$data['thursday_price'],$data['friday_price'],$data['saturday_price'],$data['sunday_price'],$data['maximum_price'],$data['minimum_price'],$data['discount_for_seven'],$data['shortest_duration'], $data['pid']);
			$stmt->execute();	
				
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		
		function updateApartmentHouseRules($data)
		{ 
			$dbCon = AppModel::createConnection();
			
			if($data['quite_hrs']==0)
			{
			$data['quite_hrs_mon_fri']=0;	
			$data['quite_hrs_sat_sun']=0;	
			$data['quite_hrs_mon_fri_open']=0;	
			$data['quite_hrs_mon_fri_close']=0;
			$data['quite_hrs_sat_sun_open']=0;	
			$data['quite_hrs_sat_sun_close']=0;
			}
			
			if($data['quite_hrs_mon_fri']==0)
			{
			$data['quite_hrs_mon_fri']=0;	
			$data['quite_hrs_mon_fri_open']=0;	
			$data['quite_hrs_mon_fri_close']=0;
			}
			
			if($data['quite_hrs_sat_sun']==0)
			{
			$data['quite_hrs_sat_sun']=0;	
			$data['quite_hrs_sat_sun_open']=0;	
			$data['quite_hrs_sat_sun_close']=0;
			}
			 
			$stmt = $dbCon->prepare("update user_address set house_rules_updated=1,quite_hrs=?,quite_hrs_mon_fri=?,quite_hrs_mon_fri_open=?,quite_hrs_mon_fri_close=?,quite_hrs_sat_sun=?,quite_hrs_sat_sun_open=?,quite_hrs_sat_sun_close=? where id=?");
			$stmt->bind_param("iississi",$data['quite_hrs'],$data['quite_hrs_mon_fri'],$data['quite_hrs_mon_fri_open'],$data['quite_hrs_mon_fri_close'],$data['quite_hrs_sat_sun'],$data['quite_hrs_sat_sun_open'],$data['quite_hrs_sat_sun_close'],$data['apartment_id']);
			$stmt->execute();	
			
			$stmt = $dbCon->prepare("update user_address set children_allowed=?,infants_allowed=?,smoking_allowed=?,events_allowed=?,pets_allowed=? where id=?");
			$stmt->bind_param("iiiiii",$data['children_allowed'],$data['infants_allowed'],$data['smoking_allowed'],$data['events_allowed'],$data['pets_allowed'], $data['apartment_id']);
			$stmt->execute();	
			
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		
		function updateArrival($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update user_address set arrival_departure_updated=1,arrival_time=?,departure_time=? where id=?");
			$stmt->bind_param("ssi", $data['arrival_time'], $data['departure_time'],$data['apartment_id']);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return 1;	
		}
		
		function updateCleening($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update user_address set fee_updated=1,cleening_fee_applicable=?,cleening_fee=?,cleening_by_whom=? where id=?");
			$stmt->bind_param("iiii",$data['update_info'],$data['cleening_fee'],$data['cleening_by_whom'], $data['apartment_id']);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function updateTouristTax($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update user_address set tourist_tax_updated=1,tourist_tax_applicable=?,tourist_tax=? where id=?");
			$stmt->bind_param("iii",$data['tourist_tax_applicable'],$data['tourist_tax'], $data['apartment_id']);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function updateSecurity($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update user_address set security_fee_updated=1,security_fee_applicable=?,security_fee=? where id=?");
			$stmt->bind_param("iii",$data['update_info'],$data['security_fee'], $data['apartment_id']);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function updateBooking($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update user_address set booking_notice=? where id=?");
			$stmt->bind_param("ii",$data['update_info'], $data['apartment_id']);
			$stmt->execute();	
						
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function displayPhotos($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select apartment_photo_path,sorting_number,id from user_apartment_photos where user_address_id=? order by sorting_number ");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$i=1;
			$org=array();
			function base64_to_jpeg($base64_string, $output_file) {
			$ifp = fopen( $output_file, 'wb' ); 
			$data = explode( ',', $base64_string );
			fwrite( $ifp, base64_decode( $data[1] ) );
			fclose( $ifp ); 
			return $output_file; 
		}
			while($row1 = $result1->fetch_assoc())
			{
			 
				$filename="../estorecss/".$row1['apartment_photo_path'].".txt"; $value_a=file_get_contents("../estorecss/".$row1['apartment_photo_path'].".txt"); $value_a=str_replace('"','',$value_a); $row1['apartment_photo_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row1['sorting_number'].'_'.$data['apartment_id'].'.jpg' );
				$row1['apartment_photo_path']=str_replace('../','https://www.qloudid.com/',$row1['apartment_photo_path']);
				array_push($org,$row1); 
			}	
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
		function deleteApartmentPhoto($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select sorting_number from user_apartment_photos where id=?");
			$stmt->bind_param("i", $data['photoId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("delete from  user_apartment_photos where id=?");
			$stmt->bind_param("i",$data['photoId']);
			$stmt->execute();
			
			
			$stmt = $dbCon->prepare("select id,sorting_number from user_apartment_photos where sorting_number>? and user_address_id=?");
			$stmt->bind_param("ii", $row['sorting_number'],$data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			while($row1 = $result->fetch_assoc())	
			{
			$newSort=$row1['sorting_number']-1;
			$stmt = $dbCon->prepare("update user_apartment_photos set sorting_number=? where id=?");
			$stmt->bind_param("ii",$newSort, $row1['id']);
			$stmt->execute();		
			}
			 
				
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function addApartmentPhotos($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$data['update_info']='data:image/jpeg;base64,'.$data['update_info'];
			$data1 = strip_tags($data['update_info']);
			define('UPLOAD_DIR','../estorecss/'); 
			$img_name1="new".microtime();
			file_put_contents(UPLOAD_DIR.$img_name1.".txt", $data1);
			
			
			$stmt = $dbCon->prepare("select count(user_address_id) as num from user_apartment_photos where user_address_id=?");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$snumber=$row['num']+1;
			
			$stmt = $dbCon->prepare("insert into user_apartment_photos (apartment_photo_path,user_address_id,sorting_number) values(?, ?, ?)");
			$stmt->bind_param("sii",$img_name1, $data['apartment_id'],$snumber);
			$stmt->execute();	
				
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		
		function updateTicketSubcategory($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update user_apartment_amenities_subcategory_info set who_will_fix_the_problem=?,modified_on=now() where id=?");
			$stmt->bind_param("ii",$data['subcategory_info'], $data['user_amenity_id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function updateAminitySubcategory($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			if($data['update_type']==1)
			{
			$stmt = $dbCon->prepare("update user_apartment_amenities_subcategory_info set is_available=?,modified_on=now() where id=?");
			$stmt->bind_param("ii",$data['is_available'], $data['user_amenity_id']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("select user_apartment_amenity_category_id,advance_values from user_apartment_amenities_subcategory_info where id=?");
			$stmt->bind_param("i", $data['user_amenity_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$row1 = $result1->fetch_assoc();
			$data['advance_values']=$row1['advance_values'];
			$data['category_id']=$row1['user_apartment_amenity_category_id'];
			}
			else if($data['update_type']==2)
			{
			$stmt = $dbCon->prepare("update user_apartment_amenities_subcategory_info set who_will_fix_the_problem=?,modified_on=now() where id=?");
			$stmt->bind_param("ii",$data['who_will_fix_the_problem'], $data['user_amenity_id']);
			$stmt->execute();	
			
			$stmt = $dbCon->prepare("select user_apartment_amenity_category_id,advance_values from user_apartment_amenities_subcategory_info where id=?");
			$stmt->bind_param("i", $data['user_amenity_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$row1 = $result1->fetch_assoc();
			$data['advance_values']=$row1['advance_values'];
			$data['category_id']=$row1['user_apartment_amenity_category_id'];
			}
			else if($data['update_type']==3)
			{
			$stmt = $dbCon->prepare("update user_apartment_amenities_subcategory_info set is_available=1,modified_on=now(),who_will_fix_the_problem=1 where user_apartment_amenity_category_id=? and advance_values=? and is_available=0");
			$stmt->bind_param("ii", $data['category_id'],$data['advance_values']);
			$stmt->execute();	
			}
			
			$stmt = $dbCon->prepare("select count(user_apartment_amenities_subcategory_info.id) as num from user_apartment_amenities_subcategory_info where user_apartment_amenity_category_id=? and advance_values=? and is_available=1");
			$stmt->bind_param("ii", $data['category_id'],$data['advance_values']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$row1 = $result1->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			return $row1['num'];
		}
		
		
		function updateTicketCategoryAmenities($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("update user_apartment_amenities_subcategory_info set is_available=1,modified_on=now(),who_will_fix_the_problem=1 where user_apartment_amenity_category_id=? and advance_values=? and is_available=0");
			$stmt->bind_param("ii", $data['user_amenity_category_id'],$data['user_amenity_category_type']);
			$stmt->execute();
			 				
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		
		function amenitiesSubcategoryDetail($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			 
			$category_id=$data['category_id'];
			$stmt = $dbCon->prepare("select user_apartment_amenity_category_info.id,category_id,ticket_title from user_apartment_amenity_category_info left join landloard_ticket_title_new on landloard_ticket_title_new.id=user_apartment_amenity_category_info.category_id where user_apartment_amenity_category_info.id=?");
			$stmt->bind_param("i", $category_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			
			$row = $result->fetch_assoc();
			 $m=0;
			for($j=1;$j>=0;$j--)
			{
				if($row['category_id']==9 && $j==1)
					continue;
				
				if($j==0)
				{
					$org[$m]['title']='Extra';
					$org[$m]['advance_values']=0;
				}
				else
				{
					$org[$m]['advance_values']=1;
					$org[$m]['title']='Basic';
				}
				
				$i=$j+1;
			$stmt = $dbCon->prepare("select count(user_apartment_amenities_subcategory_info.id) as num from user_apartment_amenities_subcategory_info where user_apartment_amenity_category_id=? and advance_values=? and is_available=1");
			$stmt->bind_param("ii", $row['id'],$j);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$row1 = $result1->fetch_assoc();
			$org[$m]['count']=$row1['num'];
			$org[$m]['subcategory_info']=array();
		 	$stmt = $dbCon->prepare("select subcategory_name,user_apartment_amenities_subcategory_info.id,is_available,who_will_fix_the_problem,advance_values from user_apartment_amenities_subcategory_info left join landloard_ticket_subtitle_new on landloard_ticket_subtitle_new.id=user_apartment_amenities_subcategory_info.subcategory_id where user_apartment_amenity_category_id=? and advance_values=?");
			$stmt->bind_param("ii", $row['id'],$j);
			$stmt->execute();
			$result1 = $stmt->get_result();
			 $advanceValue=0;
			while($row1 = $result1->fetch_assoc())
			{
				array_push($org[$m]['subcategory_info'],$row1);
				
			}
			
			$m++;
		}
		  
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		
		function categoryInfo($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$aid=$data['apartment_id'];
			
			$stmt = $dbCon->prepare("select * from user_apartment_other_room_detail where apartment_id=?");
			$stmt->bind_param("i", $aid);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowOtherRoom = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select * from landloard_ticket_title_new where id not in (select category_id from user_apartment_amenity_category_info where apartment_id=?) and ticket_type=1");
			$stmt->bind_param("i", $aid);
			$stmt->execute();
			$result = $stmt->get_result();
			while($row = $result->fetch_assoc())
			{
				if($row['id']<=2)
				{
					$selected=1;
				}
				else
				{
					if($row['id']==3)
					{
					if($rowOtherRoom['kitchen_available']==1)
					{
						$selected=1;
					}
					else 
					{
						$selected=0;	
					}	
					}
					else if($row['id']==4)
					{
					if($rowOtherRoom['entrance_available']==1)
					{
						$selected=1;
					}
					else 
					{
						$selected=0;	
					}	
					}
					else if($row['id']==5)
					{
					if($rowOtherRoom['balcony_available']==1)
					{
						$selected=1;
					}
					else 
					{
						$selected=0;	
					}	
					}
					else if($row['id']==6)
					{
					if($rowOtherRoom['storage_available']==1)
					{
						$selected=1;
					}
					else 
					{
						$selected=0;	
					}	
					}
					else if($row['id']==7)
					{
					if($rowOtherRoom['basement_available']==1)
					{
						$selected=1;
					}
					else 
					{
						$selected=0;	
					}	
					}
					else if($row['id']==8)
					{
					if($rowOtherRoom['garage_available']==1)
					{
						$selected=1;
					}
					else 
					{
						$selected=0;	
					}	
					}
					else if($row['id']==9)
					{
						$selected=1;
					}
					
				}
			$stmt = $dbCon->prepare("insert into user_apartment_amenity_category_info (category_id,apartment_id,is_selected) values (?,?,?)");
			$stmt->bind_param("iii",$row['id'], $aid,$selected);
			$stmt->execute();		
			$id=$stmt->insert_id;
				$indexValue='category_id_'.$row['id'];
				$stmt = $dbCon->prepare("select * from landloard_ticket_subtitle_new");
				$stmt->execute();
				$result1 = $stmt->get_result();
				while($row1 = $result1->fetch_assoc())
				{
					if($row1[$indexValue]==2)
						continue;
					$stmt = $dbCon->prepare("insert into user_apartment_amenities_subcategory_info (user_apartment_amenity_category_id,subcategory_id,is_available,advance_values,created_on,modified_on) values (?,?,?,?,now(),now())");
					$stmt->bind_param("iiii",$id, $row1['id'],$row1[$indexValue],$row1[$indexValue]);
					$stmt->execute();
				}
			}
			 
			$stmt = $dbCon->prepare("select user_apartment_amenity_category_info.id,ticket_title from user_apartment_amenity_category_info left join landloard_ticket_title_new on landloard_ticket_title_new.id=user_apartment_amenity_category_info.category_id where apartment_id=? and is_selected=1");
			$stmt->bind_param("i", $aid);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				$row['enc']=$this->encrypt_decrypt('encrypt',$row['id']);
				array_push($org,$row);
				
			}
			
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		
	
		function updateOtherRoomInfo($data)
		{ 
			
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select * from user_apartment_other_room_detail where apartment_id=?");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc(); 
			if($data['id']==1)
			{
				if($row['hall_room_available']==0)
				{
				$data['updateInfo']=1;	
				}
				else
				{
					$data['updateInfo']=0;
				}
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set hall_room_available=? where apartment_id=?");
			$stmt->bind_param("ii",$data['updateInfo'], $data['apartment_id']);
			$stmt->execute();			
			}
			else if($data['id']==2)
			{
				if($row['living_room_available']==0)
				{
				$data['updateInfo']=1;	
				}
				else
				{
					$data['updateInfo']=0;
				}
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set living_room_available=? where apartment_id=?");
			$stmt->bind_param("ii",$data['updateInfo'], $data['apartment_id']);
			$stmt->execute();			
			}
			else if($data['id']==3)
			{
				if($row['work_room_available']==0)
				{
				$data['updateInfo']=1;	
				}
				else
				{
					$data['updateInfo']=0;
				}
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set work_room_available=? where apartment_id=?");	
			$stmt->bind_param("ii",$data['updateInfo'], $data['apartment_id']);
			$stmt->execute();
			}
			else if($data['id']==4)
			{
				if($row['hobby_room_available']==0)
				{
				$data['updateInfo']=1;	
				}
				else
				{
					$data['updateInfo']=0;
				}
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set hobby_room_available=? where apartment_id=?");	
			$stmt->bind_param("ii",$data['updateInfo'], $data['apartment_id']);
			$stmt->execute();
			}
			else if($data['id']==5)
			{
			if($row['sal_room_available']==0)
				{
				$data['updateInfo']=1;	
				}
				else
				{
					$data['updateInfo']=0;
				}
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set sal_room_available=? where apartment_id=?");
			$stmt->bind_param("ii",$data['updateInfo'], $data['apartment_id']);
			$stmt->execute();
			}
			else if($data['id']==6)
			{
			if($row['salon_room_available']==0)
				{
				$data['updateInfo']=1;	
				}
				else
				{
					$data['updateInfo']=0;
				}
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set salon_room_available=? where apartment_id=?");	
			$stmt->bind_param("ii",$data['updateInfo'], $data['apartment_id']);
			$stmt->execute();
			}
			else if($data['id']==7)
			{
			if($row['vestibule_room_available']==0)
				{
				$data['updateInfo']=1;	
				}
				else
				{
					$data['updateInfo']=0;
				}
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set vestibule_room_available=? where apartment_id=?");	
			$stmt->bind_param("ii",$data['updateInfo'], $data['apartment_id']);
			$stmt->execute();
			}
			else if($data['id']==8)
			{
			if($row['dining_room_available']==0)
				{
				$data['updateInfo']=1;	
				}
				else
				{
					$data['updateInfo']=0;
				}
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set dining_room_available=? where apartment_id=?");
			$stmt->bind_param("ii",$data['updateInfo'], $data['apartment_id']);
			$stmt->execute();			
			}
			else if($data['id']==9) 
			{
				if($row['chamber_room_available']==0)
				{
				$data['updateInfo']=1;	
				}
				else
				{
					$data['updateInfo']=0;
				}
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set chamber_room_available=? where apartment_id=?");
			$stmt->bind_param("ii",$data['updateInfo'], $data['apartment_id']);
			$stmt->execute();
			}
			else if($data['id']==10)
			{
				if($row['balcony_available']==0)
				{
				$data['updateInfo']=1;	
				}
				else
				{
					$data['updateInfo']=0;
				}
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set balcony_available=? where apartment_id=?");
			$stmt->bind_param("ii",$data['updateInfo'], $data['apartment_id']);
			$stmt->execute();
			$stmt = $dbCon->prepare("update user_apartment_amenity_category_info set is_selected=? where category_id=5 and apartment_id=?");
			$stmt->bind_param("ii",$data['updateInfo'],$data['apartment_id']);
			$stmt->execute();	
			}
			else if($data['id']==11)
			{
				if($row['terrace_available']==0)
				{
				$data['updateInfo']=1;	
				}
				else
				{
					$data['updateInfo']=0;
				}
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set terrace_available=? where apartment_id=?");
			$stmt->bind_param("ii",$data['updateInfo'], $data['apartment_id']);
			$stmt->execute();
			}
			else if($data['id']==12)
			{
				if($row['storage_available']==0)
				{
				$data['updateInfo']=1;	
				}
				else
				{
					$data['updateInfo']=0;
				}
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set storage_available=? where apartment_id=?");
			$stmt->bind_param("ii",$data['updateInfo'], $data['apartment_id']);
			$stmt->execute();
			if(($row['waste_room_available']+$row['stroller_available']+$row['bicycle_available']+$data['updateInfo'])==0)
			{
			$stmt = $dbCon->prepare("update user_apartment_amenity_category_info set is_selected=0 where category_id=6 and apartment_id=?");
			$stmt->bind_param("i",$data['apartment_id']);
			$stmt->execute();
			}
			else
			{
			$stmt = $dbCon->prepare("update user_apartment_amenity_category_info set is_selected=1 where category_id=6 and apartment_id=?");
			$stmt->bind_param("i",$data['apartment_id']);
			$stmt->execute();
			}
			}
			else if($data['id']==13)
			{
				if($row['basement_available']==0)
				{
				$data['updateInfo']=1;	
				}
				else
				{
					$data['updateInfo']=0;
				}
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set basement_available=? where apartment_id=?");	
			$stmt->bind_param("ii",$data['updateInfo'], $data['apartment_id']);
			$stmt->execute();
			$stmt = $dbCon->prepare("update user_apartment_amenity_category_info set is_selected=? where category_id=7 and apartment_id=?");
			$stmt->bind_param("ii",$data['updateInfo'],$data['apartment_id']);
			$stmt->execute();	
			}
			else if($data['id']==14)
			{
				if($row['garage_available']==0)
				{
				$data['updateInfo']=1;	
				}
				else
				{
					$data['updateInfo']=0;
				}
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set garage_available=? where apartment_id=?");	
			$stmt->bind_param("ii",$data['updateInfo'], $data['apartment_id']);
			$stmt->execute();
			$stmt = $dbCon->prepare("update user_apartment_amenity_category_info set is_selected=? where category_id=8 and apartment_id=?");
			$stmt->bind_param("ii",$data['updateInfo'],$data['apartment_id']);
			$stmt->execute();	
			}
			
			else if($data['id']==15)
			{
				if($row['kitchen_available']==0)
				{
				$data['updateInfo']=1;	
				}
				else
				{
					$data['updateInfo']=0;
				}
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set kitchen_available=? where apartment_id=?");	
			$stmt->bind_param("ii",$data['updateInfo'], $data['apartment_id']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("update user_apartment_amenity_category_info set is_selected=? where category_id=3 and apartment_id=?");
			$stmt->bind_param("ii",$data['updateInfo'],$data['apartment_id']);
			$stmt->execute();
				
			}
			else if($data['id']==16)
			{
				if($row['entrance_available']==0)
				{
				$data['updateInfo']=1;	
				}
				else
				{
					$data['updateInfo']=0;
				}
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set entrance_available=? where apartment_id=?");	
			$stmt->bind_param("ii",$data['updateInfo'], $data['apartment_id']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("update user_apartment_amenity_category_info set is_selected=? where category_id=4 and apartment_id=?");
			$stmt->bind_param("ii",$data['updateInfo'],$data['apartment_id']);
			$stmt->execute();			
			}
			else if($data['id']==17)
			{
				if($row['bicycle_available']==0)
				{
				$data['updateInfo']=1;	
				}
				else
				{
					$data['updateInfo']=0;
				}
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set bicycle_available=? where apartment_id=?");	
			$stmt->bind_param("ii",$data['updateInfo'], $data['apartment_id']);
			$stmt->execute();
			
			if(($row['waste_room_available']+$row['stroller_available']+$row['storage_available']+$data['updateInfo'])==0)
			{
			$stmt = $dbCon->prepare("update user_apartment_amenity_category_info set is_selected=0 where category_id=6 and apartment_id=?");
			$stmt->bind_param("i",$data['apartment_id']);
			$stmt->execute();
			}
			else
			{
			$stmt = $dbCon->prepare("update user_apartment_amenity_category_info set is_selected=1 where category_id=6 and apartment_id=?");
			$stmt->bind_param("i",$data['apartment_id']);
			$stmt->execute();
			}
			}
			
			else if($data['id']==18)
			{
				if($row['waste_room_available']==0)
				{
				$data['updateInfo']=1;	
				}
				else
				{
					$data['updateInfo']=0;
				}
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set waste_room_available=? where apartment_id=?");	
			$stmt->bind_param("ii",$data['updateInfo'], $data['apartment_id']);
			$stmt->execute();
			if(($row['bicycle_available']+$row['stroller_available']+$row['storage_available']+$data['updateInfo'])==0)
			{
			$stmt = $dbCon->prepare("update user_apartment_amenity_category_info set is_selected=0 where category_id=6 and apartment_id=?");
			$stmt->bind_param("i",$data['apartment_id']);
			$stmt->execute();
			}
			else
			{
			$stmt = $dbCon->prepare("update user_apartment_amenity_category_info set is_selected=1 where category_id=6 and apartment_id=?");
			$stmt->bind_param("i",$data['apartment_id']);
			$stmt->execute();
			}	
			}
			
			else if($data['id']==19)
			{
				if($row['stroller_available']==0)
				{
				$data['updateInfo']=1;	
				}
				else
				{
					$data['updateInfo']=0;
				}
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set stroller_available=? where apartment_id=?");	
			$stmt->bind_param("ii",$data['updateInfo'], $data['apartment_id']);
			$stmt->execute();
			if(($row['waste_room_available']+$row['bicycle_available']+$row['storage_available']+$data['updateInfo'])==0)
			{
			$stmt = $dbCon->prepare("update user_apartment_amenity_category_info set is_selected=0 where category_id=6 and apartment_id=?");
			$stmt->bind_param("i",$data['apartment_id']);
			$stmt->execute();
			}
			else
			{
			$stmt = $dbCon->prepare("update user_apartment_amenity_category_info set is_selected=1 where category_id=6 and apartment_id=?");
			$stmt->bind_param("i",$data['apartment_id']);
			$stmt->execute();
			}	
			}
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function updateOtherRoomInfoOld($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			if($data['id']==1)
			{
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set hall_room_available=? where apartment_id=?");	
			}
			else if($data['id']==2)
			{
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set living_room_available=? where apartment_id=?");	
			}
			else if($data['id']==3)
			{
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set work_room_available=? where apartment_id=?");	
			}
			else if($data['id']==4)
			{
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set hobby_room_available=? where apartment_id=?");	
			}
			else if($data['id']==5)
			{
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set sal_room_available=? where apartment_id=?");	
			}
			else if($data['id']==6)
			{
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set salon_room_available=? where apartment_id=?");	
			}
			else if($data['id']==7)
			{
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set vestibule_room_available=? where apartment_id=?");	
			}
			else if($data['id']==8)
			{
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set dining_room_available=? where apartment_id=?");	
			}
			else if($data['id']==9)
			{
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set chamber_room_available=? where apartment_id=?");	
			}
			else if($data['id']==10)
			{
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set balcony_available=? where apartment_id=?");	
			}
			else if($data['id']==11)
			{
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set terrace_available=? where apartment_id=?");	
			}
			$stmt->bind_param("ii",$data['updateInfo'], $data['apartment_id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		
		function OtherRoomInfo($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_other_room_detail where apartment_id=?");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if($row['num']==0)
			{
			$stmt = $dbCon->prepare("insert into user_apartment_other_room_detail (apartment_id) values (?)");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();	
			}
			
			$stmt = $dbCon->prepare("update user_address set other_room_updated=1 where id=?");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("select * from user_apartment_other_room_detail where apartment_id=?");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			return $row;	
		}
		
		function reviewUserAddress($data)
		{
			$dbCon = AppModel::createConnection();
			$val=html_entity_decode(htmlentities($data['adrs'],ENT_NOQUOTES, 'ISO-8859-1'));
			$address=str_replace(' ', '%20',$val." ".$data['port_number']); 
			 
			$stmt = $dbCon->prepare("select * from user_address where id=?");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$url = "http://api.locationiq.com/v1/autocomplete.php?key=pk.1daa15e048f0e38b45be79dc1ecad248&q=".$address;
			$ch = curl_init();
			curl_setopt($ch, CURLOPT_URL, $url);
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
			curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);   
			curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'GET');      
			$responseJson = curl_exec($ch);
			echo curl_error($ch);
			curl_close($ch);
			 
			$response = json_decode($responseJson,true);
			 
			if(isset($response['error']))
			{
			$stmt = $dbCon->prepare("update user_address set address=?,city=?,port_number=?,zipcode=?,state=? where id=?");
			$stmt->bind_param("sssssi",htmlentities($data['adrs'],ENT_NOQUOTES, 'ISO-8859-1'),$data['city'],$data['port_number'],$data['zipcode'],$data['city'], $data['apartment_id']);
			$stmt->execute();	
			if($row['is_personal_address']==1)	
			{
			$stmt = $dbCon->prepare("update user_profiles set  port_number=?, address=?, city=?,  zipcode=?  where user_logins_id=?");
				/* bind parameters for markers */
			$stmt->bind_param("ssssi", $data['port_number'], htmlentities($data['adrs'],ENT_NOQUOTES, 'ISO-8859-1'),$data['city'],$data['zipcode'],$data['user_id']);
			$stmt->execute();	
			}
			
			$stmt->close();
			$dbCon->close();
			}
			else
			{
			$stmt = $dbCon->prepare("update user_address set state=?,address=?,city=?,port_number=?,zipcode=?,latitude=?,longitude=? where id=?");
			$stmt->bind_param("sssssssi",htmlentities($response[0]['address']['state'],ENT_NOQUOTES, 'ISO-8859-1'),htmlentities($data['adrs'],ENT_NOQUOTES, 'ISO-8859-1'),$data['city'],$data['port_number'],$data['zipcode'],$response[0]['lat'],$response[0]['lon'], $data['apartment_id']);
			$stmt->execute();	
			if($row['is_personal_address']==1)	
			{
			$stmt = $dbCon->prepare("update user_profiles set  full_address=?, port_number=?, address=?, city=?,  zipcode=?, latitude=?, langitude=?  where user_logins_id=?");
				/* bind parameters for markers */
			$stmt->bind_param("sssssssi", htmlentities($response['display_name'],ENT_NOQUOTES, 'ISO-8859-1'),$data['port_number'], htmlentities($data['adrs'],ENT_NOQUOTES, 'ISO-8859-1'),$data['city'],$data['zipcode'],$response['lat'],$response['lon'],$data['user_id']);
			$stmt->execute();
			}
			$stmt->close();
			$dbCon->close();	
			}
			
			return 1;
		}
		
		
		function updateApartmentWifi($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			if($data['wifi_available']==1)
			{
			$data['wifi_username']=html_entity_decode(htmlentities($data['wifi_username'],ENT_NOQUOTES, 'ISO-8859-1'));	
			}
			else
			{
				$data['wifi_username']='';
				$data['wifi_password']='';
			}
			$stmt = $dbCon->prepare("update user_address set wi_fi_updated=1,wifi_available=?,wifi_username=?,wifi_password=? where id=?");
			$stmt->bind_param("issi",$data['wifi_available'],$data['wifi_username'],$data['wifi_password'], $data['apartment_id']);
			$stmt->execute();	
				
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function reportPersonFound($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update  notify_family_friends_private set is_found=1 where id=?");
			$stmt->bind_param("i", $data['missing_person_id']); 
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function kinsList($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select notification_required,concat_ws(' ', first_name, last_name) as name,connect_next_kin.id,last_name,first_name,email,connect_next_kin.created_on,country_phone_id,connect_phone,connect_by,country_phone,phone_number,country_code,receiver_id as uid from connect_next_kin left join user_logins on user_logins.id=connect_next_kin.receiver_id left join user_profiles on connect_next_kin.receiver_id=user_profiles.user_logins_id left join phone_country_code on phone_country_code.country_name=user_profiles.country_phone where connect_next_kin.sender_id=? and is_approved=1 
			union
			select notification_required,concat_ws(' ', first_name, last_name) as name,connect_next_kin.id,last_name,first_name,email,connect_next_kin.created_on,country_phone_id,connect_phone,connect_by,country_phone,phone_number,country_code,sender_id as uid  from connect_next_kin left join user_logins on user_logins.id=connect_next_kin.sender_id left join user_profiles on connect_next_kin.sender_id=user_profiles.user_logins_id left join phone_country_code on phone_country_code.country_name=user_profiles.country_phone where connect_next_kin.receiver_id=? and is_approved=1 order by first_name ");
        
			/* bind parameters for markers */
			$stmt->bind_param("ii", $data['user_id'], $data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
				
				 
				$stmt = $dbCon->prepare("select count(id) as num from notify_family_friends_private where person_heart_user_id=? and is_found=0");
        
				/* bind parameters for markers */
				$stmt->bind_param("i", $row['uid']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$row1 = $result1->fetch_assoc();
				if($row1['num']>0)
				{
					$row['is_missing']=1;
				}
				else
				{
				$row['is_missing']=0;	
				}
				array_push($org,$row);
				
				$org[$j]['images']=array();
				$stmt = $dbCon->prepare("select passport_image from user_logins where id=?");
        
				/* bind parameters for markers */
				$stmt->bind_param("i", $row['uid']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$row1 = $result1->fetch_assoc();
				if($row1['passport_image']=='' || $row1['passport_image']==null) {
				$org[$j]['images'][0]['image_path']='https://www.qloudid.com/html/usercontent/images/person-male.png';		
				}else {
				$filename="../estorecss/".$row1['passport_image'].".txt"; $value_a=file_get_contents("../estorecss/".$row1['passport_image'].".txt"); $value_a=str_replace('"','',$value_a); $row1['passport_image'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row1['passport_image'].'.jpg' );
				$org[$j]['images'][0]['image_path']=str_replace('../','https://www.qloudid.com/',$row1['passport_image']);
				
				}
				$j++;
			}
			
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
		function updateNotificationRequirement($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update connect_next_kin set notification_required=? where  id=?");
			$stmt->bind_param("ii",$data['updateInfo'],$data['id']); // ss -> string string
			$stmt->execute(); 
			$stmt->close();
			$dbCon->close();
			return 1;
			}
			 
		
		
		function addMissingPersonInfo($data)
		{
			$dbCon = AppModel::createConnection();
			  
			$stmt = $dbCon->prepare("INSERT INTO notify_family_friends_private (clothes_wearing,last_seen_duration,last_seen_time,person_heart_user_id, first_name, last_name, created_on,user_id ,address) VALUES (?, ?,  ?, ?, ?,  ?, now(), ?,?)");
				
				$st=0;
				$name=htmlentities($data['first_name'],ENT_NOQUOTES, 'ISO-8859-1');
				$lname=htmlentities($data['last_name'],ENT_NOQUOTES, 'ISO-8859-1');
				$address=htmlentities($data['address'],ENT_NOQUOTES, 'ISO-8859-1');
				$stmt->bind_param("siiissis",$data['clothes_wearing'],$data['last_seen_duration'],$data['last_seen_time'], $data['uid'],$name,$lname,$data['user_id'],$address); // ss -> string string
				 
					$stmt->execute();
					$id=$stmt->insert_id;
					$stmt->close();
					$dbCon->close();
					return $id;
				
			}
			
			
			
		function addMissingPersonImages($data)
		{
			$dbCon = AppModel::createConnection();
			$data1 = strip_tags($data['ImageData']);
			$data1='url("data:image/png;base64,'.$data1.'")';
			//echo $data; die;
			define('UPLOAD_DIR','../estorecss/'); // image dir path
			$img_name1="new".microtime();
			file_put_contents(UPLOAD_DIR.$img_name1.".txt", $data1);
				 
			 
			if($data['imageId']==1)
			{
			$stmt = $dbCon->prepare("update notify_family_friends_private set image_path=? where id=?");
			$stmt->bind_param("si",  $img_name1,$data['id']);	
			$stmt->execute();
			}
			 
			
			$stmt = $dbCon->prepare("INSERT INTO notify_family_friends_private_images (missing_person_id,image_path ) VALUES (?, ?)");
			$stmt->bind_param("is",$data['id'],$img_name1); // ss -> string string
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;	
			 
			 
		}
		
		
		
		function missingPersonList($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select notify_family_friends_private.id,user_logins.first_name,user_logins.last_name,image_path,person_heart_user_id from notify_family_friends_private left join user_logins on user_logins.id=notify_family_friends_private.person_heart_user_id where is_found=0");
        
			/* bind parameters for markers */
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				
				$filename="../estorecss/".$row['image_path'].".txt"; $value_a=file_get_contents("../estorecss/".$row['image_path'].".txt"); $value_a=str_replace('"','',$value_a); $row['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['image_path'].'.jpg' ); 
				$row['image_path']=str_replace('../','https://www.qloudid.com/',$row['image_path']);
				array_push($org,$row);
			}
			
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
		
		function missingPersonEmergencyList($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select notify_family_friends_private.id,user_logins.first_name,user_logins.last_name,image_path,person_heart_user_id from notify_family_friends_private left join user_logins on user_logins.id=notify_family_friends_private.person_heart_user_id where is_found=0 and (person_heart_user_id in (select sender_id from connect_next_kin where receiver_id=?) or person_heart_user_id in (select receiver_id from connect_next_kin where sender_id=?))");
        
			/* bind parameters for markers */
			$stmt->bind_param("ii", $data['user_id'], $data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				
				$filename="../estorecss/".$row['image_path'].".txt"; $value_a=file_get_contents("../estorecss/".$row['image_path'].".txt"); $value_a=str_replace('"','',$value_a); $row['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['image_path'].'.jpg' ); 
				$row['image_path']=str_replace('../','https://www.qloudid.com/',$row['image_path']);
				array_push($org,$row);
			}
			
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
		function record_sort($records, $field, $reverse=false)
			{
				$hash = array();
			   
				foreach($records as $record)
				{
					$hash[$record[$field]] = $record;
				}
			   
				($reverse)? krsort($hash) : ksort($hash);
			   
				$records = array();
			   
				foreach($hash as $record)
				{
					$records []= $record;
				}
			   
				return $records;
			}

		
		function travelAppAvailableSos($data)
		{
			$dbCon = AppModel::createConnection();
			
			 $url="https://us1.locationiq.com/v1/reverse.php?key=pk.1daa15e048f0e38b45be79dc1ecad248&lat=".$data['current_latitude']."&lon=".$rowUser['current_longitude']."&format=json";
			$ch = curl_init();
			curl_setopt($ch, CURLOPT_URL, $url);
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
			curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);   
			curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'GET');      
			$responseJson = curl_exec($ch);
			echo curl_error($ch);
			curl_close($ch);
			 
			$response = json_decode($responseJson,true);
	 
	 
			 $select="select id from phone_country_code where country_name='".$response['address']['country']."'";
		  
		   
			$result=mysqli_query($dbCon, $select); 
		 
			 $rowCountry=mysqli_fetch_array($result);
			
			
			$stmt = $dbCon->prepare("select id,tab_type,front_display_name from travel_emergency_list where id not in(select emergency_id from travel_inactive_emergency where  country_id=?) and tab_type=1");
        
			/* bind parameters for markers */
			$stmt->bind_param("i", $rowCountry['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				array_push($org,$row);
			}
			
			$stmt = $dbCon->prepare("select id,tab_type,front_display_name from travel_emergency_list where id not in(select emergency_id from travel_inactive_emergency where  country_id=?) and tab_type=2 group by tab_type");
        
			/* bind parameters for markers */
			$stmt->bind_param("i", $rowCountry['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			while($row = $result->fetch_assoc())
			{
				array_push($org,$row);
			}
			
			$stmt = $dbCon->prepare("select id,tab_type,front_display_name from travel_emergency_list where id not in(select emergency_id from travel_inactive_emergency where  country_id=?) and tab_type=3 group by tab_type");
        
			/* bind parameters for markers */
			$stmt->bind_param("i", $rowCountry['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			while($row = $result->fetch_assoc())
			{
				array_push($org,$row);
			}
			
			
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
			
		function travelAppCompany($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select langitude,latitude from  user_profiles where user_logins_id=?");
			$stmt->bind_param("i", $data['user_id']); 
			$stmt->execute();
			$result = $stmt->get_result();
			$rowUser = $result->fetch_assoc();
			
			 $url="https://us1.locationiq.com/v1/reverse.php?key=pk.1daa15e048f0e38b45be79dc1ecad248&lat=".$data['current_latitude']."&lon=".$rowUser['current_longitude']."&format=json";
			$ch = curl_init();
			curl_setopt($ch, CURLOPT_URL, $url);
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
			curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);   
			curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'GET');      
			$responseJson = curl_exec($ch);
			echo curl_error($ch);
			curl_close($ch);
			 
			$response = json_decode($responseJson,true);
	 
	 
			 $select="select id from phone_country_code where country_name='".$response['address']['country']."'";
		  
		   
			$result=mysqli_query($dbCon, $select); 
		 
			 $rowCountry=mysqli_fetch_array($result);
			
			if($data['tab_type']==1)
			{
			$org=array();
			$stmt = $dbCon->prepare("select id,tab_type,front_display_name,emergency_name from travel_emergency_list where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['emergency_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc(); 
			array_push($org,$row);
			 
			}
			else 
			{
			$org=array();
			$stmt = $dbCon->prepare("select id,tab_type,front_display_name,emergency_name from travel_emergency_list where id not in(select emergency_id from travel_inactive_emergency where  country_id=?) and tab_type=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("ii",$rowCountry['id'],$data['tab_type']);
			$stmt->execute();
			$result = $stmt->get_result();
			$j=0;
			while($row = $result->fetch_assoc())
			{
				
			array_push($org,$row);
			 			
			}
			}
			 
			$stmt->close();
			$dbCon->close();
			 return $org;
		}
		
		
		function travelAppCompanyLocations($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select langitude,latitude from  user_profiles where user_logins_id=?");
			$stmt->bind_param("i", $data['user_id']); 
			$stmt->execute();
			$result = $stmt->get_result();
			$rowUser = $result->fetch_assoc();
			
			 $url="https://us1.locationiq.com/v1/reverse.php?key=pk.1daa15e048f0e38b45be79dc1ecad248&lat=".$data['current_latitude']."&lon=".$rowUser['current_longitude']."&format=json";
			$ch = curl_init();
			curl_setopt($ch, CURLOPT_URL, $url);
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
			curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);   
			curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'GET');      
			$responseJson = curl_exec($ch);
			echo curl_error($ch);
			curl_close($ch);
			 
			$response = json_decode($responseJson,true);
	 
	 
			 $select="select id from phone_country_code where country_name='".$response['address']['country']."'";
		  
		   
			$result=mysqli_query($dbCon, $select); 
		 
			 $rowCountry=mysqli_fetch_array($result);
			 
			$org=array();
			 
			$stmt = $dbCon->prepare("select travel_app_company.company_id,company_name,latitude,longitude from travel_app_company left join companies on companies.id=travel_app_company.company_id left join company_profiles on company_profiles.company_id=travel_app_company.company_id where travel_app_company.country_id=? and emergency_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("ii", $rowCountry['id'],$data['emergency_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			
			while($row = $result->fetch_assoc())
			{
				$stmt = $dbCon->prepare("select id,latitude,longitude,street_name_v,city_v,port_number,postal_code_v,country_v,visiting_address from property_location where company_id=? and id in (select location_id from travel_app_company_emergency_locations where company_id=? and is_active=1)");
			
				/* bind parameters for markers */
				$stmt->bind_param("ii", $row['company_id'],$row['company_id']);
				$stmt->execute();
				$result2 = $stmt->get_result();
				
				while($row2 = $result2->fetch_assoc())
				{
				
					$row2['street_name_v']=html_entity_decode($row2['visiting_address']);
				
				$address=$row2['street_name_v'].' '.$row2['port_number'];
  
				$url = "http://api.locationiq.com/v1/autocomplete.php?key=pk.1daa15e048f0e38b45be79dc1ecad248&q=".$address;
				$ch = curl_init();
				curl_setopt($ch, CURLOPT_URL, $url);
				curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
				curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);   
				curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'GET');      
				$responseJson = curl_exec($ch);
				echo curl_error($ch);
				curl_close($ch);
				 
				$response = json_decode($responseJson,true);
				if(!isset($response['error']))
				{
				 $select1="UPDATE property_location set latitude='".$response[0]['lat']."',longitude='".$response[0]['lon']."' where id=".$row2['id'];	
				$result5=mysqli_query($dbCon, $select1);
				$row2['latitude']=$response[0]['lat'];
				$row2['langitude']=$response[0]['lon'];
				}
				
				//$row2['street_name_v']=htmlentities($row2['visiting_address'],ENT_NOQUOTES, 'UTF-8');	 
				$row2['city_v']=htmlentities($row2['city_v'],ENT_NOQUOTES, 'UTF-8');	
				$earthRadius = 4857;
				$latFrom = deg2rad($data['current_latitude']);
				$lonFrom = deg2rad($rowUser['current_longitude']);
				$latTo = deg2rad($row2['latitude']);
				$lonTo = deg2rad($row2['langitude']);
				$latDelta = $latTo - $latFrom;
				$lonDelta = $lonTo - $lonFrom;
				$angle = 2 * asin(sqrt(pow(sin($latDelta / 2), 2) + cos($latFrom) * cos($latTo) * pow(sin($lonDelta / 2), 2)));
				$row2['distance']=round($angle * $earthRadius *1.609344*1000);
				if($row2['distance']<1000)
				array_push($org,$row2);
				 
			}
			if(count($org)>1)
			$org=$this->record_sort($org, "distance");
				 
			}	
			 
			 
			$stmt->close();
			$dbCon->close();
			 return $org;
		}
		
		
		function approveTenantRequest($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select first_name,last_name,ssn,country_of_residence,email,sex,dob_day,dob_month,dob_year,country_phone,phone_number, address,user_profiles.city,user_profiles.country,user_profiles.zipcode,grading_status from user_logins left join user_profiles on user_profiles.user_logins_id=user_logins.id  where user_logins.id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$full_name=$row['first_name'].' '.$row['last_name'];
			
			$stmt = $dbCon->prepare("select landloard_building_port_floors_offices.id,zipcode,longitude,street_address,city,state,latitude,floor_id,port_id,buildingid from landloard_building_port_floors_offices left join landloard_building_port_floors on landloard_building_port_floors.id=landloard_building_port_floors_offices.floor_id  left join landloard_building_ports on landloard_building_port_floors.port_id=landloard_building_ports.id left join landloard_buildings on landloard_buildings.id=landloard_building_ports.buildingid  where landloard_building_port_floors_offices.id=(select property_id from user_tenants where id=?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("update user_tenants set is_approved=1,user_login_id=? where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("ii",$data['user_id'], $data['id']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("update user_tenants set is_approved=1,user_login_id=? where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("ii",$data['user_id'], $data['id']);
			$stmt->execute();
			$s=1;
			$data['entry_code']='';
			$st=0;
			$stmt = $dbCon->prepare("insert into  user_address (floor_id,apartment_id,building_id,`address`  , `city`  , `zipcode` , `port_number` , `invoice_address`  , `invoice_city`  , `invoice_zipcode`  , `invoice_port_number`  , `is_name_same` , `is_invoice_same`  , `name_on_house`  ,entry_code , user_id, created_on, is_personal_address) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,now(),?)");
				/* bind parameters for markers */
			$stmt->bind_param("iiissssssssiissii",$row['floor_id'],$row['id'],$row['buildingid'],$row['street_address'],$row['city'], $row['zipcode'],$row['port_id'],$row['street_address'],$row['city'], $row['zipcode'],$row['port_id'],$s,$s,$full_name,$data['entry_code'],$data['user_id'],$st);
			$stmt->execute();
			
			$id=$stmt->insert_id;
			
			$stmt = $dbCon->prepare("select * from landloard_building_port_floors_offices_bedrooms where apartment_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			while($rowBed = $result->fetch_assoc())
			{
			$stmt = $dbCon->prepare("insert into  user_apartment_bedrooms (user_address_id,created_on) values(?,now())");
				/* bind parameters for markers */
			$stmt->bind_param("i",$id);
			$stmt->execute();	
			
			$idBed=$stmt->insert_id;
			$bed="Single";
			$stmt = $dbCon->prepare("insert into  user_apartment_bedrooms_beds (bed_info,bedroom_id,created_on,modified_on) values(?,?,now(),now())");
				/* bind parameters for markers */
			$stmt->bind_param("si",$bed,$idBed);
			$stmt->execute();
			
			}
			
			
			$stmt = $dbCon->prepare("select * from landloard_apartment_other_room_detail where apartment_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowOther = $result->fetch_assoc();
			
			
			$stmt = $dbCon->prepare("insert into user_apartment_other_room_detail (apartment_id) values (?)");
			$stmt->bind_param("i", $id);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("update user_apartment_other_room_detail set hall_room_available=?,living_room_available=?,work_room_available=? , hobby_room_available=?,sal_room_available=?,salon_room_available=?,vestibule_room_available=?,dining_room_available=?,chamber_room_available=?,balcony_available=?,terrace_available=?,storage_available=?,basement_available=?,garage_available=?,kitchen_available=?,entrance_available=? where apartment_id=?");
			$stmt->bind_param("iiiiiiiiiiiiiiiii",$rowOther['hall_room_available'],$rowOther['living_room_available'],$rowOther['work_room_available'],$rowOther['hobby_room_available'],$rowOther['sal_room_available'],$rowOther['salon_room_available'],$rowOther['vestibule_room_available'],$rowOther['dining_room_available'],$rowOther['chamber_room_available'],$rowOther['balcony_available'],$rowOther['terrace_available'],$rowOther['storage_available'],$rowOther['basement_available'],$rowOther['garage_available'],$rowOther['kitchen_available'],$rowOther['entrance_available'], $id);
			$stmt->execute();
			 
			
			
			$stmt = $dbCon->prepare("select * from landloard_apartment_bathroom_detail where apartment_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			while($rowBed = $result->fetch_assoc())
			{
			$stmt = $dbCon->prepare("insert into  user_apartment_bathroom_detail (user_address_id,toilet_and_sink  , bath , shower  , standalone_shower  , over_bath_shower , is_private  , is_wheelchair_accessible , is_ensuit , created_on  , modified_on  ) values(?,?,?,?,?,?,?,?,?,now(),now())");
				/* bind parameters for markers */
			$stmt->bind_param("iiiiiiiii",$id,$rowBed['toilet_and_sink'],$rowBed['bath'],$rowBed['shower'],$rowBed['standalone_shower'],$rowBed['over_bath_shower'],$rowBed['is_private'],$rowBed['is_wheelchair_accessible'],$rowBed['is_ensuit']);
			$stmt->execute();	
			}
			
			
			$stmt = $dbCon->prepare("select * from landloard_apartment_description where apartment_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowBed = $result->fetch_assoc();
			$stmt = $dbCon->prepare("update  user_address set property_heading=?,apartment_description=? where id=?");
				/* bind parameters for markers */
			$stmt->bind_param("ssi",$rowBed['selling_heading'],$rowBed['short_selling_description'],$id);
			$stmt->execute();	
			
			
			$data['user_aprtment_id']=$id;
			$data['landloard_apartment_id']=$row['id'];
			
			
			$stmt = $dbCon->prepare("select count(id) as num from `qloudid`.`landloard_apartment_amenity_category_info` where apartment_id=?");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $data['landloard_apartment_id']);
				$stmt->execute();
				$result = $stmt->get_result();
				$rowHomeRepair = $result->fetch_assoc();
				if($rowHomeRepair['num']==0)
				{
				$stmt = $dbCon->prepare("select count(id) as num from `qloudid`.`user_apartment_amenity_category_info` where apartment_id=?");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $data['user_apartment_id']);
				$stmt->execute();
				$result = $stmt->get_result();
				$rowHomeRepair = $result->fetch_assoc();
				if($rowHomeRepair['num']==0)
				{
					
					$stmt = $dbCon->prepare("select * from landloard_ticket_title_new where id not in (select category_id from user_apartment_amenity_category_info where apartment_id=?) and ticket_type=1");
					$stmt->bind_param("i", $data['user_apartment_id']);
					$stmt->execute();
					$result = $stmt->get_result();
					while($rowCategory = $result->fetch_assoc())
					{
						if($rowCategory['id']<=2)
						{
							$selected=1;
						}
						else
						{	
							if($rowCategory['id']==3)
							{
							if($rowOther['kitchen_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==4)
							{
							if($rowOther['entrance_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==5)
							{
							if($rowOther['balcony_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==6)
							{
							if($rowOther['storage_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==7)
							{
							if($rowOther['basement_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==8)
							{
							if($rowOther['garage_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==9)
							{
								$selected=1;
							}
							
						}
					$stmt = $dbCon->prepare("insert into user_apartment_amenity_category_info (category_id,apartment_id,is_selected) values (?,?,?)");
					$stmt->bind_param("iii",$rowCategory['id'], $data['user_apartment_id'],$selected);
					$stmt->execute();		
					$catid=$stmt->insert_id;
						$indexValue='category_id_'.$rowCategory['id'];
						$stmt = $dbCon->prepare("select * from landloard_ticket_subtitle_new");
						$stmt->execute();
						$result1 = $stmt->get_result();
						while($row1 = $result1->fetch_assoc())
						{
							if($row1[$indexValue]==2)
								continue;
							$stmt = $dbCon->prepare("insert into user_apartment_amenities_subcategory_info (user_apartment_amenity_category_id,subcategory_id,is_available,advance_values,created_on,modified_on) values (?,?,?,?,now(),now())");
							$stmt->bind_param("iiii",$catid, $row1['id'],$row1[$indexValue],$row1[$indexValue]);
							$stmt->execute();
						}
					}
				}
				$stmt = $dbCon->prepare("select * from `qloudid`.`user_apartment_amenity_category_info` where apartment_id=?");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $data['user_apartment_id']);
				$stmt->execute();
				$result = $stmt->get_result();
				while($rowCategory = $result->fetch_assoc())
				{
					$stmt = $dbCon->prepare("insert into landloard_apartment_amenity_category_info (category_id,apartment_id,is_selected) values (?,?,?)");
					$stmt->bind_param("iii",$rowCategory['category_id'], $data['landloard_apartment_id'],$rowCategory['is_selected']);
					$stmt->execute();		
					$category_id=$stmt->insert_id;
					$stmt = $dbCon->prepare("select subcategory_name,user_apartment_amenities_subcategory_info.id,is_available,who_will_fix_the_problem,advance_values from user_apartment_amenities_subcategory_info left join landloard_ticket_subtitle_new on landloard_ticket_subtitle_new.id=user_apartment_amenities_subcategory_info.subcategory_id where user_apartment_amenity_category_id=?");
					$stmt->bind_param("i", $rowCategory['id']);
					$stmt->execute();
					$resultSubCatg = $stmt->get_result();
					while($rowSubcategory = $resultSubCatg->fetch_assoc())
					{
						 
					$stmt = $dbCon->prepare("insert into landloard_apartment_amenities_subcategory_info (user_apartment_amenity_category_id,subcategory_id,is_available,advance_values,created_on,modified_on) values (?,?,?,?,now(),now())");
						$stmt->bind_param("iiii",$category_id, $rowCategory['subcategory_id'],$rowCategory['is_available'],$rowCategory['advance_values']);
						$stmt->execute();	
					}
				}	
				}					
				else
				{
				$stmt = $dbCon->prepare("select count(id) as num from `qloudid`.`user_apartment_amenity_category_info` where apartment_id=?");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $data['user_apartment_id']);
				$stmt->execute();
				$result = $stmt->get_result();
				$rowHomeRepair = $result->fetch_assoc();
				if($rowHomeRepair['num']==0)
				{
					
					$stmt = $dbCon->prepare("select * from landloard_ticket_title_new where id not in (select category_id from user_apartment_amenity_category_info where apartment_id=?) and ticket_type=1");
					$stmt->bind_param("i", $data['user_apartment_id']);
					$stmt->execute();
					$result = $stmt->get_result();
					while($rowCategory = $result->fetch_assoc())
					{
						if($rowCategory['id']<=2)
						{
							$selected=1;
						}
						else
						{	
							if($rowCategory['id']==3)
							{
							if($rowOther['kitchen_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==4)
							{
							if($rowOther['entrance_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==5)
							{
							if($rowOther['balcony_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==6)
							{
							if($rowOther['storage_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==7)
							{
							if($rowOther['basement_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==8)
							{
							if($rowOther['garage_available']==1)
							{
								$selected=1;
							}
							else 
							{
								$selected=0;	
							}	
							}
							else if($rowCategory['id']==9)
							{
								$selected=1;
							}
							
						}
					$stmt = $dbCon->prepare("insert into user_apartment_amenity_category_info (category_id,apartment_id,is_selected) values (?,?,?)");
					$stmt->bind_param("iii",$rowCategory['id'], $data['user_apartment_id'],$selected);
					$stmt->execute();		
					$catid=$stmt->insert_id;
						$indexValue='category_id_'.$rowCategory['id'];
						$stmt = $dbCon->prepare("select * from landloard_ticket_subtitle_new");
						$stmt->execute();
						$result1 = $stmt->get_result();
						while($row1 = $result1->fetch_assoc())
						{
							if($row1[$indexValue]==2)
								continue;
							$stmt = $dbCon->prepare("insert into user_apartment_amenities_subcategory_info (user_apartment_amenity_category_id,subcategory_id,is_available,advance_values,created_on,modified_on) values (?,?,?,?,now(),now())");
							$stmt->bind_param("iiii",$catid, $row1['id'],$row1[$indexValue],$row1[$indexValue]);
							$stmt->execute();
						}
					}
				}
				
				$stmt = $dbCon->prepare("select * from `qloudid`.`landloard_apartment_amenity_category_info` where apartment_id=?");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $data['landloard_apartment_id']);
				$stmt->execute();
				$result = $stmt->get_result();
				while($rowCategory = $result->fetch_assoc())
				{
					$stmt = $dbCon->prepare("update user_apartment_amenity_category_info set is_selected=? where category_id=? and apartment_id=?");
					$stmt->bind_param("iii",$rowCategory['is_selected'],$rowCategory['category_id'],$data['user_apartment_id']);
					$stmt->execute();		
					
					$stmt = $dbCon->prepare("select id from user_apartment_amenity_category_info where category_id=? and apartment_id=?");
					$stmt->bind_param("ii",$rowCategory['category_id'],$data['user_apartment_id']);
					$stmt->execute();	
					$resultCat = $stmt->get_result();
					$Usercategory = $resultCat->fetch_assoc();
					$category_id= $Usercategory['id'];
					
					$stmt = $dbCon->prepare("select * from landloard_apartment_amenities_subcategory_info where user_apartment_amenity_category_id=?");
					$stmt->bind_param("i", $rowCategory['id']);
					$stmt->execute();
					$resultSubCatg = $stmt->get_result();
					while($rowSubcategory = $resultSubCatg->fetch_assoc())
					{
						 
					$stmt = $dbCon->prepare("update user_apartment_amenities_subcategory_info set is_available=? where user_apartment_amenity_category_id=? and subcategory_id=?");
					$stmt->bind_param("iii",$category_id, $rowSubcategory['subcategory_id'],$rowSubcategory['is_available']);
					$stmt->execute();	
					}
				}
				}
				
			
			$stmt->close();
			$dbCon->close();
			 
			return 1;
			
			
		}
		
		function rejectTenantRequest($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update user_tenants set is_approved=2,user_login_id=? where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("ii",$data['user_id'], $data['id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		
		
		function receivedRequestDetailTenants($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("update user_tenants set user_login_id=? where user_email=(select email from user_logins where id=?)");
			/* bind parameters for markers */
			$stmt->bind_param("ii",$data['user_id'],$data['user_id']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("select building_name,is_approved,office_apartment_number,address,user_tenants.id,companies.company_name,last_name,first_name,email,user_tenants.created_on,user_tenants.company_id from user_tenants left join user_logins on user_logins.id=user_tenants.user_login_id left join companies on companies.id=user_tenants.company_id  left join company_profiles on company_profiles.company_id=companies.id left join landloard_building_port_floors_offices on landloard_building_port_floors_offices.id=user_tenants.property_id left join landloard_building_port_floors on landloard_building_port_floors.id=landloard_building_port_floors_offices.floor_id left join landloard_building_ports on landloard_building_ports.id=landloard_building_port_floors.port_id  left join landloard_buildings on landloard_buildings.id=landloard_building_ports.buildingid  where (user_tenants.user_login_id=? or user_tenants.user_email=(select email from user_logins where user_logins.id=?)) order by user_tenants.created_on desc");
			
			/* bind parameters for markers */
			$stmt->bind_param("ii", $data['user_id'],$data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$org['sent']=array();
			$org['received']=array();
			$org['approved']=array();
			$org['rejected']=array();
			while($row = $result->fetch_assoc())
			{
				$row['created_on']=date('Y-m-d',strtotime($row['created_on']));
				$row['building_name']=html_entity_decode($row['building_name'],ENT_NOQUOTES, 'UTF-8');
				$row['address']=html_entity_decode($row['address'],ENT_NOQUOTES, 'UTF-8');
				if(strtotime($row['created_on'])==strtotime(date('Y-m-d')))
				{
				$row['created_on']='Today';	
				}
				else if(strtotime($row['created_on'])==strtotime(date('Y-m-d').'-1 day'))
				{
				$row['created_on']='Yesterday';	
				}
				
				if($row['is_approved']==1)
				{
				array_push($org['approved'],$row);	
				}
				else if($row['is_approved']==2)
				{
				array_push($org['rejected'],$row);	
				}
				else if($row['is_approved']==3)
				{
				array_push($org['received'],$row);	
				}
				 
				
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
		
		function apartmentBuildingAmenities($data)
		{
			$dbCon = AppModel::createConnection();
			$org=array();
			$stmt = $dbCon->prepare("select landloard_building_amenities.id,amenity_name,adult_amenity,amenity_id from landloard_building_amenities left join  lanloard_building_amenity_info on landloard_building_amenities.amenity_id=lanloard_building_amenity_info.id where building_id =? and is_available=1 and (amenity_type=1 or amenity_type=2)  and apartment_app_display=1");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['building_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org['amenities']=array();
			while($row = $result->fetch_assoc())
			{
				$row['community']=0;
				$stmt = $dbCon->prepare("select amenity_image_path,sorting_number,id from landloard_building_aminity_images where building_aminity_detail_id=? and sorting_number=1");
				$stmt->bind_param("i", $row['id']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$row1 = $result1->fetch_assoc();
				if(empty($row1))
				{
				$row['image_path']='https://www.qloudid.com/html/usercontent/images/bg/noImage.png';	
				}
				else
				{
				$filename="../estorecss/".$row1 ['amenity_image_path'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row1 ['amenity_image_path'].".txt"); $value_a=str_replace('"','',$value_a); $image = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row1['amenity_image_path'].'.jpg' ); } else { $image="../html/usercontent/images/person-male.png"; } 
				$row['image_path']=str_replace('../','https://www.qloudid.com/',$image);	
				}
				array_push($org['amenities'],$row);
			}	
			
			$org['storage_amenities']=array(); 
			$stmt = $dbCon->prepare("select landloard_building_amenities.id,amenity_name,adult_amenity from landloard_building_amenities left join  lanloard_building_amenity_info on landloard_building_amenities.amenity_id=lanloard_building_amenity_info.id where building_id=? and is_available=1 and amenity_type=3  and apartment_app_display=1");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['building_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			while($row = $result->fetch_assoc())
			{
				$row['community']=0;
				$stmt = $dbCon->prepare("select amenity_image_path,sorting_number,id from landloard_building_aminity_images where building_aminity_detail_id=? and sorting_number=1");
				$stmt->bind_param("i", $row['id']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$row1 = $result1->fetch_assoc();
				if(empty($row1))
				{
				$row['image_path']='https://www.qloudid.com/html/usercontent/images/bg/noImage.png';	
				}
				else
				{
				$filename="../estorecss/".$row1 ['amenity_image_path'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row1 ['amenity_image_path'].".txt"); $value_a=str_replace('"','',$value_a); $image = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row1['amenity_image_path'].'.jpg' ); } else { $image="../html/usercontent/images/person-male.png"; } 
				$row['image_path']=str_replace('../','https://www.qloudid.com/',$image);	
				}
				array_push($org['storage_amenities'],$row);
			}	
			
			
			$org['trash_recycle']=array(); 
			$stmt = $dbCon->prepare("select landloard_building_amenities.id,amenity_name,adult_amenity from landloard_building_amenities left join  lanloard_building_amenity_info on landloard_building_amenities.amenity_id=lanloard_building_amenity_info.id where building_id=? and is_available=1 and amenity_type=4  and apartment_app_display=1");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['building_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			while($row = $result->fetch_assoc())
			{
				$row['community']=0;
				$stmt = $dbCon->prepare("select amenity_image_path,sorting_number,id from landloard_building_aminity_images where building_aminity_detail_id=? and sorting_number=1");
				$stmt->bind_param("i", $row['id']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$row1 = $result1->fetch_assoc();
				if(empty($row1))
				{
				$row['image_path']='https://www.qloudid.com/html/usercontent/images/bg/noImage.png';	
				}
				else
				{
				$filename="../estorecss/".$row1 ['amenity_image_path'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row1 ['amenity_image_path'].".txt"); $value_a=str_replace('"','',$value_a); $image = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row1['amenity_image_path'].'.jpg' ); } else { $image="../html/usercontent/images/person-male.png"; } 
				$row['image_path']=str_replace('../','https://www.qloudid.com/',$image);	
				}
				array_push($org['trash_recycle'],$row);
			}	
			 
			 
			$stmt->close();
			$dbCon->close();
			return $org;			
		}	
		
		function displayGetStartedPhotos($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select count(user_apartment_get_started_description_id) as num from user_apartment_get_started_description_images where user_apartment_get_started_description_id=?");
			$stmt->bind_param("i", $data['gid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			 
			$stmt = $dbCon->prepare("select get_started_image_path,sorting_number,id from user_apartment_get_started_description_images where user_apartment_get_started_description_id=? order by sorting_number ");
			$stmt->bind_param("i", $data['gid']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$org=array();
			function base64_to_jpeg($base64_string, $output_file) {
			$ifp = fopen( $output_file, 'wb' ); 
			$data = explode( ',', $base64_string );
			fwrite( $ifp, base64_decode( $data[1] ) );
			fclose( $ifp ); 
			return $output_file; 
		}
			while($row1 = $result1->fetch_assoc())
			{
				$filename="../estorecss/".$row1 ['get_started_image_path'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row1 ['get_started_image_path'].".txt"); $value_a=str_replace('"','',$value_a); $image = base64_to_jpeg( $value_a, '../estorecss/tmp'.$row1['get_started_image_path'].'.jpg' ); } else { $image="../html/usercontent/images/person-male.png"; } 
				$row1['get_started_image_path']=str_replace('../','https://www.qloudid.com/',$image);
				array_push($org,$row1); 
				 
			}	
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
		function updateGetStartedPhotos($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			 
			$data1='data:image/jpeg;base64,'.strip_tags($data['update_info']);
			define('UPLOAD_DIR','../estorecss/'); 
			$img_name1="new".microtime();
			file_put_contents(UPLOAD_DIR.$img_name1.".txt", $data1);
			
			
			$stmt = $dbCon->prepare("select count(user_apartment_get_started_description_id) as num from user_apartment_get_started_description_images where user_apartment_get_started_description_id=?");
			$stmt->bind_param("i", $data['gid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$snumber=$row['num']+1;
			
			$stmt = $dbCon->prepare("insert into user_apartment_get_started_description_images (get_started_image_path,user_apartment_get_started_description_id,sorting_number) values(?, ?, ?)");
			$stmt->bind_param("sii",$img_name1, $data['gid'],$snumber);
			$stmt->execute();	
			$id=$stmt->insert_id;
			
			$stmt = $dbCon->prepare("select get_started_image_path,sorting_number,id from user_apartment_get_started_description_images where id=? order by sorting_number ");
			$stmt->bind_param("i", $id);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$row1 = $result1->fetch_assoc();
			$filename="../estorecss/".$row1 ['get_started_image_path'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row1 ['get_started_image_path'].".txt"); $value_a=str_replace('"','',$value_a); $image = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row1['get_started_image_path'].'.jpg' ); } else { $image="../html/usercontent/images/person-male.png"; } 
			$row1['get_started_image_path']=str_replace('../','https://www.qloudid.com/',$image);
			$stmt->close();
			$dbCon->close();
			return $row1['get_started_image_path'];
		}
		
		function updateGetStartedDescription($data)
		{ 
		 
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update user_apartment_get_started_description set getstarted_code=?,getstarted_password=?,is_available=?,get_started_description=?,is_updated=1 where id=?");
			$stmt->bind_param("ssisi",$data['getstarted_code'],$data['getstarted_password'],$data['is_available'],$data['propertyNickname'], $data['gid']);
			$stmt->execute();	
				
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function getsratedDetail($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			function base64_to_jpeg($base64_string, $output_file) {
			$ifp = fopen( $output_file, 'wb' ); 
			$data = explode( ',', $base64_string );
			fwrite( $ifp, base64_decode( $data[1] ) );
			fclose( $ifp ); 
			return $output_file; 
			}
			$stmt = $dbCon->prepare("select * from user_apartment_get_started where id not in (select user_apartment_get_started_id from user_apartment_get_started_description where user_address_id=?)");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			while($row = $result->fetch_assoc())
			{
			$stmt = $dbCon->prepare("insert into user_apartment_get_started_description (user_address_id, user_apartment_get_started_id) values (?,?)");
			$stmt->bind_param("ii", $data['apartment_id'],$row['id']);
			$stmt->execute();	
			}
			
			$stmt = $dbCon->prepare("select get_started_description,user_apartment_get_started_id,is_updated,user_apartment_get_started_description.id,get_started_title,user_apartment_get_started_id,is_available,getstarted_code,getstarted_password from user_apartment_get_started_description left join user_apartment_get_started on user_apartment_get_started.id=user_apartment_get_started_description.user_apartment_get_started_id where user_address_id=?");
			$stmt->bind_param("i", $data['apartment_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			$row['get_started_description']=htmlentities($row['get_started_description'],ENT_NOQUOTES, 'UTF-8');
			if($row['user_apartment_get_started_id']<3)
			{
				$row['yes_no_required']=0;
				$row['code_required']=0;
			}
			else if($row['user_apartment_get_started_id']==3)
			{
				$row['yes_no_required']=1;
				$row['code_required']=1;
			}
			else
			{
				$row['yes_no_required']=1;
				$row['code_required']=0;
			}
			array_push($org,$row);
			$org[$j]['images']=array();
			$stmt = $dbCon->prepare("select get_started_image_path,sorting_number,id from user_apartment_get_started_description_images where user_apartment_get_started_description_id=? order by sorting_number ");
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$k=0;
			while($row1 = $result1->fetch_assoc())
			{
				 
				 $filename="../estorecss/".$row1 ['get_started_image_path'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row1 ['get_started_image_path'].".txt"); $value_a=str_replace('"','',$value_a); $image = base64_to_jpeg( $value_a, '../estorecss/tmpgetstarted'.$row1['sorting_number'].''.$row1['id'].'.jpg' ); } else { $image="../html/usercontent/images/person-male.png"; } 
				 $org[$j]['images'][$k]['image_path']=str_replace('../','https://www.qloudid.com/',$image);
				 $k++;
			}	
			$j++;
			
			}
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		

		function currentCountryDetail($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select user_logins.id,first_name,concat_ws(' ', first_name, last_name) as name,first_name,email,passport_image,get_started_wizard_status,grading_status,country_of_residence,country_name,user_logins.created_on from user_logins left join country on country.id=user_logins.country_of_residence where user_logins.id = ?");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("i", $data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select count(id) as num from user_visiting_countries where user_login_id=?");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("i", $data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCountries = $result->fetch_assoc();
			
			if($rowCountries['num']==0)
			{
				
			$stmt = $dbCon->prepare("insert into user_visiting_countries(user_login_id,country_info,default_country,current_country,created_on) values(?,?,?,?,now())");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("iiii", $data['user_id'],$row['country_of_residence'],$cont,$cont);
			$stmt->execute();	
			}
			
			$stmt = $dbCon->prepare("select user_visiting_countries.id,country_name,default_country,current_country from user_visiting_countries left join phone_country_code on user_visiting_countries.country_info=phone_country_code.id left join identificator_info on identificator_info.id=user_visiting_countries.identificator_type where user_login_id=?");
			$stmt->bind_param("i", $data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			 
			while($row = $result->fetch_assoc())
			{	 
			array_push($org,$row);
		
			}
			
			 
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		
		function userCountrySummary($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select count(id) as num from user_visiting_countries where user_login_id=? and country_info=67");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("i", $data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCountries = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			return $rowCountries['num'];
			
			
		}

		function checkPassportInfo($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select count(id) as num from user_visiting_countries where id_number=? and country_info=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("si",$data['id_number'],$data['country_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			return $row['num'];
		}
		

		function verifyOtpDetail($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select otp_verification  from user_logins where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			 
			if($row['otp_verification']==$data['otp'])
			{
				
				$stmt->close();
				$dbCon->close();
				return 1;
			}
			else
			{
				
				$stmt->close();
				$dbCon->close();
				return 0;
			}
		}
		function checkMobileNumber($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select count(user_profiles.id) as num  from user_profiles left join user_logins on user_logins.id=user_profiles.user_logins_id where country_of_residence=? and phone_number=? and user_profiles.user_logins_id!=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("isi",$data['country_id'], $data['p_number'],$data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			if($row['num']==0)
			{
			$stmt = $dbCon->prepare("select count(id) as num  from user_visiting_countries where country_info=? and phone_number=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("is",$data['country_id'], $data['p_number']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if($row['num']==0)
			{
			$stmt = $dbCon->prepare("select country_code  from phone_country_code where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['country_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$phone="+".trim($row['country_code'])."".trim($data['p_number']);
			$num=(mt_rand(1111,9999)); 
			$subject='Your one time password(OTP) is:'.$num;
			$to=$phone;
			$html='Ditt engngslsenord:'.$num;
			$res=sendSms($subject, $to, $html);
			$rs=json_decode($res,true);
			 
			if($rs['status']=='OK')
			{
				$stmt = $dbCon->prepare("update user_logins set otp_verification=? where id=?");
				
				/* bind parameters for markers */
				$stmt->bind_param("ii", $num,$data['user_id']);
				$stmt->execute();
				$id=$stmt->insert_id;
				$stmt->close();
				$dbCon->close();
				return 1;
			}
			else
			{
				$stmt->close();
				$dbCon->close();
				return 2;
			}
			}
			else 
			{
				$stmt->close();
				$dbCon->close();
				return 0;
			}
			}
			else 
			{
				$stmt->close();
				$dbCon->close();
				return 0;
			}
		}
		
		
		function updateCountry($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select phone_number  from user_profiles  where user_profiles.user_logins_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select *  from user_identification  where user_id=? and identification_type=3");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowIdentificator = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("update user_visiting_countries set `identificator_type`=?, `id_number`  =?, `issue_month`  =?, `issue_year`  =?, `expiry_month`  =?, `expiry_year`  =?, `front_image_path`  =?, `back_image_path`=?,phone_number=?,`issue_date`  =?,`expiry_date`  =? where current_country=1 and user_login_id=?");
			$stmt->bind_param("issssssssssi",$rowIdentificator['identification_type'],$rowIdentificator['identity_number'],$rowIdentificator['issue_month'],$rowIdentificator['issue_year'],$rowIdentificator['expiry_month'],$rowIdentificator['expiry_year'],$rowIdentificator['front_image_path'],$rowIdentificator['back_image_path'],$row['phone_number'],$rowIdentificator['issue_date'],$rowIdentificator['expiry_date'],$data['user_id']);
			$stmt->execute();
			 
			$stmt = $dbCon->prepare("select *  from user_visiting_countries  where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['update_info']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowIdentificator = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("update user_identification set `identification_type`=?, `identity_number`  =?, `issue_date`  =?, `issue_year`  =?, `expiry_date`  =?, `expiry_year`  =?, `front_image_path`  =?, `back_image_path`=?,issue_month=?,expiry_month=? where user_id=? and identification_type=3");
			$stmt->bind_param("isssssssssi",$rowIdentificator['identificator_type'],$rowIdentificator['id_number'],$rowIdentificator['issue_date'],$rowIdentificator['issue_year'],$rowIdentificator['expiry_date'],$rowIdentificator['expiry_year'],$rowIdentificator['front_image_path'],$rowIdentificator['back_image_path'],$rowIdentificator['issue_month'],$rowIdentificator['expiry_month'],$data['user_id']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("update user_logins set country_of_residence=? where id=?");
			$stmt->bind_param("ii",$rowIdentificator['country_info'],$data['user_id']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("update user_profiles  set phone_number=? where user_profiles.user_logins_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("si",$rowIdentificator['phone_number'],$data['user_id']);
			$stmt->execute();
			
			
			$stmt = $dbCon->prepare("update user_visiting_countries set current_country=0 where user_login_id=?");
			$stmt->bind_param("i",$data['user_id']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("update user_visiting_countries set current_country=1 where id=?");
			$stmt->bind_param("i",$data['update_info']);
			$stmt->execute();
			
			
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function addVisitingCountry($data)
		{
			$dbCon = AppModel::createConnection();
			$cont=0;	
			$a=array();
			$b=array();
			$a=explode('/',$data['IssueDate']);
			$b=explode('/',$data['ExpiryDate']);
			if($a[1]<10)
			{
				$a[1]='0'.$a[1];
			}
			if($b[1]<10)
			{
				$b[1]='0'.$b[1];
			}	
			
			$stmt = $dbCon->prepare("insert into user_visiting_countries(user_login_id,country_info,default_country,current_country,created_on,`identificator_type`, `id_number`  , `issue_month`  , `issue_year`  , `expiry_month`  , `expiry_year`,phone_number,issue_date,expiry_date ) values(?,?,?,?,now(),?,?,?,?,?,?,?,?,?)");
			/* bind parameters for markers */
			$stmt->bind_param("iiiiissssssss", $data['user_id'],$data['country_id'],$cont,$cont,$data['identificator_type'],$data['id_number'],$a[1],$a[2],$b[1],$b[2],$data['p_number'],$data['IssueDate'],$data['ExpiryDate']);
			$stmt->execute();
			$id=$stmt->insert_id;			
			$stmt->close();
			$dbCon->close();
			return $id;
		}
		
		
		function addVisitingCountryIdentificatorImages($data)
		{
			$dbCon = AppModel::createConnection();
			$data1 = strip_tags($data['ImageData']);
			$data1='url("data:image/png;base64,'.$data1.'")';
			//echo $data; die;
			define('UPLOAD_DIR','../estorecss/'); // image dir path
			$img_name1="new".microtime();
			file_put_contents(UPLOAD_DIR.$img_name1.".txt", $data1);
				 
			$arr=array();
			 
			if($data['imageId']==1)
			{
			$stmt = $dbCon->prepare("update user_visiting_countries set front_image_path=? where id=?");
			}
			else
			{
			$stmt = $dbCon->prepare("update user_visiting_countries set back_image_path=? where id=?");	
			}
			$stmt->bind_param("si",  $img_name1,$data['id']);	
			$stmt->execute();
			
			$stmt->close();
			$dbCon->close();
			return 1;	
			 
			 
		}
		
		


		function societyRulesList($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select landloard_society_rules.id,rule_name  from landloard_society_rules  left join community_rules on community_rules.id=landloard_society_rules.rule_id where society_id=? and is_active=1");
			$stmt->bind_param("i", $data['community_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($rowAvailable = $result->fetch_assoc())
			{
				array_push($org,$rowAvailable);
				$org[$j]['subrules']=array();
				$stmt = $dbCon->prepare("select landloard_society_subrules.id,subrule_name,is_applicable  from landloard_society_subrules  left join community_sub_rules on community_sub_rules.id=landloard_society_subrules.subrule_id where society_rule_id=? and is_applicable=1");
				$stmt->bind_param("i", $rowAvailable['id']);
				$stmt->execute();
				$result2 = $stmt->get_result();
				while($row = $result2->fetch_assoc())
				{
					array_push($org[$j]['subrules'],$row);
				}
				$j++;
			}
			
			//echo '<pre>'; print_r($org); echo '</pre>'; die;
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}	
	
		
		function tenantInvoiceInfo($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select id,invoice_generated_date,total_amount,payment_due,is_paid from landloard_building_tenant_invoice_detail where tenant_id=(select id from landloard_building_tenant where building_id=? and tenant_email=(select email from user_logins where id=?)) order by is_paid");
			$stmt->bind_param("ii", $data['building_id'],$data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$org['paid']=array();
			$org['unpaid']=array();
			while($row = $result->fetch_assoc())
			{
			$row['latest']=date('d M',$row['payment_due']);
			$row['invoice_month']=date('M',$row['invoice_generated_date']);
			if($row['is_paid']==1)
			array_push($org['paid'],$row);
			else
				array_push($org['unpaid'],$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
		
		
		function payRentInvoice($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select first_name,tenant_email,landloard_building_tenant_invoice_detail.id,invoice_generated_date,total_amount,payment_due from landloard_building_tenant_invoice_detail left join landloard_building_tenant on landloard_building_tenant.id=landloard_building_tenant_invoice_detail.tenant_id  where landloard_building_tenant_invoice_detail.id=?");
			$stmt->bind_param("i", $data['invoice_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$ch = curl_init();
			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/tokens');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "card[number]=4242424242424242&card[exp_month]=2&card[exp_year]=2050&card[cvc]=314");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);
			$a=json_decode($result,true);
			 
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/customers');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "name=".$row['first_name']."&email=".$row['tenant_email']."&source=".$a['id']."&description=My");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);
			$b=json_decode($result,true);
			$cuId=$b['id'];
			
			$total_price=$row['total_amount']*100;
			if($total_price<500)
			{
				$total_price=500;
			}
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/charges');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "customer=".$b['id']."&amount=".$total_price."&currency=sek&description=My");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);			
			$c=json_decode($result,true);
			$Chargeid=$c['id'];	
			if($data['is_company']==0)
			{
				$data['is_company']=1;
			}
			else
			{
				$data['is_company']=0;
			}
			$stmt = $dbCon->prepare("update landloard_building_tenant_invoice_detail set is_paid=1,paid_on=now(),paid_by_user=?,payee_id=?,payee_user_id=?,card_id=?,transection_id=? where id=?");
			$stmt->bind_param("iiiisi",$data['is_company'],$data['invoice_address_id'],$data['user_id'],$data['card_id'],$Chargeid,$data['invoice_id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
		}

		function checkinAparmentOwner($data)
		{
			$dbCon = AppModel::createConnection();
			$hotel_id= $this->encrypt_decrypt('decrypt',$data['id']);
			$guest_adults=1;
			$st=3;
			$guest_children=0;
			
			$stmt = $dbCon->prepare("insert into `hotel_checkout_detail`(guest_children,guest_infant,user_id,checked_in,created_on,`guest_adult`,`checkin_date`,`room_type_id`,`hotel_property_type`) values (?, ?,?, ?, now(),?,now(), ?, ?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("iiiiiii",$guest_children,$guest_children,$data['user_id'],$guest_adults, $guest_adults,$hotel_id,$st);
			$stmt->execute();
			
			$id=$stmt->insert_id;
			 
			
			$curl = curl_init();
			  curl_setopt_array($curl, array(
			  CURLOPT_URL => 'https://dstricts.com/user/index.php/DstrictsApp/checkinAparmentOwner',
			  CURLOPT_RETURNTRANSFER => true,
			  CURLOPT_ENCODING => '',
			  CURLOPT_MAXREDIRS => 10,
			  CURLOPT_TIMEOUT => 0,
			  CURLOPT_FOLLOWLOCATION => true,
			  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
			  CURLOPT_CUSTOMREQUEST => 'POST',
			  CURLOPT_POSTFIELDS => array('user_id' =>$data['user_id'],'room_type_id' => $hotel_id,'checkid' => $id),
			));
			$response = curl_exec($curl);
			curl_close($curl);
			$stmt->close();
			$dbCon->close();
			return 1;
			 
		}
		

		function apartmentDetailInfoCheckin($data)
		{
			 
			$dbCon = AppModel::createConnection();
			$hotel_id= $this->encrypt_decrypt('decrypt',$data['id']);
			  
			$stmt = $dbCon->prepare("select count(id) as num  from user_identification where user_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['dstricts_user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowIdentification = $result->fetch_assoc(); 
			
			$stmt = $dbCon->prepare("select count(id) as num  from user_cards where user_login_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['dstricts_user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCards = $result->fetch_assoc();	
			 
			$stmt = $dbCon->prepare("select property_nickname,name_on_house,user_id from user_address where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $hotel_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if($rowCards['num']>0)
			{
			$row['card_count']=1;	
			}
			else
			{
				$row['card_count']=0;
			}
			
			if($rowIdentification['num']>0)
			{
			$row['passport_count']=1;	
			}
			else
			{
				$row['passport_count']=0;
			}
			 
			 
			
			if($row['user_id']==$data['dstricts_user_id'])
			{
				$row['is_owner']=1;
			}
			else
			{
			$row['is_owner']=0;	
			}
			$row['property_nickname']=html_entity_decode($row['property_nickname'],ENT_NOQUOTES, 'UTF-8');
			$row['name_on_house']=html_entity_decode($row['name_on_house'],ENT_NOQUOTES, 'UTF-8'); 
			
			$today=strtotime(date('Y-m-d'));
			 
			$stmt = $dbCon->prepare("select id,chekin_type,checked_in,checkin_booking_date,checkout_booking_date from hotel_checkout_detail where room_type_id=? and user_id=? and checkin_booking_date<=? and checkout_booking_date>? and hotel_property_type=2 and checked_in=0");
			
			/* bind parameters for markers */
			$stmt->bind_param("iiss",$hotel_id,$data['dstricts_user_id'],$today,$today);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowChecking = $result->fetch_assoc();
			 
			if(empty($rowChecking))
			{
			 $row['qloud_checkout_id']=0;	
			}
			else
			{
			$row['qloud_checkout_id']=$this->encrypt_decrypt('encrypt',$rowChecking['id']);		
			}
			
			$stmt = $dbCon->prepare("select count(id) as num from hotel_checkout_detail where room_type_id=? and user_id=? and hotel_property_type=3 and checked_in=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("ii",$hotel_id,$data['dstricts_user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowChecking = $result->fetch_assoc();
			$row['owner_checked_in']=$rowChecking['num'];
			$stmt->close();
			$dbCon->close();
			return $row;
			
		}
		
		
		function deleteBathroom($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_bathroom_detail where user_address_id=?");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if($row['num']>1)
			{
			$stmt = $dbCon->prepare("select max(id) as m_id from user_apartment_bathroom_detail where user_address_id=?");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("delete from user_apartment_bathroom_detail where id=?");
			$stmt->bind_param("i", $row['m_id']);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return 1;
			}
			 else
			 {
			$stmt->close();
			$dbCon->close();
			return 0;
			 }
			 	
		}
		
		function addBathroom($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("insert into user_apartment_bathroom_detail (user_address_id, created_on, modified_on) values (?,now(), now())");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();	
			
			$stmt->close();
			$dbCon->close();
			return 1;	
		}
		
		function updateWheelchair($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update user_apartment_bathroom_detail set is_wheelchair_accessible=?,modified_on=now() where id=?");
			$stmt->bind_param("ii",$data['private_info'], $data['bathroom_id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function updatePrivate($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update user_apartment_bathroom_detail set is_private=?,modified_on=now() where id=?");
			$stmt->bind_param("ii",$data['private_info'], $data['bathroom_id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function updateEnsuit($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update user_apartment_bathroom_detail set is_ensuit=?,modified_on=now() where id=?");
			$stmt->bind_param("ii",$data['private_info'], $data['bathroom_id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
		}

		function updateToilet($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_bathroom_detail where user_address_id=?");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if($data['bath']==1)	
			{
			$stmt = $dbCon->prepare("update user_apartment_bathroom_detail set toilet_and_sink=?,modified_on=now() where id=?");
			 
			$stmt->bind_param("ii",$data['bath'], $data['bathroom_id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;		
			}
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_bathroom_detail where user_address_id=? and toilet_and_sink=1");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row1 = $result->fetch_assoc();
			if($row['num']==1)
			{
				
			$stmt->close();
			$dbCon->close();
			return 0;	
			}
			else
			{
			if(($row1['num']-1)==0)
			{
			$stmt->close();
			$dbCon->close();
			return 0;	
			}
			else
			{
			$stmt = $dbCon->prepare("select bath,shower from user_apartment_bathroom_detail where id=?");
			$stmt->bind_param("i", $data['bathroom_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row1 = $result->fetch_assoc();	
			if($row1['bath']==0 && $row1['shower']==0 && $data['bath']==0)	
			{
			$stmt = $dbCon->prepare("delete from  user_apartment_bathroom_detail where id=?");
			 
			$stmt->bind_param("i",$data['bathroom_id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;		
			}
			else
			{
			$stmt = $dbCon->prepare("update user_apartment_bathroom_detail set toilet_and_sink=?,modified_on=now() where id=?");
			 
			$stmt->bind_param("ii",$data['bath'], $data['bathroom_id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;	
			}
				
			}		
			}
			
		}
		
		function updateOverbath($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update user_apartment_bathroom_detail set standalone_shower=?,over_bath_shower=?,modified_on=now() where id=?");
			$stmt->bind_param("iii",$data['standalone'],$data['overbath'], $data['bathroom_id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function updateBath($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			if($data['bath']==1)
			 {
				$stmt = $dbCon->prepare("update user_apartment_bathroom_detail set bath=?,modified_on=now() where id=?"); 
				$stmt->bind_param("ii",$data['bath'], $data['bathroom_id']);
				$stmt->execute();
				$stmt->close();
				$dbCon->close();
				return 1;
			 }
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_bathroom_detail where user_address_id=? && (bath=1 || shower=1)");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if($row['num']==1)
			{
			 
			$stmt->close();
			$dbCon->close();
			return 0;	
			 	
			}
			else
			{
			$stmt = $dbCon->prepare("select bath,toilet_and_sink from user_apartment_bathroom_detail where id=?");
			$stmt->bind_param("i", $data['bathroom_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();	
			if($row['shower']==0 && $row['toilet_and_sink']==0 && $data['bath']==0)
			{
			$stmt = $dbCon->prepare("delete from user_apartment_bathroom_detail where id=?");
			$stmt->bind_param("i",$data['bathroom_id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			
			return 1;		
			}
			else
			{
			if($data['bath']==0)
			{
			$stmt = $dbCon->prepare("update user_apartment_bathroom_detail set bath=?,modified_on=now() where id=?");
			}
			else
			{
			$stmt = $dbCon->prepare("update user_apartment_bathroom_detail set bath=?,modified_on=now() where id=?");	
			}
			$stmt->bind_param("ii",$data['bath'], $data['bathroom_id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;	
			}
				
			}
			
		}
		
		function updateShower($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			
			$data['standalone']=$data['bath'];
			$data['overbath']=0;
			if($data['standalone']==1)
				{
				$stmt = $dbCon->prepare("update user_apartment_bathroom_detail set shower=?,standalone_shower=?,over_bath_shower=?,modified_on=now() where id=?");
				$stmt->bind_param("iiii",$data['standalone'],$data['standalone'],$data['overbath'], $data['bathroom_id']);
				$stmt->execute();
				$stmt->close();
				$dbCon->close();
				return 1;	
				}
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_bathroom_detail where user_address_id=?");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if($row['num']==1)
			{
				if($data['standalone']==1)
				{
				$stmt = $dbCon->prepare("update user_apartment_bathroom_detail set shower=?,standalone_shower=?,over_bath_shower=?,modified_on=now() where id=?");
				$stmt->bind_param("iiii",$data['standalone'],$data['standalone'],$data['overbath'], $data['bathroom_id']);
				$stmt->execute();
				$stmt->close();
				$dbCon->close();
				return 1;	
				}
			$stmt = $dbCon->prepare("select bath from user_apartment_bathroom_detail where user_address_id=?");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();	
			if($row['bath']==1)
			{
			$stmt = $dbCon->prepare("update user_apartment_bathroom_detail set shower=?,standalone_shower=?,over_bath_shower=?,modified_on=now() where id=?");
			$stmt->bind_param("iiii",$data['standalone'],$data['standalone'],$data['overbath'], $data['bathroom_id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
			}
			else
			{
			$stmt->close();
			$dbCon->close();
			return 0;	
			}
				
			}
			else
			{
			$stmt = $dbCon->prepare("select count(id) as num  from user_apartment_bathroom_detail where user_address_id=? and bath=1");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();	
			if($row['num']>0)
			{
			$stmt = $dbCon->prepare("select bath,toilet_and_sink from user_apartment_bathroom_detail where id=?");
			$stmt->bind_param("i", $data['bathroom_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();	
			if($row['bath']==0 && $row['toilet_and_sink']==0 && $data['standalone']==0)
			{
			$stmt = $dbCon->prepare("delete from user_apartment_bathroom_detail where id=?");
			$stmt->bind_param("i",$data['bathroom_id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;		
			}
			else
			{
			$stmt = $dbCon->prepare("update user_apartment_bathroom_detail set shower=?,standalone_shower=?,over_bath_shower=?,modified_on=now() where id=?");
			$stmt->bind_param("iiii",$data['standalone'],$data['standalone'],$data['overbath'], $data['bathroom_id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;	
			}	
			}
			else
			{
			$stmt = $dbCon->prepare("select count(id) as num  from user_apartment_bathroom_detail where user_address_id=? and shower=1");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();	
			if($row['num']>1)
			{
			$stmt = $dbCon->prepare("select bath,toilet_and_sink from user_apartment_bathroom_detail where id=?");
			$stmt->bind_param("i", $data['bathroom_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();	
			if($row['bath']==0 && $row['toilet_and_sink']==0 && $data['standalone']==0)
			{
			$stmt = $dbCon->prepare("delete from user_apartment_bathroom_detail where id=?");
			$stmt->bind_param("i",$data['bathroom_id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;		
			}
			else
			{
			$stmt = $dbCon->prepare("update user_apartment_bathroom_detail set shower=?,standalone_shower=?,over_bath_shower=?,modified_on=now() where id=?");
			$stmt->bind_param("iiii",$data['standalone'],$data['standalone'],$data['overbath'], $data['bathroom_id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;	
			}	
			}
			else
			{
			$stmt->close();
			$dbCon->close();
			return 0;
			}
			}
			
				
			}
			
		}
		

		function bedroomCount($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_bedrooms where user_address_id=?");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if($row['num']==0)
			{
			$stmt = $dbCon->prepare("insert into user_apartment_bedrooms (user_address_id, created_on) values (?,now())");
			$stmt->bind_param("i",$data['aid']);
			$stmt->execute();	
			$id=$stmt->insert_id;
			$bed='Single';
			$stmt = $dbCon->prepare("insert into user_apartment_bedrooms_beds (bedroom_id,bed_info, created_on,modified_on) values (?,?,now(),now())");
			$stmt->bind_param("is", $id,$bed);
			$stmt->execute();	
			
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_bedrooms where user_address_id=?");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			}
			$stmt->close();
			$dbCon->close();
			return $row['num'];	
		}
		function bathroomCount($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_bathroom_detail where user_address_id=?");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if($row['num']==0)
			{
			$stmt = $dbCon->prepare("insert into user_apartment_bathroom_detail (user_address_id, created_on, modified_on) values (?,now(), now())");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();	
			
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_bathroom_detail where user_address_id=?");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			}
			$stmt->close();
			$dbCon->close();
			return $row['num'];	
		}
		
		function bathroomDetail($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("update user_address set bathroom_updated=1 where id=?");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute(); 
			 
			$stmt = $dbCon->prepare("select * from user_apartment_bathroom_detail where user_address_id=?");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
				if($row['shower']==0)
				{
					$row['standalone_shower']=1;
				}
				$row['bathroom_count']=++$j;
			array_push($org,$row);	
			
			}
			 
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		
			

		function communityAvailableTenantsInfo($data)
		{
			$dbCon = AppModel::createConnection();
			$org=array();
			$stmt = $dbCon->prepare("select id,port_number from landloard_building_ports where buildingid in (select building_id from landloard_society_buildings where society_id=?)");
			$stmt->bind_param("i", $data['community_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$j=0;
			while($row = $result->fetch_assoc())
			{
				
			array_push($org,$row);
			$tid='';
			$stmt = $dbCon->prepare("select teanat_details,floor_number from landloard_building_port_floors_offices left join landloard_building_port_floors on landloard_building_port_floors.id=landloard_building_port_floors_offices.floor_id where floor_id in(select id from landloard_building_port_floors where port_id=?)");
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$org[$j]['tenants']=array();
			while($row2 = $result2->fetch_assoc())
			{
			$stmt = $dbCon->prepare("select id,first_name  , last_name  , tenant_email  , mobile_country , mobile_number  , fixed_phone_country , landline_number  , street_address  , port_number  , zipcode  , city  , country_of_residence , nationality , passport_number  , issue_month , issue_year , expiry_month , expiry_year , passport_front_image  , passport_back_image from landloard_building_tenant  where find_in_set(id,?)");
			$stmt->bind_param("s", $row2['teanat_details']);
			$stmt->execute();
			$result3 = $stmt->get_result();
			while($row3 = $result3->fetch_assoc())
			{
				$row3['floor_number']=$row2['floor_number'];
				$row3['image_path']='https://dstricts.com/html/usercontent/images/bg/tenantImage.png';
				array_push($org[$j]['tenants'],$row3);
			}
				 
			}
			$j++;
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
		
		function communitySelectedAmenitiesRulesInfo($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select amenity_id,amenity_open_month,amenity_close_month,amenity_hrs_sat_sun,amenity_hrs_sat_sun_open,amenity_hrs_sat_sun_close,amenity_hrs_mon_fri,amenity_hrs_mon_fri_open,amenity_hrs_mon_fri_close,app_display,community_aminity_detail.id,close_time,open_time,is_available,community_aminity_name,open_close_timing,amenity_description  from community_aminity_detail left join community_aminity_info on community_aminity_info.id=community_aminity_detail.amenity_id where community_aminity_detail.id=?");
			$stmt->bind_param("i", $data['community_detail_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$amenity_id=$row['amenity_id'];
			
			$stmt = $dbCon->prepare("select * from community_amenity_rule_heading where community_amenity_id=?");
			$stmt->bind_param("i", $amenity_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{ 
			$stmt = $dbCon->prepare("select count(community_amenity_rule_applicable.id) as num from community_amenity_rule_applicable left join community_amenity_rules on community_amenity_rules.id=community_amenity_rule_applicable.community_amenity_rules_id where community_amenity_rule_applicable.community_amenity_id=? and community_aminity_detail_id=? and community_amenity_rule_heading_id=? and is_available=1");
			$stmt->bind_param("iii",$amenity_id, $data['community_detail_id'],$row['id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();
			if($row2['num']==0)
			{
				continue;
			}
			array_push($org,$row);
			$stmt = $dbCon->prepare("select community_amenity_rule_applicable.id,community_rule,is_available from community_amenity_rule_applicable left join community_amenity_rules on community_amenity_rules.id=community_amenity_rule_applicable.community_amenity_rules_id where community_amenity_rule_applicable.community_amenity_id=? and community_aminity_detail_id=? and community_amenity_rule_heading_id=?");
			$stmt->bind_param("iii",$amenity_id, $data['community_detail_id'],$row['id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$org[$j]['rules']=array();
			while($row2 = $result2->fetch_assoc())
			{
				 
			 	array_push($org[$j]['rules'],$row2);
			}
			$j++;
			}
			 
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		 
		
		
		function communitySelectedAmenitiesInfo($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select amenity_id,amenity_open_month,amenity_close_month,amenity_hrs_sat_sun,amenity_hrs_sat_sun_open,amenity_hrs_sat_sun_close,amenity_hrs_mon_fri,amenity_hrs_mon_fri_open,amenity_hrs_mon_fri_close,app_display,community_aminity_detail.id,close_time,open_time,is_available,community_aminity_name,open_close_timing,amenity_description  from community_aminity_detail left join community_aminity_info on community_aminity_info.id=community_aminity_detail.amenity_id where community_aminity_detail.id=?");
			$stmt->bind_param("i", $data['community_detail_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			
			$row['amenity_open_month']= substr(date("F", mktime(0, 0, 0, $row['amenity_open_month'], 10)),0,3);  
			$row['amenity_close_month']=  substr(date("F", mktime(0, 0, 0, $row['amenity_close_month'], 10)),0,3);  
			
			$row['images']=array();
			$stmt = $dbCon->prepare("select amenity_image_path,sorting_number,id from community_aminity_detail_images where community_aminity_detail_id=? order by sorting_number ");
			$stmt->bind_param("i", $data['community_detail_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$j=0;
			while($row1 = $result1->fetch_assoc())
			{
				$filename="../estorecss/".$row1 ['amenity_image_path'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row1 ['amenity_image_path'].".txt"); $value_a=str_replace('"','',$value_a); $image = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row1['amenity_image_path'].'.jpg' ); } else { $image="../html/usercontent/images/person-male.png"; } 
				$row['images'][$j]['image_path']=str_replace('../','https://www.qloudid.com/',$image);	
				$j++;
			}				 
			$stmt->close();
			$dbCon->close();
			return $row;
		}
		 
		function apartmentCommunityAmenities($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select community_aminity_detail.id,community_aminity_name as amenity_name,adult_amenity from community_aminity_detail left join community_aminity_info on community_aminity_info.id=community_aminity_detail.amenity_id where   society_id=? and app_display=1 and is_available=1 and adult_amenity=0");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['community_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$org['community_children_amenity']=array();
			while($row = $result->fetch_assoc())
			{
				$stmt = $dbCon->prepare("select amenity_image_path,sorting_number,id from community_aminity_detail_images where community_aminity_detail_id=? and sorting_number=1");
				$stmt->bind_param("i", $row['id']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$row1 = $result1->fetch_assoc();
				if(empty($row1))
				{
				$row['image_path']='https://www.qloudid.com/html/usercontent/images/bg/noImage.png';	
				}
				else
				{
				$filename="../estorecss/".$row1 ['amenity_image_path'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row1 ['amenity_image_path'].".txt"); $value_a=str_replace('"','',$value_a); $image = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row1['amenity_image_path'].'.jpg' ); } else { $image="../html/usercontent/images/person-male.png"; } 
				$row['image_path']=str_replace('../','https://www.qloudid.com/',$image);	
				}
				$row['community']=1; 
				array_push($org['community_children_amenity'],$row);
			}	
			
			$stmt = $dbCon->prepare("select community_aminity_detail.id,community_aminity_name as amenity_name,adult_amenity from community_aminity_detail left join community_aminity_info on community_aminity_info.id=community_aminity_detail.amenity_id where   society_id=? and app_display=1 and is_available=1 and adult_amenity=1");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['community_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			 
			$org['community_amenity']=array();
			while($row = $result->fetch_assoc())
			{
				$row['community']=1; 
				$stmt = $dbCon->prepare("select amenity_image_path,sorting_number,id from community_aminity_detail_images where community_aminity_detail_id=? and sorting_number=1");
				$stmt->bind_param("i", $row['id']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$row1 = $result1->fetch_assoc();
				if(empty($row1))
				{
				$row['image_path']='https://www.qloudid.com/html/usercontent/images/bg/noImage.png';	
				}
				else
				{
				$filename="../estorecss/".$row1 ['amenity_image_path'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row1 ['amenity_image_path'].".txt"); $value_a=str_replace('"','',$value_a); $image = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row1['amenity_image_path'].'.jpg' ); } else { $image="../html/usercontent/images/person-male.png"; } 
				$row['image_path']=str_replace('../','https://www.qloudid.com/',$image);	
				}
				array_push($org['community_amenity'],$row);
			}	
			
			
			
			$stmt = $dbCon->prepare("select community_aminity_detail.id,community_aminity_name as amenity_name,adult_amenity from community_aminity_detail left join community_aminity_info on community_aminity_info.id=community_aminity_detail.amenity_id where   society_id=? and app_display=1 and is_available=1 and adult_amenity=2");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['community_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			 
			$org['community_eat_drink_amenity']=array();
			while($row = $result->fetch_assoc())
			{
				$row['community']=1; 
				$stmt = $dbCon->prepare("select amenity_image_path,sorting_number,id from community_aminity_detail_images where community_aminity_detail_id=? and sorting_number=1");
				$stmt->bind_param("i", $row['id']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$row1 = $result1->fetch_assoc();
				if(empty($row1))
				{
				$row['image_path']='https://www.qloudid.com/html/usercontent/images/bg/noImage.png';	
				}
				else
				{
				$filename="../estorecss/".$row1 ['amenity_image_path'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row1 ['amenity_image_path'].".txt"); $value_a=str_replace('"','',$value_a); $image = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row1['amenity_image_path'].'.jpg' ); } else { $image="../html/usercontent/images/person-male.png"; } 
				$row['image_path']=str_replace('../','https://www.qloudid.com/',$image);	
				}
				array_push($org['community_eat_drink_amenity'],$row);
			}	
			
			
			 
			
			$stmt = $dbCon->prepare("select landloard_building_amenities.id,amenity_name,adult_amenity,amenity_id from landloard_building_amenities left join  lanloard_building_amenity_info on landloard_building_amenities.amenity_id=lanloard_building_amenity_info.id where building_id in (select building_id from landloard_society_buildings where society_id=?) and is_available=1 and (amenity_id!=4 and amenity_id!=9)  and app_display=1");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['community_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org['building_amenity']=array();
			while($row = $result->fetch_assoc())
			{
				$row['community']=0;
				$stmt = $dbCon->prepare("select amenity_image_path,sorting_number,id from landloard_building_aminity_images where building_aminity_detail_id=? and sorting_number=1");
				$stmt->bind_param("i", $row['id']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$row1 = $result1->fetch_assoc();
				if(empty($row1))
				{
				$row['image_path']='https://www.qloudid.com/html/usercontent/images/bg/noImage.png';	
				}
				else
				{
				$filename="../estorecss/".$row1 ['amenity_image_path'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row1 ['amenity_image_path'].".txt"); $value_a=str_replace('"','',$value_a); $image = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row1['amenity_image_path'].'.jpg' ); } else { $image="../html/usercontent/images/person-male.png"; } 
				$row['image_path']=str_replace('../','https://www.qloudid.com/',$image);	
				}
				array_push($org['building_amenity'],$row);
			}	
			
			$org['book']=array(); 
			$stmt = $dbCon->prepare("select landloard_building_amenities.id,amenity_name,adult_amenity from landloard_building_amenities left join  lanloard_building_amenity_info on landloard_building_amenities.amenity_id=lanloard_building_amenity_info.id where building_id in (select building_id from landloard_society_buildings where society_id=?) and is_available=1 and (amenity_id=4 or amenity_id=9)  and app_display=1");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['community_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			while($row = $result->fetch_assoc())
			{
				$row['community']=0;
				$stmt = $dbCon->prepare("select amenity_image_path,sorting_number,id from landloard_building_aminity_images where building_aminity_detail_id=? and sorting_number=1");
				$stmt->bind_param("i", $row['id']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$row1 = $result1->fetch_assoc();
				if(empty($row1))
				{
				$row['image_path']='https://www.qloudid.com/html/usercontent/images/bg/noImage.png';	
				}
				else
				{
				$filename="../estorecss/".$row1 ['amenity_image_path'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row1 ['amenity_image_path'].".txt"); $value_a=str_replace('"','',$value_a); $image = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row1['amenity_image_path'].'.jpg' ); } else { $image="../html/usercontent/images/person-male.png"; } 
				$row['image_path']=str_replace('../','https://www.qloudid.com/',$image);	
				}
				array_push($org['book'],$row);
			}	
			 
			 
			$stmt->close();
			$dbCon->close();
			return $org;			
		}	
		
		function buildingSelectedAmenitiesInfo($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select amenity_id,amenity_open_month,amenity_close_month,amenity_hrs_sat_sun,amenity_hrs_sat_sun_open,amenity_hrs_sat_sun_close,amenity_hrs_mon_fri,amenity_hrs_mon_fri_open,amenity_hrs_mon_fri_close,app_display,landloard_building_amenities.id,is_available,amenity_name,amenity_description  from landloard_building_amenities left join lanloard_building_amenity_info on lanloard_building_amenity_info.id=landloard_building_amenities.amenity_id where landloard_building_amenities.id=?");
			$stmt->bind_param("i", $data['building_detail_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			
			$row['amenity_open_month']= substr(date("F", mktime(0, 0, 0, $row['amenity_open_month'], 10)),0,3);  
			$row['amenity_close_month']=  substr(date("F", mktime(0, 0, 0, $row['amenity_close_month'], 10)),0,3);  
			
			$row['images']=array();
			$stmt = $dbCon->prepare("select amenity_image_path,sorting_number,id from landloard_building_aminity_images where building_aminity_detail_id=? order by sorting_number ");
			$stmt->bind_param("i", $data['building_detail_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$j=0;
			while($row1 = $result1->fetch_assoc())
			{
				$filename="../estorecss/".$row1 ['amenity_image_path'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row1 ['amenity_image_path'].".txt"); $value_a=str_replace('"','',$value_a); $image = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row1['amenity_image_path'].'.jpg' ); } else { $image="../html/usercontent/images/person-male.png"; } 
				$row['images'][$j]['image_path']=str_replace('../','https://www.qloudid.com/',$image);	
				$j++;
			}				 
			$stmt->close();
			$dbCon->close();
			return $row;
		}
		
		function apartmentBuildingParkings($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select id,building_name from landloard_buildings where id=? and garage_available=1 and parking_activated=1");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['building_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$org=array();
			if(!empty($row))
			{
			$stmt = $dbCon->prepare("select parking_image_path,sorting_number,id from landloard_building_parking_images where building_id=? and sorting_number=1");
				$stmt->bind_param("i", $data['building_id']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$row1 = $result1->fetch_assoc();
				if(empty($row1))
				{
				$row['image_path']='https://www.qloudid.com/html/usercontent/images/bg/noImage.png';	
				}
				else
				{
				$filename="../estorecss/".$row1 ['parking_image_path'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row1 ['parking_image_path'].".txt"); $value_a=str_replace('"','',$value_a); $image = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row1['parking_image_path'].'.jpg' ); } else { $image="../html/usercontent/images/person-male.png"; } 
				$row['image_path']=str_replace('../','https://www.qloudid.com/',$image);	
				}
				$row['community']=1; 

			array_push($org,$row);			
			}
			$stmt->close();
			$dbCon->close();
			return $org;			
		}	
		 
		
		function apartmentCommunityParkings($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select id,building_name from landloard_buildings where id in (select building_id from landloard_society_buildings where society_id=?) and garage_available=1 and parking_activated=1");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['community_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				$stmt = $dbCon->prepare("select parking_image_path,sorting_number,id from landloard_building_parking_images where building_id=? and sorting_number=1");
				$stmt->bind_param("i", $row['id']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$row1 = $result1->fetch_assoc();
				if(empty($row1))
				{
				$row['image_path']='https://www.qloudid.com/html/usercontent/images/bg/noImage.png';	
				}
				else
				{
				$filename="../estorecss/".$row1 ['parking_image_path'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row1 ['parking_image_path'].".txt"); $value_a=str_replace('"','',$value_a); $image = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row1['parking_image_path'].'.jpg' ); } else { $image="../html/usercontent/images/person-male.png"; } 
				$row['image_path']=str_replace('../','https://www.qloudid.com/',$image);	
				}
				$row['community']=1; 
				array_push($org,$row);
			}	
			
		    
			$stmt->close();
			$dbCon->close();
			return $org;			
		}	
		
		function buildingParkingAvailable($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select parking_activated  from landloard_buildings where id=?");
			$stmt->bind_param("i", $data['building_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			return $row['parking_activated'];
		}
		
		
		function buildingSelectedParkingInfo($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select parking_activated  from landloard_buildings where id=?");
			$stmt->bind_param("i", $data['building_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if($row['parking_activated']==1)
			{
			$stmt = $dbCon->prepare("select parking_open_month,parking_close_month,parking_hrs_sat_sun,parking_hrs_sat_sun_open,parking_hrs_sat_sun_close,parking_hrs_mon_fri,parking_hrs_mon_fri_open,parking_hrs_mon_fri_close,id,parking_description,parking_number  from landloard_building_parking where building_id=?");
			$stmt->bind_param("i", $data['building_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			  
			$row['parking_open_month']= substr(date("F", mktime(0, 0, 0, $row['parking_open_month'], 10)),0,3);  
			$row['parking_close_month']=  substr(date("F", mktime(0, 0, 0, $row['parking_close_month'], 10)),0,3);  
			
			$row['images']=array();
			$stmt = $dbCon->prepare("select parking_image_path,sorting_number,id from landloard_building_parking_images where building_id=? order by sorting_number");
			$stmt->bind_param("i", $data['building_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$j=0;
			while($row1 = $result1->fetch_assoc())
			{
				$filename="../estorecss/".$row1 ['parking_image_path'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row1 ['parking_image_path'].".txt"); $value_a=str_replace('"','',$value_a); $image = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row1['parking_image_path'].'.jpg' ); } else { $image="../html/usercontent/images/person-male.png"; } 
				$row['images'][$j]['image_path']=str_replace('../','https://www.qloudid.com/',$image);	
				$j++;
			}	

			if(count($row['images'])==0)
			{
				$row['images'][$j]['image_path']='https://www.qloudid.com/html/usercontent/images/bg/noImage.png';
			}
			$stmt->close();
			$dbCon->close();
			return $row;	
			}
			else
			{
				$org=array();
				$stmt->close();
			$dbCon->close();
			return $org;
			}
			
		}
		 
	 function getCommunityInfo($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select society_id from landloard_society_buildings where building_id=(select building_id from user_address where id=(select room_type_id from hotel_checkout_detail where id=?))");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['check_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if(empty($row))
			{
			$stmt->close();
			$dbCon->close();
			return 0;			
			}				
			else
			{
			$stmt->close();
			$dbCon->close();
			return $row['society_id'];			
			}
			 
		}	
		
		
		
		
		function getCommunityDetailInfo($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select * from landloard_society where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['community_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$row['society_name']=html_entity_decode($row['society_name'],ENT_NOQUOTES, 'UTF-8'); 
			$row['street_address']=html_entity_decode($row['street_address'],ENT_NOQUOTES, 'UTF-8'); 
			$row['city']=html_entity_decode($row['city'],ENT_NOQUOTES, 'UTF-8'); 
			if($row['wifi_available']==0)
			{
				$row['wifi_username']='a';
				$row['wifi_password']='a';
			}
			
			if($row['entry_type']==0)
			{
				$row['entry_code']='Not Required';
			}
			
			$row['description']=strip_tags(html_entity_decode($row['description'],ENT_NOQUOTES, 'ISO-8859-1')); 
			 $row['description']=trim(strip_tags($row['description']));
			$row['images']=array();
			$stmt = $dbCon->prepare("select community_photo_path from community_photos where community_id=? order by sorting_number");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['community_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			while($rowImages = $result->fetch_assoc())
			{
			$filename="../estorecss/".$rowImages['community_photo_path'].".txt"; $value_a=file_get_contents("../estorecss/".$rowImages['community_photo_path'].".txt"); $value_a=str_replace('"','',$value_a); $rowImages['community_photo_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$rowImages['community_photo_path'].'.jpg' );
			$rowImages['building_photo_path']=str_replace('../','https://www.qloudid.com/',$rowImages['community_photo_path']);
			array_push($row['images'],$rowImages);	
			}
			
			$stmt->close();
			$dbCon->close();
			return $row;			
		}	
		
		function apartmentCommunityTicketCreatedCount($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select count(id) as num from landloard_property_problem_tickets  where qloud_checkout_id=? and (ticket_status=0 or ticket_status=3)");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['check_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$row = $result->fetch_assoc();
			$org['new_ticket']=$row['num'];
				
			
			$stmt = $dbCon->prepare("select count(id) as num from landloard_property_problem_tickets  where qloud_checkout_id=? and ticket_status=1");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['check_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$org['ongoing_ticket']=$row['num'];
			
			$stmt = $dbCon->prepare("select count(id) as num from landloard_property_problem_tickets  where qloud_checkout_id=? and ticket_status=2");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['check_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$org['finished_ticket']=$row['num'];
			 
			$stmt->close();
			$dbCon->close();
			return $org;			
		}	

		function apartmentCommunityTicketList($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$apartment_id= $this -> encrypt_decrypt('decrypt',$data['apartment_id']);   
			$stmt = $dbCon->prepare("select id as room_type_id,property_nickname from user_address  where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i",$apartment_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row   = $result->fetch_assoc(); 
			 
			$apartment_id=$row['room_type_id'];
			$stmt = $dbCon->prepare("select ticket_status,apartment_id,landloard_property_problem_tickets.id,problem_description,landloard_property_problem_tickets.ticket_type,ticket_title,ticket_subtitle from landloard_property_problem_tickets left join landloard_ticket_title on landloard_ticket_title.id=landloard_property_problem_tickets.problem_id left join landloard_ticket_subtitle on landloard_ticket_subtitle.id=landloard_property_problem_tickets.subproblem_id where apartment_id=? and ticket_status=0 and accepting_company_id=? and ticket_assined_to=2");
			/* bind parameters for markers */
			$stmt->bind_param("ii",$apartment_id,$data['company_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$org['apartment_name']=$row['property_nickname'];
			$org['notstarted']=array();
			while($row = $result->fetch_assoc())
			{
				array_push($org['notstarted'],$row);
			}	
			
			 
			$stmt = $dbCon->prepare("select ticket_status,apartment_id,landloard_property_problem_tickets.id,problem_description,landloard_property_problem_tickets.ticket_type,ticket_title,ticket_subtitle from landloard_property_problem_tickets left join landloard_ticket_title on landloard_ticket_title.id=landloard_property_problem_tickets.problem_id left join landloard_ticket_subtitle on landloard_ticket_subtitle.id=landloard_property_problem_tickets.subproblem_id where apartment_id=?  and ticket_assined_to=2 and ticket_status=3 and accepted_by_employee!=(select id from employees where user_login_id=? and company_id=?)");
			/* bind parameters for markers */
			$stmt->bind_param("iii",$apartment_id,$data['user_id'],$data['company_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			while($row = $result->fetch_assoc())
			{
				array_push($org['notstarted'],$row);
			}	
			
			$org['started']=array();
			
			$stmt = $dbCon->prepare("select ticket_status,apartment_id,landloard_property_problem_tickets.id,problem_description,landloard_property_problem_tickets.ticket_type,ticket_title,ticket_subtitle from landloard_property_problem_tickets left join landloard_ticket_title on landloard_ticket_title.id=landloard_property_problem_tickets.problem_id left join landloard_ticket_subtitle on landloard_ticket_subtitle.id=landloard_property_problem_tickets.subproblem_id where apartment_id=?  and ticket_assined_to=2 and ticket_status=1 and accepted_by=? and accepting_company_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("iii",$apartment_id,$data['user_id'],$data['company_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			while($row = $result->fetch_assoc())
			{
				array_push($org['started'],$row);
			}	
			
			
			$org['finished']=array();
			$stmt = $dbCon->prepare("select ticket_status,apartment_id,landloard_property_problem_tickets.id,problem_description,landloard_property_problem_tickets.ticket_type,ticket_title,ticket_subtitle from landloard_property_problem_tickets left join landloard_ticket_title on landloard_ticket_title.id=landloard_property_problem_tickets.problem_id left join landloard_ticket_subtitle on landloard_ticket_subtitle.id=landloard_property_problem_tickets.subproblem_id where apartment_id=?  and ticket_assined_to=2 and ticket_status=2 and accepted_by=? and accepting_company_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("iii",$apartment_id,$data['user_id'],$data['company_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			while($row = $result->fetch_assoc())
			{
				array_push($org['finished'],$row);
			}	
			
			
			$org['cancelled']=array();
			$stmt = $dbCon->prepare("select ticket_status,apartment_id,landloard_property_problem_tickets.id,problem_description,landloard_property_problem_tickets.ticket_type,ticket_title,ticket_subtitle from landloard_property_problem_tickets left join landloard_ticket_title on landloard_ticket_title.id=landloard_property_problem_tickets.problem_id left join landloard_ticket_subtitle on landloard_ticket_subtitle.id=landloard_property_problem_tickets.subproblem_id where apartment_id=?  and ticket_assined_to=2 and ticket_status=3 and accepted_by=? and accepting_company_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("iii",$apartment_id,$data['user_id'],$data['company_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			while($row = $result->fetch_assoc())
			{
				array_push($org['cancelled'],$row);
			}
			 
			$stmt->close();
			$dbCon->close();
			return $org;			
		}	
		
		function updateApartmentCommunityTicket($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select id from employees where user_login_id=? and company_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("ii",$data['user_id'],$data['company_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row   = $result->fetch_assoc();  
			$stmt = $dbCon->prepare("update landloard_property_problem_tickets set ticket_status=?,accepted_by_employee=?,accepted_by=?,accepting_company_id=? where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("iiiii",$data['ticket_status'],$row['id'],$data['user_id'],$data['company_id'],$data['id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;			
		}
		
		
		function acceptApartmentCommunityTicket($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select id from employees where user_login_id=? and company_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("ii",$data['user_id'],$data['company_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row   = $result->fetch_assoc();  
			$stmt = $dbCon->prepare("update landloard_property_problem_tickets set ticket_status=1,accepted_by_employee=?,accepted_by=?,accepting_company_id=? where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("iii",$row['id'],$data['user_id'],$data['company_id'],$data['id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;			
		}

		function finishApartmentCommunityTicket($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select id from employees where user_login_id=? and company_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("ii",$data['user_id'],$data['company_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row   = $result->fetch_assoc();  
			$stmt = $dbCon->prepare("update landloard_property_problem_tickets set ticket_status=2,accepted_by_employee=?,accepted_by=?,accepting_company_id=? where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("iii",$row['id'],$data['user_id'],$data['company_id'],$data['id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;			
		}
			
		function rejectApartmentCommunityTicket($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select id from employees where user_login_id=? and company_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("ii",$data['user_id'],$data['company_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row   = $result->fetch_assoc();  
			$stmt = $dbCon->prepare("update landloard_property_problem_tickets set ticket_status=3,accepted_by_employee=?,accepted_by=?,accepting_company_id=? where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("iii",$row['id'],$data['user_id'],$data['company_id'],$data['id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;			
		}

		function apartmentCommunityPendingTicket($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$qloud_checkout_id= $this -> encrypt_decrypt('decrypt',$data['check_id']);  
			$stmt = $dbCon->prepare("select room_type_id from hotel_checkout_detail  where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i",$qloud_checkout_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row   = $result->fetch_assoc(); 
			$apartment_id=$row['room_type_id'];
			 
			$stmt = $dbCon->prepare("select landloard_property_problem_tickets.id,problem_description,landloard_property_problem_tickets.ticket_type,ticket_title,ticket_subtitle from landloard_property_problem_tickets left join landloard_ticket_title on landloard_ticket_title.id=landloard_property_problem_tickets.problem_id left join landloard_ticket_subtitle on landloard_ticket_subtitle.id=landloard_property_problem_tickets.subproblem_id where apartment_id=? and ticket_status=0");
			/* bind parameters for markers */
			$stmt->bind_param("i",$apartment_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			 
			while($row = $result->fetch_assoc())
			{
				array_push($org,$row);
			}	

			 
			$stmt = $dbCon->prepare("select landloard_property_problem_tickets.id,problem_description,landloard_property_problem_tickets.ticket_type,ticket_title,ticket_subtitle from landloard_property_problem_tickets left join landloard_ticket_title on landloard_ticket_title.id=landloard_property_problem_tickets.problem_id left join landloard_ticket_subtitle on landloard_ticket_subtitle.id=landloard_property_problem_tickets.subproblem_id where apartment_id=? and ticket_status=3 and accepted_by_employee!=(select id from employees where user_login_id=? and company_id=?)");
			/* bind parameters for markers */
			$stmt->bind_param("iii",$apartment_id,$data['user_id'],$data['company_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			while($row = $result->fetch_assoc())
			{
				array_push($org,$row);
			}	
			 
			$stmt->close();
			$dbCon->close();
			return $org;			
		}	
		
		function apartmentCommunityStartedTicket($data)
		{
			$dbCon = AppModel::createConnection();
			$qloud_checkout_id= $this -> encrypt_decrypt('decrypt',$data['check_id']);  
			$stmt = $dbCon->prepare("select room_type_id from hotel_checkout_detail  where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i",$qloud_checkout_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row   = $result->fetch_assoc(); 
			$apartment_id=$row['room_type_id'];  
			$stmt = $dbCon->prepare("select landloard_property_problem_tickets.id,problem_description,landloard_property_problem_tickets.ticket_type,ticket_title,ticket_subtitle from landloard_property_problem_tickets left join landloard_ticket_title on landloard_ticket_title.id=landloard_property_problem_tickets.problem_id left join landloard_ticket_subtitle on landloard_ticket_subtitle.id=landloard_property_problem_tickets.subproblem_id where apartment_id=? and ticket_status=1 and accepted_by=? and accepting_company_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("iii",$apartment_id,$data['user_id'],$data['company_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				array_push($org,$row);
			}				
			 
			$stmt->close();
			$dbCon->close();
			return $org;			
		}	
		
		function apartmentCommunityCompletedTicket($data)
		{
			$dbCon = AppModel::createConnection();
			$qloud_checkout_id= $this -> encrypt_decrypt('decrypt',$data['check_id']);  
			$stmt = $dbCon->prepare("select room_type_id from hotel_checkout_detail  where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i",$qloud_checkout_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row   = $result->fetch_assoc(); 
			$apartment_id=$row['room_type_id'];
			$stmt = $dbCon->prepare("select landloard_property_problem_tickets.id,problem_description,landloard_property_problem_tickets.ticket_type,ticket_title,ticket_subtitle from landloard_property_problem_tickets left join landloard_ticket_title on landloard_ticket_title.id=landloard_property_problem_tickets.problem_id left join landloard_ticket_subtitle on landloard_ticket_subtitle.id=landloard_property_problem_tickets.subproblem_id where apartment_id=? and ticket_status=2 and accepted_by=? and accepting_company_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("iii",$apartment_id,$data['user_id'],$data['company_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				array_push($org,$row);
			}				
			 
			$stmt->close();
			$dbCon->close();
			return $org;			
		}	
		 
		function apartmentCommunityCancelledTicket($data)
		{
			$dbCon = AppModel::createConnection();
			$qloud_checkout_id= $this -> encrypt_decrypt('decrypt',$data['check_id']);  
			$stmt = $dbCon->prepare("select room_type_id from hotel_checkout_detail  where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i",$qloud_checkout_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row   = $result->fetch_assoc(); 
			$apartment_id=$row['room_type_id'];
			$stmt = $dbCon->prepare("select landloard_property_problem_tickets.id,problem_description,landloard_property_problem_tickets.ticket_type,ticket_title,ticket_subtitle from landloard_property_problem_tickets left join landloard_ticket_title on landloard_ticket_title.id=landloard_property_problem_tickets.problem_id left join landloard_ticket_subtitle on landloard_ticket_subtitle.id=landloard_property_problem_tickets.subproblem_id where apartment_id=? and ticket_status=3 and accepted_by=? and accepting_company_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("iii",$apartment_id,$data['user_id'],$data['company_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				array_push($org,$row);
			}				
			 
			$stmt->close();
			$dbCon->close();
			return $org;			
		}	 

		function apartmentCommunityTicketDetail($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select ticket_status,landloard_property_problem_tickets.id,problem_description,landloard_property_problem_tickets.ticket_type,ticket_title,ticket_subtitle from landloard_property_problem_tickets left join landloard_ticket_title on landloard_ticket_title.id=landloard_property_problem_tickets.problem_id left join landloard_ticket_subtitle on landloard_ticket_subtitle.id=landloard_property_problem_tickets.subproblem_id where landloard_property_problem_tickets.id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();				
			$row['images']=array();
			$stmt = $dbCon->prepare("select * from landloard_property_problem_tickets_images   where landloard_property_problem_tickets_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i",$row['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			while($rowImages = $result->fetch_assoc())
			{
				$filename="../estorecss/".$rowImages['image_path'].".txt"; $value_a=file_get_contents("../estorecss/".$rowImages['image_path'].".txt"); $value_a=str_replace('"','',$value_a); $rowImages['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$rowImages['image_path'].'.jpg' );
				$rowImages['image_path']=str_replace('../','https://www.qloudid.com/',$rowImages['image_path']);
				array_push($row['images'],$rowImages);
			}		

			
			
			$stmt->close();
			$dbCon->close();
			return $row;			
		}	
		
		
		function createCommunityTicket($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select room_type_id from hotel_checkout_detail where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['check_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();	
			if($data['ticket_type']==1)
			{
				$data['community_id']=0;
			}
			
			
			$stmt = $dbCon->prepare("select building_id,company_id,building_type from user_address left join landloard_buildings on landloard_buildings.id=user_address.building_id where user_address.id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i",$row['room_type_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowApartment   = $result->fetch_assoc();  
			
			 
			$stmt = $dbCon->prepare("insert into `landloard_property_problem_tickets`(problem_description,`ticket_type`,`problem_id`,`subproblem_id`,`apartment_id`,`community_id`,`qloud_checkout_id`,`created_on`) values (?,?,?,?,?,?,?,now())");
			/* bind parameters for markers */
			$stmt->bind_param("siiiiii",$data['problem_description'],$data['ticket_type'],$data['ticket_id'],$data['subticket_id'],$row['room_type_id'],$data['community_id'],$data['check_id']);
			$stmt->execute();
			$id=$stmt->insert_id;
			
			if($rowApartment['building_id']!=0 && $rowApartment['building_type']>1)
			{
				$stmt = $dbCon->prepare("update `landloard_property_problem_tickets` set ticket_assined_to=2,accepting_company_id=? where id=?");
				/* bind parameters for markers */
				$stmt->bind_param("ii",$rowApartment['company_id'],$id);
				$stmt->execute();
			}
			
			$stmt->close();
			$dbCon->close();
			return $id;			
		}	
		
			function addCommunityTicketImage($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$data1 = strip_tags($data['ImageData']);
			$data1='url("data:image/png;base64,'.$data1.'")';
			//echo $data; die;
			define('UPLOAD_DIR','../estorecss/'); // image dir path
			$img_name1="new".microtime();
			file_put_contents(UPLOAD_DIR.$img_name1.".txt", $data1);
				 
			$stmt = $dbCon->prepare("insert into `landloard_property_problem_tickets_images`(landloard_property_problem_tickets_id,image_path) values (?,?)");
			/* bind parameters for markers */
			$stmt->bind_param("is",$data['problem_id'],$img_name1);
			$stmt->execute();
			
			
			$stmt->close();
			$dbCon->close();
			return 1;	
			 
			 
		}
		
		
		
		
		
		function getTicketTitleInfo($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select * from landloard_ticket_title where ticket_type=? and id!=14");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['ticket_type']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			array_push($org,$row);		
			}				
			 
			$stmt->close();
			$dbCon->close();
			return $org;			
		}	
		
		
		
		
		function apartmentPrecheckinRequiredList($data)
		{
			$dbCon = AppModel::createConnection();
			$date=strtotime(date('Y-m-d'));
			 
			$stmt = $dbCon->prepare("select * from hotel_checkout_detail where user_id=? and reservation_confirmed=1 and checkin_booking_date>? order by checkin_booking_date");
			/* bind parameters for markers */
			$stmt->bind_param("is", $data['user_id'],$date);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			$stmt = $dbCon->prepare("select count(id) as num from hotel_checkout_invitation_info where hotel_checkout_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$resultCount = $stmt->get_result();
			$rowDependentCount = $resultCount->fetch_assoc();
			 if($row['precheckin_status']==0)
			 {
			$row['guest_adult_left']=$row['guest_adult']-$rowDependentCount['num']-0;	 
			 }
			else
			{
				$row['guest_adult_left']=$row['guest_adult']-$rowDependentCount['num']-1;
			}
			
			$stmt = $dbCon->prepare("select count(id) as num from hotel_checkout_dependent_detail where hotel_checkout_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$resultCount = $stmt->get_result();
			$rowDependentCount = $resultCount->fetch_assoc();
		 
			$row['guest_children_left']=$row['guest_children']-$rowDependentCount['num'];
			
			 if($row['guest_children_left']<0)
			 {
				 $row['guest_children_left']=0;
			 }
			 
			 
			 if($row['guest_children_left']==0 && $row['guest_adult_left']==0)
			 {
				 $stmt = $dbCon->prepare("update hotel_checkout_detail set precheckin_status=1  where id=?");
				/* bind parameters for markers */
				$stmt->bind_param("i", $row['id']);
				$stmt->execute(); 
			 }
				$row['enc']=$this->encrypt_decrypt('encrypt',$row['id']);
				if($row['hotel_property_type']==2)
				{
				$stmt = $dbCon->prepare("select id,property_nickname,address,building_id from user_address where id=?");
				/* bind parameters for markers */
				$stmt->bind_param("i", $row['room_type_id']);
				$stmt->execute();
				$resultRoom = $stmt->get_result();
				$rowRoom = $resultRoom->fetch_assoc();	
				}
				else
				{
				$stmt = $dbCon->prepare("select id,hotel_name as property_nickname from hotel_basic_information where id=?");
				/* bind parameters for markers */
				$stmt->bind_param("i", $row['hotel_id']);
				$stmt->execute();
				$resultRoom = $stmt->get_result();
				$rowRoom = $resultRoom->fetch_assoc();		
				}
			$row['property_nickname']	=	$rowRoom['property_nickname'];
			$row['duration']=date('d M',strtotime($row['checkin_date'])).'-'.date('d M',strtotime($row['checkout_date']));
			$row['guest']=$row['guest_adult'].' adults & '.$row['guest_children'].' children';
			array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
		}
		

		function getPreCheckinStatus($data)
		{
			$dbCon = AppModel::createConnection();
			
			$id= $this -> encrypt_decrypt('decrypt',$data['id']);  
			$stmt = $dbCon->prepare("select precheckin_status,hotel_name,hotel_checkout_detail.room_id,hotel_checkout_detail.id,room_type_id,checkout_booking_date,checkin_booking_date,checkin_date,checkout_date,guest_adult,guest_children,room_name,hotel_room_type.room_type,hotel_checkout_detail.property_id,first_name,last_name,is_approved_cleaning,checked_in from hotel_checkout_detail left join hotel_room_detail on hotel_room_detail.id=hotel_checkout_detail.room_id left join company_hotel_room_type_detail on company_hotel_room_type_detail.id=hotel_checkout_detail.room_type_id left join hotel_room_type on hotel_room_type.id=company_hotel_room_type_detail.room_type left join user_logins on user_logins.id=hotel_checkout_detail.user_id left join hotel_basic_information on hotel_basic_information.property_id=hotel_checkout_detail.property_id where hotel_checkout_detail.id=? and hotel_checkout_detail.user_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("ii", $id,$data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowPrice = $result->fetch_assoc();
			 $org=array();
			 $org['precheckin_status']=$rowPrice['precheckin_status'];
			if(empty($rowPrice))
			{
			$org['guest_adult']=0;
			$org['guest_children']=0;
			$org['guest_adult_left']=0;
			$org['guest_children_left']=0;
			$org['name']='-';
			$org['result']=0;
			$org['booking_dates']='-';
			$org['hotel_name']='-';
			$org['guests']='-';
			$org['id']=$data['id'];
			$org['checkid']=$rowPrice['id'];
			$stmt->close();
			$dbCon->close();
			return $org;
			}
			$stmt = $dbCon->prepare("select count(id) as num from hotel_checkout_invitation_info where hotel_checkout_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $id);
			$stmt->execute();
			$resultCount = $stmt->get_result();
			$rowDependentCount = $resultCount->fetch_assoc();
			 
			$rowPrice['guest_adult_left']=$rowPrice['guest_adult']-$rowDependentCount['num']-1;
			
			$stmt = $dbCon->prepare("select count(id) as num from hotel_checkout_dependent_detail where hotel_checkout_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $id);
			$stmt->execute();
			$resultCount = $stmt->get_result();
			$rowDependentCount = $resultCount->fetch_assoc();
		 
			$rowPrice['guest_children_left']=$rowPrice['guest_children']-$rowDependentCount['num'];
			 if($rowPrice['guest_children_left']<0)
			 {
				 $rowPrice['guest_children_left']=0;
			 }	
			$totalLeft=$rowPrice['guest_adult_left']+$rowPrice['guest_children_left'];
			 
			$org=array();
			if(empty($rowPrice))
			{
			$org['guest_adult']=$rowPrice['guest_adult'];
			$org['guest_children']=$rowPrice['guest_children'];
			$org['guest_adult_left']=$rowPrice['guest_adult_left'];
			$org['guest_children_left']=$rowPrice['guest_children_left'];
			$org['name']='-';
			$org['result']=0;
			$org['booking_dates']='-';
			$org['hotel_name']='-';
			$org['guests']='-';
			$org['id']=$data['id'];
			$org['checkid']=$rowPrice['id'];
			$stmt->close();
			$dbCon->close();
			return $org;
			}
			else if($rowPrice['checked_in']>0)
			{
			$org['guest_adult']=$rowPrice['guest_adult'];
			$org['guest_children']=$rowPrice['guest_children'];
			$org['guest_adult_left']=$rowPrice['guest_adult_left'];
			$org['guest_children_left']=$rowPrice['guest_children_left'];
			$org['name']=$rowPrice['first_name'].' '.$rowPrice['last_name'];
			$org['result']=3;
			$org['booking_dates']=date('d M',$rowPrice['checkin_booking_date']).'-'.date('d M',$rowPrice['checkout_booking_date']);
			$org['hotel_name']=$rowPrice['hotel_name'];
			$org['guests']=$rowPrice['guest_adult'].' Adults ,'.$rowPrice['guest_children'].' child';
			$org['id']=$data['id'];
			$org['checkid']=$rowPrice['id'];
			$stmt->close();
			$dbCon->close();
			return $org;
			}
			else if($rowPrice['precheckin_status']==1)
			{
				
			
			if($totalLeft==0)
			{
			$org['guest_adult']=$rowPrice['guest_adult'];
			$org['guest_children']=$rowPrice['guest_children'];
			$org['guest_adult_left']=$rowPrice['guest_adult_left'];
			$org['guest_children_left']=$rowPrice['guest_children_left'];
			$org['name']=$rowPrice['first_name'].' '.$rowPrice['last_name'];
			$org['result']=3;
			$org['booking_dates']=date('d M',$rowPrice['checkin_booking_date']).'-'.date('d M',$rowPrice['checkout_booking_date']);
			$org['hotel_name']=$rowPrice['hotel_name'];
			$org['guests']=$rowPrice['guest_adult'].' Adults ,'.$rowPrice['guest_children'].' child';
			$org['id']=$data['id'];
			$org['checkid']=$rowPrice['id'];
			$stmt->close();
			$dbCon->close();
			return $org;	
			}			
			$org['guest_adult']=$rowPrice['guest_adult'];
			$org['guest_children']=$rowPrice['guest_children'];
			$org['guest_adult_left']=$rowPrice['guest_adult_left'];
			$org['guest_children_left']=$rowPrice['guest_children_left'];
			$org['name']=$rowPrice['first_name'].' '.$rowPrice['last_name'];
			$org['result']=1;
			$org['booking_dates']=date('d M',$rowPrice['checkin_booking_date']).'-'.date('d M',$rowPrice['checkout_booking_date']);
			$org['hotel_name']=$rowPrice['hotel_name'];
			$org['guests']=$rowPrice['guest_adult'].' Adults ,'.$rowPrice['guest_children'].' child';
			$org['id']=$data['id'];
			$org['checkid']=$rowPrice['id'];
			$stmt->close();
			$dbCon->close();
			return $org;
			}
			else
			{
			$org['guest_adult']=$rowPrice['guest_adult'];
			$org['guest_children']=$rowPrice['guest_children'];
			$org['guest_adult_left']=$rowPrice['guest_adult_left'];
			$org['guest_children_left']=$rowPrice['guest_children_left'];
			$org['name']=$rowPrice['first_name'].' '.$rowPrice['last_name'];
			$org['result']=2;
			$org['booking_dates']=date('d M',$rowPrice['checkin_booking_date']).'-'.date('d M',$rowPrice['checkout_booking_date']);
			$org['hotel_name']=$rowPrice['hotel_name'];
			$org['guests']=$rowPrice['guest_adult'].' Adults ,'.$rowPrice['guest_children'].' child';
			$org['id']=$data['id'];
			$org['checkid']=$rowPrice['id'];
			$stmt->close();
			$dbCon->close();
			return $org;
			}
		
		}	
		
		
		function updatePreCheckinStatus($data)
		{
			$dbCon = AppModel::createConnection();
			
			$id= $this -> encrypt_decrypt('decrypt',$data['id']);  
			
			$stmt = $dbCon->prepare("select precheckin_status,hotel_name,hotel_checkout_detail.room_id,hotel_checkout_detail.id,room_type_id,checkout_booking_date,checkin_booking_date,checkin_date,checkout_date,guest_adult,guest_children,room_name,hotel_room_type.room_type,hotel_checkout_detail.property_id,first_name,last_name,is_approved_cleaning,checked_in from hotel_checkout_detail left join hotel_room_detail on hotel_room_detail.id=hotel_checkout_detail.room_id left join company_hotel_room_type_detail on company_hotel_room_type_detail.id=hotel_checkout_detail.room_type_id left join hotel_room_type on hotel_room_type.id=company_hotel_room_type_detail.room_type left join user_logins on user_logins.id=hotel_checkout_detail.user_id left join hotel_basic_information on hotel_basic_information.property_id=hotel_checkout_detail.property_id where hotel_checkout_detail.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowPrice = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select count(id) as num from hotel_checkout_invitation_info where hotel_checkout_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $id);
			$stmt->execute();
			$resultCount = $stmt->get_result();
			$rowDependentCount = $resultCount->fetch_assoc();
			 
			$rowPrice['guest_adult_left']=$rowPrice['guest_adult']-$rowDependentCount['num']-1;
			
			$stmt = $dbCon->prepare("select count(id) as num from hotel_checkout_dependent_detail where hotel_checkout_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $id);
			$stmt->execute();
			$resultCount = $stmt->get_result();
			$rowDependentCount = $resultCount->fetch_assoc();
		 
			$rowPrice['guest_children_left']=$rowPrice['guest_children']-$rowDependentCount['num'];
			 if($rowPrice['guest_children_left']<0)
			 {
				 $rowPrice['guest_children_left']=0;
			 }	
			 
			 if($rowPrice['guest_children_left']==0 && $rowPrice['guest_adult_left']==0)
			 {
			$stmt = $dbCon->prepare("update hotel_checkout_detail set precheckin_status=1  where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $id);
			$stmt->execute(); 
			 }
			 else
			 {
			 $stmt = $dbCon->prepare("update hotel_checkout_detail set precheckin_status=2  where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $id);
			$stmt->execute();
			 }
			 $org=array();
			 if($rowPrice['guest_adult']=='' || $rowPrice['guest_adult']==null)
				 $org['guest_adult']=0;
			 else
			$org['guest_adult']=$rowPrice['guest_adult'];
			
			if($rowPrice['guest_children']=='' || $rowPrice['guest_children']==null)
			$org['guest_children']=0;
			else
			$org['guest_children']=$rowPrice['guest_children'];
			$org['guest_adult_left']=$rowPrice['guest_adult_left'];
			$org['guest_children_left']=$rowPrice['guest_children_left'];
			$org['total_left']=$rowPrice['guest_adult_left']+$rowPrice['guest_children_left'];
			$org['result']=1;
			$stmt->close();
			$dbCon->close();
			return $org;
			  
		}	

		
		function getUserActiveStatus($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select count(id) as num from user_cards where user_login_id = ?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCard    = $result->fetch_assoc();	
			
			
			$stmt = $dbCon->prepare("select count(id) as num from user_address where user_id = ?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowAdd    = $result->fetch_assoc();
			
			
			$stmt = $dbCon->prepare("select count(id) as num from user_identification where user_id = ? and identification_type=1 and is_completed=1");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			$org=array();
			$org['cards']=$rowCard['num'];
			$org['address']=$rowAdd['num'];
			$org['passport']=$rowId['num'];
			
			$stmt = $dbCon->prepare("select id from user_identification where user_id = ? and identification_type=1 and is_completed=0");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			
			if(empty($rowId))
			{
			$org['passport_id']=0;	
			}
			else
			{
			$org['passport_id']=$rowId['id'];	
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		
		}	



		function getUserStatus()
		{
				$dbCon = AppModel::createConnection();
			 
				$stmt = $dbCon->prepare("select count(id) as num from user_address where user_id=?");
				
				$stmt->bind_param("i",$_POST['user_id']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$row = $result1->fetch_assoc();	
				if($row['num']==0)
				{
				$stmt->close();
				$dbCon->close();
				return 0;	
				}					
				$stmt = $dbCon->prepare("select count(id) as num from user_cards where user_login_id=?");
				$stmt->bind_param("i",$_POST['user_id']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$row = $result1->fetch_assoc();
				if($row['num']==0)
				{
				$stmt->close();
				$dbCon->close();
				return 0;	
				}
				
				$stmt = $dbCon->prepare("select count(id) as num from user_identification where user_id=?");
				
				$stmt->bind_param("i",$_POST['user_id']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$row = $result1->fetch_assoc();
				$stmt->close();
				$dbCon->close();
				return $row['num'];
		
		}
		
		
		function getUserStatusCompanyRequirement($data)
		{
				$dbCon = AppModel::createConnection();
				$stmt = $dbCon->prepare("select identificator_info from signup_required_fields_info where company_id=(select company_id from oauth_clients where client_id=?)");
				
				$stmt->bind_param("s",$data['id']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$rowClient = $result1->fetch_assoc();	
				 
				
				$stmt = $dbCon->prepare("select count(id) as num from user_address where user_id=?");
				
				$stmt->bind_param("i",$data['user_id']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$row = $result1->fetch_assoc();	
				if($row['num']==0)
				{
				$stmt->close();
				$dbCon->close();
				return 0;	
				}					
				$stmt = $dbCon->prepare("select count(id) as num from user_cards where user_login_id=?");
				$stmt->bind_param("i",$data['user_id']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$row = $result1->fetch_assoc();
				if($row['num']==0)
				{
				$stmt->close();
				$dbCon->close();
				return 0;	
				}
				if($rowClient['identificator_info']==1)
				{
				$stmt = $dbCon->prepare("select count(id) as num from user_identification where user_id=? and is_completed=1");
				
				$stmt->bind_param("i",$data['user_id']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$row = $result1->fetch_assoc();
				$stmt->close();
				$dbCon->close();
				return $row['num'];	
				}
				else
				{
				$stmt->close();
				$dbCon->close();
				return 1;	
				}
				
		
		}
		
		
		function informEmployee($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select companies.company_name,company_id,location_id,inviting_employee,first_name,visitor_email as email,employee_invited_visitor.country_id,phone_number from employee_invited_visitor left join companies on companies.id=employee_invited_visitor.company_id where employee_invited_visitor.id = ?");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowVisitInfo = $result->fetch_assoc();
			 
			$company_id=$rowVisitInfo['company_id'];
			
			$stmt = $dbCon->prepare("select company_name,exposed_times from whitelist_company where company_id = ? and status=1");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("i", $company_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row_company = $result->fetch_assoc();
			$exposed=$row_company['exposed_times'];
			
			$stmt = $dbCon->prepare("select email,concat_ws(' ',first_name,last_name) as name from employees where id=?");
			/* bind parameters for markers */
			
			$stmt->bind_param("i",$rowVisitInfo['inviting_employee']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			 $data['booked']='Drop in';
			$stmt = $dbCon->prepare("insert into company_visitors (booked,company_id,employee_id,name,last_name,email,country,phone_number,created_on,visitor_user_id,meeting_id,is_company,visitor_profile_id)values (?, ?, ?, ?, ?, ?, ?, ?, now(),?,?,?,?)");
			/* bind parameters for markers */
			
			$stmt->bind_param("siisssisiiii",$data['booked'],$company_id,$rowVisitInfo['inviting_employee'],$rowVisitInfo['first_name'],$rowVisitInfo['last_name'],$rowVisitInfo['email'],$rowVisitInfo['country_code'],$rowVisitInfo['phone_number'],$data['user_id'],$data['id'],$data['is_company'],$data['visitor_profile_id']);
			if($stmt->execute())
			{
		
				$id=$stmt->insert_id;
				 
				$to      = $row['email'];
				
				$subject = "Your visitor is here";
				
				$emailContent ='';
				try {
				 sendEmail($subject, $to, $emailContent);
						}

					catch(Exception $e) {
						$to      = 'kowaken.ghirmai@gmail.com';
						sendEmail($subject, $to, $emailContent);
					   
					}
				catch (Error $e) {
	 
							}
				$exposed=$exposed+1;
				
				$stmt = $dbCon->prepare("select country_code,phone_number,passport_image,concat_ws(' ',first_name,last_name) as name  from user_profiles left join phone_country_code on phone_country_code.country_name=user_profiles.country_phone left join user_logins on user_logins.id=user_profiles.user_logins_id where user_profiles.user_logins_id=(select user_login_id from employees where id=?)");
				
				$stmt->bind_param("i",$rowVisitInfo['inviting_employee']);
				$stmt->execute();
				$result = $stmt->get_result();
				$row = $result->fetch_assoc();
				
				$phone='+'.trim($row['country_code']).''.trim($row['phone_number']);
				$subject='Your visitor is here';
				$to=$phone;
				if($data['is_company']==1)
				{
				$stmt = $dbCon->prepare("select company_name  from companies where id=?");
				
				$stmt->bind_param("i",$data['visitor_profile_id']);
				$stmt->execute();
				$result = $stmt->get_result();
				$rowDetail = $result->fetch_assoc();	
				$html=$rowVisitInfo['first_name'].' '.$rowVisitInfo['last_name'].' from '.$rowDetail['company_name'].' is here to meet you at '.$row_company['company_name'];
				}
				else
				{
				$html=$rowVisitInfo['first_name'].' '.$rowVisitInfo['last_name'].' is here to meet you at '.$row_company['company_name'];	
				}
				//echo $html.' '.$to;
				$res=sendSms($subject, $to, $html);
				$res=json_decode($res,true);
				
				if($res['status']=="OK")
				{
				$exposed=$exposed+1;
				}
				
				$stmt = $dbCon->prepare("update whitelist_company set exposed_times=? where company_id = ? and status=1");
				/* bind parameters for markers */
				$stmt->bind_param("ii", $exposed,$company_id);
				$stmt->execute();
				
				
				$enc_id=$this->encrypt_decrypt('encrypt',$id);
				$url='https://www.qloudid.com/company/index.php/Company/confirmVisit/'.$enc_id;
				$surl=getShortUrl($url);
				
				$stmt = $dbCon->prepare("select country_code,phone_number from company_visitors left join phone_country_code on phone_country_code.country_name=company_visitors.country where company_visitors.id=?");
				
				$stmt->bind_param("i",$id);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$row_phone = $result1->fetch_assoc();
				
				$phone='+'.trim($row_phone['country_code']).''.trim($row_phone['phone_number']);
				$subject='Confirm Your visit';
				$to=$phone;
				$html='Hej '.$rowVisitInfo['first_name'].', Jag r dr alldeles strax.'.$surl;
				//echo $html.' '.$to;
				$res=sendSms($subject, $to, $html);
				$stmt->close();
				$dbCon->close();
				return 1;
			}
		}
		
		function invitedVisitorsMeetingList($data)
		{
			$dbCon = AppModel::createConnection();
			$location_id=$this -> encrypt_decrypt('decrypt',$data['location_id']);
			
			$stmt = $dbCon->prepare("select country_of_residence,phone_number from user_profiles left join user_logins on user_logins.id=user_profiles.user_logins_id where user_profiles.user_logins_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			   
			$today=strtotime(date('Y-m-d'));
			$org=array();
			$stmt = $dbCon->prepare("select concat_ws(' ',employees.first_name,employees.last_name) as name,employee_invited_visitor.id,visiting_date,visiting_time,visiting_address,d_port_number from employee_invited_visitor left join employees on employees.id=employee_invited_visitor.inviting_employee left join property_location on property_location.id=employee_invited_visitor.location_id where employee_invited_visitor.location_id=? and country_id=? and employee_invited_visitor.phone_number=? and visitdate_id=? and employee_invited_visitor.id not in (select meeting_id from company_visitors where visitor_user_id=?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("iissi", $location_id,$row['country_of_residence'],$row['phone_number'],$today,$data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			while($rowLocation = $result->fetch_assoc())
			{
					$rowLocation['address']=html_entity_decode($rowLocation['visiting_address'],ENT_NOQUOTES, 'UTF-8').' '.$rowLocation['d_port_number'];
					array_push($org,$rowLocation);
				
				 
			}
			 
			$stmt->close();
			$dbCon->close();
			return $org;
				 
		}
		
		function checkedInMeetingList($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select country_of_residence,phone_number from user_profiles left join user_logins on user_logins.id=user_profiles.user_logins_id where user_profiles.user_logins_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			date_default_timezone_set("Europe/Stockholm");  
			$today=strtotime(date('Y-m-d'));
			$org=array();
			$stmt = $dbCon->prepare("select concat_ws(' ',employees.first_name,employees.last_name) as name,employee_invited_visitor.id,visiting_date,visiting_time,visiting_address,d_port_number,companies.company_name from employee_invited_visitor left join employees on employees.id=employee_invited_visitor.inviting_employee left join property_location on property_location.id=employee_invited_visitor.location_id left join companies on companies.id=property_location.company_id where visitdate_id=?  and employee_invited_visitor.id in (select meeting_id from company_visitors where visitor_user_id=?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("si",$today,$data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			while($rowLocation = $result->fetch_assoc())
			{
					$rowLocation['company_name']=html_entity_decode($rowLocation['company_name'],ENT_NOQUOTES, 'UTF-8');
					$rowLocation['address']=html_entity_decode($rowLocation['visiting_address'],ENT_NOQUOTES, 'UTF-8').' '.$rowLocation['d_port_number'];
					array_push($org,$rowLocation);
			}
			 
			$stmt->close();
			$dbCon->close();
			return $org;
				 
		}
		
		
		function inviteVisitor($data)
		{
			$dbCon = AppModel::createConnection();
			$company_id= $data['company_id'];
			
			$stmt = $dbCon->prepare("select location_id,visiting_address from user_company_profile left join property_location on property_location.id=user_company_profile.location_id where user_company_profile.user_login_id=? and user_company_profile.company_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("ii", $data['user_id'],$data['company_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowLocation = $result->fetch_assoc();
			$location_id=$this -> encrypt_decrypt('encrypt',$rowLocation['location_id']);
			
			$stmt = $dbCon->prepare("select employees.id,concat_ws('',first_name,last_name) as name,company_name from employees left join companies on companies.id=employees.company_id where employees.user_login_id=? and company_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("ii", $data['user_id'],$data['company_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$employee_id= $row['id'];
				$stmt = $dbCon->prepare("select country_code from phone_country_code where country_name=(select country_name from country where id=? )");
				
				/* bind parameters for markers */
				$stmt->bind_param("s", $data['country_id']);
				$stmt->execute();
				$result_phone = $stmt->get_result();
				$row_phone = $result_phone->fetch_assoc();
				$mdate=date('Y-m-d',strtotime($data['vdate']));
				$today=strtotime(date('Y-m-d'));
				$vdate_id=strtotime($data['vdate']);
				if($vdate_id<$today)
				{
					$vdate_id=$today;
					$mdate=date('Y-m-d');
				}
				
				$data['vrepeat']=1;
				$stmt = $dbCon->prepare("insert into employee_invited_visitor (company_id,inviting_employee,first_name,visitor_email,visiting_date,visiting_time,created_on,repeating_cycle,country_id,phone_number,location_id ,visitdate_id) values ( ?, ?, ?, ?, ?, ?, now(), ?, ?,?,?,?)");
			/* bind parameters for markers */
			
			$stmt->bind_param("iissssiisis",$company_id,$employee_id,htmlentities($data['name'],ENT_NOQUOTES, 'ISO-8859-1'),$data['email'],$mdate,$data['vtime'],$data['vrepeat'],$data['country_id'],$data['phone'],$rowLocation['location_id'],$vdate_id);
				$stmt->execute();
				$id=$stmt->insert_id;
				 
				$url="https://www.qloudid.com/public/index.php/VisitorsQR/visitorFrontDesk/".$location_id;	
				if(!empty($data['email']))
				{
				$to      = $data['email'];
				$subject = "Meeting Invitation received";
				$emailContent ='<html>
    <head>
        <title>Reservation confirmed</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <style type="text/css">
            /* GT AMERICA */

            @font-face {
                font-display: fallback;
                font-family: "GT America Regular";
                font-weight: 400;
                src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"),
                    url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
            }

            @font-face {
                font-display: fallback;
                font-family: "GT America Medium";
                font-weight: 600;
                src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"),
                    url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
            }

            @font-face {
                font-display: fallback;
                font-family: "GT America Condensed Bold";
                font-weight: 700;
                src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"),
                    url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
            }

            /* CLIENT-SPECIFIC RESET */

            body,
            table,
            td,
            a {
                -webkit-text-size-adjust: 100%;
                -ms-text-size-adjust: 100%;
            }

            /* Prevent WebKit and Windows mobile changing default text sizes */

            table,
            td {
                mso-table-lspace: 0pt;
                mso-table-rspace: 0pt;
            }

            /* Remove spacing between tables in Outlook 2007 and up */

            img {
                -ms-interpolation-mode: bicubic;
            }

            /* Allow smoother rendering of resized image in Internet Explorer */

            .im {
                color: inherit !important;
            }

            /* DEVICE-SPECIFIC RESET */

            a[x-apple-data-detectors] {
                color: inherit !important;
                text-decoration: none !important;
                font-size: inherit !important;
                font-family: inherit !important;
                font-weight: inherit !important;
                line-height: inherit !important;
            }

            /* iOS BLUE LINKS */

            /* RESET */

            img {
                border: 0;
                height: auto;
                line-height: 100%;
                outline: none;
                text-decoration: none;
                display: block;
            }

            table {
                border-collapse: collapse;
            }

            table td {
                border-collapse: collapse;
                display: table-cell;
            }

            body {
                height: 100% !important;
                margin: 0 !important;
                padding: 0 !important;
                width: 100% !important;
            }

            /* BG COLORS */

            .mainTable {
                background-color: #f0f0f0;
            }

            .mainTable--hospitality {
                background-color: #f7f2ed;
            }

            html {
                background-color: #f0f0f0;
            }

            /* VARIABLES */

            .bg-white {
                background-color: white;
            }

            .hr {
                /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
                background-color: #d3d3d8;
                border-collapse: collapse;
                mso-table-lspace: 0pt;
                mso-table-rspace: 0pt;
                mso-line-height-rule: exactly;
                line-height: 1px;
            }

            .textAlignLeft {
                text-align: left !important;
            }

            .textAlignRight {
                text-align: right !important;
            }

            .textAlignCenter {
                text-align: center !important;
            }

            .mt1 {
                margin-top: 6px;
            }

            .list {
                padding-left: 18px;
                margin: 0;
            }

            /* TYPOGRAPHY */

            body {
                font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 400;
                color: #4f4f65;
                -webkit-font-smoothing: antialiased;
                -ms-text-size-adjust: 100%;
                -moz-osx-font-smoothing: grayscale;
                font-smoothing: always;
                text-rendering: optimizeLegibility;
            }

            .h1 {
                font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 700;
                vertical-align: middle;
                font-size: 36px;
                line-height: 42px;
            }

            .h2 {
                font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 600;
                vertical-align: middle;
                font-size: 16px;
                line-height: 24px;
            }

            .text {
                font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 400;
                font-size: 16px;
                line-height: 21px;
            }

            .text-list {
                font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 400;
                font-size: 16px;
                line-height: 25px;
            }

            .textSmall {
                font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 400;
                font-size: 14px;
            }

            .text-xsmall {
                font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
                font-size: 11px;
                text-transform: uppercase;
                line-height: 22px;
                letter-spacing: 1px;
            }

            .text-bold {
                font-weight: 600;
            }

            .text-link {
                text-decoration: underline;
            }

            .text-linkNoUnderline {
                text-decoration: none;
            }

            .text-strike {
                text-decoration: line-through;
            }

            /* FONT COLORS */

            .textColorDark {
                color: #23233e;
            }

            .textColorNormal {
                color: #4f4f65;
            }

            .textColorBlue {
                color: #2020c0;
            }

            .textColorGrayDark {
                color: #7b7b8b;
            }

            .textColorGray {
                color: #a5a8ad;
            }

            .textColorWhite {
                color: #ffffff;
            }

            .textColorRed {
                color: #df3232;
            }

            /* BUTTON */

            .Button-primary-wrapper {
                border-radius: 3px;
                background-color: #2020c0;
            }

            .Button-primary {
                font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
                border-radius: 3px;
                border: 1px solid #2020c0;
                color: #ffffff;
                display: block;
                font-size: 16px;
                font-weight: 600;
                padding: 18px;
                text-decoration: none;
            }

            .Button-secondary-wrapper {
                border-radius: 3px;
                background-color: #ffffff;
            }

            .Button-secondary {
                font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
                border-radius: 3px;
                border: 1px solid #2020c0;
                color: #2020c0;
                display: block;
                font-size: 16px;
                font-weight: 600;
                padding: 18px;
                text-decoration: none;
            }

            /* LAYOUT */

            .Content-container {
                padding-left: 60px;
                padding-right: 60px;
            }

            .Content-container--main {
                padding-top: 54px;
                padding-bottom: 60px;
            }

            .Content {
                width: 580px;
                margin: 0 auto;
            }

            .wrapper {
                max-width: 600px;
            }

            .section {
                padding: 24px 0px;
                border-bottom: 1px solid #d3d3d8;
            }

            .section--noBorder {
                padding: 24px 0px 0;
            }

            .section--last {
                padding: 24px 0px;
            }

            .message {
                background-color: #f4f4f5;
                padding: 18px;
            }

            .card {
                border: 1px solid #d3d3d8;
                padding: 18px;
            }

            /* HEADER */

            .header-tockLogoImage {
                display: block;
                color: #f0f0f0;
            }

            .header-heroImage {
                padding-bottom: 24px;
            }

            /* PREHEADER */

            .preheader {
                display: none;
                font-size: 1px;
                color: #ffffff;
                line-height: 1px;
                max-height: 0px;
                max-width: 0px;
                opacity: 0;
                overflow: hidden;
            }

            /* BANNER */

            .notice {
                padding: 12px;
                background: #23233e;
                color: #ffffff;
                display: block;
                font-size: 14px;
                font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 600;
            }

            /* INTRO */

            .section--intro {
                padding-bottom: 48px;
            }

            /* BOOKING INFO */

            .business-logo__container {
                width: 48px;
                height: 48px;
                border-radius: 3px;
                border: 1px solid #d3d3d8;
                overflow: hidden;
            }

            .business-logo__image {
                border: 1px solid transparent;
                border-radius: 3px;
                width: 48px;
                height: 48px;
                display: block;
            }

            .business-address--address {
                width: 50%;
            }

            .business-address--map {
                width: 50%;
            }

            .business-address--map-image {
                width: 100%;
            }

            /* MOBILE TICKETS */

            .mobile-ticket--description {
                width: 65%;
                margin-top: 12px;
                margin-right: 5%;
            }

            .mobile-ticket--code {
                width: 30%;
            }

            .mobile-ticket--code-image {
                width: 100%;
            }

            /* RESERVATION ACTIONS */

            .linksTable {
                border-bottom: 1px solid #d3d3d8;
            }

            .linksTableRow {
                padding: 24px 12px;
            }

            .actions-icon {
                vertical-align: middle;
            }

            .actions-text {
                vertical-align: middle;
            }

            /* RECEIPT */

            .receipt__container {
                border: 1px solid #d3d3d8;
                padding: 24px;
            }

            .receipt__row {
                border-top: 1px solid #d3d3d8;
            }

            /* FEEDBACK ICONS */

            .feedback-link {
                border: 1px solid #d4d5da;
                border-radius: 3px;
                display: inline-block;
                width: calc(32% - 2px);
                padding: 10px 0;
            }

            .feedback-link-bumper {
                display: inline-block;
                width: 1%;
            }

            .feedback-link img {
                height: 50px;
                width: 50px;
            }

            /* SOCIAL ICONS */

            .social-link {
                display: inline-block;
                width: auto;
            }

            .social-link-text {
                padding: 14px 24px 14px 14px;
            }

            /* TABLET STYLES */

            @media screen and (max-width: 648px) {
                /* DEVICE-SPECIFIC RESET */
                div[style*="margin: 16px 0;"] {
                    margin: 0 !important;
                }
                /* ANDROID CENTER FIX */
                /* LAYOUT */
                .wrapper {
                    width: 100% !important;
                    max-width: 100% !important;
                }
                .Content {
                    width: 90% !important;
                }
                .Content-container {
                    padding-left: 36px !important;
                    padding-right: 36px !important;
                }
                .Content-container--main {
                    padding-top: 30px !important;
                    padding-bottom: 42px !important;
                }
                .responsiveTable {
                    width: 100% !important;
                }
                /* RESERVATION ACTIONS */
                .linksTableRow {
                    padding-left: 0 !important;
                    padding-right: 0 !important;
                    padding-top: 12px !important;
                    padding-bottom: 12px !important;
                }
                .linksTableRow--borderRight {
                    border-right: none !important;
                    padding-left: 0 !important;
                    padding-right: 0 !important;
                }
                /* FEEDBACK LINK */
                .feedback-link img {
                    height: 38px !important;
                    width: 38px !important;
                }
            }

            /* MOBILE STYLES */

            @media screen and (max-width: 480px) {
                /* TYPOGRAPHY */
                .h1 {
                    font-size: 30px !important;
                    line-height: 30px !important;
                }
                .text {
                    font-size: 16px !important;
                    line-height: 22px !important;
                }
                /* BUTTON */
                .mobile-buttonContainer {
                    width: 100% !important;
                }
                /* LAYOUT */
                .Content {
                    width: 100% !important;
                }
                .Content-container {
                    padding-left: 18px !important;
                    padding-right: 18px !important;
                }
                .Content-container--main {
                    padding-top: 24px !important;
                    padding-bottom: 30px !important;
                }
                .section {
                    padding: 18px 0 !important;
                }
                .section--last {
                    padding: 18px 0 !important;
                }
                .header {
                    padding: 0 18px !important;
                }
                .business-address--address {
                    width: 100% !important;
                }
                .business-address--map {
                    margin-top: 30px !important;
                    width: 100% !important;
                }
                .mobile-ticket--description {
                    width: 100% !important;
                    margin-top: 0px !important;
                }
                .mobile-ticket--code {
                    margin-top: 30px !important;
                    margin-left: 0;
                    width: 100% !important;
                }
                /* RECEIPT */
                .receipt__container {
                    padding: 12px !important;
                }
                /* SOCIAL ICONS */
                .social-link {
                    display: block !important;
                    width: 100% !important;
                    border-bottom: 1px solid #d3d3d8 !important;
                }
                /* INTRO */
                .section--intro {
                    padding-top: 18px !important;
                    padding-bottom: 18px !important;
                }
            }
        </style>

        <!--[if mso]>
            <style type="text/css">
                .h1 {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-weight: 700 !important;
                    vertical-align: middle !important;
                    font-size: 36px !important;
                    mso-line-height-rule: exactly;
                    line-height: 42px !important;
                }
                .h2 {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-weight: 600 !important;
                    vertical-align: middle !important;
                    font-size: 16px !important;
                    mso-line-height-rule: exactly;
                    line-height: 24px !important;
                }
                .text {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-weight: 400 !important;
                    font-size: 16px !important;
                    mso-line-height-rule: exactly;
                    line-height: 21px !important;
                }
                .text-list {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-weight: 400 !important;
                    font-size: 16px !important;
                    mso-line-height-rule: exactly;
                    line-height: 25px !important;
                }
                .textSmall {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-weight: 400 !important;
                    font-size: 14px !important;
                }
                .text-xsmall {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-size: 11px !important;
                    text-transform: uppercase !important;
                    mso-line-height-rule: exactly;
                    line-height: 22px !important;
                    letter-spacing: 1px !important;
                }
                .text-bold {
                    font-weight: 600 !important;
                }
                .text-link {
                    text-decoration: underline !important;
                }
                .text-linkNoUnderline {
                    text-decoration: none !important;
                }
                .text-strike {
                    text-decoration: line-through !important;
                }
                .textColorDark {
                    color: #23233e !important;
                }
                .textColorNormal {
                    color: #4f4f65 !important;
                }
                .textColorBlue {
                    color: #2020c0 !important;
                }
                .textColorGray {
                    color: #a5a8ad !important;
                }
                .textColorWhite {
                    color: #ffffff !important;
                }
                .Button-primary {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    border-radius: 3px !important;
                    border: 1px solid #2020c0 !important;
                    color: #ffffff !important;
                    display: block !important;
                    font-size: 16px !important;
                    font-weight: 600 !important;
                    padding: 18px !important;
                    text-decoration: none !important;
                }
                .Button-secondary {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    border-radius: 3px !important;
                    border: 1px solid #2020c0 !important;
                    color: #2020c0 !important;
                    display: block !important;
                    font-size: 16px !important;
                    font-weight: 600 !important;
                    padding: 18px !important;
                    text-decoration: none !important;
                }
            </style>
        <![endif]-->
        <!-- HIDDEN PREHEADER TEXT -->
    </head>
    <body>
        <div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;"></div>
        <table
            border="0"
            cellpadding="0"
            cellspacing="0"
            width="100%"
            class="mainTable"
            style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: rgb(240, 240, 240);"
        >
            <tbody>
                <tr>
                    <td
                        style="
                            display: none !important;
                            visibility: hidden;
                            mso-hide: all;
                            font-size: 1px;
                            color: #ffffff;
                            line-height: 1px;
                            max-height: 0px;
                            max-width: 0px;
                            opacity: 0;
                            overflow: hidden;
                            -webkit-text-size-adjust: 100%;
                            -ms-text-size-adjust: 100%;
                            mso-table-lspace: 0pt;
                            mso-table-rspace: 0pt;
                            border-collapse: collapse;
                            display: table-cell;
                        "
                    >
                        We are thrilled that you will be joining us. If yo...
                    </td>
                    <!-- HEADER -->
                </tr>
                <tr>
                    <td align="center" class="header" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
                        <table
                            border="0"
                            cellpadding="0"
                            cellspacing="0"
                            width="100%"
                            class="Content"
                            style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 580px; margin: 0 auto;"
                        >
                            <tbody>
                                <tr class="spacer">
                                    <td
                                        height="12px"
                                        colspan="2"
                                        style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"
                                    >
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td
                                        height="12px"
                                        colspan="2"
                                        style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"
                                    >
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr>
                                    <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        <h1 style="font-size: 33px; font-weight: 800; line-height: 30px;">Dstricts</h1>
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td
                                        height="12px"
                                        colspan="2"
                                        style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"
                                    >
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td
                                        height="12px"
                                        colspan="2"
                                        style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"
                                    >
                                        &nbsp;
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <!--[if (gte mso 9)|(IE)]>
    </td>
    </tr>
    </table>
    <![endif]-->
                    </td>
                </tr>
                <!-- CONTENT -->
                <tr>
                    <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
                        <table
                            border="0"
                            cellpadding="0"
                            cellspacing="0"
                            width="100%"
                            class="Content bg-white"
                            style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: white; width: 580px; margin: 0 auto;"
                        >
                            <tbody>
                                <tr>
                                    <td
                                        class="Content-container Content-container--main text textColorNormal"
                                        style="
                                            -webkit-text-size-adjust: 100%;
                                            -ms-text-size-adjust: 100%;
                                            mso-table-lspace: 0pt;
                                            mso-table-rspace: 0pt;
                                            border-collapse: collapse;
                                            display: table-cell;
                                            font-family: GT America Regular, Roboto, Helvetica, Arial, sans-serif;
                                            font-weight: 400;
                                            font-size: 16px;
                                            line-height: 21px;
                                            color: rgb(79, 79, 101);
                                            padding-left: 60px;
                                            padding-right: 60px;
                                            padding-top: 54px;
                                            padding-bottom: 60px;
                                        "
                                    >
                                        <table
                                            width="100%"
                                            border="0"
                                            cellspacing="0"
                                            cellpadding="0"
                                            style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;"
                                        >
                                            <!-- RESTAURANT INFO -->
                                            <tbody>
                                                <tr>
                                                    <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                        <table
                                                            align="left"
                                                            border="0"
                                                            cellpadding="0"
                                                            cellspacing="0"
                                                            width="100%"
                                                            style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;"
                                                        >
                                                            <tbody>
                                                                <tr>
                                                                    <td
                                                                        width="12"
                                                                        style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"
                                                                    >
                                                                        &nbsp;
                                                                    </td>
                                                                    <td
                                                                        align="left"
                                                                        valign="middle"
                                                                        style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"
                                                                    >
                                                                        <span
                                                                            class="h2 textColorDark"
                                                                            style="
                                                                                font-family: GT America Medium, Roboto, Helvetica, Arial, sans-serif;
                                                                                font-weight: 600;
                                                                                vertical-align: middle;
                                                                                font-size: 16px;
                                                                                line-height: 24px;
                                                                                color: rgb(35, 35, 62);
                                                                            "
                                                                        >
                                                                            '.htmlentities($data['name'],ENT_NOQUOTES, 'ISO-8859-1').'
                                                                        </span>
                                                                    </td>
                                                                </tr>
                                                                <tr class="spacer">
                                                                    <td
                                                                        height="12px"
                                                                        colspan="2"
                                                                        style="
                                                                            font-size: 12px;
                                                                            line-height: 12px;
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                        "
                                                                    >
                                                                        &nbsp;
                                                                    </td>
                                                                </tr>
                                                                <tr class="spacer">
                                                                    <td
                                                                        height="12px"
                                                                        colspan="2"
                                                                        style="
                                                                            font-size: 12px;
                                                                            line-height: 12px;
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                        "
                                                                    >
                                                                        &nbsp;
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <!-- INTRO -->
                                                <tr>
                                                    <td
                                                        valign="top"
                                                        align="left"
                                                        style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"
                                                    >
                                                        <table
                                                            width="100%"
                                                            border="0"
                                                            cellspacing="0"
                                                            cellpadding="0"
                                                            style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;"
                                                        >
                                                            <tbody>
                                                                <tr>
                                                                    <td
                                                                        align="left"
                                                                        style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"
                                                                    >
                                                                        <span
                                                                            class="h1 textColorDark"
                                                                            style="
                                                                                font-family: GT America Condensed Bold, Roboto Condensed, Roboto, Helvetica, Arial, sans-serif;
                                                                                font-weight: 700;
                                                                                vertical-align: middle;
                                                                                font-size: 36px;
                                                                                line-height: 42px;
                                                                                color: rgb(35, 35, 62);
                                                                            "
                                                                        >
                                                                            You have a meeting invitation from '.$row['name'].' at '.$row['company_name'].'
                                                                        </span>
                                                                    </td>
                                                                </tr>
                                                                <tr class="spacer">
                                                                    <td
                                                                        height="18px"
                                                                        colspan="2"
                                                                        style="
                                                                            font-size: 18px;
                                                                            line-height: 18px;
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                        "
                                                                    >
                                                                        &nbsp;
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td
                                                                        align="left"
                                                                        colspan="2"
                                                                        valign="top"
                                                                        width="100%"
                                                                        height="1"
                                                                        class="hr"
                                                                        style="
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                            background-color: rgb(211, 211, 216);
                                                                            border-collapse: collapse;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            mso-line-height-rule: exactly;
                                                                            line-height: 1px;
                                                                        "
                                                                    >
                                                                        <!--[if gte mso 15]>&nbsp;<![endif]-->
                                                                    </td>
                                                                </tr>
                                                                <tr class="spacer">
                                                                    <td
                                                                        height="18px"
                                                                        colspan="2"
                                                                        style="
                                                                            font-size: 18px;
                                                                            line-height: 18px;
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                        "
                                                                    >
                                                                        &nbsp;
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <!-- MESSAGE -->

                                                <!-- BOOKING INFO -->
                                                <tr>
                                                    <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                        <table
                                                            align="left"
                                                            border="0"
                                                            cellpadding="0"
                                                            cellspacing="0"
                                                            width="100%"
                                                            style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;"
                                                        >
                                                            <tbody>
                                                                <tr>
                                                                    <td
                                                                        align="left"
                                                                        valign="middle"
                                                                        width="468"
                                                                        style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"
                                                                    ></td>
                                                                </tr>

                                                                <tr class="spacer">
                                                                    <td
                                                                        height="12px"
                                                                        colspan="2"
                                                                        style="
                                                                            font-size: 12px;
                                                                            line-height: 12px;
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                        "
                                                                    >
                                                                        &nbsp;
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td
                                                                        align="center"
                                                                        valign="center"
                                                                        width="100%"
                                                                        style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"
                                                                    >
                                                                        <table
                                                                            border="0"
                                                                            cellspacing="0"
                                                                            cellpadding="0"
                                                                            width="100%"
                                                                            style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;"
                                                                        >
                                                                            <tbody>
                                                                                <tr>
                                                                                    <td
                                                                                        align="center"
                                                                                        valign="center"
                                                                                        width="100%"
                                                                                        class="Button-primary-wrapper"
                                                                                        style="
                                                                                            -webkit-text-size-adjust: 100%;
                                                                                            -ms-text-size-adjust: 100%;
                                                                                            mso-table-lspace: 0pt;
                                                                                            mso-table-rspace: 0pt;
                                                                                            border-collapse: collapse;
                                                                                            display: table-cell;
                                                                                            border-radius: 3px;
                                                                                            background-color: rgb(32, 32, 192);
                                                                                        "
                                                                                    >
                                                                                        <a
                                                                                            href="'.$url.'"
                                                                                            target="_blank"
                                                                                            class="Button-primary"
                                                                                            style="
                                                                                                -webkit-text-size-adjust: 100%;
                                                                                                -ms-text-size-adjust: 100%;
                                                                                                font-family: GT America Medium, Roboto, Helvetica, Arial, sans-serif;
                                                                                                border-radius: 3px;
                                                                                                border: 1px solid rgb(32, 32, 192);
                                                                                                color: rgb(255, 255, 255);
                                                                                                display: block;
                                                                                                font-size: 16px;
                                                                                                font-weight: 600;
                                                                                                padding: 18px;
                                                                                                text-decoration: none;
                                                                                            "
                                                                                        >
                                                                                            Manage your Meeting
                                                                                        </a>
                                                                                    </td>
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <!-- ADDRESS -->
                                                <tr>
                                                    <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                        <table
                                                            border="0"
                                                            cellpadding="0"
                                                            cellspacing="0"
                                                            width="100%"
                                                            style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;"
                                                        >
                                                            <tbody>
                                                                <tr class="spacer">
                                                                    <td
                                                                        height="18px"
                                                                        colspan="2"
                                                                        style="
                                                                            font-size: 18px;
                                                                            line-height: 18px;
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                        "
                                                                    >
                                                                        &nbsp;
                                                                    </td>
                                                                </tr>
                                                                <tr class="spacer">
                                                                    <td
                                                                        height="18px"
                                                                        colspan="2"
                                                                        style="
                                                                            font-size: 18px;
                                                                            line-height: 18px;
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                        "
                                                                    >
                                                                        &nbsp;
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td
                                                                        align="left"
                                                                        colspan="2"
                                                                        valign="top"
                                                                        width="100%"
                                                                        height="1"
                                                                        class="hr"
                                                                        style="
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                            background-color: rgb(211, 211, 216);
                                                                            border-collapse: collapse;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            mso-line-height-rule: exactly;
                                                                            line-height: 1px;
                                                                        "
                                                                    >
                                                                        <!--[if gte mso 15]>&nbsp;<![endif]-->
                                                                    </td>
                                                                </tr>
                                                                <tr class="spacer">
                                                                    <td
                                                                        height="18px"
                                                                        colspan="2"
                                                                        style="
                                                                            font-size: 18px;
                                                                            line-height: 18px;
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                        "
                                                                    >
                                                                        &nbsp;
                                                                    </td>
                                                                </tr>
                                                                <tr class="spacer">
                                                                    <td
                                                                        height="18px"
                                                                        colspan="2"
                                                                        style="
                                                                            font-size: 18px;
                                                                            line-height: 18px;
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                        "
                                                                    >
                                                                        &nbsp;
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td
                                                                        align="left"
                                                                        valign="middle"
                                                                        style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"
                                                                    >
                                                                        <table
                                                                            border="0"
                                                                            cellpadding="0"
                                                                            cellspacing="0"
                                                                            width="100%"
                                                                            style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;"
                                                                        >
                                                                            <tbody>
                                                                                <tr>
                                                                                    <td
                                                                                        style="
                                                                                            -webkit-text-size-adjust: 100%;
                                                                                            -ms-text-size-adjust: 100%;
                                                                                            mso-table-lspace: 0pt;
                                                                                            mso-table-rspace: 0pt;
                                                                                            border-collapse: collapse;
                                                                                            display: table-cell;
                                                                                        "
                                                                                    >
                                                                                        <table
                                                                                            align="left"
                                                                                            border="0"
                                                                                            cellpadding="0"
                                                                                            cellspacing="0"
                                                                                            width="230"
                                                                                            class="business-address--address"
                                                                                            style="
                                                                                                -webkit-text-size-adjust: 100%;
                                                                                                -ms-text-size-adjust: 100%;
                                                                                                mso-table-lspace: 0pt;
                                                                                                mso-table-rspace: 0pt;
                                                                                                border-collapse: collapse;
                                                                                                width: 70%;
                                                                                            "
                                                                                        >
                                                                                            <tbody>
                                                                                                <tr>
                                                                                                    <td
                                                                                                        align="left"
                                                                                                        width="100%"
                                                                                                        class="text-list textColorNormal"
                                                                                                        style="
                                                                                                            -webkit-text-size-adjust: 100%;
                                                                                                            -ms-text-size-adjust: 100%;
                                                                                                            mso-table-lspace: 0pt;
                                                                                                            mso-table-rspace: 0pt;
                                                                                                            border-collapse: collapse;
                                                                                                            display: table-cell;
                                                                                                            font-family: GT America Regular, Roboto, Helvetica, Arial, sans-serif;
                                                                                                            font-weight: 400;
                                                                                                            font-size: 16px;
                                                                                                            line-height: 25px;
                                                                                                            color: rgb(79, 79, 101);
                                                                                                        "
                                                                                                    >
                                                                                                        <span
                                                                                                            class="h2 textColorDark"
                                                                                                            style="
                                                                                                                font-family: GT America Medium, Roboto, Helvetica, Arial, sans-serif;
                                                                                                                font-weight: 600;
                                                                                                                vertical-align: middle;
                                                                                                                font-size: 16px;
                                                                                                                line-height: 24px;
                                                                                                                color: rgb(35, 35, 62);
                                                                                                            "
                                                                                                        >
                                                                                                            If button dont work please copy and paste the link in browser: '.$surl.'
                                                                                                        </span>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            </tbody>
                                                                                        </table>
                                                                                        <!--[if mso]></td><td><![endif]-->
                                                                                        <table
                                                                                            align="right"
                                                                                            border="0"
                                                                                            cellpadding="0"
                                                                                            cellspacing="0"
                                                                                            width="230"
                                                                                            class="business-address--map"
                                                                                            style="
                                                                                                -webkit-text-size-adjust: 100%;
                                                                                                -ms-text-size-adjust: 100%;
                                                                                                mso-table-lspace: 0pt;
                                                                                                mso-table-rspace: 0pt;
                                                                                                border-collapse: collapse;
                                                                                                width: 50%;
                                                                                            "
                                                                                        >
                                                                                            <tbody>
                                                                                                <tr></tr>
                                                                                            </tbody>
                                                                                        </table>
                                                                                    </td>
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <tr class="spacer">
                                                    <td
                                                        height="18px"
                                                        colspan="2"
                                                        style="
                                                            font-size: 18px;
                                                            line-height: 18px;
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                        "
                                                    >
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr class="spacer">
                                                    <td
                                                        height="18px"
                                                        colspan="2"
                                                        style="
                                                            font-size: 18px;
                                                            line-height: 18px;
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                        "
                                                    >
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td
                                                        align="left"
                                                        colspan="2"
                                                        valign="top"
                                                        width="100%"
                                                        height="1"
                                                        class="hr"
                                                        style="
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                            background-color: rgb(211, 211, 216);
                                                            border-collapse: collapse;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            mso-line-height-rule: exactly;
                                                            line-height: 1px;
                                                        "
                                                    >
                                                        <!--[if gte mso 15]>&nbsp;<![endif]-->
                                                    </td>
                                                </tr>

                                                <!-- RECEIPT -->

                                                <tr class="spacer">
                                                    <td
                                                        height="18px"
                                                        colspan="2"
                                                        style="
                                                            font-size: 18px;
                                                            line-height: 18px;
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                        "
                                                    >
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <!-- EDIT RECEIPT -->
                                                <!-- CANCELLATION POLICY -->
                                                <tr>
                                                    <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                        <table
                                                            border="0"
                                                            cellpadding="0"
                                                            cellspacing="0"
                                                            width="100%"
                                                            style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;"
                                                        >
                                                            <tbody>
                                                                <tr>
                                                                    <td
                                                                        align="left"
                                                                        style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"
                                                                    >
                                                                        <div
                                                                            class="text text-bold textColorDark"
                                                                            style="
                                                                                font-family: GT America Regular, Roboto, Helvetica, Arial, sans-serif;
                                                                                font-weight: 400;
                                                                                font-size: 16px;
                                                                                line-height: 21px;
                                                                                font-weight: 600;
                                                                                color: rgb(35, 35, 62);
                                                                            "
                                                                        >
                                                                            Address for meeting
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td
                                                                        align="left"
                                                                        style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"
                                                                    >
                                                                        <div
                                                                            class="text textColorNormal mt1"
                                                                            style="
                                                                                margin-top: 6px;
                                                                                font-family: GT America Regular, Roboto,Helvetica, Arial, sans-serif;
                                                                                font-weight: 400;
                                                                                font-size: 16px;
                                                                                line-height: 21px;
                                                                                color: rgb(79, 79, 101);
                                                                            "
                                                                        >
                                                                            <span>'.$rowLocation['visiting_address'].'</span>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <tr class="spacer">
                                                    <td
                                                        height="12px"
                                                        colspan="2"
                                                        style="
                                                            font-size: 12px;
                                                            line-height: 12px;
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                        "
                                                    >
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr class="spacer">
                                                    <td
                                                        height="12px"
                                                        colspan="2"
                                                        style="
                                                            font-size: 12px;
                                                            line-height: 12px;
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                        "
                                                    >
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <!-- QUESTIONS -->
                                            </tbody>
                                        </table>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
                <!-- FOOTER -->
                <tr>
                    <td
                        align="center"
                        class="Content"
                        style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; width: 580px; margin: 0 auto;"
                    >
                        <!-- Will most likely required a feature flag -->
                        <!--[if (gte mso 9)|(IE)]>
<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
<tr>
<td align="center" valign="top" width="600">
<![endif]-->
                        <table
                            width="100%"
                            border="0"
                            cellspacing="0"
                            cellpadding="0"
                            align="center"
                            class="Content-container"
                            style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; padding-left: 60px; padding-right: 60px;"
                        >
                            <tbody>
                                <tr class="spacer">
                                    <td
                                        height="12px"
                                        colspan="2"
                                        style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"
                                    >
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td
                                        height="12px"
                                        colspan="2"
                                        style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"
                                    >
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td
                                        height="12px"
                                        colspan="2"
                                        style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"
                                    >
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr>
                                    <td align="center" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        <a href="https://www.exploretock.com" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;">
                                            <img
                                                src="https://storage.googleapis.com/tock-public-assets/images-email-template/tock-brandmark-color.png"
                                                width="30"
                                                height="30"
                                                alt="Tock"
                                                border="0"
                                                style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block;"
                                            />
                                        </a>
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td
                                        height="18px"
                                        colspan="2"
                                        style="font-size: 18px; line-height: 18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"
                                    >
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr>
                                    <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        <div
                                            class="text-xsmall textColorNormal"
                                            style="font-family: GT America Regular, Roboto,Helvetica, Arial, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);"
                                        >
                                             2019 Tock, Inc.
                                        </div>
                                        <div
                                            class="text-xsmall textColorNormal"
                                            style="font-family: GT America Regular, Roboto,Helvetica, Arial, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);"
                                        >
                                            All Rights Reserved
                                        </div>
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td
                                        height="12px"
                                        colspan="2"
                                        style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"
                                    >
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td
                                        height="12px"
                                        colspan="2"
                                        style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"
                                    >
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td
                                        height="12px"
                                        colspan="2"
                                        style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"
                                    >
                                        &nbsp;
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <!--[if (gte mso 9)|(IE)]>
</td>
</tr>
</table>
<![endif]-->
                    </td>
                </tr>
            </tbody>
        </table>
    </body>
</html>';
				try {
					 sendEmail($subject, $to, $emailContent);
					}

					 
					catch(Exception $e) {
					   
					}
					catch (Error $e) {
	 
							}
				}
				
				 
				$to            = '+'.trim($row_phone['country_code']).''.trim($data['phone']);
				
				$surl=getShortUrl($url);
				$emailContent =$row['name']." has sent you request for a meeting at ".$row['company_name']." please scan qr code on reception to confirm your visit. you can check qr code here: ".$surl;
				try {
					$res=sendSms($subject, $to, $emailContent);
					
					}

					 
					catch(Exception $e) {
					   
					}
					catch (Error $e) {
						 
							}
				
				$stmt->close();
				$dbCon->close();
				return 1;
				 
		}
		

		function getAvailableRooms($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select room_type_id,checkin_code,user_id,checkin_booking_date,checkout_booking_date,hotel_id from hotel_checkout_detail where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['checkout_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCode = $result->fetch_assoc();
			 
			$stmt = $dbCon->prepare("select id,room_name from hotel_room_detail where room_type=? and id not in (select room_id from hotel_checkout_detail where room_type_id=? and checked_in=1 and room_id is not null) and is_approved_cleaning=1 and id not in (select room_id from hotel_insta_boxes where hotel_id=?)");
		
			$stmt->bind_param("iii",$rowCode['room_type_id'],$rowCode['room_type_id'],$rowCode['hotel_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				 
				array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		}	
		
		
		 


		function releaseHotelInstabox($data)
		{
			$dbCon = AppModel::createConnection();
			$id=$this->encrypt_decrypt('decrypt',$data['id']);
			$stmt = $dbCon->prepare("update hotel_basic_information set login_ip=null,login_status=0,login_started_at=null,insta_box_id=null,booking_id=null where id=?");
				/* bind parameters for markers */
			$stmt->bind_param("i",$id);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
			 
			
		}
		
		function allocateCheckedOutRoomForCleaning($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update hotel_room_detail set cleaning_work_assigned=1,staff_assigned_id=?,is_approved_cleaning=0 where id=?");
			$stmt->bind_param("ii",$data['user_id'],$data['room_id']);
			$stmt->execute();
			 
			$stmt->close();
			$dbCon->close();
			return 1;
			 
		}
		function hotelCheckedOutListForCleningStaff($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select location_id,concat_ws(' ',first_name,last_name) as name from user_company_profile left join user_logins on user_logins.id=user_company_profile.user_login_id where company_id=? and user_login_id=?");
			$stmt->bind_param("ii",$data['company_id'],$data['user_id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();
			 
			$today=strtotime(date('Y-m-d'));
			
			$stmt = $dbCon->prepare("select room_id,cleaning_work_assigned,room_name,hotel_checkout_detail.id,concat_ws(' ',first_name,last_name) as name, checkout_time_info,staff_assigned_id from hotel_checkout_detail  left join hotel_room_detail on hotel_room_detail.id=hotel_checkout_detail.room_id  left join user_logins on user_logins.id=hotel_room_detail.staff_assigned_id  where checked_in=2 and hotel_checkout_detail.property_id=? and is_approved_cleaning=0");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row2['location_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				 
				 if($row['cleaning_work_assigned']==0)
				 {
					$row['started_by']='Not started';
					$row['name_assigned']='';
				 }
				 else
				 {
					 
				 
					$stmt = $dbCon->prepare("select location_id,concat_ws(' ',first_name,last_name) as name from user_company_profile left join user_logins on user_logins.id=user_company_profile.user_login_id where company_id=? and user_login_id=?");
					$stmt->bind_param("ii",$data['company_id'],$row['staff_assigned_id']);
					$stmt->execute();
					$resultStarted = $stmt->get_result();
					$rowStarted = $resultStarted->fetch_assoc();
					$row['name_assigned']=html_entity_decode($rowStarted['name'],ENT_NOQUOTES, 'UTF-8'); 
					$row['started_by']='Started by - '.html_entity_decode($rowStarted['name'],ENT_NOQUOTES, 'UTF-8'); 
				  }
				  
				  $today=strtotime(date('Y-m-d H:i:s'));
				  $checkout=strtotime($row['checkout_time_info']);
				  $row['checkout_time_diff']=round(($today-$checkout)/(60)).' min ago';
				array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			 
			return $org;
		}
		
		function hotelCheckedOutListForHousekeepingIncepectionStaff($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select location_id,concat_ws(' ',first_name,last_name) as name from user_company_profile left join user_logins on user_logins.id=user_company_profile.user_login_id where company_id=? and user_login_id=?");
			$stmt->bind_param("ii",$data['company_id'],$data['user_id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();
			 
			$today=strtotime(date('Y-m-d'));
			
			$stmt = $dbCon->prepare("select inspector_id,room_id,inspection_work_allocatied,room_name,hotel_checkout_detail.id,concat_ws(' ',first_name,last_name) as name, checkout_time_info from hotel_checkout_detail  left join hotel_room_detail on hotel_room_detail.id=hotel_checkout_detail.room_id  left join user_logins on user_logins.id=hotel_room_detail.staff_assigned_id  where checked_in=2 and hotel_checkout_detail.property_id=? and is_approved_cleaning=2");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row2['location_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				 
				 if($row['inspection_work_allocatied']==0)
				 {
					$row['started_by']='Not started';
					$row['name_assigned']='';
				 }
				 else
				 {
					 
				 
					$stmt = $dbCon->prepare("select location_id,concat_ws(' ',first_name,last_name) as name from user_company_profile left join user_logins on user_logins.id=user_company_profile.user_login_id where company_id=? and user_login_id=?");
					$stmt->bind_param("ii",$data['company_id'],$row['inspector_id']);
					$stmt->execute();
					$resultStarted = $stmt->get_result();
					$rowStarted = $resultStarted->fetch_assoc();
					$row['name_assigned']=html_entity_decode($rowStarted['name'],ENT_NOQUOTES, 'UTF-8'); 
					$row['started_by']='Started by - '.html_entity_decode($rowStarted['name'],ENT_NOQUOTES, 'UTF-8'); 
				  }
				array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			 
			return $org;
		}

		function allocateCheckedOutRoomForInspection($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update hotel_room_detail set inspection_work_allocatied=1,inspector_id=? where id=?");
			$stmt->bind_param("ii",$data['user_id'],$data['room_id']);
			$stmt->execute();
			 
			$stmt->close();
			$dbCon->close();
			return 1;
			 
		}
		
		
		function updateCheckedOutRoomInspection($data)
		{
			$dbCon = AppModel::createConnection();
			if($data['inspection_result']==0)
			{
			$stmt = $dbCon->prepare("update hotel_room_detail set is_approved_cleaning=?,inspection_work_allocatied=0,inspector_id=0 where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("ii",$data['inspection_result'],$data['room_id']);
			$stmt->execute();	
			}
			else
			{
			$stmt = $dbCon->prepare("update hotel_room_detail set is_approved_cleaning=?,inspection_work_allocatied=0,inspector_id=0,cleaning_work_assigned=0,staff_assigned_id=0 where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("ii",$data['inspection_result'],$data['room_id']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("update hotel_checkout_detail set checked_in=3 where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['id']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("select email from hotel_checkout_detail left join user_logins on user_logins.id=hotel_checkout_detail.user_id where room_id=? and checked_in=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['room_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCode = $result->fetch_assoc();
				if(!empty($rowCode))
				{
				$subject='Welcome! please wait while room is being Cleaned.';
				$to      = $rowCode['email'];
				$emailContent='<html><head><title>Reservation confirmed</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <style type="text/css">
    /* GT AMERICA */

    @font-face {
      font-display: fallback;
      font-family: "GT America Regular";
      font-weight: 400;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
    }

    @font-face {
      font-display: fallback;
      font-family: "GT America Medium";
      font-weight: 600;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
    }

    @font-face {
      font-display: fallback;
      font-family: "GT America Condensed Bold";
      font-weight: 700;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
    }

    /* CLIENT-SPECIFIC RESET */

    body,
    table,
    td,
    a {
      -webkit-text-size-adjust: 100%;
      -ms-text-size-adjust: 100%;
    }

    /* Prevent WebKit and Windows mobile changing default text sizes */

    table,
    td {
      mso-table-lspace: 0pt;
      mso-table-rspace: 0pt;
    }

    /* Remove spacing between tables in Outlook 2007 and up */

    img {
      -ms-interpolation-mode: bicubic;
    }

    /* Allow smoother rendering of resized image in Internet Explorer */

    .im {
      color: inherit !important;
    }

    /* DEVICE-SPECIFIC RESET */

    a[x-apple-data-detectors] {
      color: inherit !important;
      text-decoration: none !important;
      font-size: inherit !important;
      font-family: inherit !important;
      font-weight: inherit !important;
      line-height: inherit !important;
    }

    /* iOS BLUE LINKS */

    /* RESET */

    img {
      border: 0;
      height: auto;
      line-height: 100%;
      outline: none;
      text-decoration: none;
      display: block;
    }

    table {
      border-collapse: collapse;
    }

    table td {
      border-collapse: collapse;
      display: table-cell;
    }

    body {
      height: 100% !important;
      margin: 0 !important;
      padding: 0 !important;
      width: 100% !important;
    }

    /* BG COLORS */

    .mainTable {
      background-color: #F0F0F0;
    }

    .mainTable--hospitality {
      background-color: #f7f2ed;
    }

    html {
      background-color: #F0F0F0;
    }

    /* VARIABLES */

    .bg-white {
      background-color: white;
    }

    .hr {
      /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
      background-color: #d3d3d8;
      border-collapse: collapse;
      mso-table-lspace: 0pt;
      mso-table-rspace: 0pt;
      mso-line-height-rule: exactly;
      line-height: 1px;
    }

    .textAlignLeft {
      text-align: left !important;
    }

    .textAlignRight {
      text-align: right !important;
    }

    .textAlignCenter {
      text-align: center !important;
    }

    .mt1 {
      margin-top: 6px;
    }

    .list {
      padding-left: 18px;
      margin: 0;
    }

    /* TYPOGRAPHY */

    body {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      color: #4f4f65;
      -webkit-font-smoothing: antialiased;
      -ms-text-size-adjust: 100%;
      -moz-osx-font-smoothing: grayscale;
      font-smoothing: always;
      text-rendering: optimizeLegibility;
    }

    .h1 {
      font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 700;
      vertical-align: middle;
      font-size: 36px;
      line-height: 42px;
    }

    .h2 {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 600;
      vertical-align: middle;
      font-size: 16px;
      line-height: 24px;
    }

    .text {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 16px;
      line-height: 21px;
    }

    .text-list {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 16px;
      line-height: 25px;
    }

    .textSmall {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 14px;
    }

    .text-xsmall {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-size: 11px;
      text-transform: uppercase;
      line-height: 22px;
      letter-spacing: 1px;
    }

    .text-bold {
      font-weight: 600;
    }

    .text-link {
      text-decoration: underline;
    }

    .text-linkNoUnderline {
      text-decoration: none;
    }

    .text-strike {
      text-decoration: line-through;
    }

    /* FONT COLORS */

    .textColorDark {
      color: #23233e;
    }

    .textColorNormal {
      color: #4f4f65;
    }

    .textColorBlue {
      color: #2020c0;
    }

    .textColorGrayDark {
      color: #7B7B8B;
    }

    .textColorGray {
      color: #A5A8AD;
    }

    .textColorWhite {
      color: #FFFFFF;
    }

    .textColorRed {
      color: #df3232;
    }

    /* BUTTON */

    .Button-primary-wrapper {
      border-radius: 3px;
      background-color: #2020C0;
    }

    .Button-primary {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      border-radius: 3px;
      border: 1px solid #2020C0;
      color: #ffffff;
      display: block;
      font-size: 16px;
      font-weight: 600;
      padding: 18px;
      text-decoration: none;
    }

    .Button-secondary-wrapper {
      border-radius: 3px;
      background-color: #ffffff;
    }

    .Button-secondary {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      border-radius: 3px;
      border: 1px solid #2020C0;
      color: #2020C0;
      display: block;
      font-size: 16px;
      font-weight: 600;
      padding: 18px;
      text-decoration: none;
    }

    /* LAYOUT */

    .Content-container {
      padding-left: 60px;
      padding-right: 60px;
    }

    .Content-container--main {
      padding-top: 54px;
      padding-bottom: 60px;
    }

    .Content {
      width: 580px;
      margin: 0 auto;
    }

    .wrapper {
      max-width: 600px;
    }

    .section {
      padding: 24px 0px;
      border-bottom: 1px solid #d3d3d8;
    }

    .section--noBorder {
      padding: 24px 0px 0;
    }

    .section--last {
      padding: 24px 0px;
    }

    .message {
      background-color: #F4F4F5;
      padding: 18px;
    }

    .card {
      border: 1px solid #d3d3d8;
      padding: 18px;
    }

    /* HEADER */

    .header-tockLogoImage {
      display: block;
      color: #F0F0F0;
    }

    .header-heroImage {
      padding-bottom: 24px;
    }

    /* PREHEADER */

    .preheader {
      display: none;
      font-size: 1px;
      color: #FFFFFF;
      line-height: 1px;
      max-height: 0px;
      max-width: 0px;
      opacity: 0;
      overflow: hidden;
    }

    /* BANNER */

    .notice {
      padding: 12px;
      background: #23233E;
      color: #FFFFFF;
      display: block;
      font-size: 14px;
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 600;
    }

    /* INTRO */

    .section--intro {
      padding-bottom: 48px;
    }

    /* BOOKING INFO */

    .business-logo__container {
      width: 48px;
      height: 48px;
      border-radius: 3px;
      border: 1px solid #d3d3d8;
      overflow: hidden;
    }

    .business-logo__image {
      border: 1px solid transparent;
      border-radius: 3px;
      width: 48px;
      height: 48px;
      display: block;
    }

    .business-address--address {
      width: 50%;
    }

    .business-address--map {
      width: 50%;
    }

    .business-address--map-image {
      width: 100%;
    }

    /* MOBILE TICKETS */

    .mobile-ticket--description {
      width: 65%;
      margin-top: 12px;
      margin-right: 5%;
    }

    .mobile-ticket--code {
      width: 30%;
    }

    .mobile-ticket--code-image {
      width: 100%;
    }

    /* RESERVATION ACTIONS */

    .linksTable {
      border-bottom: 1px solid #d3d3d8;
    }

    .linksTableRow {
      padding: 24px 12px;
    }

    .actions-icon {
      vertical-align: middle;
    }

    .actions-text {
      vertical-align: middle;
    }

    /* RECEIPT */

    .receipt__container {
      border: 1px solid #d3d3d8;
      padding: 24px;
    }

    .receipt__row {
      border-top: 1px solid #d3d3d8;
    }

    /* FEEDBACK ICONS */

    .feedback-link {
      border: 1px solid #d4d5da;
      border-radius: 3px;
      display: inline-block;
      width: calc(32% - 2px);
      padding: 10px 0;
    }

    .feedback-link-bumper {
      display: inline-block;
      width: 1%;
    }

    .feedback-link img {
      height: 50px;
      width: 50px;
    }

    /* SOCIAL ICONS */

    .social-link {
      display: inline-block;
      width: auto;
    }

    .social-link-text {
      padding: 14px 24px 14px 14px;
    }

    /* TABLET STYLES */

    @media screen and (max-width: 648px) {
      /* DEVICE-SPECIFIC RESET */
      div[style*="margin: 16px 0;"] {
        margin: 0 !important;
      }
      /* ANDROID CENTER FIX */
      /* LAYOUT */
      .wrapper {
        width: 100% !important;
        max-width: 100% !important;
      }
      .Content {
        width: 90% !important;
      }
      .Content-container {
        padding-left: 36px !important;
        padding-right: 36px !important;
      }
      .Content-container--main {
        padding-top: 30px !important;
        padding-bottom: 42px !important;
      }
      .responsiveTable {
        width: 100% !important;
      }
      /* RESERVATION ACTIONS */
      .linksTableRow {
        padding-left: 0 !important;
        padding-right: 0 !important;
        padding-top: 12px !important;
        padding-bottom: 12px !important;
      }
      .linksTableRow--borderRight {
        border-right: none !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      /* FEEDBACK LINK */
      .feedback-link img {
        height: 38px !important;
        width: 38px !important;
      }
    }

    /* MOBILE STYLES */

    @media screen and (max-width: 480px) {
      /* TYPOGRAPHY */
      .h1 {
        font-size: 30px !important;
        line-height: 30px !important;
      }
      .text {
        font-size: 16px !important;
        line-height: 22px !important;
      }
      /* BUTTON */
      .mobile-buttonContainer {
        width: 100% !important;
      }
      /* LAYOUT */
      .Content {
        width: 100% !important;
      }
      .Content-container {
        padding-left: 18px !important;
        padding-right: 18px !important;
      }
      .Content-container--main {
        padding-top: 24px !important;
        padding-bottom: 30px !important;
      }
      .section {
        padding: 18px 0 !important;
      }
      .section--last {
        padding: 18px 0 !important;
      }
      .header {
        padding: 0 18px !important;
      }
      .business-address--address {
        width: 100% !important;
      }
      .business-address--map {
        margin-top: 30px !important;
        width: 100% !important;
      }
      .mobile-ticket--description {
        width: 100% !important;
        margin-top: 0px !important;
      }
      .mobile-ticket--code {
        margin-top: 30px !important;
        margin-left: 0;
        width: 100% !important;
      }
      /* RECEIPT */
      .receipt__container {
        padding: 12px !important;
      }
      /* SOCIAL ICONS */
      .social-link {
        display: block !important;
        width: 100% !important;
        border-bottom: 1px solid #d3d3d8 !important;
      }
      /* INTRO */
      .section--intro {
        padding-top: 18px !important;
        padding-bottom: 18px !important;
      }
    }
  </style>



   
  <!--[if mso]>
    <style type="text/css">
.h1 {font-family: "Helvetica", "Arial", sans-serif !important; font-weight: 700 !important; vertical-align: middle !important; font-size: 36px !important; mso-line-height-rule: exactly;line-height: 42px !important;}
.h2 {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 600 !important;vertical-align: middle !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 24px !important;}
.text {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 21px !important;}
.text-list {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 25px !important;}
.textSmall {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 14px !important;}
.text-xsmall {font-family: "Helvetica", "Arial", sans-serif !important;font-size: 11px !important;text-transform: uppercase !important;mso-line-height-rule: exactly;line-height: 22px !important;letter-spacing: 1px !important;}
.text-bold {font-weight: 600 !important;}
.text-link {text-decoration: underline !important;}
.text-linkNoUnderline {text-decoration: none !important;}
.text-strike {text-decoration: line-through !important;}
.textColorDark {color: #23233e !important;}
.textColorNormal {color: #4f4f65 !important;}
.textColorBlue {color: #2020c0 !important;}
.textColorGray {color: #A5A8AD !important;}
.textColorWhite {color: #FFFFFF !important;}
.Button-primary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #ffffff !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
.Button-secondary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #2020C0 !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
    </style>
    <![endif]-->
  <!-- HIDDEN PREHEADER TEXT -->
  </head><body><div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;">
  </div>
  <table border="0" cellpadding="0" cellspacing="0" width="100%" class=" mainTable  " style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: rgb(240, 240, 240);">
    <tbody><tr><td style="display:none !important;
 visibility:hidden;
 mso-hide:all;
 font-size:1px;
 color:#ffffff;
 line-height:1px;
 max-height:0px;
 max-width:0px;
 opacity:0;
 overflow:hidden; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> We are thrilled that you will be joining us. If yo... </td>
    <!-- HEADER -->
    </tr><tr>
      <td align="center" class="header" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 580px; margin: 0 auto;">
          <tbody><tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <h1 style="font-size: 33px;font-weight: 800;line-height: 30px;">Dstricts</h1>               </td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
        </tbody></table>
        <!--[if (gte mso 9)|(IE)]>
    </td>
    </tr>
    </table>
    <![endif]-->
      </td>
    </tr>
    <!-- CONTENT -->
    <tr>
      <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content bg-white" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: white; width: 580px; margin: 0 auto;">
          <tbody><tr>
            <td class="Content-container Content-container--main text textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101); padding-left: 60px; padding-right: 60px; padding-top: 54px; padding-bottom: 60px;">
              <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                <!-- RESTAURANT INFO -->
                <tbody><tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        
                        <td width="12" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                        <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">Completed</span>                          </td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <!-- INTRO -->
                <tr>
                  <td valign="top" align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h1 textColorDark" style="font-family: &quot;GT America Condensed Bold&quot;, &quot;Roboto Condensed&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 700; vertical-align: middle; font-size: 36px; line-height: 42px; color: rgb(35, 35, 62);">Your room has been cleaned</span>                          </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                          <!--[if gte mso 15]>&nbsp;<![endif]-->
                        </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <!-- MESSAGE -->
                
                
                
                
                
                
                <!-- BOOKING INFO -->
                
                <!-- ADDRESS -->
                <tr>
                  <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody>
                      
                      
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody><tr>
                              <td style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                <table align="left" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--address" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 70%;">
                                  <tbody><tr>
                                    <td align="left" width="100%" class="text-list textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
                                    <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">We regret for inconvenience. Your room is cleaned now you can proceed to your room.</span>                                         </td>
                                  </tr>
                                </tbody></table>
                                <!--[if mso]></td><td><![endif]-->
                                <table align="right" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--map" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 50%;">
                                  <tbody><tr>
                                    
                                  </tr>
                                </tbody></table>
                              </td>
                            </tr>
                          </tbody></table>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                
                
                
                <!-- RECEIPT -->
                
                
                
                <!-- EDIT RECEIPT -->
                <!-- CANCELLATION POLICY -->
                
                
                
                <!-- QUESTIONS -->
                
              </tbody></table>
            </td>
          </tr>
        </tbody></table>
      </td>
    </tr>
    <!-- FOOTER -->
    <tr>
      <td align="center" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; width: 580px; margin: 0 auto;">
        <!-- Will most likely required a feature flag -->
        <!--[if (gte mso 9)|(IE)]>
<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
<tr>
<td align="center" valign="top" width="600">
<![endif]-->
        <table width="100%" border="0" cellspacing="0" cellpadding="0" align="center" class="Content-container" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; padding-left: 60px; padding-right: 60px;">
          <tbody><tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="center" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <a href="https://www.exploretock.com" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;"> <img src="https://storage.googleapis.com/tock-public-assets/images-email-template/tock-brandmark-color.png" width="30" height="30" alt="Tock" border="0" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block;"> </a>              </td>
          </tr>
          <tr class="spacer">
            <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
              <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                 2019 Tock, Inc.
              </div>
              <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                All Rights Reserved
              </div>
            </td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
        </tbody></table>
        <!--[if (gte mso 9)|(IE)]>
</td>
</tr>
</table>
<![endif]-->
      </td>
    </tr>
  </tbody></table>



</body></html>';
				sendEmail($subject, $to, $emailContent); 
				}
				
			
			}
			$stmt->close();
			$dbCon->close();
			return 1;
			 
		}
		
		function updateCheckedOutRoomCleaning($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("update hotel_room_detail set is_approved_cleaning=2 where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['room_id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
			 
		}
		
		
		
		function getCheckedInHotel()
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select hotel_property_type,transection_id,cust_id,total_days,price,payment_option,room_type_id,checkin_code,user_id,checkin_booking_date,checkout_booking_date,hotel_id,email from hotel_checkout_detail left join user_logins on user_logins.id=hotel_checkout_detail.user_id where hotel_checkout_detail.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i",$_POST['checkout_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCode = $result->fetch_assoc();
			
			if($rowCode['hotel_property_type']==1)
			{
				$stmt = $dbCon->prepare("select id,room_id from hotel_insta_boxes where booking_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i",$_POST['checkout_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRoom = $result->fetch_assoc();
			
			if(empty($rowRoom))
			{
				$date=strtotime(date('Y-m-d'));
			$select="select id,room_name,is_approved_cleaning from hotel_room_detail where room_type='".$rowCode['room_type_id']."' and id not in(select room_id from hotel_checkout_detail where room_type_id='".$rowCode['room_type_id']."' and checked_in=1 and checkout_booking_date>='".$date."') and room_available=1 and id not in (select room_id from hotel_insta_boxes where hotel_id=".$rowCode['hotel_id'].")";
			$resultCountId=mysqli_query($dbCon, $select);
			$rowCountId=mysqli_fetch_array($resultCountId);
			if($rowCountId['is_approved_cleaning']==0)
			{
				$subject='Welcome! please wait while room is being Cleaned.';
				$to      = $rowCode['email'];
				 
				$emailContent='<html><head><title>Reservation confirmed</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <style type="text/css">
    /* GT AMERICA */

    @font-face {
      font-display: fallback;
      font-family: "GT America Regular";
      font-weight: 400;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
    }

    @font-face {
      font-display: fallback;
      font-family: "GT America Medium";
      font-weight: 600;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
    }

    @font-face {
      font-display: fallback;
      font-family: "GT America Condensed Bold";
      font-weight: 700;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
    }

    /* CLIENT-SPECIFIC RESET */

    body,
    table,
    td,
    a {
      -webkit-text-size-adjust: 100%;
      -ms-text-size-adjust: 100%;
    }

    /* Prevent WebKit and Windows mobile changing default text sizes */

    table,
    td {
      mso-table-lspace: 0pt;
      mso-table-rspace: 0pt;
    }

    /* Remove spacing between tables in Outlook 2007 and up */

    img {
      -ms-interpolation-mode: bicubic;
    }

    /* Allow smoother rendering of resized image in Internet Explorer */

    .im {
      color: inherit !important;
    }

    /* DEVICE-SPECIFIC RESET */

    a[x-apple-data-detectors] {
      color: inherit !important;
      text-decoration: none !important;
      font-size: inherit !important;
      font-family: inherit !important;
      font-weight: inherit !important;
      line-height: inherit !important;
    }

    /* iOS BLUE LINKS */

    /* RESET */

    img {
      border: 0;
      height: auto;
      line-height: 100%;
      outline: none;
      text-decoration: none;
      display: block;
    }

    table {
      border-collapse: collapse;
    }

    table td {
      border-collapse: collapse;
      display: table-cell;
    }

    body {
      height: 100% !important;
      margin: 0 !important;
      padding: 0 !important;
      width: 100% !important;
    }

    /* BG COLORS */

    .mainTable {
      background-color: #F0F0F0;
    }

    .mainTable--hospitality {
      background-color: #f7f2ed;
    }

    html {
      background-color: #F0F0F0;
    }

    /* VARIABLES */

    .bg-white {
      background-color: white;
    }

    .hr {
      /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
      background-color: #d3d3d8;
      border-collapse: collapse;
      mso-table-lspace: 0pt;
      mso-table-rspace: 0pt;
      mso-line-height-rule: exactly;
      line-height: 1px;
    }

    .textAlignLeft {
      text-align: left !important;
    }

    .textAlignRight {
      text-align: right !important;
    }

    .textAlignCenter {
      text-align: center !important;
    }

    .mt1 {
      margin-top: 6px;
    }

    .list {
      padding-left: 18px;
      margin: 0;
    }

    /* TYPOGRAPHY */

    body {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      color: #4f4f65;
      -webkit-font-smoothing: antialiased;
      -ms-text-size-adjust: 100%;
      -moz-osx-font-smoothing: grayscale;
      font-smoothing: always;
      text-rendering: optimizeLegibility;
    }

    .h1 {
      font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 700;
      vertical-align: middle;
      font-size: 36px;
      line-height: 42px;
    }

    .h2 {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 600;
      vertical-align: middle;
      font-size: 16px;
      line-height: 24px;
    }

    .text {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 16px;
      line-height: 21px;
    }

    .text-list {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 16px;
      line-height: 25px;
    }

    .textSmall {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 14px;
    }

    .text-xsmall {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-size: 11px;
      text-transform: uppercase;
      line-height: 22px;
      letter-spacing: 1px;
    }

    .text-bold {
      font-weight: 600;
    }

    .text-link {
      text-decoration: underline;
    }

    .text-linkNoUnderline {
      text-decoration: none;
    }

    .text-strike {
      text-decoration: line-through;
    }

    /* FONT COLORS */

    .textColorDark {
      color: #23233e;
    }

    .textColorNormal {
      color: #4f4f65;
    }

    .textColorBlue {
      color: #2020c0;
    }

    .textColorGrayDark {
      color: #7B7B8B;
    }

    .textColorGray {
      color: #A5A8AD;
    }

    .textColorWhite {
      color: #FFFFFF;
    }

    .textColorRed {
      color: #df3232;
    }

    /* BUTTON */

    .Button-primary-wrapper {
      border-radius: 3px;
      background-color: #2020C0;
    }

    .Button-primary {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      border-radius: 3px;
      border: 1px solid #2020C0;
      color: #ffffff;
      display: block;
      font-size: 16px;
      font-weight: 600;
      padding: 18px;
      text-decoration: none;
    }

    .Button-secondary-wrapper {
      border-radius: 3px;
      background-color: #ffffff;
    }

    .Button-secondary {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      border-radius: 3px;
      border: 1px solid #2020C0;
      color: #2020C0;
      display: block;
      font-size: 16px;
      font-weight: 600;
      padding: 18px;
      text-decoration: none;
    }

    /* LAYOUT */

    .Content-container {
      padding-left: 60px;
      padding-right: 60px;
    }

    .Content-container--main {
      padding-top: 54px;
      padding-bottom: 60px;
    }

    .Content {
      width: 580px;
      margin: 0 auto;
    }

    .wrapper {
      max-width: 600px;
    }

    .section {
      padding: 24px 0px;
      border-bottom: 1px solid #d3d3d8;
    }

    .section--noBorder {
      padding: 24px 0px 0;
    }

    .section--last {
      padding: 24px 0px;
    }

    .message {
      background-color: #F4F4F5;
      padding: 18px;
    }

    .card {
      border: 1px solid #d3d3d8;
      padding: 18px;
    }

    /* HEADER */

    .header-tockLogoImage {
      display: block;
      color: #F0F0F0;
    }

    .header-heroImage {
      padding-bottom: 24px;
    }

    /* PREHEADER */

    .preheader {
      display: none;
      font-size: 1px;
      color: #FFFFFF;
      line-height: 1px;
      max-height: 0px;
      max-width: 0px;
      opacity: 0;
      overflow: hidden;
    }

    /* BANNER */

    .notice {
      padding: 12px;
      background: #23233E;
      color: #FFFFFF;
      display: block;
      font-size: 14px;
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 600;
    }

    /* INTRO */

    .section--intro {
      padding-bottom: 48px;
    }

    /* BOOKING INFO */

    .business-logo__container {
      width: 48px;
      height: 48px;
      border-radius: 3px;
      border: 1px solid #d3d3d8;
      overflow: hidden;
    }

    .business-logo__image {
      border: 1px solid transparent;
      border-radius: 3px;
      width: 48px;
      height: 48px;
      display: block;
    }

    .business-address--address {
      width: 50%;
    }

    .business-address--map {
      width: 50%;
    }

    .business-address--map-image {
      width: 100%;
    }

    /* MOBILE TICKETS */

    .mobile-ticket--description {
      width: 65%;
      margin-top: 12px;
      margin-right: 5%;
    }

    .mobile-ticket--code {
      width: 30%;
    }

    .mobile-ticket--code-image {
      width: 100%;
    }

    /* RESERVATION ACTIONS */

    .linksTable {
      border-bottom: 1px solid #d3d3d8;
    }

    .linksTableRow {
      padding: 24px 12px;
    }

    .actions-icon {
      vertical-align: middle;
    }

    .actions-text {
      vertical-align: middle;
    }

    /* RECEIPT */

    .receipt__container {
      border: 1px solid #d3d3d8;
      padding: 24px;
    }

    .receipt__row {
      border-top: 1px solid #d3d3d8;
    }

    /* FEEDBACK ICONS */

    .feedback-link {
      border: 1px solid #d4d5da;
      border-radius: 3px;
      display: inline-block;
      width: calc(32% - 2px);
      padding: 10px 0;
    }

    .feedback-link-bumper {
      display: inline-block;
      width: 1%;
    }

    .feedback-link img {
      height: 50px;
      width: 50px;
    }

    /* SOCIAL ICONS */

    .social-link {
      display: inline-block;
      width: auto;
    }

    .social-link-text {
      padding: 14px 24px 14px 14px;
    }

    /* TABLET STYLES */

    @media screen and (max-width: 648px) {
      /* DEVICE-SPECIFIC RESET */
      div[style*="margin: 16px 0;"] {
        margin: 0 !important;
      }
      /* ANDROID CENTER FIX */
      /* LAYOUT */
      .wrapper {
        width: 100% !important;
        max-width: 100% !important;
      }
      .Content {
        width: 90% !important;
      }
      .Content-container {
        padding-left: 36px !important;
        padding-right: 36px !important;
      }
      .Content-container--main {
        padding-top: 30px !important;
        padding-bottom: 42px !important;
      }
      .responsiveTable {
        width: 100% !important;
      }
      /* RESERVATION ACTIONS */
      .linksTableRow {
        padding-left: 0 !important;
        padding-right: 0 !important;
        padding-top: 12px !important;
        padding-bottom: 12px !important;
      }
      .linksTableRow--borderRight {
        border-right: none !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      /* FEEDBACK LINK */
      .feedback-link img {
        height: 38px !important;
        width: 38px !important;
      }
    }

    /* MOBILE STYLES */

    @media screen and (max-width: 480px) {
      /* TYPOGRAPHY */
      .h1 {
        font-size: 30px !important;
        line-height: 30px !important;
      }
      .text {
        font-size: 16px !important;
        line-height: 22px !important;
      }
      /* BUTTON */
      .mobile-buttonContainer {
        width: 100% !important;
      }
      /* LAYOUT */
      .Content {
        width: 100% !important;
      }
      .Content-container {
        padding-left: 18px !important;
        padding-right: 18px !important;
      }
      .Content-container--main {
        padding-top: 24px !important;
        padding-bottom: 30px !important;
      }
      .section {
        padding: 18px 0 !important;
      }
      .section--last {
        padding: 18px 0 !important;
      }
      .header {
        padding: 0 18px !important;
      }
      .business-address--address {
        width: 100% !important;
      }
      .business-address--map {
        margin-top: 30px !important;
        width: 100% !important;
      }
      .mobile-ticket--description {
        width: 100% !important;
        margin-top: 0px !important;
      }
      .mobile-ticket--code {
        margin-top: 30px !important;
        margin-left: 0;
        width: 100% !important;
      }
      /* RECEIPT */
      .receipt__container {
        padding: 12px !important;
      }
      /* SOCIAL ICONS */
      .social-link {
        display: block !important;
        width: 100% !important;
        border-bottom: 1px solid #d3d3d8 !important;
      }
      /* INTRO */
      .section--intro {
        padding-top: 18px !important;
        padding-bottom: 18px !important;
      }
    }
  </style>



   
  <!--[if mso]>
    <style type="text/css">
.h1 {font-family: "Helvetica", "Arial", sans-serif !important; font-weight: 700 !important; vertical-align: middle !important; font-size: 36px !important; mso-line-height-rule: exactly;line-height: 42px !important;}
.h2 {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 600 !important;vertical-align: middle !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 24px !important;}
.text {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 21px !important;}
.text-list {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 25px !important;}
.textSmall {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 14px !important;}
.text-xsmall {font-family: "Helvetica", "Arial", sans-serif !important;font-size: 11px !important;text-transform: uppercase !important;mso-line-height-rule: exactly;line-height: 22px !important;letter-spacing: 1px !important;}
.text-bold {font-weight: 600 !important;}
.text-link {text-decoration: underline !important;}
.text-linkNoUnderline {text-decoration: none !important;}
.text-strike {text-decoration: line-through !important;}
.textColorDark {color: #23233e !important;}
.textColorNormal {color: #4f4f65 !important;}
.textColorBlue {color: #2020c0 !important;}
.textColorGray {color: #A5A8AD !important;}
.textColorWhite {color: #FFFFFF !important;}
.Button-primary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #ffffff !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
.Button-secondary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #2020C0 !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
    </style>
    <![endif]-->
  <!-- HIDDEN PREHEADER TEXT -->
  </head><body><div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;">
  </div>
  <table border="0" cellpadding="0" cellspacing="0" width="100%" class=" mainTable  " style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: rgb(240, 240, 240);">
    <tbody><tr><td style="display:none !important;
 visibility:hidden;
 mso-hide:all;
 font-size:1px;
 color:#ffffff;
 line-height:1px;
 max-height:0px;
 max-width:0px;
 opacity:0;
 overflow:hidden; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> We are thrilled that you will be joining us. If yo... </td>
    <!-- HEADER -->
    </tr><tr>
      <td align="center" class="header" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 580px; margin: 0 auto;">
          <tbody><tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <h1 style="font-size: 33px;font-weight: 800;line-height: 30px;">Dstricts</h1>               </td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
        </tbody></table>
        <!--[if (gte mso 9)|(IE)]>
    </td>
    </tr>
    </table>
    <![endif]-->
      </td>
    </tr>
    <!-- CONTENT -->
    <tr>
      <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content bg-white" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: white; width: 580px; margin: 0 auto;">
          <tbody><tr>
            <td class="Content-container Content-container--main text textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101); padding-left: 60px; padding-right: 60px; padding-top: 54px; padding-bottom: 60px;">
              <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                <!-- RESTAURANT INFO -->
                <tbody><tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        
                        <td width="12" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                        <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">Welcome</span>                          </td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <!-- INTRO -->
                <tr>
                  <td valign="top" align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h1 textColorDark" style="font-family: &quot;GT America Condensed Bold&quot;, &quot;Roboto Condensed&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 700; vertical-align: middle; font-size: 36px; line-height: 42px; color: rgb(35, 35, 62);">You are checked in now</span>                          </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                          <!--[if gte mso 15]>&nbsp;<![endif]-->
                        </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <!-- MESSAGE -->
                
                
                
                
                
                
                <!-- BOOKING INFO -->
                
                <!-- ADDRESS -->
                <tr>
                  <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody>
                      
                      
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody><tr>
                              <td style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                <table align="left" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--address" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 70%;">
                                  <tbody><tr>
                                    <td align="left" width="100%" class="text-list textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
                                    <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">We regret that the room is not cleaned. Please wait for a while before we clean the room. We will inform you asap its done and you can proceed to your room.</span>                                         </td>
                                  </tr>
                                </tbody></table>
                                <!--[if mso]></td><td><![endif]-->
                                <table align="right" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--map" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 50%;">
                                  <tbody><tr>
                                    
                                  </tr>
                                </tbody></table>
                              </td>
                            </tr>
                          </tbody></table>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                
                
                
                <!-- RECEIPT -->
                
                
                
                <!-- EDIT RECEIPT -->
                <!-- CANCELLATION POLICY -->
                
                
                
                <!-- QUESTIONS -->
                
              </tbody></table>
            </td>
          </tr>
        </tbody></table>
      </td>
    </tr>
    <!-- FOOTER -->
    <tr>
      <td align="center" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; width: 580px; margin: 0 auto;">
        <!-- Will most likely required a feature flag -->
        <!--[if (gte mso 9)|(IE)]>
<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
<tr>
<td align="center" valign="top" width="600">
<![endif]-->
        <table width="100%" border="0" cellspacing="0" cellpadding="0" align="center" class="Content-container" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; padding-left: 60px; padding-right: 60px;">
          <tbody><tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="center" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <a href="https://www.exploretock.com" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;"> <img src="https://storage.googleapis.com/tock-public-assets/images-email-template/tock-brandmark-color.png" width="30" height="30" alt="Tock" border="0" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block;"> </a>              </td>
          </tr>
          <tr class="spacer">
            <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
              <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                 2019 Tock, Inc.
              </div>
              <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                All Rights Reserved
              </div>
            </td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
        </tbody></table>
        <!--[if (gte mso 9)|(IE)]>
</td>
</tr>
</table>
<![endif]-->
      </td>
    </tr>
  </tbody></table>



</body></html>';
				
				sendEmail($subject, $to, $emailContent); 
				$today=strtotime(date('Y-m-d'))-100;
			}
			else
			{
				$today=strtotime(date('Y-m-d'));
			}
			$room_id=$rowCountId['id'];			
			}
			else
			{
			$room_id=$rowRoom['room_id'];	
			}
			
			if($rowCode['payment_option']==2)
			{
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/tokens');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "card[number]=4242424242424242&card[exp_month]=2&card[exp_year]=2030&card[cvc]=314");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);
			$a=json_decode($result,true);
			 
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/customers');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "name=".$row['first_name']."&email=".$row['email']."&source=".$a['id']."&description=My");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);
			$b=json_decode($result,true);
			$cuId=$b['id'];
			
			$total_price=$rowCode['total_days']*$rowCode['price']*100;
			if($total_price<500)
			{
				$total_price=500;
			}
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/charges');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "customer=".$b['id']."&amount=".$total_price."&currency=sek&description=My");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);			
			$c=json_decode($result,true);
			$Chargeid=$c['id'];	
 
	
			}
			else
			{
				$cuId=$rowCode['cust_id'];
				$Chargeid=$rowCode['transection_id']; 
			}
			
			$stmt = $dbCon->prepare("update hotel_checkout_detail set cust_id=?,transection_id=?,checked_in=1,room_id=?,room_cleaning_date=? where id=?");
			/* bind parameters for markers */
			 
			$stmt->bind_param("ssisi",$cuId,$Chargeid,$room_id,$today,$_POST['checkout_id']);
			$stmt->execute();	
			
			$stmt = $dbCon->prepare("select hotel_basic_information.id,hotel_name   from company_hotel_room_type_detail left join hotel_room_type on hotel_room_type.id=company_hotel_room_type_detail.room_type left join hotel_basic_information on company_hotel_room_type_detail.location_id=hotel_basic_information.property_id left join property_location on property_location.id=hotel_basic_information.property_id where company_hotel_room_type_detail.id=(select room_type_id from hotel_checkout_detail where id=?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("i",$_POST['checkout_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			
			$stmt = $dbCon->prepare("select email from user_logins where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i",$rowCode['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowUser = $result->fetch_assoc();
			
			
			$stmt = $dbCon->prepare("select count(id) as num from employee_identificator_verification_detail where employee_user_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i",$rowCode['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowVerified = $result->fetch_assoc();
			if($rowVerified['num']>0)
			{
			
			$stmt = $dbCon->prepare("select id,box_number from hotel_insta_boxes where booking_id=? and in_use=1 and is_active=1");
			/* bind parameters for markers */
			$stmt->bind_param("i", $_POST['checkout_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowInstaBox = $result->fetch_assoc();
			if(!empty($rowInstaBox))
			{
				$encId=$this->encrypt_decrypt('encrypt',$row['id']);
				$url="https://www.qloudid.com/public/index.php/InstaBox/welcome/".$encId;
				$surl=getShortUrl($url);
				$subject='Welcome! you have room key available in instabox.';
				$to      = $rowUser['email'];
				$emailContent='Welcome Guest! you can collect your key from the instabox number # 100-'.$rowInstaBox['box_number'].' using the url : '.$surl.' and the verification code:-'.$rowCode['checkin_code'];
				sendEmail($subject, $to, $emailContent); 
			}	
			}
			}
			else if($rowCode['hotel_property_type']==2)
			{
			$stmt = $dbCon->prepare("update hotel_checkout_detail set checked_in=1 where id=?");
			/* bind parameters for markers */
			 
			$stmt->bind_param("i",$_POST['checkout_id']);
			$stmt->execute();	
			}
			$stmt->close();
			$dbCon->close();
			return 1;	
			 
			}
		
	
		
		function getFrontDeskCheckedInHotel()
		{
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select transection_id,cust_id,total_days,price,payment_option,room_type_id,checkin_code,user_id,checkin_booking_date,checkout_booking_date,hotel_id,email from hotel_checkout_detail left join user_logins on user_logins.id=hotel_checkout_detail.user_id where hotel_checkout_detail.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i",$_POST['checkout_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCode = $result->fetch_assoc();
			
			if($rowCode['payment_option']==2)
			{
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/tokens');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "card[number]=4242424242424242&card[exp_month]=2&card[exp_year]=2030&card[cvc]=314");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);
			$a=json_decode($result,true);
			 
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/customers');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "name=".$row['first_name']."&email=".$row['email']."&source=".$a['id']."&description=My");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);
			$b=json_decode($result,true);
			$cuId=$b['id'];
			
			$total_price=$rowCode['total_days']*$rowCode['price']*100;
			if($total_price<500)
			{
				$total_price=500;
			}
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/charges');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "customer=".$b['id']."&amount=".$total_price."&currency=sek&description=My");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);			
			$c=json_decode($result,true);
			$Chargeid=$c['id'];	
 
	
			}
			else
			{
				$cuId=$rowCode['cust_id'];
				$Chargeid=$rowCode['transection_id']; 
			}

			
			$stmt = $dbCon->prepare("select id,room_id from hotel_insta_boxes where booking_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i",$_POST['checkout_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRoom = $result->fetch_assoc();
			
			if(empty($rowRoom))
			{
			$select="select id,room_name,is_approved_cleaning from hotel_room_detail where room_type='".$rowCode['room_type_id']."' and id not in(select room_id from hotel_checkout_detail where room_type_id='".$rowCode['room_type_id']."' and checked_in=1 and room_id is not null) and room_available=1 and id not in (select room_id from hotel_insta_boxes where hotel_id=".$rowCode['hotel_id'].")";
			$resultCountId=mysqli_query($dbCon, $select);
			$rowCountId=mysqli_fetch_array($resultCountId);	
			
			if($rowCountId['is_approved_cleaning']==0)
			{
				$subject='Welcome! please wait while room is being cleaned.';
				$to      = $rowCode['email'];
				 
				$emailContent='<html><head><title>Reservation confirmed</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <style type="text/css">
    /* GT AMERICA */

    @font-face {
      font-display: fallback;
      font-family: "GT America Regular";
      font-weight: 400;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
    }

    @font-face {
      font-display: fallback;
      font-family: "GT America Medium";
      font-weight: 600;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
    }

    @font-face {
      font-display: fallback;
      font-family: "GT America Condensed Bold";
      font-weight: 700;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
    }

    /* CLIENT-SPECIFIC RESET */

    body,
    table,
    td,
    a {
      -webkit-text-size-adjust: 100%;
      -ms-text-size-adjust: 100%;
    }

    /* Prevent WebKit and Windows mobile changing default text sizes */

    table,
    td {
      mso-table-lspace: 0pt;
      mso-table-rspace: 0pt;
    }

    /* Remove spacing between tables in Outlook 2007 and up */

    img {
      -ms-interpolation-mode: bicubic;
    }

    /* Allow smoother rendering of resized image in Internet Explorer */

    .im {
      color: inherit !important;
    }

    /* DEVICE-SPECIFIC RESET */

    a[x-apple-data-detectors] {
      color: inherit !important;
      text-decoration: none !important;
      font-size: inherit !important;
      font-family: inherit !important;
      font-weight: inherit !important;
      line-height: inherit !important;
    }

    /* iOS BLUE LINKS */

    /* RESET */

    img {
      border: 0;
      height: auto;
      line-height: 100%;
      outline: none;
      text-decoration: none;
      display: block;
    }

    table {
      border-collapse: collapse;
    }

    table td {
      border-collapse: collapse;
      display: table-cell;
    }

    body {
      height: 100% !important;
      margin: 0 !important;
      padding: 0 !important;
      width: 100% !important;
    }

    /* BG COLORS */

    .mainTable {
      background-color: #F0F0F0;
    }

    .mainTable--hospitality {
      background-color: #f7f2ed;
    }

    html {
      background-color: #F0F0F0;
    }

    /* VARIABLES */

    .bg-white {
      background-color: white;
    }

    .hr {
      /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
      background-color: #d3d3d8;
      border-collapse: collapse;
      mso-table-lspace: 0pt;
      mso-table-rspace: 0pt;
      mso-line-height-rule: exactly;
      line-height: 1px;
    }

    .textAlignLeft {
      text-align: left !important;
    }

    .textAlignRight {
      text-align: right !important;
    }

    .textAlignCenter {
      text-align: center !important;
    }

    .mt1 {
      margin-top: 6px;
    }

    .list {
      padding-left: 18px;
      margin: 0;
    }

    /* TYPOGRAPHY */

    body {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      color: #4f4f65;
      -webkit-font-smoothing: antialiased;
      -ms-text-size-adjust: 100%;
      -moz-osx-font-smoothing: grayscale;
      font-smoothing: always;
      text-rendering: optimizeLegibility;
    }

    .h1 {
      font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 700;
      vertical-align: middle;
      font-size: 36px;
      line-height: 42px;
    }

    .h2 {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 600;
      vertical-align: middle;
      font-size: 16px;
      line-height: 24px;
    }

    .text {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 16px;
      line-height: 21px;
    }

    .text-list {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 16px;
      line-height: 25px;
    }

    .textSmall {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 14px;
    }

    .text-xsmall {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-size: 11px;
      text-transform: uppercase;
      line-height: 22px;
      letter-spacing: 1px;
    }

    .text-bold {
      font-weight: 600;
    }

    .text-link {
      text-decoration: underline;
    }

    .text-linkNoUnderline {
      text-decoration: none;
    }

    .text-strike {
      text-decoration: line-through;
    }

    /* FONT COLORS */

    .textColorDark {
      color: #23233e;
    }

    .textColorNormal {
      color: #4f4f65;
    }

    .textColorBlue {
      color: #2020c0;
    }

    .textColorGrayDark {
      color: #7B7B8B;
    }

    .textColorGray {
      color: #A5A8AD;
    }

    .textColorWhite {
      color: #FFFFFF;
    }

    .textColorRed {
      color: #df3232;
    }

    /* BUTTON */

    .Button-primary-wrapper {
      border-radius: 3px;
      background-color: #2020C0;
    }

    .Button-primary {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      border-radius: 3px;
      border: 1px solid #2020C0;
      color: #ffffff;
      display: block;
      font-size: 16px;
      font-weight: 600;
      padding: 18px;
      text-decoration: none;
    }

    .Button-secondary-wrapper {
      border-radius: 3px;
      background-color: #ffffff;
    }

    .Button-secondary {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      border-radius: 3px;
      border: 1px solid #2020C0;
      color: #2020C0;
      display: block;
      font-size: 16px;
      font-weight: 600;
      padding: 18px;
      text-decoration: none;
    }

    /* LAYOUT */

    .Content-container {
      padding-left: 60px;
      padding-right: 60px;
    }

    .Content-container--main {
      padding-top: 54px;
      padding-bottom: 60px;
    }

    .Content {
      width: 580px;
      margin: 0 auto;
    }

    .wrapper {
      max-width: 600px;
    }

    .section {
      padding: 24px 0px;
      border-bottom: 1px solid #d3d3d8;
    }

    .section--noBorder {
      padding: 24px 0px 0;
    }

    .section--last {
      padding: 24px 0px;
    }

    .message {
      background-color: #F4F4F5;
      padding: 18px;
    }

    .card {
      border: 1px solid #d3d3d8;
      padding: 18px;
    }

    /* HEADER */

    .header-tockLogoImage {
      display: block;
      color: #F0F0F0;
    }

    .header-heroImage {
      padding-bottom: 24px;
    }

    /* PREHEADER */

    .preheader {
      display: none;
      font-size: 1px;
      color: #FFFFFF;
      line-height: 1px;
      max-height: 0px;
      max-width: 0px;
      opacity: 0;
      overflow: hidden;
    }

    /* BANNER */

    .notice {
      padding: 12px;
      background: #23233E;
      color: #FFFFFF;
      display: block;
      font-size: 14px;
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 600;
    }

    /* INTRO */

    .section--intro {
      padding-bottom: 48px;
    }

    /* BOOKING INFO */

    .business-logo__container {
      width: 48px;
      height: 48px;
      border-radius: 3px;
      border: 1px solid #d3d3d8;
      overflow: hidden;
    }

    .business-logo__image {
      border: 1px solid transparent;
      border-radius: 3px;
      width: 48px;
      height: 48px;
      display: block;
    }

    .business-address--address {
      width: 50%;
    }

    .business-address--map {
      width: 50%;
    }

    .business-address--map-image {
      width: 100%;
    }

    /* MOBILE TICKETS */

    .mobile-ticket--description {
      width: 65%;
      margin-top: 12px;
      margin-right: 5%;
    }

    .mobile-ticket--code {
      width: 30%;
    }

    .mobile-ticket--code-image {
      width: 100%;
    }

    /* RESERVATION ACTIONS */

    .linksTable {
      border-bottom: 1px solid #d3d3d8;
    }

    .linksTableRow {
      padding: 24px 12px;
    }

    .actions-icon {
      vertical-align: middle;
    }

    .actions-text {
      vertical-align: middle;
    }

    /* RECEIPT */

    .receipt__container {
      border: 1px solid #d3d3d8;
      padding: 24px;
    }

    .receipt__row {
      border-top: 1px solid #d3d3d8;
    }

    /* FEEDBACK ICONS */

    .feedback-link {
      border: 1px solid #d4d5da;
      border-radius: 3px;
      display: inline-block;
      width: calc(32% - 2px);
      padding: 10px 0;
    }

    .feedback-link-bumper {
      display: inline-block;
      width: 1%;
    }

    .feedback-link img {
      height: 50px;
      width: 50px;
    }

    /* SOCIAL ICONS */

    .social-link {
      display: inline-block;
      width: auto;
    }

    .social-link-text {
      padding: 14px 24px 14px 14px;
    }

    /* TABLET STYLES */

    @media screen and (max-width: 648px) {
      /* DEVICE-SPECIFIC RESET */
      div[style*="margin: 16px 0;"] {
        margin: 0 !important;
      }
      /* ANDROID CENTER FIX */
      /* LAYOUT */
      .wrapper {
        width: 100% !important;
        max-width: 100% !important;
      }
      .Content {
        width: 90% !important;
      }
      .Content-container {
        padding-left: 36px !important;
        padding-right: 36px !important;
      }
      .Content-container--main {
        padding-top: 30px !important;
        padding-bottom: 42px !important;
      }
      .responsiveTable {
        width: 100% !important;
      }
      /* RESERVATION ACTIONS */
      .linksTableRow {
        padding-left: 0 !important;
        padding-right: 0 !important;
        padding-top: 12px !important;
        padding-bottom: 12px !important;
      }
      .linksTableRow--borderRight {
        border-right: none !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      /* FEEDBACK LINK */
      .feedback-link img {
        height: 38px !important;
        width: 38px !important;
      }
    }

    /* MOBILE STYLES */

    @media screen and (max-width: 480px) {
      /* TYPOGRAPHY */
      .h1 {
        font-size: 30px !important;
        line-height: 30px !important;
      }
      .text {
        font-size: 16px !important;
        line-height: 22px !important;
      }
      /* BUTTON */
      .mobile-buttonContainer {
        width: 100% !important;
      }
      /* LAYOUT */
      .Content {
        width: 100% !important;
      }
      .Content-container {
        padding-left: 18px !important;
        padding-right: 18px !important;
      }
      .Content-container--main {
        padding-top: 24px !important;
        padding-bottom: 30px !important;
      }
      .section {
        padding: 18px 0 !important;
      }
      .section--last {
        padding: 18px 0 !important;
      }
      .header {
        padding: 0 18px !important;
      }
      .business-address--address {
        width: 100% !important;
      }
      .business-address--map {
        margin-top: 30px !important;
        width: 100% !important;
      }
      .mobile-ticket--description {
        width: 100% !important;
        margin-top: 0px !important;
      }
      .mobile-ticket--code {
        margin-top: 30px !important;
        margin-left: 0;
        width: 100% !important;
      }
      /* RECEIPT */
      .receipt__container {
        padding: 12px !important;
      }
      /* SOCIAL ICONS */
      .social-link {
        display: block !important;
        width: 100% !important;
        border-bottom: 1px solid #d3d3d8 !important;
      }
      /* INTRO */
      .section--intro {
        padding-top: 18px !important;
        padding-bottom: 18px !important;
      }
    }
  </style>



   
  <!--[if mso]>
    <style type="text/css">
.h1 {font-family: "Helvetica", "Arial", sans-serif !important; font-weight: 700 !important; vertical-align: middle !important; font-size: 36px !important; mso-line-height-rule: exactly;line-height: 42px !important;}
.h2 {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 600 !important;vertical-align: middle !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 24px !important;}
.text {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 21px !important;}
.text-list {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 25px !important;}
.textSmall {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 14px !important;}
.text-xsmall {font-family: "Helvetica", "Arial", sans-serif !important;font-size: 11px !important;text-transform: uppercase !important;mso-line-height-rule: exactly;line-height: 22px !important;letter-spacing: 1px !important;}
.text-bold {font-weight: 600 !important;}
.text-link {text-decoration: underline !important;}
.text-linkNoUnderline {text-decoration: none !important;}
.text-strike {text-decoration: line-through !important;}
.textColorDark {color: #23233e !important;}
.textColorNormal {color: #4f4f65 !important;}
.textColorBlue {color: #2020c0 !important;}
.textColorGray {color: #A5A8AD !important;}
.textColorWhite {color: #FFFFFF !important;}
.Button-primary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #ffffff !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
.Button-secondary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #2020C0 !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
    </style>
    <![endif]-->
  <!-- HIDDEN PREHEADER TEXT -->
  </head><body><div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;">
  </div>
  <table border="0" cellpadding="0" cellspacing="0" width="100%" class=" mainTable  " style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: rgb(240, 240, 240);">
    <tbody><tr><td style="display:none !important;
 visibility:hidden;
 mso-hide:all;
 font-size:1px;
 color:#ffffff;
 line-height:1px;
 max-height:0px;
 max-width:0px;
 opacity:0;
 overflow:hidden; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> We are thrilled that you will be joining us. If yo... </td>
    <!-- HEADER -->
    </tr><tr>
      <td align="center" class="header" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 580px; margin: 0 auto;">
          <tbody><tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <h1 style="font-size: 33px;font-weight: 800;line-height: 30px;">Dstricts</h1>               </td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
        </tbody></table>
        <!--[if (gte mso 9)|(IE)]>
    </td>
    </tr>
    </table>
    <![endif]-->
      </td>
    </tr>
    <!-- CONTENT -->
    <tr>
      <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content bg-white" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: white; width: 580px; margin: 0 auto;">
          <tbody><tr>
            <td class="Content-container Content-container--main text textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101); padding-left: 60px; padding-right: 60px; padding-top: 54px; padding-bottom: 60px;">
              <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                <!-- RESTAURANT INFO -->
                <tbody><tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        
                        <td width="12" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                        <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">Welcome</span>                          </td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <!-- INTRO -->
                <tr>
                  <td valign="top" align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h1 textColorDark" style="font-family: &quot;GT America Condensed Bold&quot;, &quot;Roboto Condensed&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 700; vertical-align: middle; font-size: 36px; line-height: 42px; color: rgb(35, 35, 62);">You are checked in now</span>                          </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                          <!--[if gte mso 15]>&nbsp;<![endif]-->
                        </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <!-- MESSAGE -->
                
                
                
                
                
                
                <!-- BOOKING INFO -->
                
                <!-- ADDRESS -->
                <tr>
                  <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody>
                      
                      
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody><tr>
                              <td style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                <table align="left" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--address" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 70%;">
                                  <tbody><tr>
                                    <td align="left" width="100%" class="text-list textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
                                    <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">We regret that the room is not cleaned. Please wait for a while before we clean the room. We will inform you asap its done and you can proceed to your room.</span>                                         </td>
                                  </tr>
                                </tbody></table>
                                <!--[if mso]></td><td><![endif]-->
                                <table align="right" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--map" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 50%;">
                                  <tbody><tr>
                                    
                                  </tr>
                                </tbody></table>
                              </td>
                            </tr>
                          </tbody></table>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                
                
                
                <!-- RECEIPT -->
                
                
                
                <!-- EDIT RECEIPT -->
                <!-- CANCELLATION POLICY -->
                
                
                
                <!-- QUESTIONS -->
                
              </tbody></table>
            </td>
          </tr>
        </tbody></table>
      </td>
    </tr>
    <!-- FOOTER -->
    <tr>
      <td align="center" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; width: 580px; margin: 0 auto;">
        <!-- Will most likely required a feature flag -->
        <!--[if (gte mso 9)|(IE)]>
<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
<tr>
<td align="center" valign="top" width="600">
<![endif]-->
        <table width="100%" border="0" cellspacing="0" cellpadding="0" align="center" class="Content-container" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; padding-left: 60px; padding-right: 60px;">
          <tbody><tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="center" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <a href="https://www.exploretock.com" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;"> <img src="https://storage.googleapis.com/tock-public-assets/images-email-template/tock-brandmark-color.png" width="30" height="30" alt="Tock" border="0" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block;"> </a>              </td>
          </tr>
          <tr class="spacer">
            <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
              <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                 2019 Tock, Inc.
              </div>
              <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                All Rights Reserved
              </div>
            </td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
        </tbody></table>
        <!--[if (gte mso 9)|(IE)]>
</td>
</tr>
</table>
<![endif]-->
      </td>
    </tr>
  </tbody></table>



</body></html>';
				
				sendEmail($subject, $to, $emailContent); 
				$today=strtotime(date('Y-m-d'))-100;
			}
			else
			{
				$today=strtotime(date('Y-m-d'));
			}
			$room_id=$rowCountId['id'];			
			}
			else
			{
			$room_id=$rowRoom['room_id'];	
			}
			
			
			 
			$stmt = $dbCon->prepare("update hotel_checkout_detail set cust_id=?,transection_id=?, checked_in=1,room_id=?,guest_adult=?,guest_children=?,room_cleaning_date=? where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("ssiiisi",$cuId,$Chargeid,$room_id,$_POST['guest_adult'],$_POST['guest_children'],$today,$_POST['checkout_id']);
			$stmt->execute();	
			
			$stmt = $dbCon->prepare("select hotel_basic_information.id,hotel_name   from company_hotel_room_type_detail left join hotel_room_type on hotel_room_type.id=company_hotel_room_type_detail.room_type left join hotel_basic_information on company_hotel_room_type_detail.location_id=hotel_basic_information.property_id left join property_location on property_location.id=hotel_basic_information.property_id where company_hotel_room_type_detail.id=(select room_type_id from hotel_checkout_detail where id=?)");
			/* bind parameters for markers */
			$stmt->bind_param("i",$_POST['checkout_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select room_type_id,checkin_code,user_id from hotel_checkout_detail where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i",$_POST['checkout_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCode = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select email from user_logins where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i",$rowCode['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowUser = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select count(id) as num from employee_identificator_verification_detail where employee_user_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i",$rowCode['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowVerified = $result->fetch_assoc();
			if($rowVerified['num']>0)
			{
			$stmt = $dbCon->prepare("select id,box_number from hotel_insta_boxes where booking_id=? and in_use=1 and is_active=1");
			/* bind parameters for markers */
			$stmt->bind_param("i", $_POST['checkout_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowInstaBox = $result->fetch_assoc();
			if(!empty($rowInstaBox))
			{
				 
				$encId=$this->encrypt_decrypt('encrypt',$row['id']);
				$url="https://www.qloudid.com/public/index.php/InstaBox/welcome/".$encId;
				$surl=getShortUrl($url);
				 
				$subject='Welcome! you have room key available in instabox.';
				$to      = $rowUser['email'];
				 
				$emailContent='Welcome Guest! you can collect your key from the instabox number # 100-'.$rowInstaBox['box_number'].' using the url : '.$surl.' and the verification code:-'.$rowCode['checkin_code'];
				
				sendEmail($subject, $to, $emailContent); 
			}	
			}
			$stmt->close();
			$dbCon->close();
			return 1;	
			 
			}
		
		function hotelBookingListForFrontDeskCheckin($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select location_id from user_company_profile where company_id=? and user_login_id=?");
			$stmt->bind_param("ii",$data['company_id'],$data['user_id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();
			 
			$today=strtotime(date('Y-m-d'));
			 
			$stmt = $dbCon->prepare("select hotel_checkout_detail.id,first_name,last_name,guest_adult,guest_children,checkin_booking_date,checkout_booking_date  from hotel_checkout_detail left join user_logins on user_logins.id=hotel_checkout_detail.user_id where is_paid=1 and checked_in=0 and property_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row2['location_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				if($today<$row['checkin_booking_date'] || $today>$row['checkout_booking_date'])
				{
					continue;
				}
				array_push($org,$row);
			}
			$row['first_name']=html_entity_decode($row['first_name'],ENT_NOQUOTES, 'UTF-8');
			$row['last_name']=html_entity_decode($row['last_name'],ENT_NOQUOTES, 'UTF-8'); 
			$stmt->close();
			$dbCon->close();
			 
			return $org;
		}
		
		function handoverKey($data)
		{
			$dbCon = AppModel::createConnection();
			
			 
			$stmt = $dbCon->prepare("update hotel_checkout_detail set key_received=1 where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['id']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("update hotel_insta_boxes  set booking_id=null,in_use=0,room_id=0 where booking_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['id']);
			$stmt->execute();
			
			$curl = curl_init();
			  curl_setopt_array($curl, array(
			  CURLOPT_URL => 'https://dstricts.com/user/index.php/DstrictsApp/updateKeyReceiving',
			  CURLOPT_RETURNTRANSFER => true,
			  CURLOPT_ENCODING => '',
			  CURLOPT_MAXREDIRS => 10,
			  CURLOPT_TIMEOUT => 0,
			  CURLOPT_FOLLOWLOCATION => true,
			  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
			  CURLOPT_CUSTOMREQUEST => 'POST',
			  CURLOPT_POSTFIELDS => array('checkid' => $data['id']),
			));
			$response = curl_exec($curl);
			curl_close($curl);
			
			$stmt = $dbCon->prepare("select email from user_logins where id=(select user_id from hotel_checkout_detail where id=?)");
			$stmt->bind_param("i",$data['id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();
			
			$subject='Welcome guest!';
			$to      = $row2['email'];
			$emailContent='Welcome guest! you can proceed to your room. Have a nice stay.';
			sendEmail($subject, $to, $emailContent); 
			
			$stmt->close();
			$dbCon->close();
			return 1;
			 
		}
		
		
		function checkOutGuest($data)
		{
			$dbCon = AppModel::createConnection();
			
			 $today=date('Y-m-d H:i:s');
			$stmt = $dbCon->prepare("update hotel_checkout_detail set checked_in=2,checkout_time_info=now() where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['id']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("select room_id from hotel_checkout_detail where id=?");
			$stmt->bind_param("i",$data['id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc(); 
			 
			$stmt = $dbCon->prepare("update hotel_room_detail set is_approved_cleaning=0,staff_assigned_id=0,cleaning_work_assigned=0,inspector_id=0,inspection_work_allocatied=0 where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i",$row2['room_id']);
			$stmt->execute();
			
			$curl = curl_init();
			  curl_setopt_array($curl, array(
			  CURLOPT_URL => 'https://dstricts.com/user/index.php/DstrictsApp/checkOutGuest',
			  CURLOPT_RETURNTRANSFER => true,
			  CURLOPT_ENCODING => '',
			  CURLOPT_MAXREDIRS => 10,
			  CURLOPT_TIMEOUT => 0,
			  CURLOPT_FOLLOWLOCATION => true,
			  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
			  CURLOPT_CUSTOMREQUEST => 'POST',
			  CURLOPT_POSTFIELDS => array('checkid' => $data['id']),
			));
			$response = curl_exec($curl);
			curl_close($curl);
			
			$stmt = $dbCon->prepare("select email from user_logins where id=(select user_id from hotel_checkout_detail where id=?)");
			$stmt->bind_param("i",$data['id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();
			
			$subject='Thanks!';
			$to      = $row2['email'];
			$emailContent='Thanks! For selecting us, Hope you had a pleasent stay. Visit again soon.';
			sendEmail($subject, $to, $emailContent); 
			
			$stmt->close();
			$dbCon->close();
			return 1;
			 
		}
		
		function allocateRoomForCleaning($data)
		{
			$dbCon = AppModel::createConnection();
			
			$today=strtotime(date('Y-m-d')); 
			$stmt = $dbCon->prepare("update hotel_checkout_detail set room_cleaning_allocated=1,room_cleaning_staff_id=?,room_cleaning_date=? where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("isi",$data['user_id'],$today,$data['id']);
			$stmt->execute();
			 
			$stmt->close();
			$dbCon->close();
			return 1;
			 
		}
		
		
		function updateRoomCleaning($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("update hotel_checkout_detail set room_cleaning_allocated=0,room_cleaning_staff_id=null,room_cleaning_status=1 where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['id']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("select email from hotel_checkout_detail left join user_logins on user_logins.id=hotel_checkout_detail.user_id where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCode = $result->fetch_assoc();
			if(!empty($rowCode))
			{
				$subject='Welcome! please wait while room is being Cleaned.';
				$to      = $rowCode['email'];
				$emailContent='<html><head><title>Reservation confirmed</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <style type="text/css">
    /* GT AMERICA */

    @font-face {
      font-display: fallback;
      font-family: "GT America Regular";
      font-weight: 400;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
    }

    @font-face {
      font-display: fallback;
      font-family: "GT America Medium";
      font-weight: 600;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
    }

    @font-face {
      font-display: fallback;
      font-family: "GT America Condensed Bold";
      font-weight: 700;
      src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
    }

    /* CLIENT-SPECIFIC RESET */

    body,
    table,
    td,
    a {
      -webkit-text-size-adjust: 100%;
      -ms-text-size-adjust: 100%;
    }

    /* Prevent WebKit and Windows mobile changing default text sizes */

    table,
    td {
      mso-table-lspace: 0pt;
      mso-table-rspace: 0pt;
    }

    /* Remove spacing between tables in Outlook 2007 and up */

    img {
      -ms-interpolation-mode: bicubic;
    }

    /* Allow smoother rendering of resized image in Internet Explorer */

    .im {
      color: inherit !important;
    }

    /* DEVICE-SPECIFIC RESET */

    a[x-apple-data-detectors] {
      color: inherit !important;
      text-decoration: none !important;
      font-size: inherit !important;
      font-family: inherit !important;
      font-weight: inherit !important;
      line-height: inherit !important;
    }

    /* iOS BLUE LINKS */

    /* RESET */

    img {
      border: 0;
      height: auto;
      line-height: 100%;
      outline: none;
      text-decoration: none;
      display: block;
    }

    table {
      border-collapse: collapse;
    }

    table td {
      border-collapse: collapse;
      display: table-cell;
    }

    body {
      height: 100% !important;
      margin: 0 !important;
      padding: 0 !important;
      width: 100% !important;
    }

    /* BG COLORS */

    .mainTable {
      background-color: #F0F0F0;
    }

    .mainTable--hospitality {
      background-color: #f7f2ed;
    }

    html {
      background-color: #F0F0F0;
    }

    /* VARIABLES */

    .bg-white {
      background-color: white;
    }

    .hr {
      /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
      background-color: #d3d3d8;
      border-collapse: collapse;
      mso-table-lspace: 0pt;
      mso-table-rspace: 0pt;
      mso-line-height-rule: exactly;
      line-height: 1px;
    }

    .textAlignLeft {
      text-align: left !important;
    }

    .textAlignRight {
      text-align: right !important;
    }

    .textAlignCenter {
      text-align: center !important;
    }

    .mt1 {
      margin-top: 6px;
    }

    .list {
      padding-left: 18px;
      margin: 0;
    }

    /* TYPOGRAPHY */

    body {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      color: #4f4f65;
      -webkit-font-smoothing: antialiased;
      -ms-text-size-adjust: 100%;
      -moz-osx-font-smoothing: grayscale;
      font-smoothing: always;
      text-rendering: optimizeLegibility;
    }

    .h1 {
      font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 700;
      vertical-align: middle;
      font-size: 36px;
      line-height: 42px;
    }

    .h2 {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 600;
      vertical-align: middle;
      font-size: 16px;
      line-height: 24px;
    }

    .text {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 16px;
      line-height: 21px;
    }

    .text-list {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 16px;
      line-height: 25px;
    }

    .textSmall {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 400;
      font-size: 14px;
    }

    .text-xsmall {
      font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
      font-size: 11px;
      text-transform: uppercase;
      line-height: 22px;
      letter-spacing: 1px;
    }

    .text-bold {
      font-weight: 600;
    }

    .text-link {
      text-decoration: underline;
    }

    .text-linkNoUnderline {
      text-decoration: none;
    }

    .text-strike {
      text-decoration: line-through;
    }

    /* FONT COLORS */

    .textColorDark {
      color: #23233e;
    }

    .textColorNormal {
      color: #4f4f65;
    }

    .textColorBlue {
      color: #2020c0;
    }

    .textColorGrayDark {
      color: #7B7B8B;
    }

    .textColorGray {
      color: #A5A8AD;
    }

    .textColorWhite {
      color: #FFFFFF;
    }

    .textColorRed {
      color: #df3232;
    }

    /* BUTTON */

    .Button-primary-wrapper {
      border-radius: 3px;
      background-color: #2020C0;
    }

    .Button-primary {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      border-radius: 3px;
      border: 1px solid #2020C0;
      color: #ffffff;
      display: block;
      font-size: 16px;
      font-weight: 600;
      padding: 18px;
      text-decoration: none;
    }

    .Button-secondary-wrapper {
      border-radius: 3px;
      background-color: #ffffff;
    }

    .Button-secondary {
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      border-radius: 3px;
      border: 1px solid #2020C0;
      color: #2020C0;
      display: block;
      font-size: 16px;
      font-weight: 600;
      padding: 18px;
      text-decoration: none;
    }

    /* LAYOUT */

    .Content-container {
      padding-left: 60px;
      padding-right: 60px;
    }

    .Content-container--main {
      padding-top: 54px;
      padding-bottom: 60px;
    }

    .Content {
      width: 580px;
      margin: 0 auto;
    }

    .wrapper {
      max-width: 600px;
    }

    .section {
      padding: 24px 0px;
      border-bottom: 1px solid #d3d3d8;
    }

    .section--noBorder {
      padding: 24px 0px 0;
    }

    .section--last {
      padding: 24px 0px;
    }

    .message {
      background-color: #F4F4F5;
      padding: 18px;
    }

    .card {
      border: 1px solid #d3d3d8;
      padding: 18px;
    }

    /* HEADER */

    .header-tockLogoImage {
      display: block;
      color: #F0F0F0;
    }

    .header-heroImage {
      padding-bottom: 24px;
    }

    /* PREHEADER */

    .preheader {
      display: none;
      font-size: 1px;
      color: #FFFFFF;
      line-height: 1px;
      max-height: 0px;
      max-width: 0px;
      opacity: 0;
      overflow: hidden;
    }

    /* BANNER */

    .notice {
      padding: 12px;
      background: #23233E;
      color: #FFFFFF;
      display: block;
      font-size: 14px;
      font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
      font-weight: 600;
    }

    /* INTRO */

    .section--intro {
      padding-bottom: 48px;
    }

    /* BOOKING INFO */

    .business-logo__container {
      width: 48px;
      height: 48px;
      border-radius: 3px;
      border: 1px solid #d3d3d8;
      overflow: hidden;
    }

    .business-logo__image {
      border: 1px solid transparent;
      border-radius: 3px;
      width: 48px;
      height: 48px;
      display: block;
    }

    .business-address--address {
      width: 50%;
    }

    .business-address--map {
      width: 50%;
    }

    .business-address--map-image {
      width: 100%;
    }

    /* MOBILE TICKETS */

    .mobile-ticket--description {
      width: 65%;
      margin-top: 12px;
      margin-right: 5%;
    }

    .mobile-ticket--code {
      width: 30%;
    }

    .mobile-ticket--code-image {
      width: 100%;
    }

    /* RESERVATION ACTIONS */

    .linksTable {
      border-bottom: 1px solid #d3d3d8;
    }

    .linksTableRow {
      padding: 24px 12px;
    }

    .actions-icon {
      vertical-align: middle;
    }

    .actions-text {
      vertical-align: middle;
    }

    /* RECEIPT */

    .receipt__container {
      border: 1px solid #d3d3d8;
      padding: 24px;
    }

    .receipt__row {
      border-top: 1px solid #d3d3d8;
    }

    /* FEEDBACK ICONS */

    .feedback-link {
      border: 1px solid #d4d5da;
      border-radius: 3px;
      display: inline-block;
      width: calc(32% - 2px);
      padding: 10px 0;
    }

    .feedback-link-bumper {
      display: inline-block;
      width: 1%;
    }

    .feedback-link img {
      height: 50px;
      width: 50px;
    }

    /* SOCIAL ICONS */

    .social-link {
      display: inline-block;
      width: auto;
    }

    .social-link-text {
      padding: 14px 24px 14px 14px;
    }

    /* TABLET STYLES */

    @media screen and (max-width: 648px) {
      /* DEVICE-SPECIFIC RESET */
      div[style*="margin: 16px 0;"] {
        margin: 0 !important;
      }
      /* ANDROID CENTER FIX */
      /* LAYOUT */
      .wrapper {
        width: 100% !important;
        max-width: 100% !important;
      }
      .Content {
        width: 90% !important;
      }
      .Content-container {
        padding-left: 36px !important;
        padding-right: 36px !important;
      }
      .Content-container--main {
        padding-top: 30px !important;
        padding-bottom: 42px !important;
      }
      .responsiveTable {
        width: 100% !important;
      }
      /* RESERVATION ACTIONS */
      .linksTableRow {
        padding-left: 0 !important;
        padding-right: 0 !important;
        padding-top: 12px !important;
        padding-bottom: 12px !important;
      }
      .linksTableRow--borderRight {
        border-right: none !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      /* FEEDBACK LINK */
      .feedback-link img {
        height: 38px !important;
        width: 38px !important;
      }
    }

    /* MOBILE STYLES */

    @media screen and (max-width: 480px) {
      /* TYPOGRAPHY */
      .h1 {
        font-size: 30px !important;
        line-height: 30px !important;
      }
      .text {
        font-size: 16px !important;
        line-height: 22px !important;
      }
      /* BUTTON */
      .mobile-buttonContainer {
        width: 100% !important;
      }
      /* LAYOUT */
      .Content {
        width: 100% !important;
      }
      .Content-container {
        padding-left: 18px !important;
        padding-right: 18px !important;
      }
      .Content-container--main {
        padding-top: 24px !important;
        padding-bottom: 30px !important;
      }
      .section {
        padding: 18px 0 !important;
      }
      .section--last {
        padding: 18px 0 !important;
      }
      .header {
        padding: 0 18px !important;
      }
      .business-address--address {
        width: 100% !important;
      }
      .business-address--map {
        margin-top: 30px !important;
        width: 100% !important;
      }
      .mobile-ticket--description {
        width: 100% !important;
        margin-top: 0px !important;
      }
      .mobile-ticket--code {
        margin-top: 30px !important;
        margin-left: 0;
        width: 100% !important;
      }
      /* RECEIPT */
      .receipt__container {
        padding: 12px !important;
      }
      /* SOCIAL ICONS */
      .social-link {
        display: block !important;
        width: 100% !important;
        border-bottom: 1px solid #d3d3d8 !important;
      }
      /* INTRO */
      .section--intro {
        padding-top: 18px !important;
        padding-bottom: 18px !important;
      }
    }
  </style>



   
  <!--[if mso]>
    <style type="text/css">
.h1 {font-family: "Helvetica", "Arial", sans-serif !important; font-weight: 700 !important; vertical-align: middle !important; font-size: 36px !important; mso-line-height-rule: exactly;line-height: 42px !important;}
.h2 {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 600 !important;vertical-align: middle !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 24px !important;}
.text {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 21px !important;}
.text-list {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 25px !important;}
.textSmall {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 14px !important;}
.text-xsmall {font-family: "Helvetica", "Arial", sans-serif !important;font-size: 11px !important;text-transform: uppercase !important;mso-line-height-rule: exactly;line-height: 22px !important;letter-spacing: 1px !important;}
.text-bold {font-weight: 600 !important;}
.text-link {text-decoration: underline !important;}
.text-linkNoUnderline {text-decoration: none !important;}
.text-strike {text-decoration: line-through !important;}
.textColorDark {color: #23233e !important;}
.textColorNormal {color: #4f4f65 !important;}
.textColorBlue {color: #2020c0 !important;}
.textColorGray {color: #A5A8AD !important;}
.textColorWhite {color: #FFFFFF !important;}
.Button-primary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #ffffff !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
.Button-secondary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #2020C0 !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
    </style>
    <![endif]-->
  <!-- HIDDEN PREHEADER TEXT -->
  </head><body><div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;">
  </div>
  <table border="0" cellpadding="0" cellspacing="0" width="100%" class=" mainTable  " style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: rgb(240, 240, 240);">
    <tbody><tr><td style="display:none !important;
 visibility:hidden;
 mso-hide:all;
 font-size:1px;
 color:#ffffff;
 line-height:1px;
 max-height:0px;
 max-width:0px;
 opacity:0;
 overflow:hidden; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> We are thrilled that you will be joining us. If yo... </td>
    <!-- HEADER -->
    </tr><tr>
      <td align="center" class="header" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 580px; margin: 0 auto;">
          <tbody><tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <h1 style="font-size: 33px;font-weight: 800;line-height: 30px;">Dstricts</h1>               </td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
        </tbody></table>
        <!--[if (gte mso 9)|(IE)]>
    </td>
    </tr>
    </table>
    <![endif]-->
      </td>
    </tr>
    <!-- CONTENT -->
    <tr>
      <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content bg-white" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: white; width: 580px; margin: 0 auto;">
          <tbody><tr>
            <td class="Content-container Content-container--main text textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101); padding-left: 60px; padding-right: 60px; padding-top: 54px; padding-bottom: 60px;">
              <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                <!-- RESTAURANT INFO -->
                <tbody><tr>
                  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        
                        <td width="12" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                        <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">Completed</span>                          </td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <!-- INTRO -->
                <tr>
                  <td valign="top" align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody><tr>
                        <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h1 textColorDark" style="font-family: &quot;GT America Condensed Bold&quot;, &quot;Roboto Condensed&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 700; vertical-align: middle; font-size: 36px; line-height: 42px; color: rgb(35, 35, 62);">Your room has been cleaned</span>                          </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
                          <!--[if gte mso 15]>&nbsp;<![endif]-->
                        </td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <!-- MESSAGE -->
                
                
                
                
                
                
                <!-- BOOKING INFO -->
                
                <!-- ADDRESS -->
                <tr>
                  <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                      <tbody>
                      
                      
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr class="spacer">
                        <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                      </tr>
                      <tr>
                        <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                          <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                            <tbody><tr>
                              <td style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                <table align="left" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--address" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 70%;">
                                  <tbody><tr>
                                    <td align="left" width="100%" class="text-list textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
                                    <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">We regret for inconvenience. Your room is cleaned now you can proceed to your room.</span>                                         </td>
                                  </tr>
                                </tbody></table>
                                <!--[if mso]></td><td><![endif]-->
                                <table align="right" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--map" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 50%;">
                                  <tbody><tr>
                                    
                                  </tr>
                                </tbody></table>
                              </td>
                            </tr>
                          </tbody></table>
                        </td>
                      </tr>
                    </tbody></table>
                  </td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                <tr class="spacer">
                  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
                </tr>
                
                
                
                <!-- RECEIPT -->
                
                
                
                <!-- EDIT RECEIPT -->
                <!-- CANCELLATION POLICY -->
                
                
                
                <!-- QUESTIONS -->
                
              </tbody></table>
            </td>
          </tr>
        </tbody></table>
      </td>
    </tr>
    <!-- FOOTER -->
    <tr>
      <td align="center" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; width: 580px; margin: 0 auto;">
        <!-- Will most likely required a feature flag -->
        <!--[if (gte mso 9)|(IE)]>
<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
<tr>
<td align="center" valign="top" width="600">
<![endif]-->
        <table width="100%" border="0" cellspacing="0" cellpadding="0" align="center" class="Content-container" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; padding-left: 60px; padding-right: 60px;">
          <tbody><tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="center" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <a href="https://www.exploretock.com" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;"> <img src="https://storage.googleapis.com/tock-public-assets/images-email-template/tock-brandmark-color.png" width="30" height="30" alt="Tock" border="0" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block;"> </a>              </td>
          </tr>
          <tr class="spacer">
            <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr>
            <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
              <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                 2019 Tock, Inc.
              </div>
              <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                All Rights Reserved
              </div>
            </td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
          <tr class="spacer">
            <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
          </tr>
        </tbody></table>
        <!--[if (gte mso 9)|(IE)]>
</td>
</tr>
</table>
<![endif]-->
      </td>
    </tr>
  </tbody></table>



</body></html>';
				sendEmail($subject, $to, $emailContent); 
				}	

			
			$stmt->close();
			$dbCon->close();
			return 1;
			 
		}
		
		
		
		function hotelBookingListForCleningStaff($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select location_id,concat_ws(' ',first_name,last_name) as name from user_company_profile left join user_logins on user_logins.id=user_company_profile.user_login_id where company_id=? and user_login_id=?");
			$stmt->bind_param("ii",$data['company_id'],$data['user_id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();
			 
			$today=strtotime(date('Y-m-d'));
			 
			$stmt = $dbCon->prepare("select room_name,passport_image,hotel_checkout_detail.id,concat_ws(' ',first_name,last_name) as name,checkin_booking_date,checkout_booking_date,room_cleaning_date,room_cleaning_status,room_cleaning_allocated,room_cleaning_staff_id from hotel_checkout_detail left join user_logins on user_logins.id=hotel_checkout_detail.user_id left join hotel_room_detail on hotel_room_detail.id=hotel_checkout_detail.room_id where is_paid=1 and checked_in=1 and key_received=1 and hotel_checkout_detail.property_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row2['location_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				if($today<$row['checkin_booking_date'] || $today>$row['checkout_booking_date'])
				{
					continue;
				}
				
				if($today>$row['room_cleaning_date'])
				{
					$stmt = $dbCon->prepare("update hotel_checkout_detail set room_cleaning_status=0 where id=?");
			
					/* bind parameters for markers */
					$stmt->bind_param("i", $row['id']);
					$stmt->execute();
					$row['room_cleaning_status']=0;
					$row['room_cleaning_allocated']=0;
					$row['started_by']='Not started';
					$row['name_assigned']='';
				}
				
				if($today==$row['room_cleaning_date'] && $row['room_cleaning_status']==1)
				{
					continue; 
				}
				
				if($today==$row['room_cleaning_date'] && $row['room_cleaning_allocated']==1)
				{
					$stmt = $dbCon->prepare("select location_id,concat_ws(' ',first_name,last_name) as name from user_company_profile left join user_logins on user_logins.id=user_company_profile.user_login_id where company_id=? and user_login_id=?");
					$stmt->bind_param("ii",$data['company_id'],$row['room_cleaning_staff_id']);
					$stmt->execute();
					$resultStarted = $stmt->get_result();
					$rowStarted = $resultStarted->fetch_assoc();
					$row['name_assigned']=html_entity_decode($rowStarted['name'],ENT_NOQUOTES, 'UTF-8'); 
					$row['started_by']='Started by - '.html_entity_decode($rowStarted['name'],ENT_NOQUOTES, 'UTF-8'); 
				}
				
				if($row['passport_image']=="" || $row['passport_image']==null)
				{
					$row['user_image']='https://www.qloudid.com/html/usercontent/images/person-male.png';
				}
				else
				{
				$filename="../estorecss/".$row['passport_image'].".txt"; $value_a=file_get_contents("../estorecss/".$row['passport_image'].".txt"); $value_a=str_replace('"','',$value_a); $row['passport_image'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['passport_image'].'.jpg' );
				$row['user_image']=str_replace('../','https://www.qloudid.com/',$row['passport_image']);
				}
				$row['name']=html_entity_decode($row['name'],ENT_NOQUOTES, 'UTF-8'); 
				array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			 
			return $org;
		}

		
		
		function hotelBookingListForFrontDeskCheckout($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select location_id from user_company_profile where company_id=? and user_login_id=?");
			$stmt->bind_param("ii",$data['company_id'],$data['user_id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();
			 
			$today=strtotime(date('Y-m-d'));
			 
			$stmt = $dbCon->prepare("select passport_image,hotel_checkout_detail.id,concat_ws(' ',first_name,last_name) as name,checkin_booking_date,checkout_booking_date  from hotel_checkout_detail left join user_logins on user_logins.id=hotel_checkout_detail.user_id where is_paid=1 and checked_in=1 and key_received=1 and property_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row2['location_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				
				if($row['passport_image']=="" || $row['passport_image']==null)
				{
					$row['user_image']='https://www.qloudid.com/html/usercontent/images/person-male.png';
				}
				else
				{
				$filename="../estorecss/".$row['passport_image'].".txt"; $value_a=file_get_contents("../estorecss/".$row['passport_image'].".txt"); $value_a=str_replace('"','',$value_a); $row['passport_image'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['passport_image'].'.jpg' );
				$row['user_image']=str_replace('../','https://www.qloudid.com/',$row['passport_image']);
				}
				$row['name']=html_entity_decode($row['name'],ENT_NOQUOTES, 'UTF-8'); 
				array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			 
			return $org;
		}

		function hotelBookingListForFrontDeskKeyhandling($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select location_id from user_company_profile where company_id=? and user_login_id=?");
			$stmt->bind_param("ii",$data['company_id'],$data['user_id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();
			 
			$today=strtotime(date('Y-m-d'));
			 
			$stmt = $dbCon->prepare("select passport_image,hotel_checkout_detail.id,concat_ws(' ',first_name,last_name) as name,checkin_booking_date,checkout_booking_date  from hotel_checkout_detail left join user_logins on user_logins.id=hotel_checkout_detail.user_id where is_paid=1 and checked_in=1 and key_received=0 and property_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row2['location_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				if($today<$row['checkin_booking_date'] || $today>$row['checkout_booking_date'])
				{
					continue;
				}
				if($row['passport_image']=="" || $row['passport_image']==null)
				{
					$row['user_image']='https://www.qloudid.com/html/usercontent/images/person-male.png';
				}
				else
				{
				$filename="../estorecss/".$row['passport_image'].".txt"; $value_a=file_get_contents("../estorecss/".$row['passport_image'].".txt"); $value_a=str_replace('"','',$value_a); $row['passport_image'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['passport_image'].'.jpg' );
				$row['user_image']=str_replace('../','https://www.qloudid.com/',$row['passport_image']);
				}
				$row['name']=html_entity_decode($row['name'],ENT_NOQUOTES, 'UTF-8'); 
				array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			 
			return $org;
		}

		function hotelBookingListForFrontDeskReceivedKey($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select location_id from user_company_profile where company_id=? and user_login_id=?");
			$stmt->bind_param("ii",$data['company_id'],$data['user_id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();
			 
			$today=strtotime(date('Y-m-d'));
			 
			$stmt = $dbCon->prepare("select passport_image,hotel_checkout_detail.id,concat_ws(' ',first_name,last_name) as name,checkin_booking_date,checkout_booking_date  from hotel_checkout_detail left join user_logins on user_logins.id=hotel_checkout_detail.user_id where is_paid=1 and checked_in=1 and key_received=1 and property_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row2['location_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				if($today<$row['checkin_booking_date'] || $today>$row['checkout_booking_date'])
				{
					continue;
				}
				if($row['passport_image']=="" || $row['passport_image']==null)
				{
					$row['user_image']='https://www.qloudid.com/html/usercontent/images/person-male.png';
				}
				else
				{
				$filename="../estorecss/".$row['passport_image'].".txt"; $value_a=file_get_contents("../estorecss/".$row['passport_image'].".txt"); $value_a=str_replace('"','',$value_a); $row['passport_image'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['passport_image'].'.jpg' );
				$row['user_image']=str_replace('../','https://www.qloudid.com/',$row['passport_image']);
				}
				$row['name']=html_entity_decode($row['name'],ENT_NOQUOTES, 'UTF-8'); 
				array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			 
			return $org;
		}

		function isHotel($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select id from property_location where company_id=? and is_headquarter=1");
			$stmt->bind_param("i",$data['company_id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$rowHeadquarter = $result2->fetch_assoc();
			
			$stmt = $dbCon->prepare("select id,location_id from user_company_profile where company_id=? and user_login_id=?");
			$stmt->bind_param("ii",$data['company_id'],$data['user_id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();
			if(empty($row2))
			{
			$stmt = $dbCon->prepare("insert into user_company_profile (company_id,user_login_id,location_id) values (?,?,?)");
			$stmt->bind_param("iii",$data['company_id'],$data['user_id'],$rowHeadquarter['id']);
			$stmt->execute();
			}
			if($row2['location_id']=='' || $row2['location_id']==null)
			{
			$stmt = $dbCon->prepare("update user_company_profile set location_id where id=?");
			$stmt->bind_param("ii",$rowHeadquarter['id'],$row2['id']);
			$stmt->execute();	
			}
			
			/*$stmt = $dbCon->prepare("select is_admin from manage_employee_permissions where  company_id=? and user_id=?");
			$stmt->bind_param("ii",$data['company_id'],$data['user_id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();
			if($row2['is_admin']==1)
			 {
				$stmt->close();
				$dbCon->close();
				return 1;		
			 }*/
			$stmt = $dbCon->prepare("select id from hotel_basic_information where property_id=(select location_id from user_company_profile where company_id=? and user_login_id=?)");
			$stmt->bind_param("ii",$data['company_id'],$data['user_id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();
			 if(empty($row2))
			 {
				$stmt->close();
				$dbCon->close();
				return 0;		
			 }
			 else
			 {
				$stmt->close();
				$dbCon->close();
				return 1;
			 }
			
		}

		function hotelBookingListForKeyGeneration($data)
		{
			$dbCon = AppModel::createConnection();
			$id=$this->encrypt_decrypt('decrypt',$data['id']);
			 
			$stmt = $dbCon->prepare("select property_id from hotel_basic_information where id=?");
			$stmt->bind_param("i",$id);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();
		 
			$stmt = $dbCon->prepare("select id,checkin_code from hotel_checkout_detail where room_type_id in (select id from company_hotel_room_type_detail where location_id=?) and checked_in=0 and checkin_code is not null and hotel_checkout_detail.id not in (select booking_id from hotel_insta_boxes where hotel_id=? and booking_id is not null)");
			
			/* bind parameters for markers */
			$stmt->bind_param("ii", $row2['property_id'],$id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			 
			return $org;
			 }
			 
			 
		function hotelBookingInstaBoxListForKeyGeneration($data)
		{
			$dbCon = AppModel::createConnection();
			$id=$this->encrypt_decrypt('decrypt',$data['id']);
			 
			 
			$org =array();
			$stmt = $dbCon->prepare("select id,box_number from hotel_insta_boxes where hotel_id=? and in_use=0 and is_active=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $id);
			$stmt->execute();
			$result = $stmt->get_result();
			 
			while($row = $result->fetch_assoc())
			{
				$row['instaBox']='# 100-'.$row['box_number'];
				array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			 }
			 
			 	 
		 
  
	function checkEmployeeReference($data)
    {
		
		$dbCon = AppModel::createConnection();
		$stmt = $dbCon->prepare("select id,login_status,login_started_at from hotel_basic_information where login_ip=?");
		/* bind parameters for markers */
		$stmt->bind_param("s", $_POST['orderRef']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		
		if(empty($row))
		{
			 
			$stmt->close();
			$dbCon->close();
			return 0; 
			
		}
		else
		{
			 
			$LoginTime=strtotime($row['login_started_at']);
			$currentTime=strtotime(date('Y-m-d H:i:s'));
			$minutes = round(abs($currentTime - $LoginTime) / 60,2); 
			 
			if($minutes>=4)
			{
			$stmt = $dbCon->prepare("update hotel_basic_information set login_ip=null,login_status=0,login_started_at=null where id=?");
				/* bind parameters for markers */
			$stmt->bind_param("i",$row['id']);
			$stmt->execute(); 
			$stmt->close();
			$dbCon->close();
			return 0; 			
			
			}
		}
			
		 
			$stmt->close();
			$dbCon->close();
			return $row['login_status']; 
		 
    }
	
	
	function verifEmployeeInfo($data)
		{
			$dbCon = AppModel::createConnection();
			$id=$this->encrypt_decrypt('decrypt',$data['id']);
			$stmt = $dbCon->prepare("select location_id from user_company_profile where user_login_id=? and company_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("ii", $data['user_id'],$data['company_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select property_id,login_status,login_started_at from hotel_basic_information where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i",$id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowProperty = $result->fetch_assoc();
			$LoginTime=strtotime($rowProperty['login_started_at']);
			$currentTime=strtotime(date('Y-m-d H:i:s'));
			$minutes = round(abs($currentTime - $LoginTime) / 60,2); 
			
			if($minutes>=4)
			{
			$stmt = $dbCon->prepare("update hotel_basic_information set login_ip=null,login_status=0,login_started_at=null where id=?");
				/* bind parameters for markers */
			$stmt->bind_param("i",$id);
			$stmt->execute(); 	
			
			$stmt = $dbCon->prepare("select property_id,login_status,login_started_at from hotel_basic_information where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i",$id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowProperty = $result->fetch_assoc();
			}
			
			if($rowProperty['login_status']>0)
			{
			$stmt->close();
			$dbCon->close();
			return 0;
			}
			
			if($row['location_id']==$rowProperty['property_id'])
			{
			$stmt = $dbCon->prepare("update hotel_basic_information set login_ip=?,login_status=1,login_started_at=now() where id=?");
				/* bind parameters for markers */
			$stmt->bind_param("si",$data['ip'],$id);
			$stmt->execute(); 	
			$stmt->close();
			$dbCon->close();
			return 1;
			}
			else
			{
			$stmt->close();
			$dbCon->close();
			return 0;	
			}
			
		}
		
		
		function generateKeyForInstaBox($data)
		{
			$dbCon = AppModel::createConnection();
			$id=$this->encrypt_decrypt('decrypt',$data['id']);
			 
			$stmt = $dbCon->prepare("update hotel_basic_information set login_status=2,booking_id=?,insta_box_id=?,checkout_room_id=? where id=?");
				/* bind parameters for markers */
			$stmt->bind_param("iiii",$data['booking_id'],$data['insta_box_id'],$data['room_id'],$id);
			$stmt->execute(); 	
			$stmt->close();
			$dbCon->close();
			return 1;
			 
			
		}
		
		
		function countryCode()
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select id,country_code from phone_country_code order by country_code");
			
			/* bind parameters for markers */
			 
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				$row['country_code']='+'.$row['country_code'];
			array_push($org,$row);	
			}
			
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
		function resendInvitation($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select invitation_type from hotel_checkout_invitation_info where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$resultCode = $stmt->get_result();
			$rowCountryCode = $resultCode->fetch_assoc();
			if($rowCountryCode['invitation_type']==1)
			{
			$result = $this->resendPhoneIinviteAdultForCheckin($data);	
			}
			else
			{
			$result = $this->resendEmailIinviteAdultForCheckin($data);	
			}
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function verifyUserInvitationInfo($data)
		{
			$dbCon = AppModel::createConnection();
			$invitation_id=$this->encrypt_decrypt('decrypt',$data['id']);
			
			$stmt = $dbCon->prepare("select * from hotel_checkout_invitation_info where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $invitation_id);
			$stmt->execute();
			$resultCode = $stmt->get_result();
			$rowCountryCode = $resultCode->fetch_assoc();
			
			if($rowCountryCode['is_verified']==0)
			{
			$stmt->close();
			$dbCon->close();
			return 0;	
			}
			
			$stmt = $dbCon->prepare("select id,checkin_code,guest_adult,guest_children,checkin_date,checkout_date from hotel_checkout_detail where id=?");
			$stmt->bind_param("i",$rowCountryCode['hotel_checkout_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$row = $result->fetch_assoc();
			$today=strtotime(date('Y-m-d'));
			$booking_date=strtotime($row['checkin_date']);
			$booking_overdate=strtotime($row['checkout_date']);
				
			if($today<$booking_date || $today>$booking_overdate)
			{
			$stmt->close();
			$dbCon->close();
			return 2;
			}
			
			if($rowCountryCode['is_confirmed']==1)
			{
			$stmt->close();
			$dbCon->close();
			return 1;	
			}
			
			if($rowCountryCode['invitation_type']==2)
			{
			$stmt = $dbCon->prepare("select id as user_id from user_logins where email=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("s", $rowCountryCode['email']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			}
			else if($rowCountryCode['invitation_type']==1)
			{
			$stmt = $dbCon->prepare("select user_logins_id as user_id,country_of_residence from user_profiles left join user_logins on user_logins.id=user_profiles.user_logins_id where country_of_residence=? and phone_number=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("is", $rowCountryCode['country_id'], $rowCountryCode['phone_number']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			}
			
			if($row['user_id']==$data['user_id'])
			{
				$stmt = $dbCon->prepare("select count(id) as num from user_address where user_id=?");
				
				$stmt->bind_param("i",$data['user_id']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$row = $result1->fetch_assoc();	
				if($row['num']==0)
				{
				$stmt->close();
				$dbCon->close();
				return 4;	
				}
				
				$stmt = $dbCon->prepare("select count(id) as num from user_cards where user_login_id=?");
				$stmt->bind_param("i",$data['user_id']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$row = $result1->fetch_assoc();
				if($row['num']==0)
				{
				$stmt->close();
				$dbCon->close();
				return 4;	
				}
				
				$stmt = $dbCon->prepare("select count(id) as num from user_identification where user_id=?");
				
				$stmt->bind_param("i",$data['user_id']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$row = $result1->fetch_assoc();		
				
				if($row['num']==0)
				{
				$stmt->close();
				$dbCon->close();
				return 4;	
				}
				
			$stmt = $dbCon->prepare("update hotel_checkout_invitation_info set invited_user_id=? where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("ii",$data['user_id'], $invitation_id);
			$stmt->execute();
			
			$stmt->close();
			$dbCon->close();
			return $rowCountryCode['verification_code'];	
			}
			else
			{
			$stmt->close();
			$dbCon->close();
			return 0;	
			}
			
		}
		
		
		function confirmUserInvitationInfo($data)
		{
			$dbCon = AppModel::createConnection();
			$invitation_id=$this->encrypt_decrypt('decrypt',$data['id']);
			$stmt = $dbCon->prepare("update hotel_checkout_invitation_info set is_confirmed=1 where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $invitation_id);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		
		function resendPhoneIinviteAdultForCheckin($data)
		{
			 
			$dbCon = AppModel::createConnection();
			 
			
			$stmt = $dbCon->prepare("select buyer_id,is_buyer_company,hotel_checkout_detail.user_id,visiting_address,port_number,visiting_city,visiting_state,property_location.id as p_id,room_type_id,total_days,price,hotel_name,fdesk_country_code,fdesk_phone_number from hotel_checkout_detail left join company_hotel_room_type_detail on company_hotel_room_type_detail.id= hotel_checkout_detail.room_type_id left join hotel_basic_information on hotel_basic_information.property_id=company_hotel_room_type_detail.location_id left join property_location on property_location.id=hotel_basic_information.property_id where hotel_checkout_detail.id=(select hotel_checkout_id from hotel_checkout_invitation_info where id=?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowInfo = $result->fetch_assoc();
			 
			$stmt = $dbCon->prepare("select * from hotel_images where property_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $rowInfo['p_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowImage = $result->fetch_assoc();
			
			$filename="../estorecss/".$rowImage['image_path'].".txt"; $value_a=file_get_contents("../estorecss/".$rowImage['image_path'].".txt"); $value_a=str_replace('"','',$value_a); $rowImage['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$rowImage['image_path'].'.jpg' );
			$rowInfo['image_path']=str_replace('../','https://www.qloudid.com/',$rowImage['image_path']);
			
			$stmt = $dbCon->prepare("select concat_ws(' ', first_name,last_name) as name,email from user_logins where id = ?");
        
				/* bind parameters for markers */
			$stmt->bind_param("i", $rowInfo['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowUser    = $result->fetch_assoc();
				 
		  
			 
			$stmt = $dbCon->prepare("select country_code,phone_number,verification_code from hotel_checkout_invitation_info where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$resultCode = $stmt->get_result();
			
			$rowCountryCode = $resultCode->fetch_assoc();
			 $id1=$this -> encrypt_decrypt('encrypt',$data['id']); 
			/*if(isset($data['precheck']))
			{
			$url="https://www.dstricts.com/public/index.php/Hotel/verifyInvitationPreCheckin/".$id1;	
			}
			else
			{*/
			$url="https://www.dstricts.com/public/index.php/Hotel/verifyInvitationCheckin/".$id1;	
			//}
			$surl=getShortUrl($url);
			
			$phone="+".trim($rowCountryCode['country_code'])."".trim($rowCountryCode['phone_number']);
			
			$subject='You have an invitation for checkin';
			$to=$phone;
			$html='Hi you have invitation to checkin in hotel : '.$rowInfo['hotel_name'].' from '.$rowInfo['name'].'. please open link in browser and use dstrict and Qloud ID app to verify using code :'.$rowCountryCode['verification_code'].' '.$surl;
			//echo $html; die;
			$res=sendSms($subject, $to, $html);
			 
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		
		function resendEmailIinviteAdultForCheckin($data)
		{
			 
			$dbCon = AppModel::createConnection();
			 
			 
			$stmt = $dbCon->prepare("select buyer_id,is_buyer_company,hotel_checkout_detail.user_id,visiting_address,port_number,visiting_city,visiting_state,property_location.id as p_id,room_type_id,total_days,price,hotel_name,fdesk_country_code,fdesk_phone_number from hotel_checkout_detail left join company_hotel_room_type_detail on company_hotel_room_type_detail.id= hotel_checkout_detail.room_type_id left join hotel_basic_information on hotel_basic_information.property_id=company_hotel_room_type_detail.location_id left join property_location on property_location.id=hotel_basic_information.property_id where hotel_checkout_detail.id=(select hotel_checkout_id from hotel_checkout_invitation_info where id=?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowInfo = $result->fetch_assoc();
			 
			$stmt = $dbCon->prepare("select * from hotel_images where property_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $rowInfo['p_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowImage = $result->fetch_assoc();
			
			$filename="../estorecss/".$rowImage['image_path'].".txt"; $value_a=file_get_contents("../estorecss/".$rowImage['image_path'].".txt"); $value_a=str_replace('"','',$value_a); $rowImage['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$rowImage['image_path'].'.jpg' );
			$rowInfo['image_path']=str_replace('../','https://www.qloudid.com/',$rowImage['image_path']);
			
			$stmt = $dbCon->prepare("select concat_ws(' ', first_name,last_name) as name,email from user_logins where id = ?");
        
				/* bind parameters for markers */
			$stmt->bind_param("i", $rowInfo['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowUser    = $result->fetch_assoc();
				 
		  
			 
			$stmt = $dbCon->prepare("select country_code,phone_number,verification_code,email from hotel_checkout_invitation_info where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$resultCode = $stmt->get_result();
			
			$rowCountryCode = $resultCode->fetch_assoc();
			 
			$code=$rowCountryCode['verification_code'];
			 $data['email']=$rowCountryCode['email'];
			 $id1=$this -> encrypt_decrypt('encrypt',$data['id']); 
			/* if(isset($data['precheck']))
			{
			$url="https://www.dstricts.com/public/index.php/Hotel/verifyInvitationPreCheckin/".$id1;	
			}
			else
			{*/
			$url="https://www.dstricts.com/public/index.php/Hotel/verifyInvitationCheckin/".$id1;	
			//}
			 
			$surl=getShortUrl($url);
			
			$to      = $data['email'];
			$emailContent='<html xmlns="http://www.w3.org/1999/xhtml" style="background-color: rgb(240, 240, 240);"><head>
					  <title>Reservation confirmed</title>
					  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
					  <meta charset="utf-8">
					  <meta name="viewport" content="width=device-width, initial-scale=1">
					  <meta http-equiv="X-UA-Compatible" content="IE=edge">
					  <style type="text/css">
						/* GT AMERICA */

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Regular";
						  font-weight: 400;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
						}

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Medium";
						  font-weight: 600;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
						}

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Condensed Bold";
						  font-weight: 700;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
						}

						/* CLIENT-SPECIFIC RESET */

						body,
						table,
						td,
						a {
						  -webkit-text-size-adjust: 100%;
						  -ms-text-size-adjust: 100%;
						}

						/* Prevent WebKit and Windows mobile changing default text sizes */

						table,
						td {
						  mso-table-lspace: 0pt;
						  mso-table-rspace: 0pt;
						}

						/* Remove spacing between tables in Outlook 2007 and up */

						img {
						  -ms-interpolation-mode: bicubic;
						}

						/* Allow smoother rendering of resized image in Internet Explorer */

						.im {
						  color: inherit !important;
						}

						/* DEVICE-SPECIFIC RESET */

						a[x-apple-data-detectors] {
						  color: inherit !important;
						  text-decoration: none !important;
						  font-size: inherit !important;
						  font-family: inherit !important;
						  font-weight: inherit !important;
						  line-height: inherit !important;
						}

						/* iOS BLUE LINKS */

						/* RESET */

						img {
						  border: 0;
						  height: auto;
						  line-height: 100%;
						  outline: none;
						  text-decoration: none;
						  display: block;
						}

						table {
						  border-collapse: collapse;
						}

						table td {
						  border-collapse: collapse;
						  display: table-cell;
						}

						body {
						  height: 100% !important;
						  margin: 0 !important;
						  padding: 0 !important;
						  width: 100% !important;
						}

						/* BG COLORS */

						.mainTable {
						  background-color: #F0F0F0;
						}

						.mainTable--hospitality {
						  background-color: #f7f2ed;
						}

						html {
						  background-color: #F0F0F0;
						}

						/* VARIABLES */

						.bg-white {
						  background-color: white;
						}

						.hr {
						  /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
						  background-color: #d3d3d8;
						  border-collapse: collapse;
						  mso-table-lspace: 0pt;
						  mso-table-rspace: 0pt;
						  mso-line-height-rule: exactly;
						  line-height: 1px;
						}

						.textAlignLeft {
						  text-align: left !important;
						}

						.textAlignRight {
						  text-align: right !important;
						}

						.textAlignCenter {
						  text-align: center !important;
						}

						.mt1 {
						  margin-top: 6px;
						}

						.list {
						  padding-left: 18px;
						  margin: 0;
						}

						/* TYPOGRAPHY */

						body {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  color: #4f4f65;
						  -webkit-font-smoothing: antialiased;
						  -ms-text-size-adjust: 100%;
						  -moz-osx-font-smoothing: grayscale;
						  font-smoothing: always;
						  text-rendering: optimizeLegibility;
						}

						.h1 {
						  font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 700;
						  vertical-align: middle;
						  font-size: 36px;
						  line-height: 42px;
						}

						.h2 {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 600;
						  vertical-align: middle;
						  font-size: 16px;
						  line-height: 24px;
						}

						.text {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 16px;
						  line-height: 21px;
						}

						.text-list {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 16px;
						  line-height: 25px;
						}

						.textSmall {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 14px;
						}

						.text-xsmall {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-size: 11px;
						  text-transform: uppercase;
						  line-height: 22px;
						  letter-spacing: 1px;
						}

						.text-bold {
						  font-weight: 600;
						}

						.text-link {
						  text-decoration: underline;
						}

						.text-linkNoUnderline {
						  text-decoration: none;
						}

						.text-strike {
						  text-decoration: line-through;
						}

						/* FONT COLORS */

						.textColorDark {
						  color: #23233e;
						}

						.textColorNormal {
						  color: #4f4f65;
						}

						.textColorBlue {
						  color: #2020c0;
						}

						.textColorGrayDark {
						  color: #7B7B8B;
						}

						.textColorGray {
						  color: #A5A8AD;
						}

						.textColorWhite {
						  color: #FFFFFF;
						}

						.textColorRed {
						  color: #df3232;
						}

						/* BUTTON */

						.Button-primary-wrapper {
						  border-radius: 3px;
						  background-color: #2020C0;
						}

						.Button-primary {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  border-radius: 3px;
						  border: 1px solid #2020C0;
						  color: #ffffff;
						  display: block;
						  font-size: 16px;
						  font-weight: 600;
						  padding: 18px;
						  text-decoration: none;
						}

						.Button-secondary-wrapper {
						  border-radius: 3px;
						  background-color: #ffffff;
						}

						.Button-secondary {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  border-radius: 3px;
						  border: 1px solid #2020C0;
						  color: #2020C0;
						  display: block;
						  font-size: 16px;
						  font-weight: 600;
						  padding: 18px;
						  text-decoration: none;
						}

						/* LAYOUT */

						.Content-container {
						  padding-left: 60px;
						  padding-right: 60px;
						}

						.Content-container--main {
						  padding-top: 54px;
						  padding-bottom: 60px;
						}

						.Content {
						  width: 580px;
						  margin: 0 auto;
						}

						.wrapper {
						  max-width: 600px;
						}

						.section {
						  padding: 24px 0px;
						  border-bottom: 1px solid #d3d3d8;
						}

						.section--noBorder {
						  padding: 24px 0px 0;
						}

						.section--last {
						  padding: 24px 0px;
						}

						.message {
						  background-color: #F4F4F5;
						  padding: 18px;
						}

						.card {
						  border: 1px solid #d3d3d8;
						  padding: 18px;
						}

						/* HEADER */

						.header-tockLogoImage {
						  display: block;
						  color: #F0F0F0;
						}

						.header-heroImage {
						  padding-bottom: 24px;
						}

						/* PREHEADER */

						.preheader {
						  display: none;
						  font-size: 1px;
						  color: #FFFFFF;
						  line-height: 1px;
						  max-height: 0px;
						  max-width: 0px;
						  opacity: 0;
						  overflow: hidden;
						}

						/* BANNER */

						.notice {
						  padding: 12px;
						  background: #23233E;
						  color: #FFFFFF;
						  display: block;
						  font-size: 14px;
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 600;
						}

						/* INTRO */

						.section--intro {
						  padding-bottom: 48px;
						}

						/* BOOKING INFO */

						.business-logo__container {
						  width: 48px;
						  height: 48px;
						  border-radius: 3px;
						  border: 1px solid #d3d3d8;
						  overflow: hidden;
						}

						.business-logo__image {
						  border: 1px solid transparent;
						  border-radius: 3px;
						  width: 48px;
						  height: 48px;
						  display: block;
						}

						.business-address--address {
						  width: 50%;
						}

						.business-address--map {
						  width: 50%;
						}

						.business-address--map-image {
						  width: 100%;
						}

						/* MOBILE TICKETS */

						.mobile-ticket--description {
						  width: 65%;
						  margin-top: 12px;
						  margin-right: 5%;
						}

						.mobile-ticket--code {
						  width: 30%;
						}

						.mobile-ticket--code-image {
						  width: 100%;
						}

						/* RESERVATION ACTIONS */

						.linksTable {
						  border-bottom: 1px solid #d3d3d8;
						}

						.linksTableRow {
						  padding: 24px 12px;
						}

						.actions-icon {
						  vertical-align: middle;
						}

						.actions-text {
						  vertical-align: middle;
						}

						/* RECEIPT */

						.receipt__container {
						  border: 1px solid #d3d3d8;
						  padding: 24px;
						}

						.receipt__row {
						  border-top: 1px solid #d3d3d8;
						}

						/* FEEDBACK ICONS */

						.feedback-link {
						  border: 1px solid #d4d5da;
						  border-radius: 3px;
						  display: inline-block;
						  width: calc(32% - 2px);
						  padding: 10px 0;
						}

						.feedback-link-bumper {
						  display: inline-block;
						  width: 1%;
						}

						.feedback-link img {
						  height: 50px;
						  width: 50px;
						}

						/* SOCIAL ICONS */

						.social-link {
						  display: inline-block;
						  width: auto;
						}

						.social-link-text {
						  padding: 14px 24px 14px 14px;
						}

						/* TABLET STYLES */

						@media screen and (max-width: 648px) {
						  /* DEVICE-SPECIFIC RESET */
						  div[style*="margin: 16px 0;"] {
							margin: 0 !important;
						  }
						  /* ANDROID CENTER FIX */
						  /* LAYOUT */
						  .wrapper {
							width: 100% !important;
							max-width: 100% !important;
						  }
						  .Content {
							width: 90% !important;
						  }
						  .Content-container {
							padding-left: 36px !important;
							padding-right: 36px !important;
						  }
						  .Content-container--main {
							padding-top: 30px !important;
							padding-bottom: 42px !important;
						  }
						  .responsiveTable {
							width: 100% !important;
						  }
						  /* RESERVATION ACTIONS */
						  .linksTableRow {
							padding-left: 0 !important;
							padding-right: 0 !important;
							padding-top: 12px !important;
							padding-bottom: 12px !important;
						  }
						  .linksTableRow--borderRight {
							border-right: none !important;
							padding-left: 0 !important;
							padding-right: 0 !important;
						  }
						  /* FEEDBACK LINK */
						  .feedback-link img {
							height: 38px !important;
							width: 38px !important;
						  }
						}

						/* MOBILE STYLES */

						@media screen and (max-width: 480px) {
						  /* TYPOGRAPHY */
						  .h1 {
							font-size: 30px !important;
							line-height: 30px !important;
						  }
						  .text {
							font-size: 16px !important;
							line-height: 22px !important;
						  }
						  /* BUTTON */
						  .mobile-buttonContainer {
							width: 100% !important;
						  }
						  /* LAYOUT */
						  .Content {
							width: 100% !important;
						  }
						  .Content-container {
							padding-left: 18px !important;
							padding-right: 18px !important;
						  }
						  .Content-container--main {
							padding-top: 24px !important;
							padding-bottom: 30px !important;
						  }
						  .section {
							padding: 18px 0 !important;
						  }
						  .section--last {
							padding: 18px 0 !important;
						  }
						  .header {
							padding: 0 18px !important;
						  }
						  .business-address--address {
							width: 100% !important;
						  }
						  .business-address--map {
							margin-top: 30px !important;
							width: 100% !important;
						  }
						  .mobile-ticket--description {
							width: 100% !important;
							margin-top: 0px !important;
						  }
						  .mobile-ticket--code {
							margin-top: 30px !important;
							margin-left: 0;
							width: 100% !important;
						  }
						  /* RECEIPT */
						  .receipt__container {
							padding: 12px !important;
						  }
						  /* SOCIAL ICONS */
						  .social-link {
							display: block !important;
							width: 100% !important;
							border-bottom: 1px solid #d3d3d8 !important;
						  }
						  /* INTRO */
						  .section--intro {
							padding-top: 18px !important;
							padding-bottom: 18px !important;
						  }
						}
					  </style>
					</head>

					<body style="margin: 0 !important; padding: 0 !important; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; height: 100%; margin: 0; padding: 0; width: 100%; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; color: rgb(79, 79, 101); -webkit-font-smoothing: antialiased; -ms-text-size-adjust: 100%; -moz-osx-font-smoothing: grayscale; font-smoothing: always; text-rendering: optimizeLegibility;">
					   
					  <!--[if mso]>
						<style type="text/css">
					.h1 {font-family: "Helvetica", "Arial", sans-serif !important; font-weight: 700 !important; vertical-align: middle !important; font-size: 36px !important; mso-line-height-rule: exactly;line-height: 42px !important;}
					.h2 {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 600 !important;vertical-align: middle !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 24px !important;}
					.text {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 21px !important;}
					.text-list {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 25px !important;}
					.textSmall {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 14px !important;}
					.text-xsmall {font-family: "Helvetica", "Arial", sans-serif !important;font-size: 11px !important;text-transform: uppercase !important;mso-line-height-rule: exactly;line-height: 22px !important;letter-spacing: 1px !important;}
					.text-bold {font-weight: 600 !important;}
					.text-link {text-decoration: underline !important;}
					.text-linkNoUnderline {text-decoration: none !important;}
					.text-strike {text-decoration: line-through !important;}
					.textColorDark {color: #23233e !important;}
					.textColorNormal {color: #4f4f65 !important;}
					.textColorBlue {color: #2020c0 !important;}
					.textColorGray {color: #A5A8AD !important;}
					.textColorWhite {color: #FFFFFF !important;}
					.Button-primary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #ffffff !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
					.Button-secondary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #2020C0 !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
						</style>
						<![endif]-->
					  <!-- HIDDEN PREHEADER TEXT -->
					  <div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;">
					  </div>
					  <table border="0" cellpadding="0" cellspacing="0" width="100%" class=" mainTable  " style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: rgb(240, 240, 240);">
						<tbody><tr><td style="display:none !important;
					 visibility:hidden;
					 mso-hide:all;
					 font-size:1px;
					 color:#ffffff;
					 line-height:1px;
					 max-height:0px;
					 max-width:0px;
					 opacity:0;
					 overflow:hidden; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> We are thrilled that you will be joining us. If yo... </td>
						<!-- HEADER -->
						</tr><tr>
						  <td align="center" class="header" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
							<!--[if (gte mso 9)|(IE)]>
						<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
						<tr>
						<td align="center" valign="top" width="600">
						<![endif]-->
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 580px; margin: 0 auto;">
							  <tbody><tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr>
								<td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <h1 style="font-size: 33px;font-weight: 800;line-height: 30px;">Dstricts</h1>               </td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							</tbody></table>
							<!--[if (gte mso 9)|(IE)]>
						</td>
						</tr>
						</table>
						<![endif]-->
						  </td>
						</tr>
						<!-- CONTENT -->
						<tr>
						  <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
							<!--[if (gte mso 9)|(IE)]>
						<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
						<tr>
						<td align="center" valign="top" width="600">
						<![endif]-->
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content bg-white" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: white; width: 580px; margin: 0 auto;">
							  <tbody><tr>
								<td class="Content-container Content-container--main text textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101); padding-left: 60px; padding-right: 60px; padding-top: 54px; padding-bottom: 60px;">
								  <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
									<!-- RESTAURANT INFO -->
									<tbody><tr>
									  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" valign="center" width="48" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="business-logo__container" style="width: 48px; height: 48px; border-radius: 3px; border: 1px solid rgb(211, 211, 216); overflow: hidden;">
												<img src="'.$rowImage['image_path'].'" class="business-logo__image" width="48" height="48" alt="Logo" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block; border: 1px solid transparent; border-radius: 3px; width: 48px; height: 48px; display: block;">
											  </div>
											</td>
											<td width="12" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
											<td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">'.$rowInfo["hotel_name"].'</span>                          </td>
										  </tr>
										  <tr class="spacer">
											<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr class="spacer">
											<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<!-- INTRO -->
									<tr>
									  <td valign="top" align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h1 textColorDark" style="font-family: &quot;GT America Condensed Bold&quot;, &quot;Roboto Condensed&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 700; vertical-align: middle; font-size: 36px; line-height: 42px; color: rgb(35, 35, 62);">Invitation received</span>                          </td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr>
											<td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
											  <!--[if gte mso 15]>&nbsp;<![endif]-->
											</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<!-- MESSAGE -->
									<tr class="spacer">
									  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr>
									  <td align="left" class="message" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(244, 244, 245); padding: 18px;">
										<div class="text textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
										  <span class="text-bold textColorDark" style="font-weight: 600; color: rgb(35, 35, 62);">A message from '.$rowInfo["name"].'</span>
										  <br>I have successfully checked in the hotel. I am waiting for you to check in here using your dstrict app. Find the link to check in using the confirmation code </div>
									  </td>
									</tr>
									<tr class="spacer">
									  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr>
									  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
										<!--[if gte mso 15]>&nbsp;<![endif]-->
									  </td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<!-- BOOKING INFO -->
									<tr>
									  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" valign="middle" width="468" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="text-list textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
												<span class="text-bold textColorDark" style="font-weight: 600; color: rgb(35, 35, 62);">'.date("F j, Y, g:i a").'</span>
												<br> Party of 2 for Smiles Davis 
												<br> Confirmation code #: '.$code.'
												<br> Reservation  2
												<br>
											  </div>
											</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr class="spacer">
											<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  

					<tr>
											<td align="center" valign="center" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <table border="0" cellspacing="0" cellpadding="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
												<tbody><tr>
												  <td align="center" valign="center" width="100%" class="Button-primary-wrapper" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; border-radius: 3px; background-color: rgb(32, 32, 192);">
												  <a href="'.$url.'" target="_blank" class="Button-primary" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; border-radius: 3px; border: 1px solid rgb(32, 32, 192); color: rgb(255, 255, 255); display: block; font-size: 16px; font-weight: 600; padding: 18px; text-decoration: none;"> Manage your reservation </a>                                </td>
												</tr>
											  </tbody></table>
											</td>
										  </tr><tr class="spacer">
											<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>

					<tr class="spacer">
											<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>

					<tr>
											<td align="center" valign="center" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <table border="0" cellspacing="0" cellpadding="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
												<tbody><tr>
												  <td align="center" valign="center" width="100%" class="Button-primary-wrapper" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; border-radius: 3px; background-color: rgb(32, 32, 192);">
												  <a href="'.$url.'" target="_blank" class="Button-primary" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; border-radius: 3px; border: 1px solid rgb(32, 32, 192); color: rgb(255, 255, 255); display: block; font-size: 16px; font-weight: 600; padding: 18px; text-decoration: none;"> Checkin with app</a>                                </td>
												</tr>
											  </tbody></table>
											</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<!-- ADDRESS -->
									<tr>
									  <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr>
											<td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
											  <!--[if gte mso 15]>&nbsp;<![endif]-->
											</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr>
											<td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
												<tbody><tr>
												  <td style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
													<table align="left" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--address" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 50%;">
													  <tbody><tr>
														<td align="left" width="100%" class="text-list textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
														<span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">'.$rowInfo["hotel_name"].'</span><br>'.$rowInfo["visiting_address"].' '.$rowInfo["port_number"].'<br>'.$rowInfo["visiting_city"].' '.$rowInfo["visiting_state"].'<br> <a href="tel:+' .$rowInfo[" fdesk_country_code"].'="" '.$rowinfo["fdesk_phone_number"].'"="">+'.$rowInfo["fdesk_country_code"].' '.$rowInfo["fdesk_phone_number"].'</a><br> <br> <a href="https://www.google.com/maps/dir//'.$rowInfo['visiting_address'].' '.$rowInfo['port_number'].'/" class="text text-link textColorBlue" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; text-decoration: underline; color: rgb(32, 32, 192);" target="_blank">Get directions</a>                                      </td>
													  </tr>
													</tbody></table>
													<!--[if mso]></td><td><![endif]-->
													<table align="right" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--map" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 50%;">
													  <tbody><tr>
														<td width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <a href="https://www.google.com/maps/dir//1350+W+Randolph%2C+Chicago%2C+IL%2C+US+60607/" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;"> <img width="230" class="business-address--map-image" height="auto" alt="Map of Elske" src="https://maps.googleapis.com/maps/api/staticmap?key=AIzaSyCPd%2DxSabI7QOfKX5NxVVup6bPfcovwFiQ&amp;center=1350+W+Randolph%2C+Chicago%2C+IL%2C+US+60607&amp;size=300x200&amp;zoom=15&amp;scale=2&amp;format=png&amp;visual%5Frefresh=true&amp;markers=scale%3A2%7Cicon%3Ahttps%3A%2F%2Fstorage.googleapis.com%2Ftock%2Dpublic%2Dassets%2Fimages%2Demail%2Dtemplate%2Femail%2Dmap%2Dmarker.png%7Cshadow%3Afalse%7C1350+W+Randolph%2C+Chicago%2C+IL%2C+US+60607&amp;style=feature%3Aall%7Celement%3Alabels.text.fill%7Ccolor%3A0x4b505b&amp;style=feature%3Aall%7Celement%3Alabels.text.stroke%7Ccolor%3A0xffffff%7Cvisibility%3Aon&amp;style=feature%3Aadministrative.land%5Fparcel%7Celement%3Aall%7Cvisibility%3Aoff&amp;style=feature%3Alandscape.man%5Fmade%7Celement%3Aall%7Cvisibility%3Aon&amp;style=feature%3Alandscape.man%5Fmade%7Celement%3Ageometry.fill%7Ccolor%3A0xe9e9eb&amp;style=feature%3Apoi%7Celement%3Aall%7Cvisibility%3Aoff&amp;style=feature%3Aroad%7Celement%3Ageometry.fill%7Ccolor%3A0xffffff&amp;style=feature%3Aroad%7Celement%3Alabels.text.fill%7Ccolor%3A0x787c84&amp;style=feature%3Aroad%7Celement%3Alabels.icon%7Cvisibility%3Aoff&amp;style=feature%3Aroad.highway%7Celement%3Ageometry.fill%7Ccolor%3A0xffbe32&amp;style=feature%3Aroad.highway%7Celement%3Ageometry.stroke%7Ccolor%3A0xffbe32&amp;style=feature%3Atransit%7Celement%3Alabels.text.fill%7Cvisibility%3Aon%7Ccolor%3A0x787c84&amp;style=feature%3Atransit.line%7Celement%3Ageometry.fill%7Ccolor%3A0xd2d4d6&amp;signature=3yCSyIXfsSilvB5wcd4OElw40QU=" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block; width: 100%;"> </a>                                      </td>
													  </tr>
													</tbody></table>
												  </td>
												</tr>
											  </tbody></table>
											</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr>
									  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
										<!--[if gte mso 15]>&nbsp;<![endif]-->
									  </td>
									</tr>
									
									
									<!-- RECEIPT -->
									
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<!-- EDIT RECEIPT -->
									<!-- CANCELLATION POLICY -->
									<tr>
									  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="text text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; font-weight: 600; color: rgb(35, 35, 62);">
												Cancellation policy
											  </div>
											</td>
										  </tr>
										  <tr>
											<td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="text textColorNormal mt1" style="margin-top: 6px; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
												<span>This invitation can be accepted only if you have installed dstrict and Qloud ID pay. </span>
												<span>You can not transfer your invitation to another person.</span>
											  </div>
											</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<tr class="spacer">
									  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr class="spacer">
									  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<!-- QUESTIONS -->
									<tr>
									  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="text text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; font-weight: 600; color: rgb(35, 35, 62);">
												Questions?
											  </div>
											</td>
										  </tr>
										  <tr>
											<td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="text textColorNormal mt1" style="margin-top: 6px; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
												If you have questions about your reservation, contact us at&nbsp;
												<a href="mailto:'.$rowInfo['fdesk_email'].'">'.$rowInfo["fdesk_email"].'</a>                            or by calling
												<a href="tel:+'.$rowInfo[" fdesk_country_code"].'="" '.$rowinfo["fdesk_phone_number"].'"="">+'.$rowInfo["fdesk_country_code"].' '.$rowInfo["fdesk_phone_number"].'</a>.
											  </div>
											</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
								  </tbody></table>
								</td>
							  </tr>
							</tbody></table>
						  </td>
						</tr>
						<!-- FOOTER -->
						<tr>
						  <td align="center" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; width: 580px; margin: 0 auto;">
							<!-- Will most likely required a feature flag -->
							<!--[if (gte mso 9)|(IE)]>
					<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
					<tr>
					<td align="center" valign="top" width="600">
					<![endif]-->
							<table width="100%" border="0" cellspacing="0" cellpadding="0" align="center" class="Content-container" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; padding-left: 60px; padding-right: 60px;">
							  <tbody><tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr>
								<td align="center" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <a href="https://www.exploretock.com" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;"> <img src="https://storage.googleapis.com/tock-public-assets/images-email-template/tock-brandmark-color.png" width="30" height="30" alt="Tock" border="0" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block;"> </a>              </td>
							  </tr>
							  <tr class="spacer">
								<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr>
								<td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
								  <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
									 2019 Tock, Inc.
								  </div>
								  <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
									All Rights Reserved
								  </div>
								</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							</tbody></table>
							<!--[if (gte mso 9)|(IE)]>
					</td>
					</tr>
					</table>
					<![endif]-->
						  </td>
						</tr>
					  </tbody></table><title>Reservation confirmed</title>
					  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
					  <meta charset="utf-8">
					  <meta name="viewport" content="width=device-width, initial-scale=1">
					  <meta http-equiv="X-UA-Compatible" content="IE=edge">
					  <style type="text/css">
						/* GT AMERICA */

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Regular";
						  font-weight: 400;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
						}

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Medium";
						  font-weight: 600;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
						}

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Condensed Bold";
						  font-weight: 700;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
						}

						/* CLIENT-SPECIFIC RESET */

						body,
						table,
						td,
						a {
						  -webkit-text-size-adjust: 100%;
						  -ms-text-size-adjust: 100%;
						}

						/* Prevent WebKit and Windows mobile changing default text sizes */

						table,
						td {
						  mso-table-lspace: 0pt;
						  mso-table-rspace: 0pt;
						}

						/* Remove spacing between tables in Outlook 2007 and up */

						img {
						  -ms-interpolation-mode: bicubic;
						}

						/* Allow smoother rendering of resized image in Internet Explorer */

						.im {
						  color: inherit !important;
						}

						/* DEVICE-SPECIFIC RESET */

						a[x-apple-data-detectors] {
						  color: inherit !important;
						  text-decoration: none !important;
						  font-size: inherit !important;
						  font-family: inherit !important;
						  font-weight: inherit !important;
						  line-height: inherit !important;
						}

						/* iOS BLUE LINKS */

						/* RESET */

						img {
						  border: 0;
						  height: auto;
						  line-height: 100%;
						  outline: none;
						  text-decoration: none;
						  display: block;
						}

						table {
						  border-collapse: collapse;
						}

						table td {
						  border-collapse: collapse;
						  display: table-cell;
						}

						body {
						  height: 100% !important;
						  margin: 0 !important;
						  padding: 0 !important;
						  width: 100% !important;
						}

						/* BG COLORS */

						.mainTable {
						  background-color: #F0F0F0;
						}

						.mainTable--hospitality {
						  background-color: #f7f2ed;
						}

						html {
						  background-color: #F0F0F0;
						}

						/* VARIABLES */

						.bg-white {
						  background-color: white;
						}

						.hr {
						  /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
						  background-color: #d3d3d8;
						  border-collapse: collapse;
						  mso-table-lspace: 0pt;
						  mso-table-rspace: 0pt;
						  mso-line-height-rule: exactly;
						  line-height: 1px;
						}

						.textAlignLeft {
						  text-align: left !important;
						}

						.textAlignRight {
						  text-align: right !important;
						}

						.textAlignCenter {
						  text-align: center !important;
						}

						.mt1 {
						  margin-top: 6px;
						}

						.list {
						  padding-left: 18px;
						  margin: 0;
						}

						/* TYPOGRAPHY */

						body {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  color: #4f4f65;
						  -webkit-font-smoothing: antialiased;
						  -ms-text-size-adjust: 100%;
						  -moz-osx-font-smoothing: grayscale;
						  font-smoothing: always;
						  text-rendering: optimizeLegibility;
						}

						.h1 {
						  font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 700;
						  vertical-align: middle;
						  font-size: 36px;
						  line-height: 42px;
						}

						.h2 {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 600;
						  vertical-align: middle;
						  font-size: 16px;
						  line-height: 24px;
						}

						.text {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 16px;
						  line-height: 21px;
						}

						.text-list {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 16px;
						  line-height: 25px;
						}

						.textSmall {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 14px;
						}

						.text-xsmall {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-size: 11px;
						  text-transform: uppercase;
						  line-height: 22px;
						  letter-spacing: 1px;
						}

						.text-bold {
						  font-weight: 600;
						}

						.text-link {
						  text-decoration: underline;
						}

						.text-linkNoUnderline {
						  text-decoration: none;
						}

						.text-strike {
						  text-decoration: line-through;
						}

						/* FONT COLORS */

						.textColorDark {
						  color: #23233e;
						}

						.textColorNormal {
						  color: #4f4f65;
						}

						.textColorBlue {
						  color: #2020c0;
						}

						.textColorGrayDark {
						  color: #7B7B8B;
						}

						.textColorGray {
						  color: #A5A8AD;
						}

						.textColorWhite {
						  color: #FFFFFF;
						}

						.textColorRed {
						  color: #df3232;
						}

						/* BUTTON */

						.Button-primary-wrapper {
						  border-radius: 3px;
						  background-color: #2020C0;
						}

						.Button-primary {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  border-radius: 3px;
						  border: 1px solid #2020C0;
						  color: #ffffff;
						  display: block;
						  font-size: 16px;
						  font-weight: 600;
						  padding: 18px;
						  text-decoration: none;
						}

						.Button-secondary-wrapper {
						  border-radius: 3px;
						  background-color: #ffffff;
						}

						.Button-secondary {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  border-radius: 3px;
						  border: 1px solid #2020C0;
						  color: #2020C0;
						  display: block;
						  font-size: 16px;
						  font-weight: 600;
						  padding: 18px;
						  text-decoration: none;
						}

						/* LAYOUT */

						.Content-container {
						  padding-left: 60px;
						  padding-right: 60px;
						}

						.Content-container--main {
						  padding-top: 54px;
						  padding-bottom: 60px;
						}

						.Content {
						  width: 580px;
						  margin: 0 auto;
						}

						.wrapper {
						  max-width: 600px;
						}

						.section {
						  padding: 24px 0px;
						  border-bottom: 1px solid #d3d3d8;
						}

						.section--noBorder {
						  padding: 24px 0px 0;
						}

						.section--last {
						  padding: 24px 0px;
						}

						.message {
						  background-color: #F4F4F5;
						  padding: 18px;
						}

						.card {
						  border: 1px solid #d3d3d8;
						  padding: 18px;
						}

						/* HEADER */

						.header-tockLogoImage {
						  display: block;
						  color: #F0F0F0;
						}

						.header-heroImage {
						  padding-bottom: 24px;
						}

						/* PREHEADER */

						.preheader {
						  display: none;
						  font-size: 1px;
						  color: #FFFFFF;
						  line-height: 1px;
						  max-height: 0px;
						  max-width: 0px;
						  opacity: 0;
						  overflow: hidden;
						}

						/* BANNER */

						.notice {
						  padding: 12px;
						  background: #23233E;
						  color: #FFFFFF;
						  display: block;
						  font-size: 14px;
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 600;
						}

						/* INTRO */

						.section--intro {
						  padding-bottom: 48px;
						}

						/* BOOKING INFO */

						.business-logo__container {
						  width: 48px;
						  height: 48px;
						  border-radius: 3px;
						  border: 1px solid #d3d3d8;
						  overflow: hidden;
						}

						.business-logo__image {
						  border: 1px solid transparent;
						  border-radius: 3px;
						  width: 48px;
						  height: 48px;
						  display: block;
						}

						.business-address--address {
						  width: 50%;
						}

						.business-address--map {
						  width: 50%;
						}

						.business-address--map-image {
						  width: 100%;
						}

						/* MOBILE TICKETS */

						.mobile-ticket--description {
						  width: 65%;
						  margin-top: 12px;
						  margin-right: 5%;
						}

						.mobile-ticket--code {
						  width: 30%;
						}

						.mobile-ticket--code-image {
						  width: 100%;
						}

						/* RESERVATION ACTIONS */

						.linksTable {
						  border-bottom: 1px solid #d3d3d8;
						}

						.linksTableRow {
						  padding: 24px 12px;
						}

						.actions-icon {
						  vertical-align: middle;
						}

						.actions-text {
						  vertical-align: middle;
						}

						/* RECEIPT */

						.receipt__container {
						  border: 1px solid #d3d3d8;
						  padding: 24px;
						}

						.receipt__row {
						  border-top: 1px solid #d3d3d8;
						}

						/* FEEDBACK ICONS */

						.feedback-link {
						  border: 1px solid #d4d5da;
						  border-radius: 3px;
						  display: inline-block;
						  width: calc(32% - 2px);
						  padding: 10px 0;
						}

						.feedback-link-bumper {
						  display: inline-block;
						  width: 1%;
						}

						.feedback-link img {
						  height: 50px;
						  width: 50px;
						}

						/* SOCIAL ICONS */

						.social-link {
						  display: inline-block;
						  width: auto;
						}

						.social-link-text {
						  padding: 14px 24px 14px 14px;
						}

						/* TABLET STYLES */

						@media screen and (max-width: 648px) {
						  /* DEVICE-SPECIFIC RESET */
						  div[style*="margin: 16px 0;"] {
							margin: 0 !important;
						  }
						  /* ANDROID CENTER FIX */
						  /* LAYOUT */
						  .wrapper {
							width: 100% !important;
							max-width: 100% !important;
						  }
						  .Content {
							width: 90% !important;
						  }
						  .Content-container {
							padding-left: 36px !important;
							padding-right: 36px !important;
						  }
						  .Content-container--main {
							padding-top: 30px !important;
							padding-bottom: 42px !important;
						  }
						  .responsiveTable {
							width: 100% !important;
						  }
						  /* RESERVATION ACTIONS */
						  .linksTableRow {
							padding-left: 0 !important;
							padding-right: 0 !important;
							padding-top: 12px !important;
							padding-bottom: 12px !important;
						  }
						  .linksTableRow--borderRight {
							border-right: none !important;
							padding-left: 0 !important;
							padding-right: 0 !important;
						  }
						  /* FEEDBACK LINK */
						  .feedback-link img {
							height: 38px !important;
							width: 38px !important;
						  }
						}

						/* MOBILE STYLES */

						@media screen and (max-width: 480px) {
						  /* TYPOGRAPHY */
						  .h1 {
							font-size: 30px !important;
							line-height: 30px !important;
						  }
						  .text {
							font-size: 16px !important;
							line-height: 22px !important;
						  }
						  /* BUTTON */
						  .mobile-buttonContainer {
							width: 100% !important;
						  }
						  /* LAYOUT */
						  .Content {
							width: 100% !important;
						  }
						  .Content-container {
							padding-left: 18px !important;
							padding-right: 18px !important;
						  }
						  .Content-container--main {
							padding-top: 24px !important;
							padding-bottom: 30px !important;
						  }
						  .section {
							padding: 18px 0 !important;
						  }
						  .section--last {
							padding: 18px 0 !important;
						  }
						  .header {
							padding: 0 18px !important;
						  }
						  .business-address--address {
							width: 100% !important;
						  }
						  .business-address--map {
							margin-top: 30px !important;
							width: 100% !important;
						  }
						  .mobile-ticket--description {
							width: 100% !important;
							margin-top: 0px !important;
						  }
						  .mobile-ticket--code {
							margin-top: 30px !important;
							margin-left: 0;
							width: 100% !important;
						  }
						  /* RECEIPT */
						  .receipt__container {
							padding: 12px !important;
						  }
						  /* SOCIAL ICONS */
						  .social-link {
							display: block !important;
							width: 100% !important;
							border-bottom: 1px solid #d3d3d8 !important;
						  }
						  /* INTRO */
						  .section--intro {
							padding-top: 18px !important;
							padding-bottom: 18px !important;
						  }
						}
					  </style>



					   
					  <!--[if mso]>
						<style type="text/css">
					.h1 {font-family: "Helvetica", "Arial", sans-serif !important; font-weight: 700 !important; vertical-align: middle !important; font-size: 36px !important; mso-line-height-rule: exactly;line-height: 42px !important;}
					.h2 {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 600 !important;vertical-align: middle !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 24px !important;}
					.text {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 21px !important;}
					.text-list {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 25px !important;}
					.textSmall {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 14px !important;}
					.text-xsmall {font-family: "Helvetica", "Arial", sans-serif !important;font-size: 11px !important;text-transform: uppercase !important;mso-line-height-rule: exactly;line-height: 22px !important;letter-spacing: 1px !important;}
					.text-bold {font-weight: 600 !important;}
					.text-link {text-decoration: underline !important;}
					.text-linkNoUnderline {text-decoration: none !important;}
					.text-strike {text-decoration: line-through !important;}
					.textColorDark {color: #23233e !important;}
					.textColorNormal {color: #4f4f65 !important;}
					.textColorBlue {color: #2020c0 !important;}
					.textColorGray {color: #A5A8AD !important;}
					.textColorWhite {color: #FFFFFF !important;}
					.Button-primary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #ffffff !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
					.Button-secondary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #2020C0 !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
						</style>
						<![endif]-->
					  <!-- HIDDEN PREHEADER TEXT -->
					  <div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;">
					  </div>
					  



					</body></html>';
			
			sendEmail($subject, $to, $emailContent);
			 
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		

		function phoneIinviteAdultForCheckin($data)
		{
			 
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select user_logins_id,country_of_residence from user_profiles left join user_logins on user_logins.id=user_profiles.user_logins_id where country_of_residence=? and phone_number=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("is", $data['country_id'], $data['phone_number']);
			$stmt->execute();
			$resultUser = $stmt->get_result();
			
			$rowUser = $resultUser->fetch_assoc();
			if(empty($rowUser))
			{
				$user=0;
			}
			else
			{
			if($rowUser['user_logins_id']==$data['user_id']) 
			{
			$stmt->close();
			$dbCon->close();
			return 0;	
			}	
			$user=$rowUser['user_logins_id'];
			}
			
			 
			
			$stmt = $dbCon->prepare("select buyer_id,is_buyer_company,hotel_checkout_detail.user_id,visiting_address,port_number,visiting_city,visiting_state,property_location.id as p_id,room_type_id,total_days,price,hotel_name,fdesk_country_code,fdesk_phone_number from hotel_checkout_detail left join company_hotel_room_type_detail on company_hotel_room_type_detail.id= hotel_checkout_detail.room_type_id left join hotel_basic_information on hotel_basic_information.property_id=company_hotel_room_type_detail.location_id left join property_location on property_location.id=hotel_basic_information.property_id where hotel_checkout_detail.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['checkid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowInfo = $result->fetch_assoc();
			
			$code=mt_rand(111111,999999); 
			$stmt = $dbCon->prepare("select * from hotel_images where property_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $rowInfo['p_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowImage = $result->fetch_assoc();
			
			$filename="../estorecss/".$rowImage['image_path'].".txt"; $value_a=file_get_contents("../estorecss/".$rowImage['image_path'].".txt"); $value_a=str_replace('"','',$value_a); $rowImage['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$rowImage['image_path'].'.jpg' );
			$rowInfo['image_path']=str_replace('../','https://www.qloudid.com/',$rowImage['image_path']);
			
			$stmt = $dbCon->prepare("select concat_ws(' ', first_name,last_name) as name,email from user_logins where id = ?");
        
				/* bind parameters for markers */
			$stmt->bind_param("i", $data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowUser    = $result->fetch_assoc();
				 
		
			 
			$stmt = $dbCon->prepare("select country_code from phone_country_code where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['country_id']);
			$stmt->execute();
			$resultCode = $stmt->get_result();
			
			$rowCountryCode = $resultCode->fetch_assoc();
			  
			$type=1;
			$stmt = $dbCon->prepare("insert into hotel_checkout_invitation_info(verification_code,invitation_type,country_id,country_code,phone_number,invited_user_id,hotel_checkout_id)
			values(?,?,?,?,?,?,?)");
			$stmt->bind_param("iiiisii",$code,$type,$data['country_id'],$rowCountryCode['country_code'],$data['phone_number'],$user,$data['checkid']);
			$stmt->execute();
			$id=$stmt->insert_id; 
			$id1=$this -> encrypt_decrypt('encrypt',$id); 
			/*if(isset($data['precheck']))
			{
			$url="https://www.dstricts.com/public/index.php/Hotel/verifyInvitationPreCheckin/".$id1;	
			}
			else
			{*/
			$url="https://www.dstricts.com/public/index.php/Hotel/verifyInvitationCheckin/".$id1;	
			//}
			$url1="https://www.qloudid.com/public/index.php/BookingInformation/addAccountInformation/".$id1; 
			
			$surl=getShortUrl($url);
			$surl1=getShortUrl($url1);
			
			$phone="+".trim($rowCountryCode['country_code'])."".trim($data['phone_number']);
			
			$subject='You have an invitation for checkin';
			$to=$phone;
			$html='Hi you have invitation to checkin in hotel : '.$rowInfo['hotel_name'].' from '.$rowInfo['name'].'. please open link in browser and use dstrict and Qloud ID app to verify using code :'.$code.' '.$surl.' or check-in using web with '.$surl1;
			//echo $html; die;
			$res=sendSms($subject, $to, $html);
			$stmt->close();
			$dbCon->close();
			return $id;
		}
		
		function emailIinviteAdultForCheckin($data)
		{
			 
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select id from user_logins where email=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("s", $data['email']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			if(empty($row))
			{
			$user=0;
			}
			else
			{
			if($row['id']==$data['user_id']) 
			{
			$stmt->close();
			$dbCon->close();
			return 0;	
			}
			$user=$row['id'];
			}
			
			
			$stmt = $dbCon->prepare("select buyer_id,is_buyer_company,hotel_checkout_detail.user_id,visiting_address,port_number,visiting_city,visiting_state,property_location.id as p_id,room_type_id,total_days,price,hotel_name,fdesk_country_code,fdesk_phone_number from hotel_checkout_detail left join company_hotel_room_type_detail on company_hotel_room_type_detail.id= hotel_checkout_detail.room_type_id left join hotel_basic_information on hotel_basic_information.property_id=company_hotel_room_type_detail.location_id left join property_location on property_location.id=hotel_basic_information.property_id where hotel_checkout_detail.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['checkid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowInfo = $result->fetch_assoc();
			$code=mt_rand(111111,999999); 
			$stmt = $dbCon->prepare("select * from hotel_images where property_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $rowInfo['p_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowImage = $result->fetch_assoc();
			
			$filename="../estorecss/".$rowImage['image_path'].".txt"; $value_a=file_get_contents("../estorecss/".$rowImage['image_path'].".txt"); $value_a=str_replace('"','',$value_a); $rowImage['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$rowImage['image_path'].'.jpg' );
			$rowInfo['image_path']=str_replace('../','https://www.qloudid.com/',$rowImage['image_path']);
			
			$stmt = $dbCon->prepare("select concat_ws(' ', first_name,last_name) as name,email from user_logins where id = ?");
        
				/* bind parameters for markers */
			$stmt->bind_param("i", $buyer);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowUser    = $result->fetch_assoc();
				 
			$rowInfo['name']=$rowUser['name'];
			
			 
			$type=2;
			$stmt = $dbCon->prepare("insert into hotel_checkout_invitation_info(verification_code,invitation_type,email,invited_user_id,hotel_checkout_id)
			values(?,?,?,?,?)");
			$stmt->bind_param("iisii",$code,$type,$data['email'],$user,$data['checkid']);
			$stmt->execute();
			$id=$stmt->insert_id; 
			$id1=$this -> encrypt_decrypt('encrypt',$id); 
			/*if(isset($data['precheck']))
			{
			$url="https://www.dstricts.com/public/index.php/Hotel/verifyInvitationPreCheckin/".$id1;	
			}
			else
			{*/
			$url="https://www.dstricts.com/public/index.php/Hotel/verifyInvitationCheckin/".$id1;	
			//}
		 $url1="https://www.qloudid.com/public/index.php/BookingInformation/addAccountInformation/".$id1;
			
			$surl=getShortUrl($url);
			$to      = $data['email'];
			$emailContent='<html xmlns="http://www.w3.org/1999/xhtml" style="background-color: rgb(240, 240, 240);"><head>
					  <title>Reservation confirmed</title>
					  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
					  <meta charset="utf-8">
					  <meta name="viewport" content="width=device-width, initial-scale=1">
					  <meta http-equiv="X-UA-Compatible" content="IE=edge">
					  <style type="text/css">
						/* GT AMERICA */

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Regular";
						  font-weight: 400;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
						}

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Medium";
						  font-weight: 600;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
						}

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Condensed Bold";
						  font-weight: 700;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
						}

						/* CLIENT-SPECIFIC RESET */

						body,
						table,
						td,
						a {
						  -webkit-text-size-adjust: 100%;
						  -ms-text-size-adjust: 100%;
						}

						/* Prevent WebKit and Windows mobile changing default text sizes */

						table,
						td {
						  mso-table-lspace: 0pt;
						  mso-table-rspace: 0pt;
						}

						/* Remove spacing between tables in Outlook 2007 and up */

						img {
						  -ms-interpolation-mode: bicubic;
						}

						/* Allow smoother rendering of resized image in Internet Explorer */

						.im {
						  color: inherit !important;
						}

						/* DEVICE-SPECIFIC RESET */

						a[x-apple-data-detectors] {
						  color: inherit !important;
						  text-decoration: none !important;
						  font-size: inherit !important;
						  font-family: inherit !important;
						  font-weight: inherit !important;
						  line-height: inherit !important;
						}

						/* iOS BLUE LINKS */

						/* RESET */

						img {
						  border: 0;
						  height: auto;
						  line-height: 100%;
						  outline: none;
						  text-decoration: none;
						  display: block;
						}

						table {
						  border-collapse: collapse;
						}

						table td {
						  border-collapse: collapse;
						  display: table-cell;
						}

						body {
						  height: 100% !important;
						  margin: 0 !important;
						  padding: 0 !important;
						  width: 100% !important;
						}

						/* BG COLORS */

						.mainTable {
						  background-color: #F0F0F0;
						}

						.mainTable--hospitality {
						  background-color: #f7f2ed;
						}

						html {
						  background-color: #F0F0F0;
						}

						/* VARIABLES */

						.bg-white {
						  background-color: white;
						}

						.hr {
						  /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
						  background-color: #d3d3d8;
						  border-collapse: collapse;
						  mso-table-lspace: 0pt;
						  mso-table-rspace: 0pt;
						  mso-line-height-rule: exactly;
						  line-height: 1px;
						}

						.textAlignLeft {
						  text-align: left !important;
						}

						.textAlignRight {
						  text-align: right !important;
						}

						.textAlignCenter {
						  text-align: center !important;
						}

						.mt1 {
						  margin-top: 6px;
						}

						.list {
						  padding-left: 18px;
						  margin: 0;
						}

						/* TYPOGRAPHY */

						body {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  color: #4f4f65;
						  -webkit-font-smoothing: antialiased;
						  -ms-text-size-adjust: 100%;
						  -moz-osx-font-smoothing: grayscale;
						  font-smoothing: always;
						  text-rendering: optimizeLegibility;
						}

						.h1 {
						  font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 700;
						  vertical-align: middle;
						  font-size: 36px;
						  line-height: 42px;
						}

						.h2 {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 600;
						  vertical-align: middle;
						  font-size: 16px;
						  line-height: 24px;
						}

						.text {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 16px;
						  line-height: 21px;
						}

						.text-list {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 16px;
						  line-height: 25px;
						}

						.textSmall {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 14px;
						}

						.text-xsmall {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-size: 11px;
						  text-transform: uppercase;
						  line-height: 22px;
						  letter-spacing: 1px;
						}

						.text-bold {
						  font-weight: 600;
						}

						.text-link {
						  text-decoration: underline;
						}

						.text-linkNoUnderline {
						  text-decoration: none;
						}

						.text-strike {
						  text-decoration: line-through;
						}

						/* FONT COLORS */

						.textColorDark {
						  color: #23233e;
						}

						.textColorNormal {
						  color: #4f4f65;
						}

						.textColorBlue {
						  color: #2020c0;
						}

						.textColorGrayDark {
						  color: #7B7B8B;
						}

						.textColorGray {
						  color: #A5A8AD;
						}

						.textColorWhite {
						  color: #FFFFFF;
						}

						.textColorRed {
						  color: #df3232;
						}

						/* BUTTON */

						.Button-primary-wrapper {
						  border-radius: 3px;
						  background-color: #2020C0;
						}

						.Button-primary {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  border-radius: 3px;
						  border: 1px solid #2020C0;
						  color: #ffffff;
						  display: block;
						  font-size: 16px;
						  font-weight: 600;
						  padding: 18px;
						  text-decoration: none;
						}

						.Button-secondary-wrapper {
						  border-radius: 3px;
						  background-color: #ffffff;
						}

						.Button-secondary {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  border-radius: 3px;
						  border: 1px solid #2020C0;
						  color: #2020C0;
						  display: block;
						  font-size: 16px;
						  font-weight: 600;
						  padding: 18px;
						  text-decoration: none;
						}

						/* LAYOUT */

						.Content-container {
						  padding-left: 60px;
						  padding-right: 60px;
						}

						.Content-container--main {
						  padding-top: 54px;
						  padding-bottom: 60px;
						}

						.Content {
						  width: 580px;
						  margin: 0 auto;
						}

						.wrapper {
						  max-width: 600px;
						}

						.section {
						  padding: 24px 0px;
						  border-bottom: 1px solid #d3d3d8;
						}

						.section--noBorder {
						  padding: 24px 0px 0;
						}

						.section--last {
						  padding: 24px 0px;
						}

						.message {
						  background-color: #F4F4F5;
						  padding: 18px;
						}

						.card {
						  border: 1px solid #d3d3d8;
						  padding: 18px;
						}

						/* HEADER */

						.header-tockLogoImage {
						  display: block;
						  color: #F0F0F0;
						}

						.header-heroImage {
						  padding-bottom: 24px;
						}

						/* PREHEADER */

						.preheader {
						  display: none;
						  font-size: 1px;
						  color: #FFFFFF;
						  line-height: 1px;
						  max-height: 0px;
						  max-width: 0px;
						  opacity: 0;
						  overflow: hidden;
						}

						/* BANNER */

						.notice {
						  padding: 12px;
						  background: #23233E;
						  color: #FFFFFF;
						  display: block;
						  font-size: 14px;
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 600;
						}

						/* INTRO */

						.section--intro {
						  padding-bottom: 48px;
						}

						/* BOOKING INFO */

						.business-logo__container {
						  width: 48px;
						  height: 48px;
						  border-radius: 3px;
						  border: 1px solid #d3d3d8;
						  overflow: hidden;
						}

						.business-logo__image {
						  border: 1px solid transparent;
						  border-radius: 3px;
						  width: 48px;
						  height: 48px;
						  display: block;
						}

						.business-address--address {
						  width: 50%;
						}

						.business-address--map {
						  width: 50%;
						}

						.business-address--map-image {
						  width: 100%;
						}

						/* MOBILE TICKETS */

						.mobile-ticket--description {
						  width: 65%;
						  margin-top: 12px;
						  margin-right: 5%;
						}

						.mobile-ticket--code {
						  width: 30%;
						}

						.mobile-ticket--code-image {
						  width: 100%;
						}

						/* RESERVATION ACTIONS */

						.linksTable {
						  border-bottom: 1px solid #d3d3d8;
						}

						.linksTableRow {
						  padding: 24px 12px;
						}

						.actions-icon {
						  vertical-align: middle;
						}

						.actions-text {
						  vertical-align: middle;
						}

						/* RECEIPT */

						.receipt__container {
						  border: 1px solid #d3d3d8;
						  padding: 24px;
						}

						.receipt__row {
						  border-top: 1px solid #d3d3d8;
						}

						/* FEEDBACK ICONS */

						.feedback-link {
						  border: 1px solid #d4d5da;
						  border-radius: 3px;
						  display: inline-block;
						  width: calc(32% - 2px);
						  padding: 10px 0;
						}

						.feedback-link-bumper {
						  display: inline-block;
						  width: 1%;
						}

						.feedback-link img {
						  height: 50px;
						  width: 50px;
						}

						/* SOCIAL ICONS */

						.social-link {
						  display: inline-block;
						  width: auto;
						}

						.social-link-text {
						  padding: 14px 24px 14px 14px;
						}

						/* TABLET STYLES */

						@media screen and (max-width: 648px) {
						  /* DEVICE-SPECIFIC RESET */
						  div[style*="margin: 16px 0;"] {
							margin: 0 !important;
						  }
						  /* ANDROID CENTER FIX */
						  /* LAYOUT */
						  .wrapper {
							width: 100% !important;
							max-width: 100% !important;
						  }
						  .Content {
							width: 90% !important;
						  }
						  .Content-container {
							padding-left: 36px !important;
							padding-right: 36px !important;
						  }
						  .Content-container--main {
							padding-top: 30px !important;
							padding-bottom: 42px !important;
						  }
						  .responsiveTable {
							width: 100% !important;
						  }
						  /* RESERVATION ACTIONS */
						  .linksTableRow {
							padding-left: 0 !important;
							padding-right: 0 !important;
							padding-top: 12px !important;
							padding-bottom: 12px !important;
						  }
						  .linksTableRow--borderRight {
							border-right: none !important;
							padding-left: 0 !important;
							padding-right: 0 !important;
						  }
						  /* FEEDBACK LINK */
						  .feedback-link img {
							height: 38px !important;
							width: 38px !important;
						  }
						}

						/* MOBILE STYLES */

						@media screen and (max-width: 480px) {
						  /* TYPOGRAPHY */
						  .h1 {
							font-size: 30px !important;
							line-height: 30px !important;
						  }
						  .text {
							font-size: 16px !important;
							line-height: 22px !important;
						  }
						  /* BUTTON */
						  .mobile-buttonContainer {
							width: 100% !important;
						  }
						  /* LAYOUT */
						  .Content {
							width: 100% !important;
						  }
						  .Content-container {
							padding-left: 18px !important;
							padding-right: 18px !important;
						  }
						  .Content-container--main {
							padding-top: 24px !important;
							padding-bottom: 30px !important;
						  }
						  .section {
							padding: 18px 0 !important;
						  }
						  .section--last {
							padding: 18px 0 !important;
						  }
						  .header {
							padding: 0 18px !important;
						  }
						  .business-address--address {
							width: 100% !important;
						  }
						  .business-address--map {
							margin-top: 30px !important;
							width: 100% !important;
						  }
						  .mobile-ticket--description {
							width: 100% !important;
							margin-top: 0px !important;
						  }
						  .mobile-ticket--code {
							margin-top: 30px !important;
							margin-left: 0;
							width: 100% !important;
						  }
						  /* RECEIPT */
						  .receipt__container {
							padding: 12px !important;
						  }
						  /* SOCIAL ICONS */
						  .social-link {
							display: block !important;
							width: 100% !important;
							border-bottom: 1px solid #d3d3d8 !important;
						  }
						  /* INTRO */
						  .section--intro {
							padding-top: 18px !important;
							padding-bottom: 18px !important;
						  }
						}
					  </style>
					</head>

					<body style="margin: 0 !important; padding: 0 !important; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; height: 100%; margin: 0; padding: 0; width: 100%; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; color: rgb(79, 79, 101); -webkit-font-smoothing: antialiased; -ms-text-size-adjust: 100%; -moz-osx-font-smoothing: grayscale; font-smoothing: always; text-rendering: optimizeLegibility;">
					   
					  <!--[if mso]>
						<style type="text/css">
					.h1 {font-family: "Helvetica", "Arial", sans-serif !important; font-weight: 700 !important; vertical-align: middle !important; font-size: 36px !important; mso-line-height-rule: exactly;line-height: 42px !important;}
					.h2 {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 600 !important;vertical-align: middle !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 24px !important;}
					.text {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 21px !important;}
					.text-list {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 25px !important;}
					.textSmall {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 14px !important;}
					.text-xsmall {font-family: "Helvetica", "Arial", sans-serif !important;font-size: 11px !important;text-transform: uppercase !important;mso-line-height-rule: exactly;line-height: 22px !important;letter-spacing: 1px !important;}
					.text-bold {font-weight: 600 !important;}
					.text-link {text-decoration: underline !important;}
					.text-linkNoUnderline {text-decoration: none !important;}
					.text-strike {text-decoration: line-through !important;}
					.textColorDark {color: #23233e !important;}
					.textColorNormal {color: #4f4f65 !important;}
					.textColorBlue {color: #2020c0 !important;}
					.textColorGray {color: #A5A8AD !important;}
					.textColorWhite {color: #FFFFFF !important;}
					.Button-primary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #ffffff !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
					.Button-secondary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #2020C0 !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
						</style>
						<![endif]-->
					  <!-- HIDDEN PREHEADER TEXT -->
					  <div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;">
					  </div>
					  <table border="0" cellpadding="0" cellspacing="0" width="100%" class=" mainTable  " style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: rgb(240, 240, 240);">
						<tbody><tr><td style="display:none !important;
					 visibility:hidden;
					 mso-hide:all;
					 font-size:1px;
					 color:#ffffff;
					 line-height:1px;
					 max-height:0px;
					 max-width:0px;
					 opacity:0;
					 overflow:hidden; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> We are thrilled that you will be joining us. If yo... </td>
						<!-- HEADER -->
						</tr><tr>
						  <td align="center" class="header" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
							<!--[if (gte mso 9)|(IE)]>
						<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
						<tr>
						<td align="center" valign="top" width="600">
						<![endif]-->
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 580px; margin: 0 auto;">
							  <tbody><tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr>
								<td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <h1 style="font-size: 33px;font-weight: 800;line-height: 30px;">Dstricts</h1>               </td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							</tbody></table>
							<!--[if (gte mso 9)|(IE)]>
						</td>
						</tr>
						</table>
						<![endif]-->
						  </td>
						</tr>
						<!-- CONTENT -->
						<tr>
						  <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
							<!--[if (gte mso 9)|(IE)]>
						<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
						<tr>
						<td align="center" valign="top" width="600">
						<![endif]-->
							<table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content bg-white" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: white; width: 580px; margin: 0 auto;">
							  <tbody><tr>
								<td class="Content-container Content-container--main text textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101); padding-left: 60px; padding-right: 60px; padding-top: 54px; padding-bottom: 60px;">
								  <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
									<!-- RESTAURANT INFO -->
									<tbody><tr>
									  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" valign="center" width="48" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="business-logo__container" style="width: 48px; height: 48px; border-radius: 3px; border: 1px solid rgb(211, 211, 216); overflow: hidden;">
												<img src="'.$rowImage['image_path'].'" class="business-logo__image" width="48" height="48" alt="Logo" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block; border: 1px solid transparent; border-radius: 3px; width: 48px; height: 48px; display: block;">
											  </div>
											</td>
											<td width="12" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
											<td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">'.$rowInfo["hotel_name"].'</span>                          </td>
										  </tr>
										  <tr class="spacer">
											<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr class="spacer">
											<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<!-- INTRO -->
									<tr>
									  <td valign="top" align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <span class="h1 textColorDark" style="font-family: &quot;GT America Condensed Bold&quot;, &quot;Roboto Condensed&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 700; vertical-align: middle; font-size: 36px; line-height: 42px; color: rgb(35, 35, 62);">Invitation received</span>                          </td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr>
											<td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
											  <!--[if gte mso 15]>&nbsp;<![endif]-->
											</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<!-- MESSAGE -->
									<tr class="spacer">
									  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr>
									  <td align="left" class="message" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(244, 244, 245); padding: 18px;">
										<div class="text textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
										  <span class="text-bold textColorDark" style="font-weight: 600; color: rgb(35, 35, 62);">A message from '.$rowInfo["name"].'</span>
										  <br>I have successfully checked in the hotel. I am waiting for you to check in here using your dstrict app. Find the link to check in using the confirmation code </div>
									  </td>
									</tr>
									<tr class="spacer">
									  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr>
									  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
										<!--[if gte mso 15]>&nbsp;<![endif]-->
									  </td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<!-- BOOKING INFO -->
									<tr>
									  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" valign="middle" width="468" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="text-list textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
												<span class="text-bold textColorDark" style="font-weight: 600; color: rgb(35, 35, 62);">'.date("F j, Y, g:i a").'</span>
												<br> Party of 2 for Smiles Davis 
												<br> Confirmation code #: '.$code.'
												<br> Reservation  2
												<br>
											  </div>
											</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr class="spacer">
											<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  

					<tr>
											<td align="center" valign="center" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <table border="0" cellspacing="0" cellpadding="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
												<tbody><tr>
												  <td align="center" valign="center" width="100%" class="Button-primary-wrapper" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; border-radius: 3px; background-color: rgb(32, 32, 192);">
												  <a href="'.$url.'" target="_blank" class="Button-primary" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; border-radius: 3px; border: 1px solid rgb(32, 32, 192); color: rgb(255, 255, 255); display: block; font-size: 16px; font-weight: 600; padding: 18px; text-decoration: none;"> Manage your reservation </a>                                </td>
												</tr>
											  </tbody></table>
											</td>
										  </tr><tr class="spacer">
											<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>

					<tr class="spacer">
											<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>

					<tr>
											<td align="center" valign="center" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <table border="0" cellspacing="0" cellpadding="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
												<tbody><tr>
												  <td align="center" valign="center" width="100%" class="Button-primary-wrapper" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; border-radius: 3px; background-color: rgb(32, 32, 192);">
												  <a href="'.$url.'" target="_blank" class="Button-primary" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; border-radius: 3px; border: 1px solid rgb(32, 32, 192); color: rgb(255, 255, 255); display: block; font-size: 16px; font-weight: 600; padding: 18px; text-decoration: none;"> Checkin with app</a>                                </td>
												</tr>
											  </tbody></table>
											</td>
										  </tr>
<tr class="spacer">
											<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
<tr class="spacer">
											<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>

<tr>
											<td align="center" valign="center" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <table border="0" cellspacing="0" cellpadding="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
												<tbody><tr>
												  <td align="center" valign="center" width="100%" class="Button-primary-wrapper" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; border-radius: 3px; background-color: rgb(32, 32, 192);">
												  <a href="'.$url1.'" target="_blank" class="Button-primary" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; border-radius: 3px; border: 1px solid rgb(32, 32, 192); color: rgb(255, 255, 255); display: block; font-size: 16px; font-weight: 600; padding: 18px; text-decoration: none;"> Checkin with web</a>                                </td>
												</tr>
											  </tbody></table>
											</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<!-- ADDRESS -->
									<tr>
									  <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr>
											<td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
											  <!--[if gte mso 15]>&nbsp;<![endif]-->
											</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr class="spacer">
											<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
										  </tr>
										  <tr>
											<td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
												<tbody><tr>
												  <td style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
													<table align="left" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--address" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 50%;">
													  <tbody><tr>
														<td align="left" width="100%" class="text-list textColorNormal" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 25px; color: rgb(79, 79, 101);">
														<span class="h2 textColorDark" style="font-family: &quot;GT America Medium&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 600; vertical-align: middle; font-size: 16px; line-height: 24px; color: rgb(35, 35, 62);">'.$rowInfo["hotel_name"].'</span><br>'.$rowInfo["visiting_address"].' '.$rowInfo["port_number"].'<br>'.$rowInfo["visiting_city"].' '.$rowInfo["visiting_state"].'<br> <a href="tel:+' .$rowInfo[" fdesk_country_code"].'="" '.$rowinfo["fdesk_phone_number"].'"="">+'.$rowInfo["fdesk_country_code"].' '.$rowInfo["fdesk_phone_number"].'</a><br> <br> <a href="https://www.google.com/maps/dir//'.$rowInfo['visiting_address'].' '.$rowInfo['port_number'].'/" class="text text-link textColorBlue" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; text-decoration: underline; color: rgb(32, 32, 192);" target="_blank">Get directions</a>                                      </td>
													  </tr>
													</tbody></table>
													<!--[if mso]></td><td><![endif]-->
													<table align="right" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--map" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 50%;">
													  <tbody><tr>
														<td width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <a href="https://www.google.com/maps/dir//1350+W+Randolph%2C+Chicago%2C+IL%2C+US+60607/" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;"> <img width="230" class="business-address--map-image" height="auto" alt="Map of Elske" src="https://maps.googleapis.com/maps/api/staticmap?key=AIzaSyCPd%2DxSabI7QOfKX5NxVVup6bPfcovwFiQ&amp;center=1350+W+Randolph%2C+Chicago%2C+IL%2C+US+60607&amp;size=300x200&amp;zoom=15&amp;scale=2&amp;format=png&amp;visual%5Frefresh=true&amp;markers=scale%3A2%7Cicon%3Ahttps%3A%2F%2Fstorage.googleapis.com%2Ftock%2Dpublic%2Dassets%2Fimages%2Demail%2Dtemplate%2Femail%2Dmap%2Dmarker.png%7Cshadow%3Afalse%7C1350+W+Randolph%2C+Chicago%2C+IL%2C+US+60607&amp;style=feature%3Aall%7Celement%3Alabels.text.fill%7Ccolor%3A0x4b505b&amp;style=feature%3Aall%7Celement%3Alabels.text.stroke%7Ccolor%3A0xffffff%7Cvisibility%3Aon&amp;style=feature%3Aadministrative.land%5Fparcel%7Celement%3Aall%7Cvisibility%3Aoff&amp;style=feature%3Alandscape.man%5Fmade%7Celement%3Aall%7Cvisibility%3Aon&amp;style=feature%3Alandscape.man%5Fmade%7Celement%3Ageometry.fill%7Ccolor%3A0xe9e9eb&amp;style=feature%3Apoi%7Celement%3Aall%7Cvisibility%3Aoff&amp;style=feature%3Aroad%7Celement%3Ageometry.fill%7Ccolor%3A0xffffff&amp;style=feature%3Aroad%7Celement%3Alabels.text.fill%7Ccolor%3A0x787c84&amp;style=feature%3Aroad%7Celement%3Alabels.icon%7Cvisibility%3Aoff&amp;style=feature%3Aroad.highway%7Celement%3Ageometry.fill%7Ccolor%3A0xffbe32&amp;style=feature%3Aroad.highway%7Celement%3Ageometry.stroke%7Ccolor%3A0xffbe32&amp;style=feature%3Atransit%7Celement%3Alabels.text.fill%7Cvisibility%3Aon%7Ccolor%3A0x787c84&amp;style=feature%3Atransit.line%7Celement%3Ageometry.fill%7Ccolor%3A0xd2d4d6&amp;signature=3yCSyIXfsSilvB5wcd4OElw40QU=" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block; width: 100%;"> </a>                                      </td>
													  </tr>
													</tbody></table>
												  </td>
												</tr>
											  </tbody></table>
											</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr>
									  <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; background-color: rgb(211, 211, 216); border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; mso-line-height-rule: exactly; line-height: 1px;">
										<!--[if gte mso 15]>&nbsp;<![endif]-->
									  </td>
									</tr>
									
									
									<!-- RECEIPT -->
									
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr class="spacer">
									  <td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<!-- EDIT RECEIPT -->
									<!-- CANCELLATION POLICY -->
									<tr>
									  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="text text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; font-weight: 600; color: rgb(35, 35, 62);">
												Cancellation policy
											  </div>
											</td>
										  </tr>
										  <tr>
											<td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="text textColorNormal mt1" style="margin-top: 6px; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
												<span>This invitation can be accepted only if you have installed dstrict and Qloud ID pay. </span>
												<span>You can not transfer your invitation to another person.</span>
											  </div>
											</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
									<tr class="spacer">
									  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<tr class="spacer">
									  <td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
									</tr>
									<!-- QUESTIONS -->
									<tr>
									  <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
										<table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
										  <tbody><tr>
											<td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="text text-bold textColorDark" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; font-weight: 600; color: rgb(35, 35, 62);">
												Questions?
											  </div>
											</td>
										  </tr>
										  <tr>
											<td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
											  <div class="text textColorNormal mt1" style="margin-top: 6px; font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-weight: 400; font-size: 16px; line-height: 21px; color: rgb(79, 79, 101);">
												If you have questions about your reservation, contact us at&nbsp;
												<a href="mailto:'.$rowInfo['fdesk_email'].'">'.$rowInfo["fdesk_email"].'</a>                            or by calling
												<a href="tel:+'.$rowInfo[" fdesk_country_code"].'="" '.$rowinfo["fdesk_phone_number"].'"="">+'.$rowInfo["fdesk_country_code"].' '.$rowInfo["fdesk_phone_number"].'</a>.
											  </div>
											</td>
										  </tr>
										</tbody></table>
									  </td>
									</tr>
								  </tbody></table>
								</td>
							  </tr>
							</tbody></table>
						  </td>
						</tr>
						<!-- FOOTER -->
						<tr>
						  <td align="center" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; width: 580px; margin: 0 auto;">
							<!-- Will most likely required a feature flag -->
							<!--[if (gte mso 9)|(IE)]>
					<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
					<tr>
					<td align="center" valign="top" width="600">
					<![endif]-->
							<table width="100%" border="0" cellspacing="0" cellpadding="0" align="center" class="Content-container" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; padding-left: 60px; padding-right: 60px;">
							  <tbody><tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr>
								<td align="center" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"> <a href="https://www.exploretock.com" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;"> <img src="https://storage.googleapis.com/tock-public-assets/images-email-template/tock-brandmark-color.png" width="30" height="30" alt="Tock" border="0" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block;"> </a>              </td>
							  </tr>
							  <tr class="spacer">
								<td height="18px" colspan="2" style="font-size: 18px; line-height:18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr>
								<td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
								  <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
									 2019 Tock, Inc.
								  </div>
								  <div class="text-xsmall textColorNormal" style="font-family: &quot;GT America Regular&quot;, &quot;Roboto&quot;, &quot;Helvetica&quot;, &quot;Arial&quot;, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
									All Rights Reserved
								  </div>
								</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							  <tr class="spacer">
								<td height="12px" colspan="2" style="font-size: 12px; line-height:12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">&nbsp;</td>
							  </tr>
							</tbody></table>
							<!--[if (gte mso 9)|(IE)]>
					</td>
					</tr>
					</table>
					<![endif]-->
						  </td>
						</tr>
					  </tbody></table><title>Reservation confirmed</title>
					  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
					  <meta charset="utf-8">
					  <meta name="viewport" content="width=device-width, initial-scale=1">
					  <meta http-equiv="X-UA-Compatible" content="IE=edge">
					  <style type="text/css">
						/* GT AMERICA */

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Regular";
						  font-weight: 400;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
						}

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Medium";
						  font-weight: 600;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
						}

						@font-face {
						  font-display: fallback;
						  font-family: "GT America Condensed Bold";
						  font-weight: 700;
						  src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
						}

						/* CLIENT-SPECIFIC RESET */

						body,
						table,
						td,
						a {
						  -webkit-text-size-adjust: 100%;
						  -ms-text-size-adjust: 100%;
						}

						/* Prevent WebKit and Windows mobile changing default text sizes */

						table,
						td {
						  mso-table-lspace: 0pt;
						  mso-table-rspace: 0pt;
						}

						/* Remove spacing between tables in Outlook 2007 and up */

						img {
						  -ms-interpolation-mode: bicubic;
						}

						/* Allow smoother rendering of resized image in Internet Explorer */

						.im {
						  color: inherit !important;
						}

						/* DEVICE-SPECIFIC RESET */

						a[x-apple-data-detectors] {
						  color: inherit !important;
						  text-decoration: none !important;
						  font-size: inherit !important;
						  font-family: inherit !important;
						  font-weight: inherit !important;
						  line-height: inherit !important;
						}

						/* iOS BLUE LINKS */

						/* RESET */

						img {
						  border: 0;
						  height: auto;
						  line-height: 100%;
						  outline: none;
						  text-decoration: none;
						  display: block;
						}

						table {
						  border-collapse: collapse;
						}

						table td {
						  border-collapse: collapse;
						  display: table-cell;
						}

						body {
						  height: 100% !important;
						  margin: 0 !important;
						  padding: 0 !important;
						  width: 100% !important;
						}

						/* BG COLORS */

						.mainTable {
						  background-color: #F0F0F0;
						}

						.mainTable--hospitality {
						  background-color: #f7f2ed;
						}

						html {
						  background-color: #F0F0F0;
						}

						/* VARIABLES */

						.bg-white {
						  background-color: white;
						}

						.hr {
						  /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
						  background-color: #d3d3d8;
						  border-collapse: collapse;
						  mso-table-lspace: 0pt;
						  mso-table-rspace: 0pt;
						  mso-line-height-rule: exactly;
						  line-height: 1px;
						}

						.textAlignLeft {
						  text-align: left !important;
						}

						.textAlignRight {
						  text-align: right !important;
						}

						.textAlignCenter {
						  text-align: center !important;
						}

						.mt1 {
						  margin-top: 6px;
						}

						.list {
						  padding-left: 18px;
						  margin: 0;
						}

						/* TYPOGRAPHY */

						body {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  color: #4f4f65;
						  -webkit-font-smoothing: antialiased;
						  -ms-text-size-adjust: 100%;
						  -moz-osx-font-smoothing: grayscale;
						  font-smoothing: always;
						  text-rendering: optimizeLegibility;
						}

						.h1 {
						  font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 700;
						  vertical-align: middle;
						  font-size: 36px;
						  line-height: 42px;
						}

						.h2 {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 600;
						  vertical-align: middle;
						  font-size: 16px;
						  line-height: 24px;
						}

						.text {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 16px;
						  line-height: 21px;
						}

						.text-list {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 16px;
						  line-height: 25px;
						}

						.textSmall {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 400;
						  font-size: 14px;
						}

						.text-xsmall {
						  font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-size: 11px;
						  text-transform: uppercase;
						  line-height: 22px;
						  letter-spacing: 1px;
						}

						.text-bold {
						  font-weight: 600;
						}

						.text-link {
						  text-decoration: underline;
						}

						.text-linkNoUnderline {
						  text-decoration: none;
						}

						.text-strike {
						  text-decoration: line-through;
						}

						/* FONT COLORS */

						.textColorDark {
						  color: #23233e;
						}

						.textColorNormal {
						  color: #4f4f65;
						}

						.textColorBlue {
						  color: #2020c0;
						}

						.textColorGrayDark {
						  color: #7B7B8B;
						}

						.textColorGray {
						  color: #A5A8AD;
						}

						.textColorWhite {
						  color: #FFFFFF;
						}

						.textColorRed {
						  color: #df3232;
						}

						/* BUTTON */

						.Button-primary-wrapper {
						  border-radius: 3px;
						  background-color: #2020C0;
						}

						.Button-primary {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  border-radius: 3px;
						  border: 1px solid #2020C0;
						  color: #ffffff;
						  display: block;
						  font-size: 16px;
						  font-weight: 600;
						  padding: 18px;
						  text-decoration: none;
						}

						.Button-secondary-wrapper {
						  border-radius: 3px;
						  background-color: #ffffff;
						}

						.Button-secondary {
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  border-radius: 3px;
						  border: 1px solid #2020C0;
						  color: #2020C0;
						  display: block;
						  font-size: 16px;
						  font-weight: 600;
						  padding: 18px;
						  text-decoration: none;
						}

						/* LAYOUT */

						.Content-container {
						  padding-left: 60px;
						  padding-right: 60px;
						}

						.Content-container--main {
						  padding-top: 54px;
						  padding-bottom: 60px;
						}

						.Content {
						  width: 580px;
						  margin: 0 auto;
						}

						.wrapper {
						  max-width: 600px;
						}

						.section {
						  padding: 24px 0px;
						  border-bottom: 1px solid #d3d3d8;
						}

						.section--noBorder {
						  padding: 24px 0px 0;
						}

						.section--last {
						  padding: 24px 0px;
						}

						.message {
						  background-color: #F4F4F5;
						  padding: 18px;
						}

						.card {
						  border: 1px solid #d3d3d8;
						  padding: 18px;
						}

						/* HEADER */

						.header-tockLogoImage {
						  display: block;
						  color: #F0F0F0;
						}

						.header-heroImage {
						  padding-bottom: 24px;
						}

						/* PREHEADER */

						.preheader {
						  display: none;
						  font-size: 1px;
						  color: #FFFFFF;
						  line-height: 1px;
						  max-height: 0px;
						  max-width: 0px;
						  opacity: 0;
						  overflow: hidden;
						}

						/* BANNER */

						.notice {
						  padding: 12px;
						  background: #23233E;
						  color: #FFFFFF;
						  display: block;
						  font-size: 14px;
						  font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
						  font-weight: 600;
						}

						/* INTRO */

						.section--intro {
						  padding-bottom: 48px;
						}

						/* BOOKING INFO */

						.business-logo__container {
						  width: 48px;
						  height: 48px;
						  border-radius: 3px;
						  border: 1px solid #d3d3d8;
						  overflow: hidden;
						}

						.business-logo__image {
						  border: 1px solid transparent;
						  border-radius: 3px;
						  width: 48px;
						  height: 48px;
						  display: block;
						}

						.business-address--address {
						  width: 50%;
						}

						.business-address--map {
						  width: 50%;
						}

						.business-address--map-image {
						  width: 100%;
						}

						/* MOBILE TICKETS */

						.mobile-ticket--description {
						  width: 65%;
						  margin-top: 12px;
						  margin-right: 5%;
						}

						.mobile-ticket--code {
						  width: 30%;
						}

						.mobile-ticket--code-image {
						  width: 100%;
						}

						/* RESERVATION ACTIONS */

						.linksTable {
						  border-bottom: 1px solid #d3d3d8;
						}

						.linksTableRow {
						  padding: 24px 12px;
						}

						.actions-icon {
						  vertical-align: middle;
						}

						.actions-text {
						  vertical-align: middle;
						}

						/* RECEIPT */

						.receipt__container {
						  border: 1px solid #d3d3d8;
						  padding: 24px;
						}

						.receipt__row {
						  border-top: 1px solid #d3d3d8;
						}

						/* FEEDBACK ICONS */

						.feedback-link {
						  border: 1px solid #d4d5da;
						  border-radius: 3px;
						  display: inline-block;
						  width: calc(32% - 2px);
						  padding: 10px 0;
						}

						.feedback-link-bumper {
						  display: inline-block;
						  width: 1%;
						}

						.feedback-link img {
						  height: 50px;
						  width: 50px;
						}

						/* SOCIAL ICONS */

						.social-link {
						  display: inline-block;
						  width: auto;
						}

						.social-link-text {
						  padding: 14px 24px 14px 14px;
						}

						/* TABLET STYLES */

						@media screen and (max-width: 648px) {
						  /* DEVICE-SPECIFIC RESET */
						  div[style*="margin: 16px 0;"] {
							margin: 0 !important;
						  }
						  /* ANDROID CENTER FIX */
						  /* LAYOUT */
						  .wrapper {
							width: 100% !important;
							max-width: 100% !important;
						  }
						  .Content {
							width: 90% !important;
						  }
						  .Content-container {
							padding-left: 36px !important;
							padding-right: 36px !important;
						  }
						  .Content-container--main {
							padding-top: 30px !important;
							padding-bottom: 42px !important;
						  }
						  .responsiveTable {
							width: 100% !important;
						  }
						  /* RESERVATION ACTIONS */
						  .linksTableRow {
							padding-left: 0 !important;
							padding-right: 0 !important;
							padding-top: 12px !important;
							padding-bottom: 12px !important;
						  }
						  .linksTableRow--borderRight {
							border-right: none !important;
							padding-left: 0 !important;
							padding-right: 0 !important;
						  }
						  /* FEEDBACK LINK */
						  .feedback-link img {
							height: 38px !important;
							width: 38px !important;
						  }
						}

						/* MOBILE STYLES */

						@media screen and (max-width: 480px) {
						  /* TYPOGRAPHY */
						  .h1 {
							font-size: 30px !important;
							line-height: 30px !important;
						  }
						  .text {
							font-size: 16px !important;
							line-height: 22px !important;
						  }
						  /* BUTTON */
						  .mobile-buttonContainer {
							width: 100% !important;
						  }
						  /* LAYOUT */
						  .Content {
							width: 100% !important;
						  }
						  .Content-container {
							padding-left: 18px !important;
							padding-right: 18px !important;
						  }
						  .Content-container--main {
							padding-top: 24px !important;
							padding-bottom: 30px !important;
						  }
						  .section {
							padding: 18px 0 !important;
						  }
						  .section--last {
							padding: 18px 0 !important;
						  }
						  .header {
							padding: 0 18px !important;
						  }
						  .business-address--address {
							width: 100% !important;
						  }
						  .business-address--map {
							margin-top: 30px !important;
							width: 100% !important;
						  }
						  .mobile-ticket--description {
							width: 100% !important;
							margin-top: 0px !important;
						  }
						  .mobile-ticket--code {
							margin-top: 30px !important;
							margin-left: 0;
							width: 100% !important;
						  }
						  /* RECEIPT */
						  .receipt__container {
							padding: 12px !important;
						  }
						  /* SOCIAL ICONS */
						  .social-link {
							display: block !important;
							width: 100% !important;
							border-bottom: 1px solid #d3d3d8 !important;
						  }
						  /* INTRO */
						  .section--intro {
							padding-top: 18px !important;
							padding-bottom: 18px !important;
						  }
						}
					  </style>



					   
					  <!--[if mso]>
						<style type="text/css">
					.h1 {font-family: "Helvetica", "Arial", sans-serif !important; font-weight: 700 !important; vertical-align: middle !important; font-size: 36px !important; mso-line-height-rule: exactly;line-height: 42px !important;}
					.h2 {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 600 !important;vertical-align: middle !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 24px !important;}
					.text {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 21px !important;}
					.text-list {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 16px !important;mso-line-height-rule: exactly;line-height: 25px !important;}
					.textSmall {font-family: "Helvetica", "Arial", sans-serif !important;font-weight: 400 !important;font-size: 14px !important;}
					.text-xsmall {font-family: "Helvetica", "Arial", sans-serif !important;font-size: 11px !important;text-transform: uppercase !important;mso-line-height-rule: exactly;line-height: 22px !important;letter-spacing: 1px !important;}
					.text-bold {font-weight: 600 !important;}
					.text-link {text-decoration: underline !important;}
					.text-linkNoUnderline {text-decoration: none !important;}
					.text-strike {text-decoration: line-through !important;}
					.textColorDark {color: #23233e !important;}
					.textColorNormal {color: #4f4f65 !important;}
					.textColorBlue {color: #2020c0 !important;}
					.textColorGray {color: #A5A8AD !important;}
					.textColorWhite {color: #FFFFFF !important;}
					.Button-primary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #ffffff !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
					.Button-secondary {font-family: "Helvetica", "Arial", sans-serif !important;border-radius: 3px !important;border: 1px solid #2020C0 !important;color: #2020C0 !important;display: block !important;font-size: 16px !important;font-weight: 600 !important;padding: 18px !important;text-decoration: none !important;}
						</style>
						<![endif]-->
					  <!-- HIDDEN PREHEADER TEXT -->
					  <div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;">
					  </div>
					  



					</body></html>';
			
			sendEmail($subject, $to, $emailContent);
			return $id;
			
		
	
		}
	
		
		
		
		function guestChildrenRemainingCount($data)
		{
			$dbCon = AppModel::createConnection();
			$checkout_id= $this -> encrypt_decrypt('decrypt',$data['checkid']);  
			$stmt = $dbCon->prepare("select guest_children from hotel_checkout_detail where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $checkout_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowDate = $result->fetch_assoc();
			 
			$stmt = $dbCon->prepare("select count(id) as num from hotel_checkout_dependent_detail where hotel_checkout_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $checkout_id);
			$stmt->execute();
			$resultCount = $stmt->get_result();
			$rowDependentCount = $resultCount->fetch_assoc();
			$rowDate['guest_children']=$rowDate['guest_children']-$rowDependentCount['num'];
			 if($rowDate['guest_children']<0)
			 {
				 $rowDate['guest_children']=0;
			 }
			$stmt->close();
			$dbCon->close();
			return $rowDate['guest_children'];
		}

		function updateGuestRecord($data)
		{
			$dbCon = AppModel::createConnection();
			  
			$curl = curl_init();
			  curl_setopt_array($curl, array(
			  CURLOPT_URL => 'https://dstricts.com/user/index.php/DstrictsApp/updateGuestRecord',
			  CURLOPT_RETURNTRANSFER => true,
			  CURLOPT_ENCODING => '',
			  CURLOPT_MAXREDIRS => 10,
			  CURLOPT_TIMEOUT => 0,
			  CURLOPT_FOLLOWLOCATION => true,
			  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
			  CURLOPT_CUSTOMREQUEST => 'POST',
			  CURLOPT_POSTFIELDS => array('checkid' => $data['checkid'],'dstricts_user_id' => $data['dstricts_user_id'],'guest_adult' => $data['guest_adult'],'guest_children' => $data['guest_children']),
			));
			$response = curl_exec($curl);
			curl_close($curl);
			 
			$stmt = $dbCon->prepare("update hotel_checkout_detail set guest_adult=?,guest_children=? where id=?");
			/* bind parameters for markers */ 
			$stmt->bind_param("iii",$data['guest_adult'],$data['guest_children'],$data['checkid']);
			$stmt->execute();
			 
			$stmt->close();
			$dbCon->close();
			return 1;
			
			 
			
		}	
		
		
		function addDependentChekin($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("insert into hotel_checkout_dependent_detail(dependent_id,hotel_checkout_id,created_on) values (?, ?, now())");
			/* bind parameters for markers */
			$stmt->bind_param("ii",$data['child_id'],$data['checkid']);
			$stmt->execute();
			$id=$stmt->insert_id; 
			$stmt->close();
			$dbCon->close();
			return $id;
			
		}
		
		
		function verifyDependentChekin($data)
		{
			$dbCon = AppModel::createConnection();
			if(!isset($data['verification_info']))
			{
			$data['verification_info']=1;	
			}
			if($data['verification_info']==1)
			{
			$stmt = $dbCon->prepare("update hotel_checkout_dependent_detail set is_verified=1 where id=?");	
			}
			else
			{
			$stmt = $dbCon->prepare("update hotel_checkout_invitation_info set is_verified=1 where id=?");	
			}
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['id']);
			$stmt->execute();
			$id=$stmt->insert_id; 
			$stmt->close();
			$dbCon->close();
			return 1;
			
			 
			
		}
		
		function verifyAdultChekin($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("update hotel_checkout_invitation_info set is_verified=1 where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['id']);
			$stmt->execute();
			$id=$stmt->insert_id; 
			$stmt->close();
			$dbCon->close();
			return 1;
			
			 
			
		}
		
		
		function dependentsCheckedInList($data)
		{
			 $dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("delete from hotel_checkout_dependent_detail where hotel_checkout_id=? and is_verified=0");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['checkid']);
			$stmt->execute();	
			
			$stmt = $dbCon->prepare("select id,concat_ws(' ',first_name,last_name) as name  from dependents where id in (select dependent_id from hotel_checkout_dependent_detail where hotel_checkout_id=?) and dependent_type=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['checkid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			 
			$row['name']=html_entity_decode($row['name'],ENT_NOQUOTES, 'UTF-8'); 
			array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
		
		
		function adultsCheckedInList($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select id,concat_ws(' ',first_name,last_name) as name from user_logins where id=(select user_id from hotel_checkout_detail where id=?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['checkid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$row = $result->fetch_assoc();
			$row['is_confirmed']=1;
			$row['name']=html_entity_decode($row['name'],ENT_NOQUOTES, 'UTF-8');	 
			array_push($org,$row);
			
			$stmt = $dbCon->prepare("select hotel_checkout_invitation_info.id,concat_ws(' ',first_name,last_name) as name,is_confirmed,invitation_type,hotel_checkout_invitation_info.email,country_code,phone_number,pre_checked  from hotel_checkout_invitation_info left join user_logins on user_logins.id=hotel_checkout_invitation_info.invited_user_id where hotel_checkout_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['checkid']);
			$stmt->execute();
			$result = $stmt->get_result();
			 $j=1;
			while($row = $result->fetch_assoc())
			{
			 if($row['is_confirmed']==1)
			 {
				$row['name']=html_entity_decode($row['name'],ENT_NOQUOTES, 'UTF-8');	 
			 }
			 else
			 {
				if($row['invitation_type']==1)
				 {
					$row['name']='+'.$row['country_code'].'-'.$row['phone_number'];	
				 }	
				 else
				 {
					 $row['name']=$row['email'];	  
				 }
			 }
			 
			 $org[$j]['is_confirmed']=$row['is_confirmed'];
			 $org[$j]['name']=$row['name'];
			 $org[$j]['id']=$row['id'];
			$j++;
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		}


		function dependentsListForCheckin($data)
		{
			 $dbCon = AppModel::createConnection();
			 $id=$this->encrypt_decrypt('decrypt',$data['id']);
			 
			$stmt = $dbCon->prepare("select id,concat_ws(' ',first_name,last_name) as name,ssn,first_name,email,dependent_type,created_on,image_path,address  from dependents where id in (select dependent_id from dependent_guardian where guardian_user_id=? and is_approved=1) and created_by=? and id not in (select dependent_id from hotel_checkout_dependent_detail where hotel_checkout_id=?) and dependent_type=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("iii", $data['user_id'], $data['user_id'],$id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			$filename="../estorecss/".$row ['image_path'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['image_path'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row ['image_path'].'.jpg' ); $imgs=str_replace('../','',$imgs); $imgs='https://www.qloudid.com/'.$imgs; } 
			else {   $imgs= "https://www.qloudid.com/html/usercontent/images/default-profile-pic.jpg"; }
			$row['child_image']=$imgs;
			$row['address']=html_entity_decode($row['address'],ENT_NOQUOTES, 'UTF-8'); 
			$row['name']=html_entity_decode($row['name'],ENT_NOQUOTES, 'UTF-8'); 
			array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
		
		function dependentsListForCheckinDstrict($data)
		{
			 $dbCon = AppModel::createConnection();
			  
			$stmt = $dbCon->prepare("select id,concat_ws(' ',first_name,last_name) as name,ssn,first_name,email,dependent_type,created_on,image_path,address  from dependents where id in (select dependent_id from dependent_guardian where guardian_user_id=? and is_approved=1) and created_by=? and id not in (select dependent_id from hotel_checkout_dependent_detail where hotel_checkout_id=?) and dependent_type=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("iii", $data['user_id'], $data['user_id'],$data['checkid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			$filename="../estorecss/".$row ['image_path'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['image_path'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row ['image_path'].'.jpg' ); $imgs=str_replace('../','',$imgs); $imgs='https://www.qloudid.com/'.$imgs; } 
			else {   $imgs= "https://www.qloudid.com/html/usercontent/images/default-profile-pic.jpg"; }
			$row['child_image']=$imgs;
			if($row['address']=='' || $row['address']==null)
			{
				$row['address']='---';
			}
			$row['address']=html_entity_decode($row['address'],ENT_NOQUOTES, 'UTF-8'); 
			$row['name']=html_entity_decode($row['name'],ENT_NOQUOTES, 'UTF-8'); 
			array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		}

		function venueInfomationDetail($data)
		{
			$dbCon = AppModel::createConnection();
			  
			$stmt = $dbCon->prepare("select * from company_venue where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['venue_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$row['venue_name']=html_entity_decode($row['venue_name'],ENT_NOQUOTES, 'UTF-8'); 
			$row['venue_description']=html_entity_decode(trim(strip_tags($row['venue_description'])),ENT_NOQUOTES, 'UTF-8');
			
			$stmt = $dbCon->prepare("select * from company_venue_photos where venue_id=? and sorting_number=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$rowPhoto = $result2->fetch_assoc();
			 
			 $filename="../estorecss/".$rowPhoto['venue_photo_path'].".txt"; $value_a=file_get_contents("../estorecss/".$rowPhoto['venue_photo_path'].".txt"); $value_a=str_replace('"','',$value_a); $rowPhoto['image_path1'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$rowPhoto['venue_photo_path'].'.jpg' );
			 
			$row['image_path1']=str_replace('../','https://www.qloudid.com/',$rowPhoto['image_path1']);
			$row['venue_type_details']=array();
			$a=explode(',',substr($row['venue_type'],0,-1));
			 
			$stmt = $dbCon->prepare("select id from venue_type");
			$stmt->execute();
			$result2 = $stmt->get_result();
			while($rowVenue = $result2->fetch_assoc())
			{
				if($rowVenue['id']==1)
				{
					$rowVenue['type_info']='Business meeting';
				}
				else if($rowVenue['id']==2)
				{
					$rowVenue['type_info']='Mingle atmosphere';
				}
				else if($rowVenue['id']==3)
				{
					$rowVenue['type_info']='Fest atmosphere';
				}
				
				
				if (in_array($rowVenue['id'], $a))
						{
						$rowVenue['available_type']='Yes';
						}
						else
						{
						$rowVenue['available_type']='No';
						}
						
						array_push($row['venue_type_details'],$rowVenue);
			}
			
			$row['food_type_details']=array();
			$a=explode(',',substr($row['food_and_drink'],0,-1));
			$stmt = $dbCon->prepare("select * from venue_food_type");
			$stmt->execute();
			$result2 = $stmt->get_result();
			while($rowVenue = $result2->fetch_assoc())
			{
				 
				if (in_array($rowVenue['id'], $a))
						{
						$rowVenue['available_type']='Yes';
						}
						else
						{
						$rowVenue['available_type']='No';
						}
						
						array_push($row['food_type_details'],$rowVenue);
			}
				
			$stmt->close();
			$dbCon->close();
			return $row;
		}
		function countWellnessOneToOneAvailableServices($data)
		{
			$dbCon = AppModel::createConnection();
			  
			$stmt = $dbCon->prepare("select count(service_id) as num from wellness_available_services left join dishes_detail_information on dishes_detail_information.id=wellness_available_services.service_id where wellness_id=? and is_bookable=1 and one_shared=1 and service_id not in (select dish_id from hotel_roomservice_item_ordered where wellness_id=? and booking_person_id=? and is_verified=0 and qloud_checkout_id=?)");
			/* bind parameters for markers */ 
			$stmt->bind_param("iiii",$data['wellness_id'],$data['wellness_id'],$data['dstricts_user_id'],$data['checkid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row= $result->fetch_assoc();
			 
			$stmt->close();
			$dbCon->close();
			return $row['num'];
		}	



		function deleteWellnessAllCartItems($data)
		{
			$dbCon = AppModel::createConnection();
			  
			$curl = curl_init();
			  curl_setopt_array($curl, array(
			  CURLOPT_URL => 'https://dstricts.com/user/index.php/DstrictsApp/deleteWellnessAllCartItems',
			  CURLOPT_RETURNTRANSFER => true,
			  CURLOPT_ENCODING => '',
			  CURLOPT_MAXREDIRS => 10,
			  CURLOPT_TIMEOUT => 0,
			  CURLOPT_FOLLOWLOCATION => true,
			  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
			  CURLOPT_CUSTOMREQUEST => 'POST',
			  CURLOPT_POSTFIELDS => array('checkid' => $data['checkid'],'dstricts_user_id' => $data['dstricts_user_id'],'wellness_id' => $data['wellness_id']),
			));
			$response = curl_exec($curl);
			curl_close($curl);
			 
			$stmt = $dbCon->prepare("delete from hotel_roomservice_item_ordered where qloud_checkout_id=? and is_verified=0 and booking_person_id=?");
			/* bind parameters for markers */ 
			$stmt->bind_param("ii",$data['checkid'],$data['dstricts_user_id']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("select count(id) as num from hotel_roomservice_item_ordered where wellness_id=? and booking_person_id=? and is_verified=0 and qloud_checkout_id=?");
			/* bind parameters for markers */ 
			$stmt->bind_param("iii",$data['wellness_id'],$data['dstricts_user_id'],$data['checkid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row= $result->fetch_assoc();
			 
			$stmt->close();
			$dbCon->close();
			return $row['num'];
			
			 
			
		}	

	function selectedWellnessCategoriesandMenu($data)
		{
			function base64_to_jpeg($base64_string, $output_file) {
			$ifp = fopen( $output_file, 'wb' ); 
			$data = explode( ',', $base64_string );
			fwrite( $ifp, base64_decode( $data[1] ) );
			fclose( $ifp ); 
			return $output_file; 
			}
			$dbCon = AppModel::createConnection();
			
			if($data['selected_services_type']==1)
			{
			$stmt = $dbCon->prepare("select * from bookable_service_categories where id in (select bookable_service_category_id from dishes_detail_information where id in (select service_id from wellness_available_services where wellness_id=?) and is_bookable=1 and one_shared=1)");
			$stmt->bind_param("i", $data['wellness_id']);
			}
			else if($data['selected_services_type']==2)
			{
			$stmt = $dbCon->prepare("select * from bookable_service_categories where id in (select bookable_service_category_id from dishes_detail_information where id in (select service_id from wellness_available_services where wellness_id=?) and is_bookable=1 and one_shared=2 and (one_shared_type =2 or one_shared_type =3))");
			$stmt->bind_param("i", $data['wellness_id']);	
			}
			else if($data['selected_services_type']==3)
			{
			$stmt = $dbCon->prepare("select * from bookable_service_categories where id in (select bookable_service_category_id from dishes_detail_information where id in (select service_id from wellness_available_services where wellness_id=?) and is_bookable=1 and one_shared=2 and (one_shared_type =1 or one_shared_type =3))");
			$stmt->bind_param("i", $data['wellness_id']);	
			}
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row= $result->fetch_assoc())
			{
				 
				array_push($org,$row);
				$org[$j]['menu']=array();
			if($data['selected_services_type']==1)
			{
			$stmt = $dbCon->prepare("select count(id) as num from hotel_roomservice_item_ordered where wellness_id=? and booking_person_id=? and one_shared=1 and is_verified=0 and qloud_checkout_id=?");
			$stmt->bind_param("iii", $data['wellness_id'],$data['dstricts_user_id'],$data['checkid']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$rowCount= $result2->fetch_assoc();
			if($rowCount['num']==0)
			{
			$stmt = $dbCon->prepare("select id,dish_name,dish_detail,dish_price,is_bookable,is_active,is_physical,one_shared,one_shared_type,recurring_event,open_event_date,open_total_person, dish_image from dishes_detail_information where id in (select service_id from wellness_available_services where wellness_id=?) and bookable_service_category_id=? and is_bookable=1 and one_shared=1");
			$stmt->bind_param("ii", $data['wellness_id'],$row['id']);	
			}
			else
			{
				$stmt = $dbCon->prepare("select id,dish_name,dish_detail,dish_price,is_bookable,is_active,is_physical,one_shared,one_shared_type,recurring_event,open_event_date,open_total_person, dish_image from dishes_detail_information where id in (select service_id from wellness_available_services where wellness_id=?) and bookable_service_category_id=? and is_bookable=1 and one_shared=1 and id not in (select dish_id from hotel_roomservice_item_ordered where wellness_id=? and booking_person_id=? and is_verified=0 and qloud_checkout_id=?)");
				$stmt->bind_param("iiiii", $data['wellness_id'],$row['id'], $data['wellness_id'],$data['dstricts_user_id'],$data['checkid']);
			}
			
			
			}
			else if($data['selected_services_type']==2)
			{
			$stmt = $dbCon->prepare("select id,dish_name,dish_detail,dish_price,is_bookable,is_active,is_physical,one_shared,one_shared_type,recurring_event,open_event_date,open_total_person, dish_image from dishes_detail_information where id in (select service_id from wellness_available_services where wellness_id=?) and bookable_service_category_id=? and is_bookable=1 and one_shared=2 and (one_shared_type =2 or one_shared_type =3)");
			$stmt->bind_param("ii", $data['wellness_id'],$row['id']);	
			}
			else if($data['selected_services_type']==3)
			{
			$stmt = $dbCon->prepare("select id,dish_name,dish_detail,dish_price,is_bookable,is_active,is_physical,one_shared,one_shared_type,recurring_event,open_event_date,open_total_person, dish_image from dishes_detail_information where id in (select service_id from wellness_available_services where wellness_id=?) and bookable_service_category_id=? and is_bookable=1 and one_shared=2 and (one_shared_type =1 or one_shared_type =3)");
			$stmt->bind_param("ii", $data['wellness_id'],$row['id']);
			}
			 
			 
			$stmt->execute();
			$result3 = $stmt->get_result();
			 
			while($row3= $result3->fetch_assoc())
			{
				if($data['selected_services_type']==2)
				{
					$row3['one_shared_type']=2;
				}
				if($data['selected_services_type']==3)
				{
				if($row3['one_shared']==2 && $row3['one_shared_type']==1 && $row3['recurring_event']==0)
				{
				$stmt = $dbCon->prepare("select sum(dish_quantity) as total_booked from hotel_roomservice_item_ordered where dish_id=? and service_type=5");
				$stmt->bind_param("i",$row3['id']);
				$stmt->execute();
				$result2 = $stmt->get_result();	
				$row2 = $result2->fetch_assoc();
				$row3['open_total_person']=$row3['open_total_person']-$row2['total_booked'];
				if($row3['open_total_person']==0)
					continue;
				}
				$row3['one_shared_type']=1;
				}
				$row3['service_category_name']=$row['service_category_name'];
				$row3['dish_detail']=str_replace('/r','',$row3['dish_detail']);
				$row3['dish_detail']=str_replace('/n','',$row3['dish_detail']);
				$row3['dish_detail']=strip_tags(trim($row3['dish_detail']));
				$filename="../estorecss/".$row3 ['dish_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row3 ['dish_image'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row3 ['dish_image'].'.jpg' );  $imgs='../../../../'.$imgs; } else { $value_a="../../../../../html/usercontent/images/default-profile-pic.jpg";  $imgs="../../../../../html/usercontent/images/default-profile-pic.jpg"; }
				$imgs=str_replace('../../../../../','https://www.qloudid.com/',$imgs);
				$row3['dish_image']=$imgs;
				array_push($org[$j]['menu'],$row3);
				
			}
			$j++;
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
	 
		 
	


	function wellnessSearchFollowingCount($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select count(id) as num from wellness_following_info where wellness_id=? and is_following=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['wellness_id']); 
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();
				 
			$stmt->close();
			$dbCon->close();
			return $row2['num'];
			
			
		}

	function wellnessUpdateFollowing($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select  id,is_following from wellness_following_info where wellness_id=? and user_id=?");
			$stmt->bind_param("ii",$data['wellness_id'],$data['dstricts_user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if($row['is_following']==0)
			{
				$isFollowing=1;
			}
			else
			{
				$isFollowing=0;
			}
			$stmt = $dbCon->prepare("update wellness_following_info set is_following=?  where wellness_id=? and user_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("iii", $isFollowing,$data['wellness_id'],$data['dstricts_user_id']); 
			$stmt->execute();
			$result2 = $stmt->get_result();
			
			$stmt = $dbCon->prepare("select count(id) as num from wellness_following_info where wellness_id=? and is_following=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['wellness_id']); 
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();
			
			$stmt->close();
			$dbCon->close();
			return $row2['num'];
			
			
		}

	function wellnessSearchList($data)
		{
			$dbCon = AppModel::createConnection();
			$name='%'.htmlentities($data['name'],ENT_NOQUOTES, 'UTF-8').'%';
			$stmt = $dbCon->prepare("select id,center_name as name,center_name as first_name from wellness_center_information where center_name like ?");
			
			/* bind parameters for markers */
			$stmt->bind_param("s", $name); 
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			 
			while($row = $result->fetch_assoc())
			{
				
				$stmt = $dbCon->prepare("select count(id) as num from wellness_following_info where wellness_id=? and user_id=?");
			
				/* bind parameters for markers */
				$stmt->bind_param("ii", $row['id'],$data['dstricts_user_id']); 
				$stmt->execute();
				$result2 = $stmt->get_result();
				$row2 = $result2->fetch_assoc();
				 
				if($row2['num']==0)
				{
				
				$stmt = $dbCon->prepare("insert into wellness_following_info (wellness_id, user_id,created_on,modified_on) values (?,?,now(),now())");
			
				/* bind parameters for markers */
				$stmt->bind_param("ii", $row['id'],$data['dstricts_user_id']); 
				$stmt->execute();	
				}
				
				$stmt = $dbCon->prepare("select id,is_following from wellness_following_info where wellness_id=? and user_id=?");
			
				/* bind parameters for markers */
				$stmt->bind_param("ii", $row['id'],$data['dstricts_user_id']); 
				$stmt->execute();
				$result2 = $stmt->get_result();
				$row2 = $result2->fetch_assoc();
				$row['is_following']=$row2['is_following'];
				$row['id_following']=$row2['id'];
				$row['passport_image']="";
				$row['first_name']=html_entity_decode($row['first_name'],ENT_NOQUOTES, 'UTF-8');
				$row['name']=html_entity_decode($row['name'],ENT_NOQUOTES, 'UTF-8'); 
				$row['user_image']='https://www.qloudid.com/html/usercontent/images/bg/hotel1.jpg';
				array_push($org,$row);
				 
			}
			 
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}

	function resturantPackageComboList($data)
		{
			 
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select  * from resturant_package_info where resturant_id=?");
			$stmt->bind_param("i",$data['resturant_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			$stmt = $dbCon->prepare("select sum(active_category) as num from package_category_dishes where package_id=?");
			$stmt->bind_param("i",$row['id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();
			if($row2['num']==0)
				continue;
			array_push($org,$row);
			}
			 
			 
			 
			$stmt->close();
			$dbCon->close();  
			return $org;
			
		}
		
		
		function resturantPackageCategoryList($data)
		{
			 
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select food_category_id,food_category  from package_category_dishes left join food_category on food_category.id=package_category_dishes.food_category_id where package_id=? and active_category=1");
			$stmt->bind_param("i",$data['package_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();  
			return $org;
			
		}
		
		
		function resturantPackageCategoryDishesList($data)
		{
			 
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select id,dish_name,dish_detail,dish_image from dishes_detail_information where id in (select available_package_dishes  from package_category_dishes where package_id=? and active_category=1 and food_category_id=?)");
			$stmt->bind_param("ii",$data['package_id'],$data['food_category_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($rowDishes = $result->fetch_assoc())
			{
			$rowDishes['dish_detail']=strip_tags(trim($rowDishes['dish_detail']));
			$filename="../estorecss/".$rowDishes ['dish_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$rowDishes ['dish_image'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$rowDishes ['dish_image'].'.jpg' );  $imgs='../../../../'.$imgs; } else { $value_a="../../../../../html/usercontent/images/default-profile-pic.jpg";  $imgs="../../../../../html/usercontent/images/default-profile-pic.jpg"; }
			$imgs=str_replace('../../../../../','https://www.qloudid.com/',$imgs);
			$rowDishes['dish_image']=$imgs;
			array_push($org,$rowDishes);
			}
			$stmt->close();
			$dbCon->close();  
			return $org;
			
		}


	function wellnessServiceInfoCount($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select count(id) as num from dishes_detail_information where id in (select service_id from wellness_available_services where wellness_id=?) and is_bookable=1 and one_shared=2 and (one_shared_type =1 or one_shared_type =3)");
			/* bind parameters for markers */
			 
			$stmt->bind_param("i", $data['wellness_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$org=array();
			
			$org['public_service']=$row['num'];
			$stmt = $dbCon->prepare("select count(id) as num  from dishes_detail_information where id in (select service_id from wellness_available_services where wellness_id=?) and is_bookable=1 and one_shared=2 and (one_shared_type =2 or one_shared_type =3)");
			/* bind parameters for markers */
			 
			$stmt->bind_param("i", $data['wellness_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$org['private_service']=$row['num'];
			
			$stmt = $dbCon->prepare("select count(id) as num  from dishes_detail_information where id in (select service_id from wellness_available_services where wellness_id=?) and is_bookable=1 and one_shared=1");
			/* bind parameters for markers */
			 
			$stmt->bind_param("i", $data['wellness_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$org['onetoone']=$row['num'];
			
			$stmt = $dbCon->prepare("select count(id) as num from hotel_roomservice_item_ordered where wellness_id=? and booking_person_id=? and one_shared=1 and is_verified=0 and qloud_checkout_id=?");
			$stmt->bind_param("iii", $data['wellness_id'],$data['dstricts_user_id'],$data['checkid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCount= $result->fetch_assoc();
			
			$org['onecart']=$rowCount['num'];
			
			$stmt->close();
			$dbCon->close();
			return $org;
			
		}
		
	 

	function addPublicServiceToCartApp($data)
		{
			$dbCon = AppModel::createConnection();
			  $isConfirmed=0;
			 $query="select property_id,company_id from wellness_center_information where id=".$data['wellness_id'];	
			 $result=(mysqli_query($dbCon,$query));
			 $rowCompany=mysqli_fetch_array($result);
			  
			   
			  $curl = curl_init();
			  curl_setopt_array($curl, array(
			  CURLOPT_URL => 'https://dstricts.com/user/index.php/DstrictsApp/addPublicServiceToCartApp',
			  CURLOPT_RETURNTRANSFER => true,
			  CURLOPT_ENCODING => '',
			  CURLOPT_MAXREDIRS => 10,
			  CURLOPT_TIMEOUT => 0,
			  CURLOPT_FOLLOWLOCATION => true,
			  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
			  CURLOPT_CUSTOMREQUEST => 'POST',
			  CURLOPT_POSTFIELDS => array('user_id' => $data['dstricts_user_id'],'checkout_id' => $data['checkid'],'company_id' => $rowCompany['company_id'],'dish_detail' => $data['dish_detail'],'dish_name' => $data['dish_name'],'dish_image' => $data['dish_image'],'price' => $data['price'],'quantity' => $data['quantity'],'location_id' => $rowCompany['property_id'],'item_id' => $data['item_id'],'service_type' => $data['service_type'],'shared_type' => $data['one_shared'],'shared_type_private' => $data['one_shared_type'],'wellness_id' => $data['wellness_id'],'is_confirmed' => $isConfirmed,'booking_date' => $data['open_event_date'],'booking_time' => $data['open_event_time']),
			));
 
			 
			
			$response = curl_exec($curl);
			curl_close($curl);
			 
			$t=$data['price']*$data['quantity'];
			$stmt = $dbCon->prepare("insert into hotel_roomservice_item_ordered(is_private,location_id,booking_person_id,one_shared,dish_price,dish_id,dish_quantity,dish_name,dish_image,dish_detail,total_price,created_on,service_type,wellness_id,qloud_checkout_id,is_confirmed_employee, booking_time, booking_date)
			values(?,?,?,?,?,?,?,?,?,?,?,now(),?,?,?,?,?,?)");
			$stmt->bind_param("iiiiiiisssiiiiiis",$data['one_shared_type'],$rowCompany['property_id'],$data['dstricts_user_id'],$data['one_shared'],$data['price'],$data['item_id'],$data['quantity'],$data['dish_name'],$data['dish_image'],$data['dish_detail'],$t,$data['service_type'],$data['wellness_id'],$data['checkid'],$isConfirmed,$data['open_event_time'],$data['open_event_date']);
			$stmt->execute();
			
			 
			$stmt->close();
			$dbCon->close();
			return 1;
				
		}
	
	
	
	function wellnessSelectedServiceInfo($data)
		{
			 
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select dishes_detail_information.id,dish_name,dish_detail,dish_price,is_bookable,is_active,is_physical,dish_image,one_shared,one_shared_type,recurring_event,open_event_date,open_total_person,open_event_time,work_time,open_price_per_person,private_price from dishes_detail_information left join working_hrs on working_hrs.id=dishes_detail_information.open_event_time where dishes_detail_information.id=?");
			$stmt->bind_param("i",$data['dish_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowDishes = $result->fetch_assoc();
			 
			if($rowDishes['one_shared']==2 && $rowDishes['one_shared_type']==1 && $rowDishes['recurring_event']==0)
			{
			$stmt = $dbCon->prepare("select sum(dish_quantity) as total_booked from hotel_roomservice_item_ordered where dish_id=? and service_type=5");
			$stmt->bind_param("i",$rowDishes['id']);
			$stmt->execute();
			$result2 = $stmt->get_result();	
			$row2 = $result2->fetch_assoc();
			$rowDishes['open_total_person']=$rowDishes['open_total_person']-$row2['total_booked'];
			$rowDishes['booking_date']=date('Y-m-d',$rowDishes['open_event_date']);
			}
			
			$rowDishes['dish_detail']=strip_tags(trim($rowDishes['dish_detail']));
			$filename="../estorecss/".$rowDishes ['dish_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$rowDishes ['dish_image'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$rowDishes ['dish_image'].'.jpg' );  $imgs='../../../../'.$imgs; } else { $value_a="../../../../../html/usercontent/images/default-profile-pic.jpg";  $imgs="../../../../../html/usercontent/images/default-profile-pic.jpg"; }
			$imgs=str_replace('../../../../../','https://www.qloudid.com/',$imgs);
			$rowDishes['dish_image']=$imgs;
			 
			$stmt->close();
			$dbCon->close();  
			return $rowDishes;
			
		}

	function WellnessPrivateCalenderInfo($data)
	{
		$dbCon = AppModel::createConnection();
		
		$query="select property_id,company_id from wellness_center_information where id=".$data['wellness_id'];	
		$result=(mysqli_query($dbCon,$query));
		$rowCompany=mysqli_fetch_array($result);
		
		$query="select dish_id from hotel_roomservice_item_ordered where qloud_checkout_id=".$data['checkid']." and wellness_id=".$data['wellness_id']." and service_type=5 and is_verified=0 and booking_person_id=".$data['dstricts_user_id'];
		$result=(mysqli_query($dbCon,$query));
		$items='';
		while($row=mysqli_fetch_array($result))
		{
			
			$items=$items.$row['dish_id'].',';
		}
		$items=substr($items,0,-1);
		$b=explode(',',$items);
	   
		$query="select time_required,post_production_time,preparation_time,total_private_events from dishes_detail_information where id in ('".$items."')";
		$result=(mysqli_query($dbCon,$query));
		$timeRequired=0;
		$rowTime=mysqli_fetch_array($result);
	 
		$timeRequired=$timeRequired+$rowTime['time_required']+$rowTime['post_production_time']+$rowTime['preparation_time'];
		
		
		$org=array();
		$timeRequired=round($timeRequired/2);
		$startDate=date('d-m-Y',$data['date_id']);
		$weekDay=date('w', $data['date_id']); 
	 
		$queryBooked="select count(id) as num from hotel_roomservice_item_ordered where dish_id in (select dish_id from hotel_roomservice_item_ordered where booking_person_id=".$data['dstricts_user_id'].") and booking_date=".$startDate;
		$resultBooked=(mysqli_query($dbCon,$queryBooked));
		$rowBooked=mysqli_fetch_array($resultBooked);
		
		 
 
		if($rowBooked['num']==$rowTime['total_private_events'])
		{
			 
		return $org;	
		}
			
		 
		if($data['employee_id']==0)
		{
		$query="select id,services_available from employees where company_id=".$rowCompany['company_id']." and (user_login_id in (select user_login_id from user_company_profile where location_id=".$rowCompany['property_id'].") or user_login_id=43)";	
		}
		else
		{
			$query="select id,services_available from employees where id=".$data['employee_id'];
		}
		$result=(mysqli_query($dbCon,$query));
		$ids='';
		while($row=mysqli_fetch_array($result))
		{
			 
			$queryBooked="select count(id) as num from hotel_roomservice_item_ordered where booked_employee_id=".$row['id']." and one_shared=2 and booking_date=".$startDate;
			$resultBooked=(mysqli_query($dbCon,$queryBooked));
			$rowBooked=mysqli_fetch_array($resultBooked);
			
			
			$queryBooked="select shared_events_per_day from employee_service_booking_rules where employee_id=".$row['id'];
			$resultEmpBooked=(mysqli_query($dbCon,$queryBooked));
			$rowEmpBooked=mysqli_fetch_array($resultEmpBooked);
			
			
			
			if($rowBooked['num']==$rowEmpBooked['shared_events_per_day'])
			{
				continue;
			}
			 
			$query2="select working_day from employee_working_hrs where day_id=".$weekDay." and employee_id=".$row['id'];
			$result2=(mysqli_query($dbCon,$query2));
			$row2=mysqli_fetch_array($result2);
			 
			if($row2['working_day']==0)
			{
				continue;
			}
			$res=1;
			$c=explode(',',$row['services_available']);
			foreach($b as $key)
			{
					if (in_array($key, $c))
						{
						$res=1;
						}
						else
						{
						$res=0;
						break;
						}
							
			}
			if($res==1)
			{
			$ids=$ids.$row['id'].',';	
			}
		}
		
		 
		
		$ids=substr($ids,0,-1);
		$emps=explode(',',$ids);
		 
		$workId="0";
		
		foreach($emps as $key1)
		{
			 
		$bookedDate='0';
		$query2="select booking_time from hotel_roomservice_item_ordered where booked_employee_id=".$key1." and booking_date='".$startDate."'";
		$result2=(mysqli_query($dbCon,$query2));
		while($row2=mysqli_fetch_array($result2))
		{
			$bookedDate=$bookedDate.",".$row2['booking_time'];
		}
 
		  
		$query2="select work_start_time,work_end_time,lunch_start_time,lunch_end_time from employee_working_hrs where day_id=".$weekDay." and employee_id=".$key1;
		$result2=(mysqli_query($dbCon,$query2));
		$row2=mysqli_fetch_array($result2);
		$row2['lunch_end_time']=$row2['lunch_end_time']-1; 
		$query="select id,work_time from working_hrs where (id between ".$row2['work_start_time']." and ".$row2['work_end_time'].") and (id not between ".$row2['lunch_start_time']." and ".$row2['lunch_end_time'].")  and id not in (select id from working_hrs where id in (".$bookedDate."))";
		$result=(mysqli_query($dbCon,$query));
		$ids='';
		while($row=mysqli_fetch_array($result))
		{
		$workId=$workId.",".$row['id'];
		//$row['emp_id']=$key1;
		//array_push($org,$row);
		$ids=$ids.$row['id'].",";
		}
			
		$dataWork=explode(',',substr($ids,0,-1));
		$avail=1;
		$j=0;
		 
		foreach($dataWork as $key3)
		{
			for($t=0;$t<$timeRequired;$t++)
			{
				$value=(int)$key3+$t;
				if (in_array($value, $dataWork))
				{
				$avail=1;
				}
				else
				{
				$avail=0;
				break;
				}
			}
			
			if($avail==1)
			{
				$query="select id,work_time from working_hrs where id=".$key3;
				$result=(mysqli_query($dbCon,$query));
				$row=mysqli_fetch_array($result);
				$row['emp_id']=$key1;
				$reg=1;
			foreach($org as $vals)
			{
				if($vals['id']==$row['id'])
				{
					$reg=0;
					break;
				}
			}
			if($reg==1)
			{
			$row['time_required']=$timeRequired;
			$row['date']=$data['date_id'];
			$row['work_time']=html_entity_decode($row['work_time'],ENT_NOQUOTES, 'UTF-8');	
			array_push($org,$row);	
			}
			
			 //if(!in_array($row,$org))
				//array_push($org,$row);
			}
		}
		$key2 = array_column($org, 'id');

		array_multisort($key2, SORT_ASC, $org);
		}
		
	
		
	
	 
	$dbCon->close();  
	return $org;
	}
	
	function wellnessOpenCalenderInfo($data)
	{
		$dbCon = AppModel::createConnection();
		$query="select property_id,company_id from wellness_center_information where id=".$data['wellness_id'];	
		$result=(mysqli_query($dbCon,$query));
		$rowCompany=mysqli_fetch_array($result);
		$company_id=$rowCompany['company_id'];
		$location_id=$rowCompany['property_id']; 
		
		$query="select dish_id,dish_quantity from hotel_roomservice_item_ordered where service_type=5 and is_verified=0 and booking_person_id=".$data['dstricts_user_id'];
		$result=(mysqli_query($dbCon,$query));
		$row=mysqli_fetch_array($result);
		
		
		 $data['quantity']=$row['dish_quantity'];
		$items=$row['dish_id'];
		$query="select time_required,post_production_time,preparation_time,open_total_person from dishes_detail_information where id=".$items;
		$result=(mysqli_query($dbCon,$query));
		$timeRequired=0;
		$row=mysqli_fetch_array($result);
		$timeRequired=$timeRequired+$row['time_required']+$row['post_production_time']+$row['preparation_time'];
		$totalPerson=$row['open_total_person'];
		$org=array();
		$timeRequired=round($timeRequired/2);
		 
	$startDate=date('d-m-Y',$data['date_id']);

	 
	$weekDay=date('w', strtotime($startDate.' day')); 
	 
	 
	$query="select day_id,event_day,id,work_time from dish_service_recurring_information left join working_hrs on working_hrs.id=dish_service_recurring_information.event_start_time where day_id=".$weekDay." and dish_id=".$items;
	$result=(mysqli_query($dbCon,$query));
	$row=mysqli_fetch_array($result); 
	 
	if($row['event_day']==0)
		return $org;
	
					$stmt = $dbCon->prepare("select sum(dish_quantity) as total_booked from hotel_roomservice_item_ordered where dish_id=? and service_type=5");
					$stmt->bind_param("i",$items);
					$stmt->execute();
					$result2 = $stmt->get_result();	
					$row2 = $result2->fetch_assoc();
					if($row2['total_booked']==$totalPerson)
						return $org;
					if(($totalPerson-$row2['total_booked'])<$data['quantity'])
						return $org;
	
	 $row['work_time']=html_entity_decode($row['work_time'],ENT_NOQUOTES, 'UTF-8');	
	 $row['time_required']=$timeRequired;
	 $row['date']=$data['date_id'];	
	 $row['emp_id']=0;	 
	$stmt->close();
	$dbCon->close();  
	return $row;
	}
	
	
	
	
	function deleteWellnessSharedItems($data)
		{
			$dbCon = AppModel::createConnection();
			  
			  $curl = curl_init();
			  curl_setopt_array($curl, array(
			  CURLOPT_URL => 'https://dstricts.com/user/index.php/DstrictsApp/deleteWellnessSharedItems',
			  CURLOPT_RETURNTRANSFER => true,
			  CURLOPT_ENCODING => '',
			  CURLOPT_MAXREDIRS => 10,
			  CURLOPT_TIMEOUT => 0,
			  CURLOPT_FOLLOWLOCATION => true,
			  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
			  CURLOPT_CUSTOMREQUEST => 'POST',
			  CURLOPT_POSTFIELDS => array('checkid' => $data['checkid'],'service_type' => $data['service_type'],'wellness_id' => $data['wellness_id']),
			));
			$response = curl_exec($curl);
			curl_close($curl);
			 
			$stmt = $dbCon->prepare("delete from hotel_roomservice_item_ordered where qloud_checkout_id=? and is_verified=0 and service_type=? and wellness_id=? and one_shared=2");
			/* bind parameters for markers */ 
			$stmt->bind_param("iii",$data['checkid'],$data['service_type'],$data['wellness_id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
			
			 
			
		}	
		
		


		function wellnessCartBookingTimeUpdate($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select id from working_hrs where work_time=?");
			/* bind parameters for markers */
			 
			$stmt->bind_param("s",$data['booking_time']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
 
			$bookingTime=$row['id'].',';//$data['booking_time'].',';
			 for($i=1;$i<$data['total_booking_time'];$i++)
			 {
				 $newTime=$row['id']+$i;//$data['booking_time']+$i;
				 $bookingTime=$bookingTime.$newTime.',';
			 }
			 $bookingTime=substr($bookingTime,0,-1);
			 
			 if($data['employee_id']==0)
			 {
				 $isConfirmed=0;
			 }
			 else
			 {
				$isConfirmed=1; 
			 }
			 
			 $curl = curl_init();
				curl_setopt_array($curl, array(
			  CURLOPT_URL => 'https://dstricts.com/user/index.php/DstrictsApp/wellnessCartBookingTimeUpdate',
			  CURLOPT_RETURNTRANSFER => true,
			  CURLOPT_ENCODING => '',
			  CURLOPT_MAXREDIRS => 10,
			  CURLOPT_TIMEOUT => 0,
			  CURLOPT_FOLLOWLOCATION => true,
			  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
			  CURLOPT_CUSTOMREQUEST => 'POST',
			  CURLOPT_POSTFIELDS => array('checkid' => $data['checkid'],'wellness_id' => $data['wellness_id'],'user_id' => $data['dstricts_user_id'],'booking_time' => $bookingTime,'booking_employee_id' => $data['booking_employee_id'],'is_confirmed' => $isConfirmed,'booking_date' => $data['booking_date']),
			));
				 
			$response = curl_exec($curl);
			curl_close($curl);
			 
			$stmt = $dbCon->prepare("update hotel_roomservice_item_ordered set is_confirmed_employee=?,booked_employee_id=?, booking_time=?, booking_date=?  where qloud_checkout_id=? and is_verified=0 and service_type=5 and booking_person_id=? and wellness_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("iissiii",$isConfirmed,$data['booking_employee_id'],$bookingTime,$data['booking_date'],$data['checkid'],$data['dstricts_user_id'],$data['wellness_id']);
			$stmt->execute();
			
			$stmt->close();
			$dbCon->close();
			return 1;
			
			 
			
		}
	
	function UpdateWellnessCartItem($data)
		{
			$dbCon = AppModel::createConnection();
			  
			  $curl = curl_init();
			  curl_setopt_array($curl, array(
			  CURLOPT_URL => 'https://dstricts.com/user/index.php/DstrictsApp/UpdateWellnessCartItem',
			  CURLOPT_RETURNTRANSFER => true,
			  CURLOPT_ENCODING => '',
			  CURLOPT_MAXREDIRS => 10,
			  CURLOPT_TIMEOUT => 0,
			  CURLOPT_FOLLOWLOCATION => true,
			  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
			  CURLOPT_CUSTOMREQUEST => 'POST',
			  CURLOPT_POSTFIELDS => array('checkid' => $data['checkid'],'dish_id' => $data['dish_id'],'service_type' => $data['service_type'],'wellness_id' => $data['wellness_id'],'dstricts_user_id' => $data['dstricts_user_id']),
			));
			$response = curl_exec($curl);
			curl_close($curl);
			 
			$stmt = $dbCon->prepare("delete from hotel_roomservice_item_ordered where qloud_checkout_id=? and is_verified=0 and dish_id=? and service_type=? and wellness_id=? and booking_person_id");
			/* bind parameters for markers */ 
			$stmt->bind_param("iiiii",$data['checkid'],$data['dish_id'],$data['service_type'],$data['wellness_id'],$data['dstricts_user_id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
			
			 
			
		}
	
	
	
	function cartInfoWellnessList($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select * from hotel_roomservice_item_ordered where qloud_checkout_id=? and is_verified=0 and service_type=? and wellness_id=?");
			/* bind parameters for markers */
			 
			$stmt->bind_param("iii",$data['checkid'],$data['service_type'],$data['wellness_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				$row['dish_detail']=trim($row['dish_detail']);
				array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
			 
			
		}
		
		
		function cartInfoWellnessListCount($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select count(id) as num from hotel_roomservice_item_ordered where qloud_checkout_id=? and is_verified=0 and service_type=? and wellness_id=?");
			/* bind parameters for markers */
			 
			$stmt->bind_param("iii",$data['checkid'],$data['service_type'],$data['wellness_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			return $row;
			
			 
			
		}
		
		function UpdateAmenitycartItemCount($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select amenity_id,user_id,created_on,qloud_checkout_id,aminity_quantity,aminity_price,amenity_name from company_hotel_amenities_user_request where id=?");
			/* bind parameters for markers */
			 
			$stmt->bind_param("i",$data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			  $curl = curl_init();
			 curl_setopt_array($curl, array(
			  CURLOPT_URL => 'https://dstricts.com/user/index.php/DstrictsApp/UpdateAmenitycartItemCount',
			  CURLOPT_RETURNTRANSFER => true,
			  CURLOPT_ENCODING => '',
			  CURLOPT_MAXREDIRS => 10,
			  CURLOPT_TIMEOUT => 0,
			  CURLOPT_FOLLOWLOCATION => true,
			  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
			  CURLOPT_CUSTOMREQUEST => 'POST',
			  CURLOPT_POSTFIELDS => array('id' => $data['id']),
			));

			 
			
			$response = curl_exec($curl);
			curl_close($curl);
				 
			if($data['quantity']==0)
			{
			$stmt = $dbCon->prepare("delete from company_hotel_amenities_user_request where id=?");
			/* bind parameters for markers */
			 
			$stmt->bind_param("i",$data['id']);
			$stmt->execute();
			}
			else
			{
			$stmt = $dbCon->prepare("update company_hotel_amenities_user_request set aminity_quantity=?  where id=?");
			/* bind parameters for markers */
			 
			$stmt->bind_param("ii",$data['quantity'],$data['id']);
			$stmt->execute();
			}
			
			
			$stmt->close();
			$dbCon->close();
			return 1;
			
			 
			
		}
	
	function addServiceToCartApp($data)
		{
			$dbCon = AppModel::createConnection();
			 
			 $query="select property_id,company_id from wellness_center_information where id=".$data['wellness_id'];	
			 $result=(mysqli_query($dbCon,$query));
			 $rowCompany=mysqli_fetch_array($result);
			 
			  if($data['one_shared']==1)
			 {
				$data['one_shared_type']=0; 
			 }
			  $curl = curl_init();
			curl_setopt_array($curl, array(
			  CURLOPT_URL => 'https://dstricts.com/user/index.php/DstrictsApp/addServiceToCartApp',
			  CURLOPT_RETURNTRANSFER => true,
			  CURLOPT_ENCODING => '',
			  CURLOPT_MAXREDIRS => 10,
			  CURLOPT_TIMEOUT => 0,
			  CURLOPT_FOLLOWLOCATION => true,
			  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
			  CURLOPT_CUSTOMREQUEST => 'POST',
			  CURLOPT_POSTFIELDS => array('user_id' => $data['dstricts_user_id'],'checkout_id' => $data['checkid'],'company_id' => $rowCompany['company_id'],'dish_detail' => $data['dish_detail'],'dish_name' => $data['dish_name'],'dish_image' => $data['dish_image'],'price' => $data['price'],'quantity' => $data['quantity'],'location_id' => $rowCompany['property_id'],'item_id' => $data['item_id'],'service_type' => $data['service_type'],'shared_type' => $data['one_shared'],'shared_type_private' => $data['one_shared_type'],'wellness_id' => $data['wellness_id']),
			));
 
			 
			
			$response = curl_exec($curl);
			curl_close($curl);
			 
			$t=$data['price']*$data['quantity'];
			$stmt = $dbCon->prepare("insert into hotel_roomservice_item_ordered(is_private,location_id,booking_person_id,one_shared,dish_price,dish_id,dish_quantity,dish_name,dish_image,dish_detail,total_price,created_on,service_type,wellness_id,qloud_checkout_id)
			values(?,?,?,?,?,?,?,?,?,?,?,now(),?,?,?)");
			$stmt->bind_param("iiiiiiisssiiii",$data['one_shared_type'],$rowCompany['property_id'],$data['dstricts_user_id'],$data['one_shared'],$data['price'],$data['item_id'],$data['quantity'],$data['dish_name'],$data['dish_image'],$data['dish_detail'],$t,$data['service_type'],$data['wellness_id'],$data['checkid']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("select * from hotel_roomservice_item_ordered where qloud_checkout_id=? and is_verified=0 and service_type=? and wellness_id=?");
			/* bind parameters for markers */
			 
			$stmt->bind_param("iii",$data['checkid'],$data['service_type'],$data['wellness_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				$row['dish_detail']=trim($row['dish_detail']);
				array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
				
		}
	
	
	function selectEmployeeForSelectedServices($data)
	{
		$dbCon = AppModel::createConnection();
		
		$query="select property_id,company_id from wellness_center_information where id=".$data['wellness_id'];	
		$result=(mysqli_query($dbCon,$query));
		$rowCompany=mysqli_fetch_array($result);
		 
		  
		$query="select dish_id from hotel_roomservice_item_ordered where service_type=5 and is_verified=0 and booking_person_id=".$data['dstricts_user_id']." and wellness_id=".$data['wellness_id']."  and qloud_checkout_id=".$data['checkid'];
		$result=(mysqli_query($dbCon,$query));
		$items='';
		while($row=mysqli_fetch_array($result))
		{
			
			$items=$items.$row['dish_id'].',';
		}
		$items=substr($items,0,-1);
		 
		$b=explode(',',$items); 
		$org=array();
		 
	  
		$query="select passport_image,employees.id,services_available,concat_ws(' ',employees.first_name,employees.last_name) as name, employees.email from employees left join user_logins on user_logins.id=employees.user_login_id where company_id=".$rowCompany['company_id']." and (user_login_id in (select user_login_id from user_company_profile where location_id=".$rowCompany['property_id'].") or user_login_id=43)";	
		 
		$result=(mysqli_query($dbCon,$query));
		 
		while($row=mysqli_fetch_array($result))
		{
			
			 
			$res=1;
			$c=explode(',',$row['services_available']);
			foreach($b as $key)
			{
					if (in_array($key, $c))
						{
						$res=1;
						}
						else
						{
						$res=0;
						break;
						}
							
			}
			
			if($res==1)
			{
				if($row['passport_image']=="" || $row['passport_image']==null)
				{
					$row['user_image']='https://www.qloudid.com/html/usercontent/images/person-male.png';
				}
				else
				{
				$filename="../estorecss/".$row['passport_image'].".txt"; $value_a=file_get_contents("../estorecss/".$row['passport_image'].".txt"); $value_a=str_replace('"','',$value_a); $row['passport_image'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['passport_image'].'.jpg' );
				$row['user_image']=str_replace('../','https://www.qloudid.com/',$row['passport_image']);
				}
			array_push($org,$row);	
			}
		}
	 
	$dbCon->close();  
	return $org;
	}
	
	function availableDatesForbooking()
	{
	$dbCon = AppModel::createConnection();
		
	$startDate=date('d-m-Y');
	$org=array();
	for($i=0;$i<=27;$i++)
	{		
	$org[$i]['date_id']=strtotime($startDate . ' +'.$i.' day');
	$org[$i]['date']=date('Y-m-d',strtotime($startDate . ' +'.$i.' day'));
 
	}
	 
	$dbCon->close();  
	return $org;
	}
	
	
	
	
	
	function employeeBookingCalenderInfoApp($data)
	{
		$dbCon = AppModel::createConnection();
		
		$query="select property_id,company_id from wellness_center_information where id=".$data['wellness_id'];	
		$result=(mysqli_query($dbCon,$query));
		$rowCompany=mysqli_fetch_array($result);
		 
		$query="select dish_id from hotel_roomservice_item_ordered where service_type=5 and is_verified=0 and booking_person_id=".$data['dstricts_user_id']." and wellness_id=".$data['wellness_id']."  and qloud_checkout_id=".$data['checkid'];
		$result=(mysqli_query($dbCon,$query));
		$items='';
		while($row=mysqli_fetch_array($result))
		{
			
			$items=$items.$row['dish_id'].',';
		}
		$items=substr($items,0,-1);
		$b=explode(',',$items);
	 
		$query="select time_required,post_production_time,preparation_time from dishes_detail_information where id in ('".$items."')";
		$result=(mysqli_query($dbCon,$query));
		$timeRequired=0;
		while($row=mysqli_fetch_array($result))
		{
			$timeRequired=$timeRequired+$row['time_required']+$row['post_production_time']+$row['preparation_time'];
		}
		
		$org=array();
		$timeRequired=round($timeRequired/2);
		//$flag=$data['date_id'];
	$startDate=date('d-m-Y',$data['date_id']);
 	$i=0;	
	//$org[$i]['timerequired']=$timeRequired;
	$date=strtotime($startDate);
	$weekDay=date('w', strtotime($startDate)); 
		if($data['employee_id']==0)
		{
		$query="select id,services_available from employees where company_id=".$rowCompany['company_id']." and (user_login_id in (select user_login_id from user_company_profile where location_id=".$rowCompany['property_id'].") or user_login_id=43)";	
		}
		else
		{
			$query="select id,services_available from employees where id=".$data['employee_id'];
		}
		$result=(mysqli_query($dbCon,$query));
		$ids='';
		while($row=mysqli_fetch_array($result))
		{
			   
			$query2="select working_day from employee_working_hrs where day_id=".$weekDay." and employee_id=".$row['id'];
			$result2=(mysqli_query($dbCon,$query2));
			$row2=mysqli_fetch_array($result2);
			 
			if($row2['working_day']==0)
			{
				continue;
			}
			$res=1;
			$c=explode(',',$row['services_available']);
			foreach($b as $key)
			{
					if (in_array($key, $c))
						{
						$res=1;
						}
						else
						{
						$res=0;
						break;
						}
							
			}
			if($res==1)
			{
			$ids=$ids.$row['id'].',';	
			}
		}
		if($ids=='')
		{
			$dbCon->close();  
			return $org;
		}
		$ids=substr($ids,0,-1);
		$emps=explode(',',$ids);
		 
		$workId="0";
		
		foreach($emps as $key1)
		{
			 
		$bookedDate='0';
		$query2="select booking_time from hotel_roomservice_item_ordered where booked_employee_id=".$key1." and booking_date='".$data['date_id']."'";
		$result2=(mysqli_query($dbCon,$query2));
		while($row2=mysqli_fetch_array($result2))
		{
			$bookedDate=$bookedDate.",".$row2['booking_time'];
		}
 
		  
		$query2="select work_start_time,work_end_time,lunch_start_time,lunch_end_time from employee_working_hrs where day_id=".$weekDay." and employee_id=".$key1;
		$result2=(mysqli_query($dbCon,$query2));
		$row2=mysqli_fetch_array($result2);
		$row2['lunch_end_time']=$row2['lunch_end_time']-1; 
		$query="select id,work_time from working_hrs where (id between ".$row2['work_start_time']." and ".$row2['work_end_time'].") and (id not between ".$row2['lunch_start_time']." and ".$row2['lunch_end_time'].")  and id not in (select id from working_hrs where id in (".$bookedDate."))";
		$result=(mysqli_query($dbCon,$query));
		$ids='';
		while($row=mysqli_fetch_array($result))
		{
		$workId=$workId.",".$row['id'];
		//$row['emp_id']=$key1;
		//array_push($org[$i]['work_time_info'],$row);
		$ids=$ids.$row['id'].",";
		}
		
		$dataWork=explode(',',substr($ids,0,-1));
		$avail=1;
		$j=0;
		 
		foreach($dataWork as $key3)
		{
			for($t=0;$t<$timeRequired;$t++)
			{
				$value=(int)$key3+$t;
				if (in_array($value, $dataWork))
				{
				$avail=1;
				}
				else
				{
				$avail=0;
				break;
				}
			}
			
			if($avail==1)
			{
				$query="select id,work_time from working_hrs where id=".$key3;
				$result=(mysqli_query($dbCon,$query));
				$row=mysqli_fetch_array($result);
				$row['emp_id']=$key1;
				$reg=1;
			foreach($org as $vals)
			{
				if($vals['id']==$row['id'])
				{
					$reg=0;
					break;
				}
			}
			if($reg==1)
			{
				$row['time_required']=$timeRequired;
				$row['date']=$date;
				$row['work_time']=html_entity_decode($row['work_time'],ENT_NOQUOTES, 'UTF-8');
				array_push($org,$row);
			}
			
			 //if(!in_array($row,$org[$i]['work_time_info']))
				//array_push($org[$i]['work_time_info'],$row);
			}
		}
		$key2 = array_column($org, 'id');

		array_multisort($key2, SORT_ASC, $org);
		}
		
	 
	 
	$dbCon->close();  
	return $org;
	}
	
	
	function selectedWellnessCategoriesSelection($data)
		{
			function base64_to_jpeg($base64_string, $output_file) {
			$ifp = fopen( $output_file, 'wb' ); 
			$data = explode( ',', $base64_string );
			fwrite( $ifp, base64_decode( $data[1] ) );
			fclose( $ifp ); 
			return $output_file; 
			}
			$dbCon = AppModel::createConnection();
			
			if($data['selected_services_type']==1)
			{
			$stmt = $dbCon->prepare("select * from bookable_service_categories where id in (select bookable_service_category_id from dishes_detail_information where id in (select service_id from wellness_available_services where wellness_id=?) and is_bookable=1 and one_shared=1)");
			$stmt->bind_param("i", $data['wellness_id']);
			}
			else if($data['selected_services_type']==2)
			{
			$stmt = $dbCon->prepare("select * from bookable_service_categories where id in (select bookable_service_category_id from dishes_detail_information where id in (select service_id from wellness_available_services where wellness_id=?) and is_bookable=1 and one_shared=2 and (one_shared_type =2 or one_shared_type =3))");
			$stmt->bind_param("i", $data['wellness_id']);	
			}
			else if($data['selected_services_type']==3)
			{
			$stmt = $dbCon->prepare("select * from bookable_service_categories where id in (select bookable_service_category_id from dishes_detail_information where id in (select service_id from wellness_available_services where wellness_id=?) and is_bookable=1 and one_shared=2 and (one_shared_type =1 or one_shared_type =3))");
			$stmt->bind_param("i", $data['wellness_id']);	
			}
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row= $result->fetch_assoc())
			{
				 
				array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
	 
		 function selectedWellnessBookingAppMenuSelection($data)
		{
			function base64_to_jpeg($base64_string, $output_file) {
			$ifp = fopen( $output_file, 'wb' ); 
			$data = explode( ',', $base64_string );
			fwrite( $ifp, base64_decode( $data[1] ) );
			fclose( $ifp ); 
			return $output_file; 
			}
			 
			$dbCon = AppModel::createConnection();
			 
			if($data['selected_services_type']==1)
			{
			$stmt = $dbCon->prepare("select count(id) as num from hotel_roomservice_item_ordered where wellness_id=? and booking_person_id=? and one_shared=1 and is_verified=0 and qloud_checkout_id=?");
			$stmt->bind_param("iii", $data['wellness_id'],$data['dstricts_user_id'],$data['checkid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCount= $result->fetch_assoc();
			if($rowCount['num']==0)
			{
			$stmt = $dbCon->prepare("select id,dish_name,dish_detail,dish_price,is_bookable,is_active,is_physical,one_shared,one_shared_type,recurring_event,open_event_date,open_total_person, dish_image from dishes_detail_information where id in (select service_id from wellness_available_services where wellness_id=?) and bookable_service_category_id=? and is_bookable=1 and one_shared=1");
			$stmt->bind_param("ii", $data['wellness_id'],$data['bookable_service_id']);	
			}
			else
			{
				$stmt = $dbCon->prepare("select id,dish_name,dish_detail,dish_price,is_bookable,is_active,is_physical,one_shared,one_shared_type,recurring_event,open_event_date,open_total_person, dish_image from dishes_detail_information where id in (select service_id from wellness_available_services where wellness_id=?) and bookable_service_category_id=? and is_bookable=1 and one_shared=1 and id not in (select dish_id from hotel_roomservice_item_ordered where wellness_id=? and booking_person_id=? and is_verified=0 and qloud_checkout_id=?)");
				$stmt->bind_param("iiiii", $data['wellness_id'],$data['bookable_service_id'], $data['wellness_id'],$data['dstricts_user_id'],$data['checkid']);
			}
			
			
			}
			else if($data['selected_services_type']==2)
			{
			$stmt = $dbCon->prepare("select id,dish_name,dish_detail,dish_price,is_bookable,is_active,is_physical,one_shared,one_shared_type,recurring_event,open_event_date,open_total_person, dish_image from dishes_detail_information where id in (select service_id from wellness_available_services where wellness_id=?) and bookable_service_category_id=? and is_bookable=1 and one_shared=2 and (one_shared_type =2 or one_shared_type =3)");
			$stmt->bind_param("ii", $data['wellness_id'],$data['bookable_service_id']);	
			}
			else if($data['selected_services_type']==3)
			{
			$stmt = $dbCon->prepare("select id,dish_name,dish_detail,dish_price,is_bookable,is_active,is_physical,one_shared,one_shared_type,recurring_event,open_event_date,open_total_person, dish_image from dishes_detail_information where id in (select service_id from wellness_available_services where wellness_id=?) and bookable_service_category_id=? and is_bookable=1 and one_shared=2 and (one_shared_type =1 or one_shared_type =3)");
			$stmt->bind_param("ii", $data['wellness_id'],$data['bookable_service_id']);
			}
			 
			 
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row= $result->fetch_assoc())
			{
				if($data['selected_services_type']==2)
				{
					$row['one_shared_type']=2;
				}
				if($data['selected_services_type']==3)
				{
				if($row['one_shared']==2 && $row['one_shared_type']==1 && $row['recurring_event']==0)
				{
				$stmt = $dbCon->prepare("select sum(dish_quantity) as total_booked from hotel_roomservice_item_ordered where dish_id=? and service_type=5");
				$stmt->bind_param("i",$row['id']);
				$stmt->execute();
				$result2 = $stmt->get_result();	
				$row2 = $result2->fetch_assoc();
				$row['open_total_person']=$row['open_total_person']-$row2['total_booked'];
				if($row['open_total_person']==0)
					continue;
				}
				$row['one_shared_type']=1;
				}
				
				$row['dish_detail']=str_replace('/r','',$row['dish_detail']);
				$row['dish_detail']=str_replace('/n','',$row['dish_detail']);
				$row['dish_detail']=strip_tags(trim($row['dish_detail']));
				$filename="../estorecss/".$row ['dish_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['dish_image'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row ['dish_image'].'.jpg' );  $imgs='../../../../'.$imgs; } else { $value_a="../../../../../html/usercontent/images/default-profile-pic.jpg";  $imgs="../../../../../html/usercontent/images/default-profile-pic.jpg"; }
				$imgs=str_replace('../../../../../','https://www.qloudid.com/',$imgs);
				$row['dish_image']=$imgs;
				array_push($org,$row);
				
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
	 
	
	 
	
	function selectedWellnessCategories($data)
		{
			function base64_to_jpeg($base64_string, $output_file) {
			$ifp = fopen( $output_file, 'wb' ); 
			$data = explode( ',', $base64_string );
			fwrite( $ifp, base64_decode( $data[1] ) );
			fclose( $ifp ); 
			return $output_file; 
			}
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select count(id) as num from hotel_roomservice_item_ordered where wellness_id=? and booking_person_id=? and one_shared=1 and is_verified=0");
			$stmt->bind_param("ii", $data['wellness_id'],$data['dstricts_user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCount= $result->fetch_assoc();
			 
			if($rowCount['num']==0)
			{
			$stmt = $dbCon->prepare("select * from bookable_service_categories where id in (select bookable_service_category_id from dishes_detail_information where id in (select service_id from wellness_available_services where wellness_id=?) and is_bookable=1)");
			$stmt->bind_param("i", $data['wellness_id']);
			}
			else
			{
			$stmt = $dbCon->prepare("select * from bookable_service_categories where id in (select bookable_service_category_id from dishes_detail_information where id in (select service_id from wellness_available_services where wellness_id=?) and is_bookable=1 and one_shared=1 and id not in (select dish_id from hotel_roomservice_item_ordered where wellness_id=? and booking_person_id=? and is_verified=0))");
			$stmt->bind_param("iii", $data['wellness_id'],$data['wellness_id'],$data['dstricts_user_id']);	
			}
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row= $result->fetch_assoc())
			{
				array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
	 
	 
	 function selectedWellnessBookingAppMenu($data)
		{
			function base64_to_jpeg($base64_string, $output_file) {
			$ifp = fopen( $output_file, 'wb' ); 
			$data = explode( ',', $base64_string );
			fwrite( $ifp, base64_decode( $data[1] ) );
			fclose( $ifp ); 
			return $output_file; 
			}
			 
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select count(id) as num from hotel_roomservice_item_ordered where wellness_id=? and booking_person_id=? and one_shared=1 and is_verified=0");
			$stmt->bind_param("ii", $data['wellness_id'],$data['dstricts_user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCount= $result->fetch_assoc();
			 
			if($rowCount['num']==0)
			{
			$stmt = $dbCon->prepare("select id,dish_name,dish_detail,dish_price,is_bookable,is_active,is_physical,one_shared,one_shared_type,recurring_event,open_event_date,open_total_person, dish_image from dishes_detail_information where id in (select service_id from wellness_available_services where wellness_id=?) and bookable_service_category_id=?");
			$stmt->bind_param("ii", $data['wellness_id'],$data['bookable_service_id']);	
			}				
			else
			{
				$stmt = $dbCon->prepare("select id,dish_name,dish_detail,dish_price,is_bookable,is_active,is_physical,one_shared,one_shared_type,recurring_event,open_event_date,open_total_person, dish_image from dishes_detail_information where id in (select service_id from wellness_available_services where wellness_id=?) and bookable_service_category_id=? and one_shared=1 and id not in (select dish_id from hotel_roomservice_item_ordered where wellness_id=? and booking_person_id=? and is_verified=0)");
				$stmt->bind_param("iiii", $data['wellness_id'],$data['bookable_service_id'],$data['wellness_id'],$data['dstricts_user_id']);
			}
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row= $result->fetch_assoc())
			{
				
				if($row['one_shared']==2 && $row['one_shared_type']==1 && $row['recurring_event']==0)
				{
				$stmt = $dbCon->prepare("select sum(dish_quantity) as total_booked from hotel_roomservice_item_ordered where dish_id=? and service_type=5");
				$stmt->bind_param("i",$row['id']);
				$stmt->execute();
				$result2 = $stmt->get_result();	
				$row2 = $result2->fetch_assoc();
				$row['open_total_person']=$row['open_total_person']-$row2['total_booked'];
				if($row['open_total_person']==0)
					continue;
				}
				
				$row['dish_detail']=str_replace('/r','',$row['dish_detail']);
				$row['dish_detail']=str_replace('/n','',$row['dish_detail']);
				$row['dish_detail']=strip_tags(trim($row['dish_detail']));
				$filename="../estorecss/".$row ['dish_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['dish_image'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row ['dish_image'].'.jpg' );  $imgs='../../../../'.$imgs; } else { $value_a="../../../../../html/usercontent/images/default-profile-pic.jpg";  $imgs="../../../../../html/usercontent/images/default-profile-pic.jpg"; }
			$imgs=str_replace('../../../../../','https://www.qloudid.com/',$imgs);
			$row['dish_image']=$imgs;
				array_push($org,$row);
				
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
	 

	
	
	
	
	
	function updateBookingTimeInfo()
		{
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("update hotel_roomservice_item_ordered set is_confirmed_employee=?,booked_employee_id=?, booking_time=?, booking_date=?  where qloud_checkout_id=0 and is_verified=0 and service_type=5 and booking_person_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("iisii",$_POST['is_confirmed'],$_POST['booking_employee_id'],$_POST['booking_time'],$_POST['booking_date'],$_POST['user_id']);
			$stmt->execute();
			
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function bookingPrivateCalenderInfo()
	{
		$dbCon = AppModel::createConnection();
		 
		$company_id=$this->encrypt_decrypt('decrypt',$_POST['company_id']);
		$location_id=$this->encrypt_decrypt('decrypt',$_POST['location_id']); 
		 
		$query="select dish_id from hotel_roomservice_item_ordered where service_type=5 and is_verified=0 and booking_person_id=".$_POST['user_id'];
		$result=(mysqli_query($dbCon,$query));
		$items='';
		while($row=mysqli_fetch_array($result))
		{
			
			$items=$items.$row['dish_id'].',';
		}
		$items=substr($items,0,-1);
		$b=explode(',',$items);
	  
		$query="select time_required,post_production_time,preparation_time,total_private_events from dishes_detail_information where id in ('".$items."')";
		$result=(mysqli_query($dbCon,$query));
		$timeRequired=0;
		$rowTime=mysqli_fetch_array($result);
	 
		$timeRequired=$timeRequired+$rowTime['time_required']+$rowTime['post_production_time']+$rowTime['preparation_time'];
		
		
		$org=array();
		$timeRequired=round($timeRequired/2);
		$flag=$_POST['date_flag']*7;
	$startDate=date('d-m-Y',strtotime(date('d-m-Y') . ' +'.$flag.' day'));

	for($i=0;$i<=6;$i++)
	{		
	$org[$i]['timerequired']=$timeRequired;
	$org[$i]['date']=strtotime($startDate . ' +'.$i.' day');
	$weekDay=date('w', strtotime($startDate . ' +'.$i.' day')); 
	$org[$i]['work_time_info']=array();
	$queryBooked="select count(id) as num from hotel_roomservice_item_ordered where dish_id in (select dish_id from hotel_roomservice_item_ordered where booking_person_id=".$_POST['user_id'].") and booking_date=".$org[$i]['date'];
	$resultBooked=(mysqli_query($dbCon,$queryBooked));
	$rowBooked=mysqli_fetch_array($resultBooked);
	
 
		if($rowBooked['num']==$rowTime['total_private_events'])
			continue;
		
		if($_POST['employee_id']==0)
		{
		$query="select id,services_available from employees where company_id=".$company_id." and (user_login_id in (select user_login_id from user_company_profile where location_id=".$location_id.") or user_login_id=43)";	
		}
		else
		{
			$query="select id,services_available from employees where id=".$_POST['employee_id'];
		}
		$result=(mysqli_query($dbCon,$query));
		$ids='';
		while($row=mysqli_fetch_array($result))
		{
			$queryBooked="select count(id) as num from hotel_roomservice_item_ordered where booked_employee_id=".$row['id']." and one_shared=2 and booking_date=".$org[$i]['date'];
			$resultBooked=(mysqli_query($dbCon,$queryBooked));
			$rowBooked=mysqli_fetch_array($resultBooked);
			
			
			$queryBooked="select shared_events_per_day from employee_service_booking_rules where employee_id=".$row['id'];
			$resultEmpBooked=(mysqli_query($dbCon,$queryBooked));
			$rowEmpBooked=mysqli_fetch_array($resultEmpBooked);
			
			if($rowBooked['num']==$rowEmpBooked['shared_events_per_day'])
			{
				continue;
			}
			
			$query2="select working_day from employee_working_hrs where day_id=".$weekDay." and employee_id=".$row['id'];
			$result2=(mysqli_query($dbCon,$query2));
			$row2=mysqli_fetch_array($result2);
			 
			if($row2['working_day']==0)
			{
				continue;
			}
			$res=1;
			$c=explode(',',$row['services_available']);
			foreach($b as $key)
			{
					if (in_array($key, $c))
						{
						$res=1;
						}
						else
						{
						$res=0;
						break;
						}
							
			}
			if($res==1)
			{
			$ids=$ids.$row['id'].',';	
			}
		}
		$ids=substr($ids,0,-1);
		$emps=explode(',',$ids);
		
		if($ids=='')
		{
			continue;
		}	
		$workId="0";
		
		foreach($emps as $key1)
		{
			 
		$bookedDate='0';
		$query2="select booking_time from hotel_roomservice_item_ordered where booked_employee_id=".$key1." and booking_date='".$org[$i]['date']."'";
		$result2=(mysqli_query($dbCon,$query2));
		while($row2=mysqli_fetch_array($result2))
		{
			$bookedDate=$bookedDate.",".$row2['booking_time'];
		}
 
		  
		$query2="select work_start_time,work_end_time,lunch_start_time,lunch_end_time from employee_working_hrs where day_id=".$weekDay." and employee_id=".$key1;
		$result2=(mysqli_query($dbCon,$query2));
		$row2=mysqli_fetch_array($result2);
		$row2['lunch_end_time']=$row2['lunch_end_time']-1; 
		$query="select id,work_time from working_hrs where (id between ".$row2['work_start_time']." and ".$row2['work_end_time'].") and (id not between ".$row2['lunch_start_time']." and ".$row2['lunch_end_time'].")  and id not in (select id from working_hrs where id in (".$bookedDate."))";
		$result=(mysqli_query($dbCon,$query));
		$ids='';
		while($row=mysqli_fetch_array($result))
		{
		$workId=$workId.",".$row['id'];
		//$row['emp_id']=$key1;
		//array_push($org[$i]['work_time_info'],$row);
		$ids=$ids.$row['id'].",";
		}
		
		$dataWork=explode(',',substr($ids,0,-1));
		$avail=1;
		$j=0;
		 
		foreach($dataWork as $key3)
		{
			for($t=0;$t<$timeRequired;$t++)
			{
				$value=(int)$key3+$t;
				if (in_array($value, $dataWork))
				{
				$avail=1;
				}
				else
				{
				$avail=0;
				break;
				}
			}
			
			if($avail==1)
			{
				$query="select id from working_hrs where id=".$key3;
				$result=(mysqli_query($dbCon,$query));
				$row=mysqli_fetch_array($result);
				$row['emp_id']=$key1;
				$reg=1;
			foreach($org[$i]['work_time_info'] as $vals)
			{
				if($vals['id']==$row['id'])
				{
					$reg=0;
					break;
				}
			}
			if($reg==1)
			array_push($org[$i]['work_time_info'],$row);
			 //if(!in_array($row,$org[$i]['work_time_info']))
				//array_push($org[$i]['work_time_info'],$row);
			}
		}
		$key2 = array_column($org[$i]['work_time_info'], 'id');

		array_multisort($key2, SORT_ASC, $org[$i]['work_time_info']);
		}
		
	
		
	}
	 
	print_r(json_encode($org,true));
	$stmt->close();
	$dbCon->close();  
	return json_encode($org,true);
	}
	
	function bookingCalenderInfo()
	{
		$dbCon = AppModel::createConnection();
		
		$company_id=$this->encrypt_decrypt('decrypt',$_POST['company_id']);
		$location_id=$this->encrypt_decrypt('decrypt',$_POST['location_id']); 
		
		$query="select dish_id from hotel_roomservice_item_ordered where service_type=5 and is_verified=0 and booking_person_id=".$_POST['user_id'];
		$result=(mysqli_query($dbCon,$query));
		$items='';
		while($row=mysqli_fetch_array($result))
		{
			
			$items=$items.$row['dish_id'].',';
		}
		$items=substr($items,0,-1);
		$b=explode(',',$items);
	 
		$query="select time_required,post_production_time,preparation_time from dishes_detail_information where id in ('".$items."')";
		$result=(mysqli_query($dbCon,$query));
		$timeRequired=0;
		while($row=mysqli_fetch_array($result))
		{
			$timeRequired=$timeRequired+$row['time_required']+$row['post_production_time']+$row['preparation_time'];
		}
		
		$org=array();
		$timeRequired=round($timeRequired/2);
		$flag=$_POST['date_flag']*7;
	$startDate=date('d-m-Y',strtotime(date('d-m-Y') . ' +'.$flag.' day'));

	for($i=0;$i<=6;$i++)
	{		
	$org[$i]['timerequired']=$timeRequired;
	$org[$i]['date']=strtotime($startDate . ' +'.$i.' day');
	$weekDay=date('w', strtotime($startDate . ' +'.$i.' day')); 
		if($_POST['employee_id']==0)
		{
		$query="select id,services_available from employees where company_id=".$company_id." and (user_login_id in (select user_login_id from user_company_profile where location_id=".$location_id.") or user_login_id=43)";	
		}
		else
		{
			$query="select id,services_available from employees where id=".$_POST['employee_id'];
		}
		$result=(mysqli_query($dbCon,$query));
		$ids='';
		while($row=mysqli_fetch_array($result))
		{
			 
			$query2="select working_day from employee_working_hrs where day_id=".$weekDay." and employee_id=".$row['id'];
			$result2=(mysqli_query($dbCon,$query2));
			$row2=mysqli_fetch_array($result2);
			 
			if($row2['working_day']==0)
			{
				continue;
			}
			$res=1;
			$c=explode(',',$row['services_available']);
			foreach($b as $key)
			{
					if (in_array($key, $c))
						{
						$res=1;
						}
						else
						{
						$res=0;
						break;
						}
							
			}
			if($res==1)
			{
			$ids=$ids.$row['id'].',';	
			}
		}
		$ids=substr($ids,0,-1);
		$emps=explode(',',$ids);
		$org[$i]['work_time_info']=array();
		if($ids=='')
		{
			continue;
		}	
		$workId="0";
		
		foreach($emps as $key1)
		{
			 
		$bookedDate='0';
		$query2="select booking_time from hotel_roomservice_item_ordered where booked_employee_id=".$key1." and booking_date='".$org[$i]['date']."'";
		$result2=(mysqli_query($dbCon,$query2));
		while($row2=mysqli_fetch_array($result2))
		{
			$bookedDate=$bookedDate.",".$row2['booking_time'];
		}
 
		  
		$query2="select work_start_time,work_end_time,lunch_start_time,lunch_end_time from employee_working_hrs where day_id=".$weekDay." and employee_id=".$key1;
		$result2=(mysqli_query($dbCon,$query2));
		$row2=mysqli_fetch_array($result2);
		$row2['lunch_end_time']=$row2['lunch_end_time']-1; 
		$query="select id,work_time from working_hrs where (id between ".$row2['work_start_time']." and ".$row2['work_end_time'].") and (id not between ".$row2['lunch_start_time']." and ".$row2['lunch_end_time'].")  and id not in (select id from working_hrs where id in (".$bookedDate."))";
		$result=(mysqli_query($dbCon,$query));
		$ids='';
		while($row=mysqli_fetch_array($result))
		{
		$workId=$workId.",".$row['id'];
		//$row['emp_id']=$key1;
		//array_push($org[$i]['work_time_info'],$row);
		$ids=$ids.$row['id'].",";
		}
		
		$dataWork=explode(',',substr($ids,0,-1));
		$avail=1;
		$j=0;
		 
		foreach($dataWork as $key3)
		{
			for($t=0;$t<$timeRequired;$t++)
			{
				$value=(int)$key3+$t;
				if (in_array($value, $dataWork))
				{
				$avail=1;
				}
				else
				{
				$avail=0;
				break;
				}
			}
			
			if($avail==1)
			{
				$query="select id from working_hrs where id=".$key3;
				$result=(mysqli_query($dbCon,$query));
				$row=mysqli_fetch_array($result);
				$row['emp_id']=$key1;
				$reg=1;
			foreach($org[$i]['work_time_info'] as $vals)
			{
				if($vals['id']==$row['id'])
				{
					$reg=0;
					break;
				}
			}
			if($reg==1)
			array_push($org[$i]['work_time_info'],$row);
			 //if(!in_array($row,$org[$i]['work_time_info']))
				//array_push($org[$i]['work_time_info'],$row);
			}
		}
		$key2 = array_column($org[$i]['work_time_info'], 'id');

		array_multisort($key2, SORT_ASC, $org[$i]['work_time_info']);
		}
		
	
		
	}
	print_r(json_encode($org,true));
	$stmt->close();
	$dbCon->close();  
	return json_encode($org,true);
	}
	
	function bookingOpenCalenderInfo()
	{
		$dbCon = AppModel::createConnection();
		
		$company_id=$this->encrypt_decrypt('decrypt',$_POST['company_id']);
		$location_id=$this->encrypt_decrypt('decrypt',$_POST['location_id']); 
		
		$query="select dish_id from hotel_roomservice_item_ordered where service_type=5 and is_verified=0 and booking_person_id=".$_POST['user_id'];
		$result=(mysqli_query($dbCon,$query));
		$row=mysqli_fetch_array($result);
		 
		$items=$row['dish_id'];
		 
		$_POST['quantity']=1;
		$query="select time_required,post_production_time,preparation_time,open_total_person from dishes_detail_information where id=".$items;
		$result=(mysqli_query($dbCon,$query));
		$timeRequired=0;
		$row=mysqli_fetch_array($result);
		$timeRequired=$timeRequired+$row['time_required']+$row['post_production_time']+$row['preparation_time'];
		$totalPerson=$row['open_total_person'];
		$org=array();
		$timeRequired=round($timeRequired/2);
		$flag=$_POST['date_flag']*7;
	$startDate=date('d-m-Y',strtotime(date('d-m-Y') . ' +'.$flag.' day'));

	for($i=0;$i<=6;$i++)
	{		
	$org[$i]['timerequired']=$timeRequired;
	$org[$i]['date']=strtotime($startDate . ' +'.$i.' day');
	$weekDay=date('w', strtotime($startDate . ' +'.$i.' day')); 
	$org[$i]['work_time_info']=array(); 
	 
	$query="select day_id,event_day,id from dish_service_recurring_information left join working_hrs on working_hrs.id=dish_service_recurring_information.event_start_time where day_id=".$weekDay." and dish_id=".$items;
	$result=(mysqli_query($dbCon,$query));
	$row=mysqli_fetch_array($result); 
	 
	if($row['event_day']==0)
		continue;
	
					$stmt = $dbCon->prepare("select sum(dish_quantity) as total_booked from hotel_roomservice_item_ordered where dish_id=? and service_type=5");
					$stmt->bind_param("i",$items);
					$stmt->execute();
					$result2 = $stmt->get_result();	
					$row2 = $result2->fetch_assoc();
					if($row2['total_booked']==$totalPerson)
						continue;
					if(($totalPerson-$row2['total_booked'])<$_POST['quantity'])
						continue;
	 array_push($org[$i]['work_time_info'],$row);
			 
	}
	 
	//echo '<pre>'; print_r(json_encode($org,true)); echo '</pre>';  die;
	$stmt->close();
	$dbCon->close();  
	return json_encode($org,true);
	}
	
	function selectEmployee()
	{
		$dbCon = AppModel::createConnection();
		
		$company_id=$this->encrypt_decrypt('decrypt',$_POST['company_id']);
		$location_id=$this->encrypt_decrypt('decrypt',$_POST['location_id']); 
		 
		$query="select dish_id from hotel_roomservice_item_ordered where booking_person_id=".$_POST['user_id']." and is_paid=0";
		$result=(mysqli_query($dbCon,$query));
		$items='';
		while($row=mysqli_fetch_array($result))
		{
			
			$items=$items.$row['dish_id'].',';
		}
		$items=substr($items,0,-1);
		$b=explode(',',$items); 
		$org=array();
		  
	 
		$query="select id,services_available,concat_ws(' ',first_name,last_name) as name, email from employees where company_id=".$company_id." and (user_login_id in (select user_login_id from user_company_profile where location_id=".$location_id.")  or user_login_id=43)";	
		 
		$result=(mysqli_query($dbCon,$query));
		 
		while($row=mysqli_fetch_array($result))
		{
			
			 
			$res=1;
			$c=explode(',',$row['services_available']);
			foreach($b as $key)
			{
					if (in_array($key, $c))
						{
						$res=1;
						}
						else
						{
						$res=0;
						break;
						}
							
			}
			
			if($res==1)
			{
			array_push($org,$row);	
			}
		}
	print_r(json_encode($org,true));	 
	$stmt->close();
	$dbCon->close();  
	return $org;
	}
	
	function getLocationInfo()
		{
			 
			$dbCon = AppModel::createConnection();
			$bookable_service_category_id=$this->encrypt_decrypt('decrypt',$_POST['id']);
			$company_id=$this->encrypt_decrypt('decrypt',$_POST['company_id']);
			$location_id=$this->encrypt_decrypt('decrypt',$_POST['location_id']); 
			$stmt = $dbCon->prepare("select property_location.id,property_location.visiting_address,company_name,telephone,company_profiles.phone,company_profiles.address,property_location.latitude,property_location.longitude from property_location left join companies on companies.id=property_location.company_id left join company_profiles on company_profiles.company_id=companies.id where property_location.id=?");
			$stmt->bind_param("i",$location_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();  
			return $row;
			
		}
	
	 function getServices()
		{
			 
			$dbCon = AppModel::createConnection();
			$bookable_service_category_id=$this->encrypt_decrypt('decrypt',$_POST['id']);
			$company_id=$this->encrypt_decrypt('decrypt',$_POST['company_id']);
			$location_id=$this->encrypt_decrypt('decrypt',$_POST['location_id']);
			 
			$select="select services_available from employees where company_id=".$company_id." and (user_login_id in (select user_login_id from user_company_profile where location_id=".$location_id.") or user_login_id=43)";
			$resultService=mysqli_query($dbCon, $select); 
			$service=''; 
			while($rowService=mysqli_fetch_array($resultService))
			  {
				   
				  $service=$service.$rowService['services_available'];
			  }
		  
			$stmt = $dbCon->prepare("select id,dish_name,dish_detail,dish_price,is_bookable,is_active,is_physical,one_shared,one_shared_type,recurring_event,open_event_date,open_total_person from dishes_detail_information where is_physical=2 and is_bookable=1 and is_active=1 and find_in_set(id,?)");
			$stmt->bind_param("s",$service);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			 if($row['one_shared']==2 && $row['one_shared_type']==1 && $row['recurring_event']==0)
			 {
				 $d=strtotime(date('Y-m-d'));
				 if($row['open_event_date']<=$d)
					 continue;
				 else
				 {
					$stmt = $dbCon->prepare("select sum(dish_quantity) as total_booked from hotel_roomservice_item_ordered where dish_id=? and service_type=5");
					$stmt->bind_param("i",$row['id']);
					$stmt->execute();
					$result2 = $stmt->get_result();	
					$row2 = $result2->fetch_assoc();
					if($row2['total_booked']==$row['open_total_person'])
						continue;
				 }
			 }
			array_push($org,$row);
			$org[$j]['enc']=$this->encrypt_decrypt('encrypt',$row['id']);	
			$j++;
			}
		 
			$stmt->close();
			$dbCon->close();  
			return $org;
			
		}
		
		function selectedServiceImages()
		{
			$dbCon = AppModel::createConnection();
			$item_id= $this -> encrypt_decrypt('decrypt',$_POST['item_id']); 
			$stmt = $dbCon->prepare("select * from dish_detail_photos where dish_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $item_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0; 
			while($row1 = $result->fetch_assoc())
			{
			 
			$image=$row1['dish_photo_path'];
			$value_a=file_get_contents("../estorecss/".$image.".txt"); $value_a=str_replace('"','',$value_a); $row1['dish_photo_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$image.'.jpg' );
			$row1['image_path1']=str_replace('../','https://www.qloudid.com/',$row1['dish_photo_path']);	
			array_push($org,$row1);	
			$j++;
			}
			 
			$stmt->close();
			$dbCon->close();
			return $org;
			
		}
	
		
		function selectedServiceInfo()
		{
			 
			$dbCon = AppModel::createConnection();
			$item_id=$this->encrypt_decrypt('decrypt',$_POST['item_id']);
			 
			$stmt = $dbCon->prepare("select company_name,product_information ,time_required,dishes_detail_information.id,dish_name,dish_detail,dish_price,is_bookable,is_active,is_physical,dish_image,one_shared,one_shared_type,recurring_event,open_event_date,open_total_person,open_event_time,work_time,open_price_per_person,private_price from dishes_detail_information left join working_hrs on working_hrs.id=dishes_detail_information.open_event_time left join companies on companies.id=dishes_detail_information.company_id where dishes_detail_information.id=?");
			$stmt->bind_param("i",$item_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowDishes = $result->fetch_assoc();
			if($rowDishes['one_shared']==2 && $rowDishes['one_shared_type']==1 && $rowDishes['recurring_event']==0)
			{
			$stmt = $dbCon->prepare("select sum(dish_quantity) as total_booked from hotel_roomservice_item_ordered where dish_id=? and service_type=5");
			$stmt->bind_param("i",$rowDishes['id']);
			$stmt->execute();
			$result2 = $stmt->get_result();	
			$row2 = $result2->fetch_assoc();
			$rowDishes['open_total_person']=$rowDishes['open_total_person']-$row2['total_booked'];
			}
			
			
			$filename="../estorecss/".$rowDishes ['dish_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$rowDishes ['dish_image'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$rowDishes ['dish_image'].'.jpg' );  $imgs='../../../../'.$imgs; } else { $value_a="../../../../../html/usercontent/images/default-profile-pic.jpg";  $imgs="../../../../../html/usercontent/images/default-profile-pic.jpg"; }
			$imgs=str_replace('../../../../../','https://www.qloudid.com/',$imgs);
			$rowDishes['dish_image']=$imgs;
			 
			$stmt->close();
			$dbCon->close();  
			return $rowDishes;
			
		}
		
		
		 function getOneOnOneServices()
		{
			 
			$dbCon = AppModel::createConnection();
			$bookable_service_category_id=$this->encrypt_decrypt('decrypt',$_POST['id']);
			$company_id=$this->encrypt_decrypt('decrypt',$_POST['company_id']);
			$location_id=$this->encrypt_decrypt('decrypt',$_POST['location_id']);
			 
			$select="select services_available from employees where company_id=".$company_id." and user_login_id in (select user_login_id from user_company_profile where location_id=".$location_id.")";
			$resultService=mysqli_query($dbCon, $select); 
			$service=''; 
			while($rowService=mysqli_fetch_array($resultService))
			  {
				   
				  $service=$service.$rowService['services_available'];
			  }
		  
			$stmt = $dbCon->prepare("select id,dish_name,dish_detail,dish_price,is_bookable,is_active,is_physical from dishes_detail_information where is_physical=2 and is_bookable=1 and is_active=1 and find_in_set(id,?) and one_shared=1 and id not in (select dish_id from hotel_roomservice_item_ordered where booking_person_id=? and service_type=5 and is_verified=0)");
			$stmt->bind_param("si",$service,$_POST['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			 
			array_push($org,$row);
			$org[$j]['enc']=$this->encrypt_decrypt('encrypt',$row['id']);	
			$j++;
			}
		 
			$stmt->close();
			$dbCon->close();  
			return $org;
			
		}
		
		
	
		function availableServiceCategories()
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select * from bookable_service_categories where id in(select bookable_service_category_id from dishes_detail_information where is_physical=2 and is_bookable=1 and is_active=1)");
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				$row['enc']=$this->encrypt_decrypt('encrypt',$row['id']);
				array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();  
			return $org;
			
		}
		
	
	function getServiceCompanies()
		{
			$dbCon = AppModel::createConnection();
			$bookable_service_category_id=$this->encrypt_decrypt('decrypt',$_POST['id']);
			
			$stmt = $dbCon->prepare("select companies.id,company_name,latitude,longitude,address,profile_pic from companies left join company_profiles on company_profiles.company_id=companies.id where companies.id in(select company_id from dishes_detail_information where is_physical=2 and is_bookable=1 and is_active=1 and bookable_service_category_id=?)");
			$stmt->bind_param("i",$bookable_service_category_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			$select="select services_available from employees where company_id=".$row['id'];
			$resultService=mysqli_query($dbCon, $select); 
			$service=''; 
			while($rowService=mysqli_fetch_array($resultService))
			  {
				   
				  $service=$service.$rowService['services_available'];
			  }
			   
			 $select="select count(id) num from dishes_detail_information where is_physical=2 and is_bookable=1 and is_active=1 and bookable_service_category_id=".$bookable_service_category_id." and id in (".$service.")";
			 $resultCount=mysqli_query($dbCon, $select);  
			 $rowCount=mysqli_fetch_array($resultCount);
			 if($rowCount['num']==0)
			 {
				 continue;
			 }
			$stmt = $dbCon->prepare("select min(dish_price) as price from dishes_detail_information where is_physical=2 and is_bookable=1 and is_active=1 and bookable_service_category_id=? and company_id=?");
			$stmt->bind_param("ii",$bookable_service_category_id,$row['id']);
			$stmt->execute();
			$resultPrice = $stmt->get_result();
			$rowPrice = $resultPrice->fetch_assoc();
			  
				if($row['profile_pic']=="" || $row['profile_pic']==null)
				{
					$image='https://www.qloudid.com/html/usercontent/images/random/officepng.png';
				}
				else
				{
				$filename="../estorecss/".$row['profile_pic'].".txt"; $value_a=file_get_contents("../estorecss/".$row['profile_pic'].".txt"); $value_a=str_replace('"','',$value_a); $image = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['profile_pic'].'.jpg' );
				$image=str_replace('../','https://www.qloudid.com/',$image);	
				}
				
				array_push($org,$row);
				$org[$j]['price']=$rowPrice['price'];
				$org[$j]['image_path']=$image;
				$org[$j]['enc']=$this->encrypt_decrypt('encrypt',$row['id']);
				$j++;
			}
		 
			$stmt->close();
			$dbCon->close();  
			return $org;
			
		}
	
	
	
	function getServiceLocations()
		{
			 
			$dbCon = AppModel::createConnection();
			$bookable_service_category_id=$this->encrypt_decrypt('decrypt',$_POST['id']);
			$company_id=$this->encrypt_decrypt('decrypt',$_POST['company_id']);
			 
			$stmt = $dbCon->prepare("select property_location.city_v,property_location.id,property_location.visiting_address,company_name,telephone,company_profiles.phone,company_profiles.address,company_profiles.latitude,company_profiles.longitude from property_location left join companies on companies.id=property_location.company_id left join company_profiles on company_profiles.company_id=companies.id where property_location.company_id=?");
			$stmt->bind_param("i",$company_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
				 
			$select="select services_available from employees where company_id=".$company_id." and user_login_id in (select user_login_id from user_company_profile where location_id=".$row['id'].")";
			$resultService=mysqli_query($dbCon, $select); 
			$service=''; 
			while($rowService=mysqli_fetch_array($resultService))
			  {
				   
				  $service=$service.$rowService['services_available'];
			  }
			   
			 $select="select count(id) num from dishes_detail_information where is_physical=2 and is_bookable=1 and is_active=1 and bookable_service_category_id=".$bookable_service_category_id." and id in (".$service.")";
			 $resultCount=mysqli_query($dbCon, $select);  
			 $rowCount=mysqli_fetch_array($resultCount);
			  
			 if($rowCount['num']==0)
			 {
				 continue;
			 }
			 array_push($org,$row);
			$org[$j]['enc']=$this->encrypt_decrypt('encrypt',$row['id']);	
			$j++;
			}
		 
			$stmt->close();
			$dbCon->close();  
			return $org;
			
		}
	
	function updateDishStock($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update resturant_available_dishes set temp_available_item=? where id=?");
			$stmt->bind_param("ii",$data['in_stock'], $data['available_dish_id']);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return 1;
		}
	function deleteDishItem($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("delete from resturant_available_dishes where id=?");
			$stmt->bind_param("i",$data['available_dish_id']);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return 1;
		}
	function availableResturantList($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select id,resturant_name from resturant_information where company_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['company_id']); 
			$stmt->execute();
			$resultRest = $stmt->get_result();
			$org=array();
			 $i=0;
			while($rowRest = $resultRest->fetch_assoc())
			{
				 
			$rowRest['resturant_name']=html_entity_decode($rowRest['resturant_name'],ENT_NOQUOTES, 'UTF-8');
			array_push($org,$rowRest);
			$stmt = $dbCon->prepare("select * from resturant_work_information where resturant_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $rowRest['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			if(empty($row))
			{
			$stmt = $dbCon->prepare("insert into resturant_work_information(resturant_id,created_on)values(?, now())");
			$stmt->bind_param("i",$rowRest['id']);	
			$stmt->execute();
			$stmt = $dbCon->prepare("select * from resturant_work_information where resturant_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $rowRest['id']);
			
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();	
			}
			
			$org[$i]['serve_types']=array();
			$j=0;
			 
			if($row['breakfast_available']==1)
			{
				$org[$i]['serve_types'][$j]['id']=1;
				$org[$i]['serve_types'][$j]['serve']='Breakfast';
				$org[$i]['serve_types'][$j]['serve_image']="https://www.qloudid.com/html/usercontent/images/roomserviceImages/Breakfast.jpg";
				$stmt = $dbCon->prepare("select count(id) as num from resturant_available_dishes where resturant_id=? and serve_type=1");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $data['resturant_id']);
				
				$stmt->execute();
				$result2 = $stmt->get_result();
				
				$row2 = $result2->fetch_assoc();
				$org[$j]['num']=$row2['num'];			
				$j++;
			}
			if($row['brunch_available']==1)
			{
				$org[$i]['serve_types'][$j]['id']=2;
				$org[$i]['serve_types'][$j]['serve']='Brunch';
				$org[$i]['serve_types'][$j]['serve_image']="https://www.qloudid.com/html/usercontent/images/roomserviceImages/Brunch.jpg";
				$stmt = $dbCon->prepare("select count(id) as num from resturant_available_dishes where resturant_id=? and serve_type=2");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $data['resturant_id']);
				
				$stmt->execute();
				$result2 = $stmt->get_result();
				
				$row2 = $result2->fetch_assoc();
				$org[$i]['serve_types'][$j]['num']=$row2['num'];
				$j++;
			 	
			}
			if($row['lunch_available']==1)
			{
				$org[$i]['serve_types'][$j]['id']=3;
				$org[$i]['serve_types'][$j]['serve']='Lunch';
				$org[$i]['serve_types'][$j]['serve_image']="https://www.qloudid.com/html/usercontent/images/roomserviceImages/lunch.jpg";
				$stmt = $dbCon->prepare("select count(id) as num from resturant_available_dishes where resturant_id=? and serve_type=3");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $data['resturant_id']);
				
				$stmt->execute();
				$result2 = $stmt->get_result();
				
				$row2 = $result2->fetch_assoc();
				$org[$i]['serve_types'][$j]['num']=$row2['num'];
				$j++;
			 
			}
			if($row['dinner_available']==1)
			{
				$org[$i]['serve_types'][$j]['id']=4;
				$org[$i]['serve_types'][$j]['serve']='Dinner';
				$org[$i]['serve_types'][$j]['serve_image']="https://www.qloudid.com/html/usercontent/images/roomserviceImages/dinner.jpg";
				$stmt = $dbCon->prepare("select count(id) as num from resturant_available_dishes where resturant_id=? and serve_type=4");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $data['resturant_id']);
				
				$stmt->execute();
				$result2 = $stmt->get_result();
				
				$row2 = $result2->fetch_assoc();
				$org[$i]['serve_types'][$j]['num']=$row2['num'];
				$j++;
			 	
			}
			if($row['alcohol_available']==1)
			{
				$org[$i]['serve_types'][$j]['id']=5;
				$org[$i]['serve_types'][$j]['serve']='Beverages';
				$org[$i]['serve_types'][$j]['serve_image']="https://www.qloudid.com/html/usercontent/images/roomserviceImages/Beverage.jpg";
				$stmt = $dbCon->prepare("select count(id) as num from resturant_available_dishes where resturant_id=? and serve_type=5");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $data['resturant_id']);
				
				$stmt->execute();
				$result2 = $stmt->get_result();
				
				$row2 = $result2->fetch_assoc();
				$org[$i]['serve_types'][$j]['num']=$row2['num'];
				$j++;
			 
			}
				$i++;			
			}
			 
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
		
	 function ResturantMenu($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select distinct serve_type,serve_available from resturant_available_dishes where resturant_id=?");
			$stmt->bind_param("i", $data['resturant_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			 
			while($row= $result->fetch_assoc())
			{
				array_push($org,$row);
				$i=0;
				$stmt = $dbCon->prepare("select distinct category_food,food_category,place_of_display from resturant_available_dishes left join food_category on food_category.id=resturant_available_dishes.category_food where resturant_available_dishes.resturant_id=? and serve_type=? order by place_of_display");
				$stmt->bind_param("ii", $data['resturant_id'],$row['serve_type']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				while($rowCategory = $result1->fetch_assoc())
				{
					$k=0;
					$org[$i]['dishes']=array();
					$stmt = $dbCon->prepare("select resturant_available_dishes.id,dish_name,dish_detail,dish_image,dish_price,temp_available_item from resturant_available_dishes left join dishes_detail_information on dishes_detail_information.id=resturant_available_dishes.dish_id where resturant_id=? and serve_type=? and category_food=?");
					$stmt->bind_param("iii", $data['resturant_id'],$row['serve_type'],$rowCategory['category_food']);
					$stmt->execute();
					$result2 = $stmt->get_result();
					while($rowDishes = $result2->fetch_assoc())
					{
						$rowDishes['dish_name']=html_entity_decode($rowDishes['dish_name'],ENT_NOQUOTES, 'UTF-8'); 
						$rowDishes['dish_detail']=html_entity_decode($rowDishes['dish_detail'],ENT_NOQUOTES, 'UTF-8'); 
						 $filename="../estorecss/".$rowDishes ['dish_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$rowDishes ['dish_image'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs =$this-> base64_to_jpeg( $value_a, '../estorecss/tmp'.$rowDishes ['dish_image'].'.jpg' ); } else { $value_a="../html/usercontent/images/default-profile-pic.jpg";  $imgs="../html/usercontent/images/default-profile-pic.jpg"; }
						$imgs=str_replace('../','https://www.qloudid.com/',$imgs);
						array_push($org[$i]['dishes'],$rowDishes);
						$org[$i]['dishes'][$k]['dish_image']=$imgs;
						$k++;
					}
					$i++;
				}
				 
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
	 function resturantServeInfo($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select * from resturant_work_information where resturant_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['resturant_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			if(empty($row))
			{
			$stmt = $dbCon->prepare("insert into resturant_work_information(resturant_id,created_on)values(?, now())");
			$stmt->bind_param("i",$data['resturant_id']);	
			$stmt->execute();
			$stmt = $dbCon->prepare("select * from resturant_work_information where resturant_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['resturant_id']);
			
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();	
			}
			
			$org=array();
			$j=0;
			 
			if($row['breakfast_available']==1)
			{
				$org[$j]['id']=1;
				$org[$j]['serve']='Breakfast';
				$org[$j]['serve_image']="https://www.qloudid.com/html/usercontent/images/roomserviceImages/Breakfast.jpg";
				$stmt = $dbCon->prepare("select count(id) as num from resturant_available_dishes where resturant_id=? and serve_type=1");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $data['resturant_id']);
				
				$stmt->execute();
				$result2 = $stmt->get_result();
				
				$row2 = $result2->fetch_assoc();
				$org[$j]['num']=$row2['num'];			
				$j++;
			}
			if($row['brunch_available']==1)
			{
				$org[$j]['id']=2;
				$org[$j]['serve']='Brunch';
				$org[$j]['serve_image']="https://www.qloudid.com/html/usercontent/images/roomserviceImages/Brunch.jpg";
				$stmt = $dbCon->prepare("select count(id) as num from resturant_available_dishes where resturant_id=? and serve_type=2");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $data['resturant_id']);
				
				$stmt->execute();
				$result2 = $stmt->get_result();
				
				$row2 = $result2->fetch_assoc();
				$org[$j]['num']=$row2['num'];
				$j++;
			 	
			}
			if($row['lunch_available']==1)
			{
				$org[$j]['id']=3;
				$org[$j]['serve']='Lunch';
				$org[$j]['serve_image']="https://www.qloudid.com/html/usercontent/images/roomserviceImages/lunch.jpg";
				$stmt = $dbCon->prepare("select count(id) as num from resturant_available_dishes where resturant_id=? and serve_type=3");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $data['resturant_id']);
				
				$stmt->execute();
				$result2 = $stmt->get_result();
				
				$row2 = $result2->fetch_assoc();
				$org[$j]['num']=$row2['num'];
				$j++;
			 
			}
			if($row['dinner_available']==1)
			{
				$org[$j]['id']=4;
				$org[$j]['serve']='Dinner';
				$org[$j]['serve_image']="https://www.qloudid.com/html/usercontent/images/roomserviceImages/dinner.jpg";
				$stmt = $dbCon->prepare("select count(id) as num from resturant_available_dishes where resturant_id=? and serve_type=4");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $data['resturant_id']);
				
				$stmt->execute();
				$result2 = $stmt->get_result();
				
				$row2 = $result2->fetch_assoc();
				$org[$j]['num']=$row2['num'];
				$j++;
			 	
			}
			if($row['alcohol_available']==1)
			{
				$org[$j]['id']=5;
				$org[$j]['serve']='Beverages';
				$org[$j]['serve_image']="https://www.qloudid.com/html/usercontent/images/roomserviceImages/Beverage.jpg";
				$stmt = $dbCon->prepare("select count(id) as num from resturant_available_dishes where resturant_id=? and serve_type=5");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $data['resturant_id']);
				
				$stmt->execute();
				$result2 = $stmt->get_result();
				
				$row2 = $result2->fetch_assoc();
				$org[$j]['num']=$row2['num'];
				$j++;
			 
			}
			
			$stmt->close();
			$dbCon->close();
			return $org;
			
		}
		
	
	 function addGuestinfo($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select company_location_queue_info.id,queue_name,visiting_address,location_id from  company_location_queue_info  left join property_location on property_location.id=company_location_queue_info.location_id where company_location_queue_info.id=?");
			$stmt->bind_param("i", $data['qid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowAddress = $result->fetch_assoc();
			 
			$location_id= $rowAddress['location_id'];
			$queue_id= $data['qid'];	

			$stmt = $dbCon->prepare("select first_name,concat_ws(' ', first_name, last_name) as name,last_name,email,passport_image,phone_number,country_of_residence from user_logins left join user_profiles on user_logins.id=user_profiles.user_logins_id where user_logins.id = ?");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("i", $data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowUser = $result->fetch_assoc();
			
			$fname=$rowUser['name'];
			  
			$stmt = $dbCon->prepare("select country_code from phone_country_code where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $rowUser['country_of_residence']);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("insert into company_dropin_queue_waitlist(guest_name,phone_number,country_id,created_on,location_id,queue_id,total_person,user_id)
			values(?,?,?,now(),?,?, ?, ?)");
			$stmt->bind_param("ssiiiii",$fname,$rowUser['phone_number'],$rowUser['country_of_residence'],$location_id,$queue_id,$data['total_person'],$data['user_id']);
			$stmt->execute();
			 
			 $id=$stmt->insert_id;
			 
			$data['lid']=$this -> encrypt_decrypt('encrypt',$location_id);
			
			$stmt = $dbCon->prepare("select count(id) as num from company_dropin_queue_waitlist where id<? and is_serviced=0");
			$stmt->bind_param("i", $id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowAvailable = $result->fetch_assoc(); 
			$rank=$rowAvailable['num']+1;
			$enc_id= $this -> encrypt_decrypt('encrypt',$id);	
			$url="https://www.qloudid.com/public/index.php/DropinQueue/waitingInformation/".$data['lid'].'/'.$enc_id;
			$surl=getShortUrl($url);
			$phone="+".trim($row['country_code'])."".trim($rowUser['phone_number']);
			
			$subject='You Are #'.$rank.' on the '.$rowAddress['queue_name'].' waitlist';
			$to=$phone;
			$html='Hi '.$fname.'! you are waitlisted to '.$rowAddress['queue_name'].' as #'.$rank.' in line. See live update at '.$surl;
			//echo $html; die;
			$res=sendSms($subject, $to, $html);
			$stmt->close();
			$dbCon->close();
			return 1;
			 
			
		}
		
	function waitlistResturant($data)
		{
			$dbCon = AppModel::createConnection();
		 
			$stmt = $dbCon->prepare("select * from company_location_queue_info where published_queue=1 and dining_id in (select id from resturant_dining_hall where resturant_id=?) and queue_type=? and is_active=1");
			$stmt->bind_param("ii", $data['resturant_id'],$data['queue_type']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				 
				$ctime=date('H:i', strtotime($row['closing_time'])-($row['closing_time']*60));
				$crtime=date('H:i');
				if($row['opening_time']!==$row['closing_time'])
				{
					if($row['closing_time']=="00:00")
					{
						if($crtime<$row['opening_time'])
						{
							 
							continue;
						}
					}
					else 
					{
					if($crtime<$row['opening_time'] || $crtime>$ctime)
						{
							 
							continue;
						}	
					}
					
				}
				
				$stmt = $dbCon->prepare("select count(id) as num from company_dropin_queue_waitlist where queue_id=? and is_serviced=0");
				$stmt->bind_param("i", $row['id']);
				$stmt->execute();
				$resulta = $stmt->get_result();
				$rowAvailable = $resulta->fetch_assoc();
				$row['waiting_count']=$rowAvailable['num'];
				array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
		}
		
		
		function publishedResturantInfo($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select publish_dropin,publish_book_table from resturant_work_information  where resturant_id=?");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("i", $data['resturant_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			return $row;
			
		}
	
	
	
	function cartAmenityInfoList($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select * from company_hotel_amenities_user_request where qloud_checkout_id=? and is_verified=0");
			/* bind parameters for markers */
			 
			$stmt->bind_param("i",$data['checkid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			 
			 $a=explode('_',$row['amenity_id']);
			 
				if($a[0]=='b')
				{
				$stmt = $dbCon->prepare("select is_order from company_hotel_bathroom_amenities where id=?");
				/* bind parameters for markers */
				 
				$stmt->bind_param("i",$a[1]);
				$stmt->execute();
				$resultA = $stmt->get_result();
				$rowA = $resultA->fetch_assoc();
				$row['amenity_type']='Bathroom';
				$row['is_order']=$rowA['is_order']; 
				}
				else if($a[0]=='c')
				{
				$stmt = $dbCon->prepare("select is_order from company_hotel_connectivity_amenities where id=?");
				/* bind parameters for markers */
				 
				$stmt->bind_param("i",$a[1]);
				$stmt->execute();
				$resultA = $stmt->get_result();
				$rowA = $resultA->fetch_assoc();
				$row['amenity_type']='Media';
				$row['is_order']=$rowA['is_order']; 
				}
				else if($a[0]=='g')
				{
				$stmt = $dbCon->prepare("select is_room,is_order from company_hotel_general_amenities where id=?");
				/* bind parameters for markers */
				 
				$stmt->bind_param("i",$a[1]);
				$stmt->execute();
				$resultA = $stmt->get_result();
				$rowA = $resultA->fetch_assoc();
				$row['is_order']=$rowA['is_order'];
				if($rowA['is_room']==1)
				$row['amenity_type']='Room';
				else
				$row['amenity_type']='Bed'; 
				}
				array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
			 
			
		}
		
	function cartAmenityItemCount($data)
		{
			$dbCon = AppModel::createConnection();
			$org=array();
			$stmt = $dbCon->prepare("select count(id) as num from company_hotel_amenities_user_request where qloud_checkout_id=? and is_verified=0");
			/* bind parameters for markers */
			 
			$stmt->bind_param("i",$data['checkid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			return $row['num'];
			
			 
			
		}
		
	function orderHotelAppAmenity($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select room_type_id,room_id from hotel_checkout_detail where id=?");
			$stmt->bind_param("i", $data['checkid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRoom= $result->fetch_assoc();
			//print_r($rowRoom); die;
			$stmt = $dbCon->prepare("select location_id  from company_hotel_room_type_detail where company_hotel_room_type_detail.id=(select room_type_id from hotel_checkout_detail where id=?) ");
			$stmt->bind_param("i", $data['checkid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowProperty= $result->fetch_assoc();
			
			$hotel_id= $rowProperty['location_id'];
			$room_type_id= $rowRoom['room_type_id'];
			$room_id= $rowRoom['room_id'];
			
			$a_id= $this -> encrypt_decrypt('decrypt',$data['a_id']);
			$id= $data['checkid'];
			
			$stmt = $dbCon->prepare("select * from company_hotel_amenities_user_request where qloud_checkout_id=? and amenity_id=? and is_verified=0");
			$stmt->bind_param("is",$id,$a_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			 
			if(empty($row))
			{
			$t=0;
			$quantity=$data['quantity'];
			$stmt = $dbCon->prepare("insert into `company_hotel_amenities_user_request`(hotel_id,room_type_id,room_id,amenity_id,user_id,created_on,qloud_checkout_id,aminity_quantity,aminity_price,amenity_name) values ( ?, ?, ?, ?, ?, now(),?,?,?,?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("iiisiiiis",$hotel_id,$room_type_id,$room_id,$a_id,$data['user_id'],$id,$quantity,$t,$data['aname']);
			$stmt->execute();
			$q_id= $stmt->insert_id;
			}
			else
			{
			$t=0;
			$quantity=$data['quantity'];
			$stmt = $dbCon->prepare("update company_hotel_amenities_user_request set aminity_quantity=?,aminity_price=? where id=?");
			$stmt->bind_param("iii",$quantity,$t,$row['id']);
			$stmt->execute();	
			$q_id=$row['id'];
			}
			
			
			$curl = curl_init();

			curl_setopt_array($curl, array(
			  CURLOPT_URL => 'https://www.qloudid.com/user/index.php/DstrictsApp/orderHotelAppAmenity',
			  CURLOPT_RETURNTRANSFER => true,
			  CURLOPT_ENCODING => '',
			  CURLOPT_MAXREDIRS => 10,
			  CURLOPT_TIMEOUT => 0,
			  CURLOPT_FOLLOWLOCATION => true,
			  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
			  CURLOPT_CUSTOMREQUEST => 'POST',
			  CURLOPT_POSTFIELDS => array('id' => $hotel_id,'rid' => $room_type_id,'rmid' => $room_id,'aid' => $a_id,'user_id' => $data['user_id'],'qloud_checkout_id' => $data['checkid'],'aname' => $data['aname'],'quantity' => $data['quantity'],'q_id' => $q_id),
			));

			$response = curl_exec($curl);
  
			curl_close($curl);
			
			 
			
			
			$stmt->close();
			$dbCon->close();
			 
			return 1;
			
		}
		
	function hotelBathroomAppAmenities($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select room_type_id,room_id from hotel_checkout_detail where id=?");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRoom= $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select location_id  from company_hotel_room_type_detail where company_hotel_room_type_detail.id=(select room_type_id from hotel_checkout_detail where id=?) ");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowProperty= $result->fetch_assoc();
			
			$hotel_id= $rowProperty['location_id'];
			$room_type_id= $rowRoom['room_type_id'];
			$room_id= $rowRoom['room_id'];
			 
			$stmt = $dbCon->prepare("select hotel_bathroom_amenities from hotel_basic_information where property_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $hotel_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select bathroom_amenities_available from company_hotel_room_type_detail where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $room_type_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRtype = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select room_bathroom_amenities from hotel_room_detail where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $room_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRoom = $result->fetch_assoc();
			$amenities=$row['hotel_bathroom_amenities'].''.$rowRtype['bathroom_amenities_available'].''.$rowRoom['room_bathroom_amenities'];
			 
			$stmt = $dbCon->prepare("select id,bathroom_amenities as amenity_name,is_order from company_hotel_bathroom_amenities where find_in_set(id,?) and is_order>0");
			
			/* bind parameters for markers */
			$stmt->bind_param("s", $amenities);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row  = $result->fetch_assoc())
			{
				$idcheck='b_'.$row['id'];
				$stmt = $dbCon->prepare("select aminity_quantity from company_hotel_amenities_user_request where qloud_checkout_id=? and is_verified=0 and amenity_id=?");
				/* bind parameters for markers */
				 
				$stmt->bind_param("is",$data['id'],$idcheck);
				$stmt->execute();
				$resultCount = $stmt->get_result();
				$rowCount = $resultCount->fetch_assoc();
				if($rowCount['aminity_quantity']==0 || $rowCount['aminity_quantity']==null)
				{
				$row['quantity']=0;	
				}
				else
				{
					$row['quantity']=$rowCount['aminity_quantity'];	
				}
				array_push($org,$row);
				$org[$j]['enc']=$this->encrypt_decrypt('encrypt','b_'.$row['id']);
				$j++;
			}
			
			return $org;
		}
	
	function hotelMediaAppAmenities($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select room_type_id,room_id from hotel_checkout_detail where id=?");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRoom= $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select location_id  from company_hotel_room_type_detail where company_hotel_room_type_detail.id=(select room_type_id from hotel_checkout_detail where id=?) ");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowProperty= $result->fetch_assoc();
			
			$hotel_id= $rowProperty['location_id'];
			$room_type_id= $rowRoom['room_type_id'];
			$room_id= $rowRoom['room_id'];
			
			$stmt = $dbCon->prepare("select hotel_connectivity_amenities from hotel_basic_information where property_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $hotel_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select connectivity_amenities_available from company_hotel_room_type_detail where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $room_type_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRtype = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select room_connectivity_amenities from hotel_room_detail where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $room_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRoom = $result->fetch_assoc();
			$amenities=$row['hotel_connectivity_amenities'].''.$rowRtype['connectivity_amenities_available'].''.$rowRoom['room_connectivity_amenities'];
			 
			$stmt = $dbCon->prepare("select id,connectivity_amenities as amenity_name,is_order from company_hotel_connectivity_amenities where find_in_set(id,?) and is_order>0");
			
			/* bind parameters for markers */
			$stmt->bind_param("s", $amenities);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row  = $result->fetch_assoc())
			{
				$idcheck='c_'.$row['id'];
				$stmt = $dbCon->prepare("select aminity_quantity from company_hotel_amenities_user_request where qloud_checkout_id=? and is_verified=0 and amenity_id=?");
				/* bind parameters for markers */
				 
				$stmt->bind_param("is",$data['id'],$idcheck);
				$stmt->execute();
				$resultCount = $stmt->get_result();
				$rowCount = $resultCount->fetch_assoc();
				if($rowCount['aminity_quantity']==0 || $rowCount['aminity_quantity']==null)
				{
				$row['quantity']=0;	
				}
				else
				{
					$row['quantity']=$rowCount['aminity_quantity'];	
				}
				array_push($org,$row);
				$org[$j]['enc']=$this->encrypt_decrypt('encrypt','c_'.$row['id']);
				$j++;
			}
			
			return $org;
		}
	
	function hotelRoomAppAmenities($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select room_type_id,room_id from hotel_checkout_detail where id=?");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRoom= $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select location_id  from company_hotel_room_type_detail where company_hotel_room_type_detail.id=(select room_type_id from hotel_checkout_detail where id=?) ");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowProperty= $result->fetch_assoc();
			
			$hotel_id= $rowProperty['location_id'];
			$room_type_id= $rowRoom['room_type_id'];
			$room_id= $rowRoom['room_id'];
			 
			$stmt = $dbCon->prepare("select hotel_general_amenities from hotel_basic_information where property_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $hotel_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select general_amenities_available from company_hotel_room_type_detail where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $room_type_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRtype = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select room_general_amenities from hotel_room_detail where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $room_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRoom = $result->fetch_assoc();
			$amenities=$row['hotel_general_amenities'].''.$rowRtype['general_amenities_available'].''.$rowRoom['room_general_amenities'];
			
			$stmt = $dbCon->prepare("select id,general_amenities as amenity_name,is_order from company_hotel_general_amenities where find_in_set(id,?) and is_order>0 and is_room=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("s", $amenities);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row  = $result->fetch_assoc())
			{
				
				$idcheck='g_'.$row['id'];
				 
				$stmt = $dbCon->prepare("select aminity_quantity from company_hotel_amenities_user_request where qloud_checkout_id=? and is_verified=0 and amenity_id=?");
				/* bind parameters for markers */
				 
				$stmt->bind_param("is",$data['id'],$idcheck);
				$stmt->execute();
				$resultCount = $stmt->get_result();
				$rowCount = $resultCount->fetch_assoc();
				if($rowCount['aminity_quantity']==0 || $rowCount['aminity_quantity']==null)
				{
				$row['quantity']=0;	
				}
				else
				{
					$row['quantity']=$rowCount['aminity_quantity'];	
				}
				array_push($org,$row);
				$org[$j]['enc']=$this->encrypt_decrypt('encrypt','g_'.$row['id']);
				$j++;
			}
			
			return $org;
		}
	
		function hotelBedAppAmenities($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select room_type_id,room_id from hotel_checkout_detail where id=?");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRoom= $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select location_id  from company_hotel_room_type_detail where company_hotel_room_type_detail.id=(select room_type_id from hotel_checkout_detail where id=?) ");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowProperty= $result->fetch_assoc();
			
			$hotel_id= $rowProperty['location_id'];
			$room_type_id= $rowRoom['room_type_id'];
			$room_id= $rowRoom['room_id'];
			 
			$stmt = $dbCon->prepare("select hotel_general_amenities from hotel_basic_information where property_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $hotel_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select general_amenities_available from company_hotel_room_type_detail where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $room_type_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRtype = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select room_general_amenities from hotel_room_detail where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $room_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRoom = $result->fetch_assoc();
			$amenities=$row['hotel_general_amenities'].''.$rowRtype['general_amenities_available'].''.$rowRoom['room_general_amenities'];
			
			$stmt = $dbCon->prepare("select id,general_amenities as amenity_name,is_order from company_hotel_general_amenities where find_in_set(id,?) and is_order>0 and is_room=2");
			
			/* bind parameters for markers */
			$stmt->bind_param("s", $amenities);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row  = $result->fetch_assoc())
			{
				$idcheck='g_'.$row['id'];
				$stmt = $dbCon->prepare("select aminity_quantity from company_hotel_amenities_user_request where qloud_checkout_id=? and is_verified=0 and amenity_id=?");
				/* bind parameters for markers */
				 
				$stmt->bind_param("is",$data['checkid'],$idcheck);
				$stmt->execute();
				$resultCount = $stmt->get_result();
				$rowCount = $resultCount->fetch_assoc();
				if($rowCount['aminity_quantity']==0 || $rowCount['aminity_quantity']==null)
				{
				$row['quantity']=0;	
				}
				else
				{
					$row['quantity']=$rowCount['aminity_quantity'];	
				}
				array_push($org,$row);
				$org[$j]['enc']=$this->encrypt_decrypt('encrypt','g_'.$row['id']);
				$j++;
			}
			
			return $org;
		}
	
		
	 function ResturantServeBasedMenu($data)
		{
			$dbCon = AppModel::createConnection();
			$org=array();
				$i=0;
				$stmt = $dbCon->prepare("select distinct category_food,food_category,place_of_display from resturant_available_dishes left join food_category on food_category.id=resturant_available_dishes.category_food where resturant_available_dishes.resturant_id=? and serve_type=? order by place_of_display");
				$stmt->bind_param("ii", $data['resturant_id'],$data['serve_type']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				while($rowCategory = $result1->fetch_assoc())
				{
					$rowCategory['food_category']=html_entity_decode($rowCategory['food_category'],ENT_NOQUOTES, 'UTF-8'); 
					array_push($org,$rowCategory);
					$k=0;
					$org[$i]['dishes']=array();
					$stmt = $dbCon->prepare("select resturant_available_dishes.id,dish_name,dish_detail,dish_image,dish_price,temp_available_item  from resturant_available_dishes left join dishes_detail_information on dishes_detail_information.id=resturant_available_dishes.dish_id where resturant_id=? and serve_type=? and category_food=?");
					$stmt->bind_param("iii", $data['resturant_id'],$data['serve_type'],$rowCategory['category_food']);
					$stmt->execute();
					$result2 = $stmt->get_result();
					while($rowDishes = $result2->fetch_assoc())
					{
						$rowDishes['category_food']=$rowCategory['category_food'];
						$rowDishes['food_category']=$rowCategory['food_category'];
						$rowDishes['width']=$data['width'];
						$rowDishes['height']=$data['height'];
						$rowDishes['dish_name']=html_entity_decode($rowDishes['dish_name'],ENT_NOQUOTES, 'UTF-8'); 
						$rowDishes['dish_detail']=html_entity_decode($rowDishes['dish_detail'],ENT_NOQUOTES, 'UTF-8'); 
						 $filename="../estorecss/".$rowDishes ['dish_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$rowDishes ['dish_image'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs =$this-> base64_to_jpeg( $value_a, '../estorecss/tmp'.$rowDishes ['dish_image'].'.jpg' ); } else { $value_a="../html/usercontent/images/default-profile-pic.jpg";  $imgs="../html/usercontent/images/default-profile-pic.jpg"; }
						$imgs=str_replace('../','https://www.qloudid.com/',$imgs);
						array_push($org[$i]['dishes'],$rowDishes);
						$org[$i]['dishes'][$k]['dish_image']=$imgs;
						$k++;
					}
					$i++;
				}
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
	 
	function editDishDetail($data)
		{
			$dbCon = AppModel::createConnection();
			$data1 = strip_tags($_POST['image-data1']);
			if($data1!='none')
			{
			define('UPLOAD_DIR','../estorecss/'); // image dir path
			$img_name1="new".microtime();
			file_put_contents(UPLOAD_DIR.$img_name1.".txt", $data1);
			}
			else 
			{
				$img_name1="";
			}
			
			$dish_name=htmlentities($data['dish_name'],ENT_NOQUOTES, 'ISO-8859-1');
			$dish_detail=htmlentities($data['dish_detail'],ENT_NOQUOTES, 'ISO-8859-1');
			$product_information=htmlentities($data['product_information'],ENT_NOQUOTES, 'ISO-8859-1');
			$stmt = $dbCon->prepare("update dishes_detail_information set dish_name=?, dish_detail=?, dish_image=?, dish_price=?,  dish_type=?, dish_warnings=?, modified_on=now(),product_information=?  where id=(select dish_id from resturant_available_dishes where id=?)");
			$stmt->bind_param("sssiissi",$dish_name,$dish_detail ,$img_name1 ,$data['dish_price'], $data['dish_type'],$data['food_type'],$product_information,$data['available_dish_id']);
			
			
			if($stmt->execute())
			{
				$stmt->close();
				$dbCon->close();
				return 1;
			}
			else
			{
				 
				$stmt->close();
				$dbCon->close();
				return 0;
			}
		
			
		}
		
	function selectedDish($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select * from dishes_detail_information where id=(select dish_id from resturant_available_dishes where id=?)");
			$stmt->bind_param("i", $data['available_dish_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			return $row;
			
			
		}
		 function foodTypeInformationSelected($data)
		{
			$dbCon = AppModel::createConnection();
			$food_warning=explode(',',$data['warning']);
			 
			$stmt = $dbCon->prepare("select id,food_type from food_type");
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
				array_push($org,$row);
				if (in_array($row['id'], $food_warning))
				{
				$org[$j]['is_selected']= 1;
				}
				else
				{
				$org[$j]['is_selected']= 0;	
				}
				$j++;
			}
			 
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
	function updateServeNotAvailable($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select serve_available from resturant_available_dishes where serve_type=? and resturant_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("ii", $data['serve_type'],$data['resturant_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt = $dbCon->prepare("upate resturant_available_dishes set serve_available=? where serve_type=? and resturant_id=?");
			$stmt->bind_param("iii",$row['serve_available'], $data['serve_type'],$data['resturant_id']);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return 1;
		}
	function updateDishNotAvailable($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("upate resturant_available_dishes set is_available_item=0 where id=?");
			$stmt->bind_param("i", $data['available_dish_id']);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return 1;
		}
	
		function resturantProfileInfo($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select  resturant_name,resturant_type,visiting_address,resturant_information.id,publish_dropin ,publish_book_table ,publish_menu  from resturant_information left join property_location on property_location.id=resturant_information.property_id left join resturant_work_information on resturant_work_information.resturant_id=resturant_information.id where resturant_information.id=?");
			$stmt->bind_param("i", $data['resturant_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowAvailable = $result->fetch_assoc();
			$rowAvailable['visiting_address']=html_entity_decode($rowAvailable['visiting_address'],ENT_NOQUOTES, 'UTF-8'); 	
			$rowAvailable['resturant_name']=html_entity_decode($rowAvailable['resturant_name'],ENT_NOQUOTES, 'UTF-8'); 
			$big="new0.09086000 1600564862";
			$small1="new0.13561200 1600564862";
			$small2="new0.15516700 1600564862";
			$stmt = $dbCon->prepare("select * from business_dashboard_images  where business_id=? and business_type=3");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['resturant_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$rowImages = $result->fetch_assoc();
			 
			if(empty($row))
			{
			$btype=3;
			$stmt = $dbCon->prepare("INSERT INTO business_dashboard_images (business_id, business_type,created_on,big_image_path,small_image1_path, small_image2_path) VALUES (?, ?, now(), ?, ?, ?)");
			$stmt->bind_param("iisss", $data['resturant_id'],$btype,$big,$small1,$small2);
			$stmt->execute();	
			$stmt = $dbCon->prepare("select * from business_dashboard_images  where business_id=? and business_type=3");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['resturant_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowImages = $result->fetch_assoc();
			}
			
			
			$bigImage=$rowImages['big_image_path'];	
			$filename="../estorecss/".$bigImage.".txt"; $value_a=file_get_contents("../estorecss/".$bigImage.".txt"); $value_a=str_replace('"','',$value_a); $rowImages['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$bigImage.'.jpg' );
			 
			$rowImages['image_path']=str_replace('../','https://www.qloudid.com/',$rowImages['image_path']);
			$rowAvailable['big_image']=$rowImages['image_path'];
				
			$bigImage=$rowImages['small_image1_path'];	
			$filename="../estorecss/".$bigImage.".txt"; $value_a=file_get_contents("../estorecss/".$bigImage.".txt"); $value_a=str_replace('"','',$value_a); $rowImages['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$bigImage.'.jpg' );
			 
			$rowImages['image_path']=str_replace('../','https://www.qloudid.com/',$rowImages['image_path']);
			$rowAvailable['small_image']=$rowImages['image_path'];
			
			$bigImage=$rowImages['small_image2_path'];	
			$filename="../estorecss/".$bigImage.".txt"; $value_a=file_get_contents("../estorecss/".$bigImage.".txt"); $value_a=str_replace('"','',$value_a); $rowImages['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$bigImage.'.jpg' );
			 
			$rowImages['image_path']=str_replace('../','https://www.qloudid.com/',$rowImages['image_path']);
			$rowAvailable['small_image2']=$rowImages['image_path'];	
			
			
			
			$stmt->close();
			$dbCon->close();
			 
			return $rowAvailable;
			
			
		}
		
		function usersList($data)
		{
			$dbCon = AppModel::createConnection();
			$name='%'.htmlentities($data['name'],ENT_NOQUOTES, 'UTF-8').'%';
			$stmt = $dbCon->prepare("select user_logins.id,first_name,concat_ws(' ',first_name,last_name) as name,passport_image from user_logins where first_name like ?");
			
			/* bind parameters for markers */
			$stmt->bind_param("s", $name); 
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			 
			while($row = $result->fetch_assoc())
			{
				if($row['passport_image']=="" || $row['passport_image']==null)
				{
					$row['user_image']='https://www.qloudid.com/html/usercontent/images/bg/beard.png';
				}
				else
				{
				$filename="../estorecss/".$row['passport_image'].".txt"; $value_a=file_get_contents("../estorecss/".$row['passport_image'].".txt"); $value_a=str_replace('"','',$value_a); $row['passport_image'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['passport_image'].'.jpg' );
				$row['user_image']=str_replace('../','https://www.qloudid.com/',$row['passport_image']);
				}
				$row['name']=html_entity_decode($row['name'],ENT_NOQUOTES, 'UTF-8'); 	
				$row['first_name']=html_entity_decode($row['first_name'],ENT_NOQUOTES, 'UTF-8'); 
				array_push($org,$row);
				 
			}
			 
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
		function companyList($data)
		{
			$dbCon = AppModel::createConnection();
			
			$name='%'.htmlentities($data['name'],ENT_NOQUOTES, 'UTF-8').'%';
			$stmt = $dbCon->prepare("select companies.id,company_name as first_name,company_name as name,profile_pic as passport_image from companies left join company_profiles on companies.id=company_profiles.company_id where company_name like ?");
			
			/* bind parameters for markers */
			$stmt->bind_param("s", $name); 
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			 
			while($row = $result->fetch_assoc())
			{
				if($row['passport_image']=="" || $row['passport_image']==null)
				{
					$row['user_image']='https://www.qloudid.com/html/usercontent/images/random/officepng.png';
				}
				else
				{
				$filename="../estorecss/".$row['passport_image'].".txt"; $value_a=file_get_contents("../estorecss/".$row['passport_image'].".txt"); $value_a=str_replace('"','',$value_a); $row['passport_image'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['passport_image'].'.jpg' );
				$row['user_image']=str_replace('../','https://www.qloudid.com/',$row['passport_image']);	
				}
				$row['first_name']=html_entity_decode($row['first_name'],ENT_NOQUOTES, 'UTF-8');
				$row['name']=html_entity_decode($row['name'],ENT_NOQUOTES, 'UTF-8'); 
				array_push($org,$row);
				 
			}
			 
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
		
		
		function resturantSearchList($data)
		{
			$dbCon = AppModel::createConnection();
			$name='%'.htmlentities($data['name'],ENT_NOQUOTES, 'UTF-8').'%';
			$stmt = $dbCon->prepare("select id,resturant_name as name,resturant_name as first_name from resturant_information where resturant_name like ?");
			
			/* bind parameters for markers */
			$stmt->bind_param("s", $name); 
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			 
			while($row = $result->fetch_assoc())
			{
				$row['passport_image']="";
				$row['first_name']=html_entity_decode($row['first_name'],ENT_NOQUOTES, 'UTF-8');
				$row['name']=html_entity_decode($row['name'],ENT_NOQUOTES, 'UTF-8'); 
				$row['user_image']='https://www.qloudid.com/html/usercontent/images/bg/hotel1.jpg';
				array_push($org,$row);
				 
			}
			 
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
		
		function reservationList($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select resturant_table_booking_info.id,company_size,concat_ws(' ',first_name,last_name) as name from resturant_table_booking_info left join user_logins on user_logins.id=resturant_table_booking_info.user_id where resturant_id=? and is_confirmed=0 limit 0,5");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['resturant_id']); 
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			 
			while($row = $result->fetch_assoc())
			{
				array_push($org,$row);
				 
			}
			 
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
	function resturantDetail($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select resturant_type,resturant_name,visiting_address,resturant_information.id  from resturant_information left join property_location on property_location.id=resturant_information.property_id where resturant_information.company_id=?");
			$stmt->bind_param("i", $data['company_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($rowAvailable = $result->fetch_assoc())
			{
				array_push($org,$rowAvailable);
				 
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
		
	function resturantWorkInfo($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select * from resturant_work_information where resturant_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['resturant_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			if(empty($row))
			{
			$stmt = $dbCon->prepare("insert into resturant_work_information(resturant_id,created_on)values(?, now())");
			$stmt->bind_param("i",$data['resturant_id']);	
			$stmt->execute();
			$stmt = $dbCon->prepare("select * from resturant_work_information where resturant_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['resturant_id']);
			
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();	
			}
			 
			$org=array();
			$j=0;
			if($row['breakfast_available']==1 && $row['breakfast_booking']==1)
			{
				$org[$j]['id']=1;
				$org[$j]['serve']='Breakfast';
				$j++;
			}
			if($row['brunch_available']==1  && $row['brunch_booking']==1)
			{
				$org[$j]['id']=2;
				$org[$j]['serve']='Brunch';
				$j++;
			 	
			}
			if($row['lunch_available']==1  && $row['lunch_booking']==1)
			{
				$org[$j]['id']=3;
				$org[$j]['serve']='Lunch';
				$j++;
			 
			}
			if($row['dinner_available']==1  && $row['dinner_booking']==1)
			{
				$org[$j]['id']=4;
				$org[$j]['serve']='Dinner';
				$j++;
			 	
			}
			if($row['alcohol_available']==1  && $row['alcohol_booking']==1)
			{
				$org[$j]['id']=5;
				$org[$j]['serve']='Beverages';
				$j++;
			 
			}
			
			$stmt->close();
			$dbCon->close();
			return $org;
			
		}
		
		
	function requestTableBooking($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select id,work_time from working_hrs where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['time_detail']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowTime = $result->fetch_assoc();
			$data['dining_hall']=0;
			$stmt = $dbCon->prepare("insert into resturant_table_booking_info(resturant_id,dining_hall_id,serve_type,company_size,booking_date, booking_time, booking_time_id, user_id,created_on)values(?,?,?,?,?,?,?,?, now())");
			$stmt->bind_param("iiiissii",$data['resturant_id'],$data['dining_hall'],$data['serve_type'],$data['company_size'],$data['booking_date'],$rowTime['work_time'],$data['time_detail'],$data['user_id']);	
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
			
		}
		
		function resturantTableAvailable($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select * from resturant_work_information where resturant_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['resturant_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if($data['serve_type']==1)
			{
				$serve='breakfast';
			}
			else if($data['serve_type']==2)
			{
				$serve='brunch';
			}
			else if($data['serve_type']==3)
			{
				$serve='lunch';
			}
			else if($data['serve_type']==4)
			{
				$serve='dinner';
			}
			else if($data['serve_type']==5)
			{
				$serve='alcohol';
			}
			
			$data['dining_hall']=0;
			
			
			$stmt = $dbCon->prepare("select sum(table_info) as num from resturant_dining_hall_tables where dining_hall_id in (select id from resturant_dining_hall where resturant_id=?) ");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['resturant_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowTableCount = $result->fetch_assoc();	
			 
			
			if($data['company_size']>$rowTableCount['num'])
			{
			return 1;	
			}
			 
			$dateVal=strtolower(date('D',strtotime($data['booking_date'])));
			
			$indexVal=$serve.'_'.$dateVal.'_open';
			 $org=array();
			if($row[$indexVal]==0)
			{
				return $org;
			}
			else 
			{
				$currentHrs=date('H');
				$currentMinutes=date('i');
				 
				if($currentMinutes>0 and $currentMinutes<30)
				{
					$i='30';
				}
				else if($currentMinutes>30 and $currentMinutes<59)
				{
					$currentHrs=$currentHrs+1;
					$i='00';
				}
				else
				{
					$i=$currentMinutes;
				}					
					$time=$currentHrs.':'.$i;
					  
				$mini=$serve.'_minimum_time';
				$close=$serve.'_time_before_closing';
				$openIndex=$serve.'_'.$dateVal.'_open_time';
				$closeIndex=$serve.'_'.$dateVal.'_close_time';
				
				if($row[$openIndex]==$row[$closeIndex])
				{
					
					$closeId=49-$row[$close];
					if($data['date_today']==1)
					{
						$stmt = $dbCon->prepare("select id,work_time from working_hrs where work_time>?  and id<?");	
						$stmt->bind_param("si", $time,$closeId);	
					}
					else
					{
						$stmt = $dbCon->prepare("select id,work_time from working_hrs where id<?");	
						$stmt->bind_param("i", $closeId);
					}
				
				}
				else
				{
				$stmt = $dbCon->prepare("select id from working_hrs where work_time=?");
			
				/* bind parameters for markers */
				$stmt->bind_param("s", $row[$closeIndex]);
				$stmt->execute();
				$result = $stmt->get_result();
				$rowClose = $result->fetch_assoc();
				$closeId=$rowClose['id']-$row[$close];
					if($data['date_today']==1)
					{
					$stmt = $dbCon->prepare("select id,work_time from working_hrs where id>=(select id from working_hrs where work_time=? and work_time>?) and id<?");
				
					/* bind parameters for markers */
					$stmt->bind_param("ssi", $row[$openIndex],$time,$closeId);	
					}
					else
					{
					$stmt = $dbCon->prepare("select id,work_time from working_hrs where id>=(select id from working_hrs where work_time=?) and id<?");
				
					/* bind parameters for markers */
					$stmt->bind_param("si", $row[$openIndex],$closeId);	
					}
				}
				 
				$stmt->execute();
				$result = $stmt->get_result();
				$org=array();
				$i=0;
				while($rowTime = $result->fetch_assoc())
				{
					if($i==0)
					{
						
						$stmt = $dbCon->prepare("select sum(table_info) as num from resturant_dining_hall_tables where dining_hall_id in (select id from resturant_dining_hall where resturant_id=?) and id not in (select reserved_table_id from resturant_table_booking_confirmation_info where reservation_date=? and reservation_time_id=?)");
						
						/* bind parameters for markers */
						$stmt->bind_param("isi", $data['resturant_id'],$data['booking_date'],$rowTime['id']);
						$stmt->execute();
						$result2 = $stmt->get_result();
						$rowTableCount = $result2->fetch_assoc();	
						
					 
						if($data['company_size']>$rowTableCount['num'])
						{
						 
						}
						else
						{
						array_push($org,$rowTime);	
						}
						if($row[$mini]>1)
						$i++;
					}
					else
					{
						
						$i++;
						if($i>=$row[$mini])
						{
							$i=0;
						}
						 
						
						 
					}
				}
			}
			
			
			
			 
			$stmt->close();
			$dbCon->close();
			return $org;
			
		}
	
	
		function dstrictRequestTableBooking($data)
		{
			$dbCon = AppModel::createConnection();
			$checkout_id= $this -> encrypt_decrypt('decrypt',$data['checkout_id']);
			$stmt = $dbCon->prepare("select id,work_time from working_hrs where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['time_detail']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowTime = $result->fetch_assoc();
			 
			$stmt = $dbCon->prepare("insert into resturant_table_booking_info(qloud_checkout_id,resturant_id,dining_hall_id,serve_type,company_size,booking_date, booking_time, booking_time_id, user_id,created_on)values(?,?,?,?,?,?,?,?,?, now())");
			$stmt->bind_param("iiiiissii",$checkout_id,$data['resturant_id'],$data['dining_hall'],$data['serve_type'],$data['company_size'],$data['booking_date'],$rowTime['work_time'],$data['time_detail'],$data['user_id']);	
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
			
		}
		
		 
	
		function dstrictResturantTableAvailable($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select * from resturant_work_information where resturant_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['resturant_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if($data['serve_type']==1)
			{
				$serve='breakfast';
			}
			else if($data['serve_type']==2)
			{
				$serve='brunch';
			}
			else if($data['serve_type']==3)
			{
				$serve='lunch';
			}
			else if($data['serve_type']==4)
			{
				$serve='dinner';
			}
			else if($data['serve_type']==5)
			{
				$serve='alcohol';
			}
			
			 
			
			
			$stmt = $dbCon->prepare("select sum(table_info) as num from resturant_dining_hall_tables where dining_hall_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['dining_hall']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowTableCount = $result->fetch_assoc();	
			 
			$org=array();
			if($data['company_size']>$rowTableCount['num'])
			{
			return $org;	
			}
			 
			$dateVal=strtolower(date('D',strtotime($data['booking_date'])));
			
			$indexVal=$serve.'_'.$dateVal.'_open';
			 
			if($row[$indexVal]==0)
			{
				return $org;
			}
			else 
			{
				$currentHrs=date('H');
				$currentMinutes=date('i');
				 
				if($currentMinutes>0 and $currentMinutes<30)
				{
					$i='30';
				}
				else if($currentMinutes>30 and $currentMinutes<59)
				{
					$currentHrs=$currentHrs+1;
					$i='00';
				}
				else
				{
					$i=$currentMinutes;
				}					
					$time=$currentHrs.':'.$i;
					  
				$mini=$serve.'_minimum_time';
				$close=$serve.'_time_before_closing';
				$openIndex=$serve.'_'.$dateVal.'_open_time';
				$closeIndex=$serve.'_'.$dateVal.'_close_time';
				
				if($row[$openIndex]==$row[$closeIndex])
				{
					
					$closeId=49-$row[$close];
					if($data['date_today']==1)
					{
						$stmt = $dbCon->prepare("select id,work_time from working_hrs where work_time>?  and id<?");	
						$stmt->bind_param("si", $time,$closeId);	
					}
					else
					{
						$stmt = $dbCon->prepare("select id,work_time from working_hrs where id<?");	
						$stmt->bind_param("i", $closeId);
					}
				
				}
				else
				{
				$stmt = $dbCon->prepare("select id from working_hrs where work_time=?");
			
				/* bind parameters for markers */
				$stmt->bind_param("s", $row[$closeIndex]);
				$stmt->execute();
				$result = $stmt->get_result();
				$rowClose = $result->fetch_assoc();
				$closeId=$rowClose['id']-$row[$close];
					if($data['date_today']==1)
					{
					$stmt = $dbCon->prepare("select id,work_time from working_hrs where id>=(select id from working_hrs where work_time=? and work_time>?) and id<?");
				
					/* bind parameters for markers */
					$stmt->bind_param("ssi", $row[$openIndex],$time,$closeId);	
					}
					else
					{
					$stmt = $dbCon->prepare("select id,work_time from working_hrs where id>=(select id from working_hrs where work_time=?) and id<?");
				
					/* bind parameters for markers */
					$stmt->bind_param("si", $row[$openIndex],$closeId);	
					}
				}
				 
				$stmt->execute();
				$result = $stmt->get_result();
				$org=array();
				$i=0;
				while($rowTime = $result->fetch_assoc())
				{
					if($i==0)
					{
						
						$stmt = $dbCon->prepare("select sum(table_info) as num from resturant_dining_hall_tables where dining_hall_id=? and id not in (select reserved_table_id from resturant_table_booking_confirmation_info where reservation_date=? and reservation_time_id=?)");
						
						/* bind parameters for markers */
						$stmt->bind_param("isi", $data['dining_hall'],$data['booking_date'],$rowTime['id']);
						$stmt->execute();
						$result2 = $stmt->get_result();
						$rowTableCount = $result2->fetch_assoc();	
						
					 
						if($data['company_size']>$rowTableCount['num'])
						{
						 
						}
						else
						{
						array_push($org,$rowTime);	
						}
						if($row[$mini]>1)
						$i++;
					}
					else
					{
						
						$i++;
						if($i>=$row[$mini])
						{
							$i=0;
						}
						 
						
						 
					}
				}
			}
			
			
			
			 
			$stmt->close();
			$dbCon->close();
			return $org;
			
		}
		
	
		function resturantDiningHall($data)
		{ 
		 
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select resturant_dining_hall.id,dining_hall_name,resturant_name from resturant_dining_hall left join resturant_information on resturant_information.id=resturant_dining_hall.resturant_id where resturant_id=?");
			$stmt->bind_param("i", $data['resturant_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			$row['enc']= $this -> encrypt_decrypt('encrypt',$row['id']);
			array_push($org,$row);	
			}
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		
	function updateNoShow($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select  is_serviced from company_dropin_queue_waitlist where company_dropin_queue_waitlist.id=?");
			$stmt->bind_param("i", $data['guest_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCount = $result->fetch_assoc();
			if($rowCount['is_serviced']==0)
			{
			$stmt = $dbCon->prepare("delete from company_dropin_queue_waitlist where id=?");
			$stmt->bind_param("i", $data['guest_id']);
			$stmt->execute();	
			}
			$stmt->close();
			$dbCon->close();
			return 1;
			
			
		}
		
		function updateInServicing($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select  is_serviced from company_dropin_queue_waitlist where company_dropin_queue_waitlist.id=?");
			$stmt->bind_param("i", $data['guest_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCount = $result->fetch_assoc();
			if($rowCount['is_serviced']==0)
			{
			$stmt = $dbCon->prepare("update company_dropin_queue_waitlist set is_serviced=1,serving_user_id=?,modified_on=now() where id=?");
			$stmt->bind_param("ii", $data['user_id'],$data['guest_id']);
			$stmt->execute();	
			}
			$stmt->close();
			$dbCon->close();
			return 1;
			
			
		}
		
		
		function updateCloseService($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update company_dropin_queue_waitlist set is_serviced=2 where id=?");
			$stmt->bind_param("i", $data['guest_id']);
			$stmt->execute();	
			
			$stmt->close();
			$dbCon->close();
			return 1;
			
			
		}
		
	
	function alertGuest($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select guest_name,country_code,phone_number from company_dropin_queue_waitlist left join phone_country_code on company_dropin_queue_waitlist.country_id=phone_country_code.id where company_dropin_queue_waitlist.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i",  $data['guest_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select company_location_queue_info.id,queue_name,visiting_address from  company_location_queue_info  left join property_location on property_location.id=company_location_queue_info.location_id where company_location_queue_info.id=(select queue_id from company_dropin_queue_waitlist where id=?)");
			$stmt->bind_param("i",  $data['guest_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowAddress = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select count(id) as num from company_dropin_queue_waitlist where id<? and is_serviced=0");
			$stmt->bind_param("i",  $data['guest_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowAvailable = $result->fetch_assoc(); 
			$rank=$rowAvailable['num']+1;
			$enc_id= $this -> encrypt_decrypt('encrypt', $data['guest_id']);	
			$url="https://www.qloudid.com/public/index.php/DropinQueue/waitingInformation/".$data['lid'].'/'.$enc_id;
			$surl=getShortUrl($url);
			$phone="+".trim($row['country_code'])."".trim($row['phone_number']);
			
			$subject='You Are #'.$rank.' on the '.$rowAddress['queue_name'].' waitlist';
			$to=$phone;
			$html='Hi '.$row['guest_name'].'! you are waitlisted to '.$rowAddress['queue_name'].' as #'.$rank.' in line. See live update at '.$surl;
			 
			$res=sendSms($subject, $to, $html);
			$stmt->close();
			$dbCon->close();
			return 1;
			 
			
		}
		
		
		function queueGuestDetail($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select  * from company_dropin_queue_waitlist where company_dropin_queue_waitlist.id=?");
			$stmt->bind_param("i", $data['guest_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowAvailable = $result->fetch_assoc();
			if(!empty($rowAvailable))
			{
			$stmt = $dbCon->prepare("select  count(id) as num from company_dropin_queue_waitlist where company_dropin_queue_waitlist.id<? and is_serviced=0");
			$stmt->bind_param("i",  $data['guest_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCount = $result->fetch_assoc();
			$rowAvailable['position_inline']=$rowCount['num']+1;
			if($rowAvailable['user_id']==null || $rowAvailable['user_id']=='' || $rowAvailable['user_id']==0)
			{
			$rowAvailable['user_image']="https://www.qloudid.com/html/usercontent/images/person-male.png";	
			$rowAvailable['user_id']=0;
			}
			else
			{
				$stmt = $dbCon->prepare("select  passport_image from user_logins where id=?");
				$stmt->bind_param("i", $rowAvailable['user_id']);
				$stmt->execute();
				$result = $stmt->get_result();
				$rowPrice = $result->fetch_assoc();
				if($rowPrice['passport_image']==null || $rowPrice['passport_image']=='')
				{
				$rowAvailable['user_image']="https://www.qloudid.com/html/usercontent/images/person-male.png";	
				}
				else
				{
				$filename="../estorecss/".$rowPrice['passport_image'].".txt"; $value_a=file_get_contents("../estorecss/".$rowPrice['passport_image'].".txt"); $value_a=str_replace('"','',$value_a); $rowPrice['passport_image'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$rowPrice['passport_image'].'.jpg' );
				$rowAvailable['user_image']=str_replace('../','https://www.qloudid.com/',$rowPrice['passport_image']);	
				}
				
			}
				if($rowAvailable['email_id']==null || $rowAvailable['email_id']=="") 
				{
					$rowAvailable['email_id']="Email not available";
				}
				$rowAvailable['waiting_time']=round((strtotime(date('Y-m-d H:i:s'))-strtotime($rowAvailable['created_on']))/60,0).' Minutes';
			}
			$stmt->close();
			$dbCon->close();
			return $rowAvailable;
			
			
		}
	
	function queueServicingGuestDetail($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select  * from company_dropin_queue_waitlist where company_dropin_queue_waitlist.id=?");
			$stmt->bind_param("i", $data['guest_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowAvailable = $result->fetch_assoc();
			if(!empty($rowAvailable))
			{
			$stmt = $dbCon->prepare("select  count(id) as num from company_dropin_queue_waitlist where company_dropin_queue_waitlist.id<? and is_serviced=0");
			$stmt->bind_param("i",  $data['guest_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCount = $result->fetch_assoc();
			$rowAvailable['position_inline']=$rowCount['num']+1;
			if($rowAvailable['user_id']==null || $rowAvailable['user_id']=='')
			{
			$rowAvailable['user_image']="https://www.qloudid.com/html/usercontent/images/person-male.png";	
			}
			else
			{
				$stmt = $dbCon->prepare("select  passport_image from user_logins where id=?");
				$stmt->bind_param("i", $rowAvailable['user_id']);
				$stmt->execute();
				$result = $stmt->get_result();
				$rowPrice = $result->fetch_assoc();
				$filename="../estorecss/".$rowPrice['passport_image'].".txt"; $value_a=file_get_contents("../estorecss/".$rowPrice['passport_image'].".txt"); $value_a=str_replace('"','',$value_a); $rowPrice['passport_image'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$rowPrice['passport_image'].'.jpg' );
				$rowAvailable['user_image']=str_replace('../','https://www.qloudid.com/',$rowPrice['passport_image']);
			}
			
			 
				$stmt = $dbCon->prepare("select  concat_ws(' ',first_name,last_name) as name from user_logins where id=?");
				$stmt->bind_param("i", $rowAvailable['serving_user_id']);
				$stmt->execute();
				$result = $stmt->get_result();
				$rowServer = $result->fetch_assoc();
				$rowAvailable['user_serving']=html_entity_decode($rowServer['name'],ENT_NOQUOTES, 'UTF-8');
				if($rowAvailable['email_id']==null || $rowAvailable['email_id']=="") 
				{
					$rowAvailable['email_id']="Email not available";
				}
				$rowAvailable['service_time']=round((strtotime(date('Y-m-d H:i:s'))-strtotime($rowAvailable['modified_on']))/60,0).' Minutes';
			}
			$stmt->close();
			$dbCon->close();
			return $rowAvailable;
			
			
		}
	
	function operatorQueueList($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select company_location_queue_info.id,queue_name,property_location.visiting_address as address,total_operators from company_location_queue_info left join property_location on property_location.id=company_location_queue_info.location_id where company_location_queue_info.location_id=(select location_id from user_company_profile where company_id=? and user_login_id=?)  and published_queue=1 and is_active=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("ii",$data['company_id'], $data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			 
			$stmt = $dbCon->prepare("select count(id) as num from company_dropin_queue_waitlist where queue_id=? and is_serviced=0");
			
			/* bind parameters for markers */
			$stmt->bind_param("i",$row['id']);
			$stmt->execute();
			$resultCount = $stmt->get_result();
			$rowCount = $resultCount->fetch_assoc();
			$row['person_in_line']=$rowCount['num'];
			$row['address']=html_entity_decode($row['address'],ENT_NOQUOTES, 'UTF-8'); 	
			$row['queue_name']=html_entity_decode($row['queue_name'],ENT_NOQUOTES, 'UTF-8'); 	
			 
			array_push($org,$row);
			 
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
		
		function operatorQueueWaitingList($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select id,guest_name,created_on,total_person from company_dropin_queue_waitlist where queue_id=? and is_serviced=0");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['queue_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			$stmt = $dbCon->prepare("select  count(id) as num from company_dropin_queue_waitlist where queue_id=? and is_serviced=0");
			$stmt->bind_param("i",  $data['queue_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$rowCount = $result1->fetch_assoc();
			$row['waiting_count']=$rowCount['num'];
			$row['guest_name']=html_entity_decode($row['guest_name'],ENT_NOQUOTES, 'UTF-8'); 	
			array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		function operatorQueueWaitingCount($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select  count(id) as num from company_dropin_queue_waitlist where queue_id=? and is_serviced=0");
			$stmt->bind_param("i",  $data['queue_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$rowCount = $result1->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			return $rowCount['num'];
		}
	
	function operatorQueueServingList($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select id,guest_name,created_on,total_person from company_dropin_queue_waitlist where queue_id=? and is_serviced=1");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['queue_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			$stmt = $dbCon->prepare("select  count(id) as num from company_dropin_queue_waitlist where queue_id=? and is_serviced=0");
			$stmt->bind_param("i",  $data['queue_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$rowCount = $result1->fetch_assoc();
			$row['waiting_count']=$rowCount['num'];
			$row['guest_name']=html_entity_decode($row['guest_name'],ENT_NOQUOTES, 'UTF-8'); 	
			array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		}
	
	
	function operatorQueueServedList($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select id,guest_name,created_on,total_person from company_dropin_queue_waitlist where queue_id=? and is_serviced=2");
			/* bind parameters for markers */
			$stmt->bind_param("i",$data['queue_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			$stmt = $dbCon->prepare("select  count(id) as num from company_dropin_queue_waitlist where queue_id=? and is_serviced=0");
			$stmt->bind_param("i",  $data['queue_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$rowCount = $result1->fetch_assoc();
			$row['waiting_count']=$rowCount['num'];
			$row['guest_name']=html_entity_decode($row['guest_name'],ENT_NOQUOTES, 'UTF-8'); 	
			array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		}
	
	
	function removeFromList($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select  is_serviced from company_dropin_queue_waitlist where company_dropin_queue_waitlist.id=?");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCount = $result->fetch_assoc();
			if($rowCount['is_serviced']==0)
			{
			$stmt = $dbCon->prepare("delete from company_dropin_queue_waitlist where id=?");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();	
			}
			$stmt->close();
			$dbCon->close();
			return 1;
			
			
		}
		
	function userQueueList($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select is_serviced,company_dropin_queue_waitlist.id,queue_name as property_nickname,profile_pic as image_path,property_location.visiting_address as address,company_dropin_queue_waitlist.queue_id,company_name from company_dropin_queue_waitlist left join company_location_queue_info on company_location_queue_info.id=company_dropin_queue_waitlist.queue_id left join property_location on property_location.id=company_dropin_queue_waitlist.location_id left join company_profiles on company_profiles.company_id=property_location.company_id  left join companies on companies.id=property_location.company_id where company_dropin_queue_waitlist.user_id=? and is_serviced<2  and published_queue=1 and is_active=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['dstricts_user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			$row['address']=html_entity_decode($row['address'],ENT_NOQUOTES, 'UTF-8'); 	
			$row['property_nickname']=html_entity_decode($row['property_nickname'],ENT_NOQUOTES, 'UTF-8'); 	
			$row['company_name']=html_entity_decode($row['company_name'],ENT_NOQUOTES, 'UTF-8'); 
			$row['qloud_checkout_id']=0; 
			$row['enc']= 0; 
			$row['room_service']=0;	
			$stmt = $dbCon->prepare("select count(id) as num from company_dropin_queue_waitlist where company_dropin_queue_waitlist.id<? and queue_id=? and is_serviced=0");
			/* bind parameters for markers */
			$stmt->bind_param("ii", $row['id'],$row['queue_id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$rowCount = $result2->fetch_assoc();	
			$row['waiting_count']=$rowCount['num'];
			array_push($org,$row);
			if($row['image_path']==null || $row['image_path']=='')
			{
			$org[$j]['image_path']="https://www.qloudid.com/html/usercontent/images/undraw_queue_qt30.png";	
			}
			else
			{
			$image=$row['image_path'];
			$value_a=file_get_contents("../estorecss/".$image.".txt"); $value_a=str_replace('"','',$value_a); $row['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$image.'.jpg' );
			$row['image_path']=str_replace('../','https://www.qloudid.com/',$row['image_path']);	
			$org[$j]['image_path']=$row['image_path'];	
			}
			$j++;	
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		}
	
		function userQueueWaitingDetail($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select guest_name,is_serviced,company_dropin_queue_waitlist.id,queue_name,profile_pic as image_path,property_location.visiting_address as address,company_name,company_dropin_queue_waitlist.queue_id from company_dropin_queue_waitlist left join company_location_queue_info on company_location_queue_info.id=company_dropin_queue_waitlist.queue_id left join property_location on property_location.id=company_dropin_queue_waitlist.location_id left join company_profiles on company_profiles.company_id=property_location.company_id left join companies on companies.id=property_location.company_id where company_dropin_queue_waitlist.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();
			$row['company_name']=html_entity_decode($row['company_name'],ENT_NOQUOTES, 'UTF-8'); 	
			$row['address']=html_entity_decode($row['address'],ENT_NOQUOTES, 'UTF-8'); 	
			$row['queue_name']=html_entity_decode($row['queue_name'],ENT_NOQUOTES, 'UTF-8'); 	
			 
			if($row['image_path']==null || $row['image_path']=='')
			{
			$row['image_path']="https://www.qloudid.com/html/usercontent/images/undraw_queue_qt30.png";	
			}
			else
			{
			$image=$row['image_path'];
			$value_a=file_get_contents("../estorecss/".$image.".txt"); $value_a=str_replace('"','',$value_a); $row['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$image.'.jpg' );
			$row['image_path']=str_replace('../','https://www.qloudid.com/',$row['image_path']);	
			}
			if($row['is_serviced']==0)
			{
			 
			$stmt = $dbCon->prepare("select count(id) as num from company_dropin_queue_waitlist where company_dropin_queue_waitlist.id<? and queue_id=? and is_serviced=0");
			/* bind parameters for markers */
			$stmt->bind_param("ii", $data['id'],$row['queue_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCount = $result->fetch_assoc();	
			$row['hash_tag']=$rowCount['num'];
			}
			else
			{
				$row['hash_tag']='In service';
			}
			$stmt->close();
			$dbCon->close();
			return $row;
		}
	
		
	function addPersonToDesiredQueue($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select concat_ws(' ',first_name,last_name) as name,country_of_residence,phone_number,country_code,email from user_logins left join user_profiles on user_profiles.user_logins_id=user_logins.id left join phone_country_code on phone_country_code.id=user_logins.country_of_residence where user_logins.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowUser = $result->fetch_assoc();
			
			
			$stmt = $dbCon->prepare("select company_location_queue_info.id,queue_name,visiting_address,location_id from  company_location_queue_info  left join property_location on property_location.id=company_location_queue_info.location_id where company_location_queue_info.id=?");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowAddress = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("insert into company_dropin_queue_waitlist(guest_name,phone_number,country_id,created_on,location_id,queue_id,user_id,email_id)
			values(?,?,?,now(),?,?,?,?)");
			$stmt->bind_param("ssiiiis",$rowUser['name'],$rowUser['phone_number'],$rowUser['country_of_residence'],$rowAddress['location_id'],$data['id'],$data['user_id'],$rowUser['email']);
			$stmt->execute();
			 
			 $id=$stmt->insert_id;
			
			
			$stmt = $dbCon->prepare("select count(id) as num from company_dropin_queue_waitlist where id<? and is_serviced=0");
			$stmt->bind_param("i", $id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowAvailable = $result->fetch_assoc(); 
			$rank=$rowAvailable['num']+1;
			$enc_id= $this -> encrypt_decrypt('encrypt',$id);	
			$data['lid']= $this -> encrypt_decrypt('encrypt',$rowAddress['location_id']);	
			$url="https://www.qloudid.com/public/index.php/DropinQueue/waitingInformation/".$data['lid'].'/'.$enc_id;
			$surl=getShortUrl($url);
			$phone="+".trim($rowUser['country_code'])."".trim($rowUser['phone_number']);
			
			$subject='You Are #'.$rank.' on the '.$rowAddress['queue_name'].' waitlist';
			$to=$phone;
			$html='Hi '.$rowUser['name'].'! you are waitlisted to '.$rowAddress['queue_name'].' as #'.$rank.' in line. See live update at '.$surl;
			 
			$res=sendSms($subject, $to, $html);
			
			$stmt->close();
			$dbCon->close();
			return 1;
		}
	function avalibleQueueOnTheLocation($data)
		{
			 $dbCon = AppModel::createConnection();
			 $id=$this->encrypt_decrypt('decrypt',$data['id']);
			 
			$stmt = $dbCon->prepare("select id,queue_name from company_location_queue_info where location_id=?  and published_queue=1 and is_active=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		}
	
	function encryptData($data)
		{
			
				$data1=$this->encrypt_decrypt('encrypt',$data);
				return  $data1;
		}
		
		function decryptData($data)
		{
			
				$data['enc']=$this->encrypt_decrypt('decrypt',$data['value_json']);
				return  $data['enc'];
		}
	function UpdatecartItemCount($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select dish_quantity,dish_price from hotel_roomservice_item_ordered where qloud_checkout_id=? and is_verified=0 and dish_id=? and service_type=1");
			/* bind parameters for markers */
			 
			$stmt->bind_param("ii",$data['checkid'],$data['dish_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			  $curl = curl_init();
			 curl_setopt_array($curl, array(
			  CURLOPT_URL => 'https://dstricts.com/user/index.php/DstrictsApp/UpdatecartItemCount',
			  CURLOPT_RETURNTRANSFER => true,
			  CURLOPT_ENCODING => '',
			  CURLOPT_MAXREDIRS => 10,
			  CURLOPT_TIMEOUT => 0,
			  CURLOPT_FOLLOWLOCATION => true,
			  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
			  CURLOPT_CUSTOMREQUEST => 'POST',
			  CURLOPT_POSTFIELDS => array('checkid' => $data['checkid'],'dish_id' => $data['dish_id'],'dish_quantity' => $data['dish_quantity']),
			));

			 
			
				$response = curl_exec($curl);
				curl_close($curl);
				 
			if($data['dish_quantity']==0)
			{
			$stmt = $dbCon->prepare("delete from hotel_roomservice_item_ordered where qloud_checkout_id=? and is_verified=0 and dish_id=? and service_type=1");
			/* bind parameters for markers */
			 
			$stmt->bind_param("ii",$data['checkid'],$data['dish_id']);
			$stmt->execute();
			}
			else
			{
				$total_price=$data['dish_quantity']*$row['dish_price'];
				$stmt = $dbCon->prepare("update hotel_roomservice_item_ordered set dish_quantity=?,total_price=? where qloud_checkout_id=? and is_verified=0 and dish_id=? and service_type=1");
			/* bind parameters for markers */
			 
			$stmt->bind_param("iiii",$data['dish_quantity'],$total_price,$data['checkid'],$data['dish_id']);
			$stmt->execute();
			}
			
			
			 $stmt->close();
			$dbCon->close();
			return 1;
			
			 
			
		}
	
	function UpdatecartItemCountInfo($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select dish_quantity,dish_price from hotel_roomservice_item_ordered where qloud_checkout_id=? and is_verified=0 and dish_id=? and service_type=?");
			/* bind parameters for markers */
			 
			$stmt->bind_param("iii",$data['checkid'],$data['dish_id'],$data['service_type']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			  $curl = curl_init();
			 curl_setopt_array($curl, array(
			  CURLOPT_URL => 'https://dstricts.com/user/index.php/DstrictsApp/UpdatecartItemCountInfo',
			  CURLOPT_RETURNTRANSFER => true,
			  CURLOPT_ENCODING => '',
			  CURLOPT_MAXREDIRS => 10,
			  CURLOPT_TIMEOUT => 0,
			  CURLOPT_FOLLOWLOCATION => true,
			  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
			  CURLOPT_CUSTOMREQUEST => 'POST',
			  CURLOPT_POSTFIELDS => array('checkid' => $data['checkid'],'dish_id' => $data['dish_id'],'dish_quantity' => $data['dish_quantity'],'service_type' => $data['service_type']),
			));

			 
			
				$response = curl_exec($curl);
				curl_close($curl);
				 
			if($data['dish_quantity']==0)
			{
			$stmt = $dbCon->prepare("delete from hotel_roomservice_item_ordered where qloud_checkout_id=? and is_verified=0 and dish_id=? and service_type=?");
			/* bind parameters for markers */
			 
			$stmt->bind_param("iii",$data['checkid'],$data['dish_id'],$data['service_type']);
			$stmt->execute();
			}
			else
			{
				$total_price=$data['dish_quantity']*$row['dish_price'];
				$stmt = $dbCon->prepare("update hotel_roomservice_item_ordered set dish_quantity=?,total_price=? where qloud_checkout_id=? and is_verified=0 and dish_id=? and service_type=?");
			/* bind parameters for markers */
			 
			$stmt->bind_param("iiiii",$data['dish_quantity'],$total_price,$data['checkid'],$data['dish_id'],$data['service_type']);
			$stmt->execute();
			}
			
			
			 $stmt->close();
			$dbCon->close();
			return 1;
			
			 
			
		}
	
	function cartItemCountInfo($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select count(id) as num from hotel_roomservice_item_ordered where qloud_checkout_id=? and is_verified=0 and service_type=?");
			/* bind parameters for markers */
			 
			$stmt->bind_param("ii",$data['checkid'],$data['service_type']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			return $row['num'];
			
			 
			
		}
	function cartItemCount($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select count(id) as num from hotel_roomservice_item_ordered where qloud_checkout_id=? and is_verified=0 and service_type=1");
			/* bind parameters for markers */
			 
			$stmt->bind_param("i",$data['checkid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			return $row['num'];
			
			 
			
		}
		
		
		function payCartItemUsingApp($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select user_logins.id,zipcode,first_name,last_name,email,country_of_residence,user_profiles.city,user_profiles.state,phone_number,address,port_number from user_logins left join user_profiles on user_profiles.user_logins_id=user_logins.id where user_logins.id=?");
			/* bind parameters for markers */
			 
			$stmt->bind_param("i",$data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			  
			if($data['qloud_id_pay']==1)
			{
			if($data['service_type']==5)
			{
			$stmt = $dbCon->prepare("select sum(total_price) as price from hotel_roomservice_item_ordered where qloud_checkout_id=? and is_verified=0 and service_type=? and wellness_id=? and booking_person_id=?");
			/* bind parameters for markers */
			 
			$stmt->bind_param("iiii",$data['checkid'],$data['service_type'],$data['wellness_id'],$data['user_id']);
			}
			else
			{
			$stmt = $dbCon->prepare("select sum(total_price) as price from hotel_roomservice_item_ordered where qloud_checkout_id=? and is_verified=0 and service_type=?");
			/* bind parameters for markers */
			 
			$stmt->bind_param("ii",$data['checkid'],$data['service_type']);	
			}
			$stmt->execute();
			$result = $stmt->get_result();
			$row_price = $result->fetch_assoc();
			 
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/tokens');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "card[number]=4242424242424242&card[exp_month]=2&card[exp_year]=2030&card[cvc]=314");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);
			$a=json_decode($result,true);
			
			
			
			 $ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/customers');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "name=".$row['first_name']."&email=".$row['email']."&source=".$a['id']."&description=My");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);
			$b=json_decode($result,true);
			$cuId=$b['id'];
			
			$total_price=$row_price['price']*100;
			if($total_price<500)
			{
				$total_price=500;
			}
			$ch = curl_init();

			curl_setopt($ch, CURLOPT_URL, 'https://api.stripe.com/v1/charges');
			curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
			curl_setopt($ch, CURLOPT_POST, 1);
			curl_setopt($ch, CURLOPT_POSTFIELDS, "customer=".$b['id']."&amount=".$total_price."&currency=sek&description=My");
			curl_setopt($ch, CURLOPT_USERPWD, 'sk_test_mTVjBSZHopmJyA3wgvzRwUM2' . ':' . '');

			$headers = array();
			$headers[] = 'Content-Type: application/x-www-form-urlencoded';
			curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

			$result = curl_exec($ch);
			if (curl_errno($ch)) {
				echo 'Error:' . curl_error($ch);
			}
			curl_close($ch);			
			$c=json_decode($result,true);
			$Chargeid=$c['id'];	
 


 
	
		if($data['is_company']==0)
		{
		$stmt = $dbCon->prepare("select * from user_cards where id= ?");
        
        /* bind parameters for markers */
        $stmt->bind_param("i", $data['card_id']);
        $stmt->execute();
        $result = $stmt->get_result();
        $rowCards   = $result->fetch_assoc();	
		
		 $stmt = $dbCon->prepare("select phone_country_code.country_name,phone_country_code.country_code,zipcode,first_name,last_name,email,country_of_residence,user_profiles.invoice_city,user_profiles.state,phone_number,invoice_address,invoice_port,invoice_zipcode from user_logins left join user_profiles on user_profiles.user_logins_id=user_logins.id left join phone_country_code on user_logins.country_of_residence=phone_country_code.id where user_logins.id= ?");
        
        /* bind parameters for markers */
        $stmt->bind_param("i", $data['user_id']);
        $stmt->execute();
        $result = $stmt->get_result();
        $rowP    = $result->fetch_assoc();
		$rowP['user']=1;
		$rowP['buyer_id']=$row['id'];
		$rowP['card_id']=$data['card_id'];
		$rowP['user_id']=$row['id'];
		$rowP['customer_id']=$cuId;
		$rowP['charge_id']=$Chargeid; 
		$rowP['qloud_checkout_id']=$data['checkid'];
		
		}
		else
		{
		$stmt = $dbCon->prepare("select * from company_cards where id= ?");
        
        /* bind parameters for markers */
        $stmt->bind_param("i", $data['card_id']);
        $stmt->execute();
        $result = $stmt->get_result();
        $rowCards   = $result->fetch_assoc();	
			
		 $stmt = $dbCon->prepare("select phone_country_code.country_name,phone_country_code.country_code,zipcode,first_name,last_name,email,country_of_residence,user_profiles.invoice_city,user_profiles.state,phone_number,invoice_address,invoice_port,invoice_zipcode from user_logins left join user_profiles on user_profiles.user_logins_id=user_logins.id left join phone_country_code on user_logins.country_of_residence=phone_country_code.id where user_logins.id= ?");
        
        /* bind parameters for markers */
        $stmt->bind_param("i", $data['user_id']);
        $stmt->execute();
        $result = $stmt->get_result();
        $rowUser    = $result->fetch_assoc();	
			
		$stmt = $dbCon->prepare("select phone_country_code.country_name,phone_country_code.country_code, companies.country_id,cid,company_profiles.phone,country_id,company_email,company_name,property_location.id,street_name_v, city_v, postal_code_v, property_location.d_port_number,street_name_i as invoice_address,city_i as invoice_city,postal_code_i as invoice_zipcode,property_location.i_port_number as invoice_port from  property_location left join companies on companies.id=property_location.company_id left join phone_country_code on companies.country_id=phone_country_code.id left join company_profiles on companies.id=company_profiles.company_id where property_location.id in (select location_id from employee_location where employee_id in (select id from employees where user_login_id=? and company_id =?))");
        
        /* bind parameters for markers */
        $stmt->bind_param("ii", $data['user_id'],$rowCards['company_id']);
        $stmt->execute();
        $result = $stmt->get_result();
        $rowP   = $result->fetch_assoc();
		$rowP['user']=0;
		$rowP['card_id']=$data['card_id'];
		$rowP['buyer_id']=$rowCards['company_id'];
		$rowP['user_id']=$row['id'];
		$rowP['qloud_checkout_id']=$data['checkid']; 
		$rowP['customer_id']=$cuId;
		$rowP['charge_id']=$Chargeid;
		}
		$rowP['is_paid']=1;
	 	 	 
 }
			else
			{
			$rowP['is_paid']=0;	
			$rowP['user']=1;
			$rowP['buyer_id']=$data['user_id'];
			$rowP['card_id']=0;
			$rowP['user_id']=$data['user_id'];
			$rowP['customer_id']='';
			$rowP['charge_id']=''; 
			$rowP['qloud_checkout_id']=$data['checkid']; 
			}
			$rowP['service_type']=$data['service_type']; 
			 
			if($rowP['service_type']==1 || $rowP['service_type']==2 || $rowP['service_type']==4)
			{
			$stmt = $dbCon->prepare("update hotel_roomservice_item_ordered set is_verified=1,is_paid=?, company_id=?, card_id=?,customer_id=?,charge_id=?,is_user=?,user_id=? where qloud_checkout_id=? and is_verified=0 and service_type=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("iiissiiii", $rowP['is_paid'], $rowP['buyer_id'],$rowP['card_id'],$rowP['customer_id'],$rowP['charge_id'],$rowP['user'],$rowP['user_id'],$data['checkid'],$data['service_type'] );
			$stmt->execute();	
				
			}
			else if($rowP['service_type']==5)
			{
			
			$stmt = $dbCon->prepare("select property_location.visiting_address,d_port_number,company_name,wellness_center_information.company_id,country_id,wellness_center_information.property_id from wellness_center_information left join companies on companies.id=wellness_center_information.company_id left join property_location on property_location.id=wellness_center_information.property_id where wellness_center_information.id=?");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("i", $data['wellness_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowWellnessCompany= $result->fetch_assoc();
			 
			$stmt = $dbCon->prepare("select user_logins.first_name,user_logins.last_name,user_logins.email,work_time,hotel_roomservice_item_ordered.id,wellness_id,booked_employee_id,one_shared,booking_date,booking_time,country_of_residence,phone_number from hotel_roomservice_item_ordered left join user_logins on user_logins.id=hotel_roomservice_item_ordered.booking_person_id left join user_profiles on user_logins.id=user_profiles.user_logins_id left join working_hrs on working_hrs.id=hotel_roomservice_item_ordered.booking_time where qloud_checkout_id=? and is_verified=0 and service_type=? and wellness_id=? and booking_person_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("iiii", $data['checkid'],$data['service_type'],$data['wellness_id'],$rowP['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRoomservice   = $result->fetch_assoc();
			
			
			$stmt = $dbCon->prepare("select manage_apps_permission.id from manage_apps_permission left join apps_detail on apps_detail.id=manage_apps_permission.app_id where country_id=?  and app_type=0 and is_mandatory=0 and app_id=2");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("i", $rowWellnessCompany['country_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowPermi = $result->fetch_assoc();
			
			if(!empty($rowPermi))
			{
			$stmt = $dbCon->prepare("select count(id) as num from compnay_app_download where permission_id=? and company_id=?");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("ii", $rowPermi['id'],$rowWellnessCompany['company_id']);
			$stmt->execute();
			$result_down = $stmt->get_result();
			$row_down = $result_down->fetch_assoc();
			
			if($row_down['num']>0)
			{
			$booking_date=date('Y-m-d',$rowRoomservice['booking_date']);
			if($rowRoomservice['one_shared']==1 || ($rowRoomservice['one_shared']==2 && $rowRoomservice['is_private']==2))
			{
				 
			$vrepeat=1;
			$stmt = $dbCon->prepare("insert into employee_invited_visitor (company_id,inviting_employee,first_name,visitor_email,visiting_date,visiting_time,created_on,repeating_cycle,country_id,phone_number,location_id ,visitdate_id,booking_type,booking_id) values ( ?, ?, ?, ?, ?, ?, now(), ?, ?,?,?,?,?,?)");
			/* bind parameters for markers */
			
			$stmt->bind_param("iissssiisisii",$rowWellnessCompany['company_id'],$rowRoomservice['booked_employee_id'],$rowRoomservice['first_name'],$rowRoomservice['email'],$booking_date,$rowRoomservice['work_time'],$vrepeat,$rowRoomservice['country_of_residence'],$rowRoomservice['phone_number'],$rowWellnessCompany['property_id'],$rowRoomservice['booking_date'],$vrepeat,$rowRoomservice['id']);
			$stmt->execute();
			$id=$stmt->insert_id;
			$url="https://www.qloudid.com/public/index.php/VisitorsQR/visitorFrontDesk/".$this->encrypt_decrypt('encrypt',$rowWellnessCompany['property_id']);	
			$surl=getShortUrl($url);
		 
		$to      = $rowRoomservice['email'];
		$subject = "Booking Confirmed";
		$emailContent ='<html><head>
        <title>Reservation confirmed</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <style type="text/css">
            /* GT AMERICA */

            @font-face {
                font-display: fallback;
                font-family: "GT America Regular";
                font-weight: 400;
                src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"),
                    url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
            }

            @font-face {
                font-display: fallback;
                font-family: "GT America Medium";
                font-weight: 600;
                src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"),
                    url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
            }

            @font-face {
                font-display: fallback;
                font-family: "GT America Condensed Bold";
                font-weight: 700;
                src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"),
                    url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
            }

            /* CLIENT-SPECIFIC RESET */

            body,
            table,
            td,
            a {
                -webkit-text-size-adjust: 100%;
                -ms-text-size-adjust: 100%;
            }

            /* Prevent WebKit and Windows mobile changing default text sizes */

            table,
            td {
                mso-table-lspace: 0pt;
                mso-table-rspace: 0pt;
            }

            /* Remove spacing between tables in Outlook 2007 and up */

            img {
                -ms-interpolation-mode: bicubic;
            }

            /* Allow smoother rendering of resized image in Internet Explorer */

            .im {
                color: inherit !important;
            }

            /* DEVICE-SPECIFIC RESET */

            a[x-apple-data-detectors] {
                color: inherit !important;
                text-decoration: none !important;
                font-size: inherit !important;
                font-family: inherit !important;
                font-weight: inherit !important;
                line-height: inherit !important;
            }

            /* iOS BLUE LINKS */

            /* RESET */

            img {
                border: 0;
                height: auto;
                line-height: 100%;
                outline: none;
                text-decoration: none;
                display: block;
            }

            table {
                border-collapse: collapse;
            }

            table td {
                border-collapse: collapse;
                display: table-cell;
            }

            body {
                height: 100% !important;
                margin: 0 !important;
                padding: 0 !important;
                width: 100% !important;
            }

            /* BG COLORS */

            .mainTable {
                background-color: #f0f0f0;
            }

            .mainTable--hospitality {
                background-color: #f7f2ed;
            }

            html {
                background-color: #f0f0f0;
            }

            /* VARIABLES */

            .bg-white {
                background-color: white;
            }

            .hr {
                /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
                background-color: #d3d3d8;
                border-collapse: collapse;
                mso-table-lspace: 0pt;
                mso-table-rspace: 0pt;
                mso-line-height-rule: exactly;
                line-height: 1px;
            }

            .textAlignLeft {
                text-align: left !important;
            }

            .textAlignRight {
                text-align: right !important;
            }

            .textAlignCenter {
                text-align: center !important;
            }

            .mt1 {
                margin-top: 6px;
            }

            .list {
                padding-left: 18px;
                margin: 0;
            }

            /* TYPOGRAPHY */

            body {
                font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 400;
                color: #4f4f65;
                -webkit-font-smoothing: antialiased;
                -ms-text-size-adjust: 100%;
                -moz-osx-font-smoothing: grayscale;
                font-smoothing: always;
                text-rendering: optimizeLegibility;
            }

            .h1 {
                font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 700;
                vertical-align: middle;
                font-size: 36px;
                line-height: 42px;
            }

            .h2 {
                font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 600;
                vertical-align: middle;
                font-size: 16px;
                line-height: 24px;
            }

            .text {
                font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 400;
                font-size: 16px;
                line-height: 21px;
            }

            .text-list {
                font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 400;
                font-size: 16px;
                line-height: 25px;
            }

            .textSmall {
                font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 400;
                font-size: 14px;
            }

            .text-xsmall {
                font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
                font-size: 11px;
                text-transform: uppercase;
                line-height: 22px;
                letter-spacing: 1px;
            }

            .text-bold {
                font-weight: 600;
            }

            .text-link {
                text-decoration: underline;
            }

            .text-linkNoUnderline {
                text-decoration: none;
            }

            .text-strike {
                text-decoration: line-through;
            }

            /* FONT COLORS */

            .textColorDark {
                color: #23233e;
            }

            .textColorNormal {
                color: #4f4f65;
            }

            .textColorBlue {
                color: #2020c0;
            }

            .textColorGrayDark {
                color: #7b7b8b;
            }

            .textColorGray {
                color: #a5a8ad;
            }

            .textColorWhite {
                color: #ffffff;
            }

            .textColorRed {
                color: #df3232;
            }

            /* BUTTON */

            .Button-primary-wrapper {
                border-radius: 3px;
                background-color: #2020c0;
            }

            .Button-primary {
                font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
                border-radius: 3px;
                border: 1px solid #2020c0;
                color: #ffffff;
                display: block;
                font-size: 16px;
                font-weight: 600;
                padding: 18px;
                text-decoration: none;
            }

            .Button-secondary-wrapper {
                border-radius: 3px;
                background-color: #ffffff;
            }

            .Button-secondary {
                font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
                border-radius: 3px;
                border: 1px solid #2020c0;
                color: #2020c0;
                display: block;
                font-size: 16px;
                font-weight: 600;
                padding: 18px;
                text-decoration: none;
            }

            /* LAYOUT */

            .Content-container {
                padding-left: 60px;
                padding-right: 60px;
            }

            .Content-container--main {
                padding-top: 54px;
                padding-bottom: 60px;
            }

            .Content {
                width: 580px;
                margin: 0 auto;
            }

            .wrapper {
                max-width: 600px;
            }

            .section {
                padding: 24px 0px;
                border-bottom: 1px solid #d3d3d8;
            }

            .section--noBorder {
                padding: 24px 0px 0;
            }

            .section--last {
                padding: 24px 0px;
            }

            .message {
                background-color: #f4f4f5;
                padding: 18px;
            }

            .card {
                border: 1px solid #d3d3d8;
                padding: 18px;
            }

            /* HEADER */

            .header-tockLogoImage {
                display: block;
                color: #f0f0f0;
            }

            .header-heroImage {
                padding-bottom: 24px;
            }

            /* PREHEADER */

            .preheader {
                display: none;
                font-size: 1px;
                color: #ffffff;
                line-height: 1px;
                max-height: 0px;
                max-width: 0px;
                opacity: 0;
                overflow: hidden;
            }

            /* BANNER */

            .notice {
                padding: 12px;
                background: #23233e;
                color: #ffffff;
                display: block;
                font-size: 14px;
                font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 600;
            }

            /* INTRO */

            .section--intro {
                padding-bottom: 48px;
            }

            /* BOOKING INFO */

            .business-logo__container {
                width: 48px;
                height: 48px;
                border-radius: 3px;
                border: 1px solid #d3d3d8;
                overflow: hidden;
            }

            .business-logo__image {
                border: 1px solid transparent;
                border-radius: 3px;
                width: 48px;
                height: 48px;
                display: block;
            }

            .business-address--address {
                width: 50%;
            }

            .business-address--map {
                width: 50%;
            }

            .business-address--map-image {
                width: 100%;
            }

            /* MOBILE TICKETS */

            .mobile-ticket--description {
                width: 65%;
                margin-top: 12px;
                margin-right: 5%;
            }

            .mobile-ticket--code {
                width: 30%;
            }

            .mobile-ticket--code-image {
                width: 100%;
            }

            /* RESERVATION ACTIONS */

            .linksTable {
                border-bottom: 1px solid #d3d3d8;
            }

            .linksTableRow {
                padding: 24px 12px;
            }

            .actions-icon {
                vertical-align: middle;
            }

            .actions-text {
                vertical-align: middle;
            }

            /* RECEIPT */

            .receipt__container {
                border: 1px solid #d3d3d8;
                padding: 24px;
            }

            .receipt__row {
                border-top: 1px solid #d3d3d8;
            }

            /* FEEDBACK ICONS */

            .feedback-link {
                border: 1px solid #d4d5da;
                border-radius: 3px;
                display: inline-block;
                width: calc(32% - 2px);
                padding: 10px 0;
            }

            .feedback-link-bumper {
                display: inline-block;
                width: 1%;
            }

            .feedback-link img {
                height: 50px;
                width: 50px;
            }

            /* SOCIAL ICONS */

            .social-link {
                display: inline-block;
                width: auto;
            }

            .social-link-text {
                padding: 14px 24px 14px 14px;
            }

            /* TABLET STYLES */

            @media screen and (max-width: 648px) {
                /* DEVICE-SPECIFIC RESET */
                div[style*="margin: 16px 0;"] {
                    margin: 0 !important;
                }
                /* ANDROID CENTER FIX */
                /* LAYOUT */
                .wrapper {
                    width: 100% !important;
                    max-width: 100% !important;
                }
                .Content {
                    width: 90% !important;
                }
                .Content-container {
                    padding-left: 36px !important;
                    padding-right: 36px !important;
                }
                .Content-container--main {
                    padding-top: 30px !important;
                    padding-bottom: 42px !important;
                }
                .responsiveTable {
                    width: 100% !important;
                }
                /* RESERVATION ACTIONS */
                .linksTableRow {
                    padding-left: 0 !important;
                    padding-right: 0 !important;
                    padding-top: 12px !important;
                    padding-bottom: 12px !important;
                }
                .linksTableRow--borderRight {
                    border-right: none !important;
                    padding-left: 0 !important;
                    padding-right: 0 !important;
                }
                /* FEEDBACK LINK */
                .feedback-link img {
                    height: 38px !important;
                    width: 38px !important;
                }
            }

            /* MOBILE STYLES */

            @media screen and (max-width: 480px) {
                /* TYPOGRAPHY */
                .h1 {
                    font-size: 30px !important;
                    line-height: 30px !important;
                }
                .text {
                    font-size: 16px !important;
                    line-height: 22px !important;
                }
                /* BUTTON */
                .mobile-buttonContainer {
                    width: 100% !important;
                }
                /* LAYOUT */
                .Content {
                    width: 100% !important;
                }
                .Content-container {
                    padding-left: 18px !important;
                    padding-right: 18px !important;
                }
                .Content-container--main {
                    padding-top: 24px !important;
                    padding-bottom: 30px !important;
                }
                .section {
                    padding: 18px 0 !important;
                }
                .section--last {
                    padding: 18px 0 !important;
                }
                .header {
                    padding: 0 18px !important;
                }
                .business-address--address {
                    width: 100% !important;
                }
                .business-address--map {
                    margin-top: 30px !important;
                    width: 100% !important;
                }
                .mobile-ticket--description {
                    width: 100% !important;
                    margin-top: 0px !important;
                }
                .mobile-ticket--code {
                    margin-top: 30px !important;
                    margin-left: 0;
                    width: 100% !important;
                }
                /* RECEIPT */
                .receipt__container {
                    padding: 12px !important;
                }
                /* SOCIAL ICONS */
                .social-link {
                    display: block !important;
                    width: 100% !important;
                    border-bottom: 1px solid #d3d3d8 !important;
                }
                /* INTRO */
                .section--intro {
                    padding-top: 18px !important;
                    padding-bottom: 18px !important;
                }
            }
        </style>

        <!--[if mso]>
            <style type="text/css">
                .h1 {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-weight: 700 !important;
                    vertical-align: middle !important;
                    font-size: 36px !important;
                    mso-line-height-rule: exactly;
                    line-height: 42px !important;
                }
                .h2 {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-weight: 600 !important;
                    vertical-align: middle !important;
                    font-size: 16px !important;
                    mso-line-height-rule: exactly;
                    line-height: 24px !important;
                }
                .text {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-weight: 400 !important;
                    font-size: 16px !important;
                    mso-line-height-rule: exactly;
                    line-height: 21px !important;
                }
                .text-list {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-weight: 400 !important;
                    font-size: 16px !important;
                    mso-line-height-rule: exactly;
                    line-height: 25px !important;
                }
                .textSmall {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-weight: 400 !important;
                    font-size: 14px !important;
                }
                .text-xsmall {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-size: 11px !important;
                    text-transform: uppercase !important;
                    mso-line-height-rule: exactly;
                    line-height: 22px !important;
                    letter-spacing: 1px !important;
                }
                .text-bold {
                    font-weight: 600 !important;
                }
                .text-link {
                    text-decoration: underline !important;
                }
                .text-linkNoUnderline {
                    text-decoration: none !important;
                }
                .text-strike {
                    text-decoration: line-through !important;
                }
                .textColorDark {
                    color: #23233e !important;
                }
                .textColorNormal {
                    color: #4f4f65 !important;
                }
                .textColorBlue {
                    color: #2020c0 !important;
                }
                .textColorGray {
                    color: #a5a8ad !important;
                }
                .textColorWhite {
                    color: #ffffff !important;
                }
                .Button-primary {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    border-radius: 3px !important;
                    border: 1px solid #2020c0 !important;
                    color: #ffffff !important;
                    display: block !important;
                    font-size: 16px !important;
                    font-weight: 600 !important;
                    padding: 18px !important;
                    text-decoration: none !important;
                }
                .Button-secondary {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    border-radius: 3px !important;
                    border: 1px solid #2020c0 !important;
                    color: #2020c0 !important;
                    display: block !important;
                    font-size: 16px !important;
                    font-weight: 600 !important;
                    padding: 18px !important;
                    text-decoration: none !important;
                }
            </style>
        <![endif]-->
        <!-- HIDDEN PREHEADER TEXT -->
    </head>
    <body>
        <div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;"></div>
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="mainTable" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: rgb(240, 240, 240);">
            <tbody>
                <tr>
                    <td style="
                            display: none !important;
                            visibility: hidden;
                            mso-hide: all;
                            font-size: 1px;
                            color: #ffffff;
                            line-height: 1px;
                            max-height: 0px;
                            max-width: 0px;
                            opacity: 0;
                            overflow: hidden;
                            -webkit-text-size-adjust: 100%;
                            -ms-text-size-adjust: 100%;
                            mso-table-lspace: 0pt;
                            mso-table-rspace: 0pt;
                            border-collapse: collapse;
                            display: table-cell;
                        ">
                        We are thrilled that you will be joining us. If yo...
                    </td>
                    <!-- HEADER -->
                </tr>
                <tr>
                    <td align="center" class="header" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
                        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 580px; margin: 0 auto;">
                            <tbody>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr>
                                    <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        <h1 style="font-size: 33px; font-weight: 800; line-height: 30px;">Dstricts</h1>
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <!--[if (gte mso 9)|(IE)]>
    </td>
    </tr>
    </table>
    <![endif]-->
                    </td>
                </tr>
                <!-- CONTENT -->
                <tr>
                    <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
                        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content bg-white" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: white; width: 580px; margin: 0 auto;">
                            <tbody>
                                <tr>
                                    <td class="Content-container Content-container--main text textColorNormal" style="
                                            -webkit-text-size-adjust: 100%;
                                            -ms-text-size-adjust: 100%;
                                            mso-table-lspace: 0pt;
                                            mso-table-rspace: 0pt;
                                            border-collapse: collapse;
                                            display: table-cell;
                                            font-family: GT America Regular, Roboto, Helvetica, Arial, sans-serif;
                                            font-weight: 400;
                                            font-size: 16px;
                                            line-height: 21px;
                                            color: rgb(79, 79, 101);
                                            padding-left: 60px;
                                            padding-right: 60px;
                                            padding-top: 54px;
                                            padding-bottom: 60px;
                                        ">
                                        <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                            <!-- RESTAURANT INFO -->
                                            <tbody>
                                                <tr>
                                                    <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                        <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                                            <tbody>
                                                                <tr>
                                                                    <td width="12" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                                        &nbsp;
                                                                    </td>
                                                                    <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                                        <span class="h2 textColorDark" style="
                                                                                font-family: GT America Medium, Roboto, Helvetica, Arial, sans-serif;
                                                                                font-weight: 600;
                                                                                vertical-align: middle;
                                                                                font-size: 16px;
                                                                                line-height: 24px;
                                                                                color: rgb(35, 35, 62);
                                                                            ">
                                                                            '.htmlentities($rowRoomservice['first_name'],ENT_NOQUOTES, 'ISO-8859-1').'
                                                                        </span>
                                                                    </td>
                                                                </tr>
                                                                <tr class="spacer">
                                                                    <td height="12px" colspan="2" style="
                                                                            font-size: 12px;
                                                                            line-height: 12px;
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                        ">
                                                                        &nbsp;
                                                                    </td>
                                                                </tr>
                                                                <tr class="spacer">
                                                                    <td height="12px" colspan="2" style="
                                                                            font-size: 12px;
                                                                            line-height: 12px;
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                        ">
                                                                        &nbsp;
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <!-- INTRO -->
                                                <tr>
                                                    <td valign="top" align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                        <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                                            <tbody>
                                                                <tr>
                                                                    <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                                        <span class="h1 textColorDark" style="
                                                                                font-family: GT America Condensed Bold, Roboto Condensed, Roboto, Helvetica, Arial, sans-serif;
                                                                                font-weight: 700;
                                                                                vertical-align: middle;
                                                                                font-size: 36px;
                                                                                line-height: 42px;
                                                                                color: rgb(35, 35, 62);
                                                                            ">
                                                                            Your booking have been confirmed at '.$rowWellnessCompany['company_name'].'
                                                                        </span>
                                                                    </td>
                                                                </tr>
                                                                <tr class="spacer">
                                                                    <td height="18px" colspan="2" style="
                                                                            font-size: 18px;
                                                                            line-height: 18px;
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                        ">
                                                                        &nbsp;
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                            background-color: rgb(211, 211, 216);
                                                                            border-collapse: collapse;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            mso-line-height-rule: exactly;
                                                                            line-height: 1px;
                                                                        ">
                                                                        <!--[if gte mso 15]>&nbsp;<![endif]-->
                                                                    </td>
                                                                </tr>
                                                                <tr class="spacer">
                                                                    <td height="18px" colspan="2" style="
                                                                            font-size: 18px;
                                                                            line-height: 18px;
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                        ">
                                                                        &nbsp;
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <!-- MESSAGE -->

                                                <!-- BOOKING INFO -->
                                                <tr>
                                                    <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                        <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                                            <tbody>
                                                                <tr>
                                                                    <td align="left" valign="middle" width="468" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;"></td>
                                                                </tr>

                                                                <tr class="spacer">
                                                                    <td height="12px" colspan="2" style="
                                                                            font-size: 12px;
                                                                            line-height: 12px;
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                        ">
                                                                        &nbsp;
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td align="center" valign="center" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                                        <table border="0" cellspacing="0" cellpadding="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                                                            <tbody>
                                                                                <tr>
                                                                                    <td align="center" valign="center" width="100%" class="Button-primary-wrapper" style="
                                                                                            -webkit-text-size-adjust: 100%;
                                                                                            -ms-text-size-adjust: 100%;
                                                                                            mso-table-lspace: 0pt;
                                                                                            mso-table-rspace: 0pt;
                                                                                            border-collapse: collapse;
                                                                                            display: table-cell;
                                                                                            border-radius: 3px;
                                                                                            background-color: rgb(32, 32, 192);
                                                                                        ">
                                                                                        <a href="'.$url.'" target="_blank" class="Button-primary" style="
                                                                                                -webkit-text-size-adjust: 100%;
                                                                                                -ms-text-size-adjust: 100%;
                                                                                                font-family: GT America Medium, Roboto, Helvetica, Arial, sans-serif;
                                                                                                border-radius: 3px;
                                                                                                border: 1px solid rgb(32, 32, 192);
                                                                                                color: rgb(255, 255, 255);
                                                                                                display: block;
                                                                                                font-size: 16px;
                                                                                                font-weight: 600;
                                                                                                padding: 18px;
                                                                                                text-decoration: none;
                                                                                            ">
                                                                                            Manage your Meeting
                                                                                        </a>
                                                                                    </td>
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <!-- ADDRESS -->
                                                <tr>
                                                    <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                        <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                                            <tbody>
                                                                <tr class="spacer">
                                                                    <td height="18px" colspan="2" style="
                                                                            font-size: 18px;
                                                                            line-height: 18px;
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                        ">
                                                                        &nbsp;
                                                                    </td>
                                                                </tr>
                                                                <tr class="spacer">
                                                                    <td height="18px" colspan="2" style="
                                                                            font-size: 18px;
                                                                            line-height: 18px;
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                        ">
                                                                        &nbsp;
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                            background-color: rgb(211, 211, 216);
                                                                            border-collapse: collapse;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            mso-line-height-rule: exactly;
                                                                            line-height: 1px;
                                                                        ">
                                                                        <!--[if gte mso 15]>&nbsp;<![endif]-->
                                                                    </td>
                                                                </tr>
                                                                <tr class="spacer">
                                                                    <td height="18px" colspan="2" style="
                                                                            font-size: 18px;
                                                                            line-height: 18px;
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                        ">
                                                                        &nbsp;
                                                                    </td>
                                                                </tr>
                                                                <tr class="spacer">
                                                                    <td height="18px" colspan="2" style="
                                                                            font-size: 18px;
                                                                            line-height: 18px;
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                        ">
                                                                        &nbsp;
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                                        <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                                                            <tbody>
                                                                                <tr>
                                                                                    <td style="
                                                                                            -webkit-text-size-adjust: 100%;
                                                                                            -ms-text-size-adjust: 100%;
                                                                                            mso-table-lspace: 0pt;
                                                                                            mso-table-rspace: 0pt;
                                                                                            border-collapse: collapse;
                                                                                            display: table-cell;
                                                                                        ">
                                                                                        <table align="left" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--address" style="
                                                                                                -webkit-text-size-adjust: 100%;
                                                                                                -ms-text-size-adjust: 100%;
                                                                                                mso-table-lspace: 0pt;
                                                                                                mso-table-rspace: 0pt;
                                                                                                border-collapse: collapse;
                                                                                                width: 70%;
                                                                                            ">
                                                                                            <tbody>
                                                                                                <tr>
                                                                                                    <td align="left" width="100%" class="text-list textColorNormal" style="
                                                                                                            -webkit-text-size-adjust: 100%;
                                                                                                            -ms-text-size-adjust: 100%;
                                                                                                            mso-table-lspace: 0pt;
                                                                                                            mso-table-rspace: 0pt;
                                                                                                            border-collapse: collapse;
                                                                                                            display: table-cell;
                                                                                                            font-family: GT America Regular, Roboto, Helvetica, Arial, sans-serif;
                                                                                                            font-weight: 400;
                                                                                                            font-size: 16px;
                                                                                                            line-height: 25px;
                                                                                                            color: rgb(79, 79, 101);
                                                                                                        ">
                                                                                                        <span class="h2 textColorDark" style="
                                                                                                                font-family: GT America Medium, Roboto, Helvetica, Arial, sans-serif;
                                                                                                                font-weight: 600;
                                                                                                                vertical-align: middle;
                                                                                                                font-size: 16px;
                                                                                                                line-height: 24px;
                                                                                                                color: rgb(35, 35, 62);
                                                                                                            ">
                                                                                                            If button dont work please copy and paste the link in browser: '.$surl.'
                                                                                                        </span>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            </tbody>
                                                                                        </table>
                                                                                        <!--[if mso]></td><td><![endif]-->
                                                                                        <table align="right" border="0" cellpadding="0" cellspacing="0" width="230" class="business-address--map" style="
                                                                                                -webkit-text-size-adjust: 100%;
                                                                                                -ms-text-size-adjust: 100%;
                                                                                                mso-table-lspace: 0pt;
                                                                                                mso-table-rspace: 0pt;
                                                                                                border-collapse: collapse;
                                                                                                width: 50%;
                                                                                            ">
                                                                                            <tbody>
                                                                                                <tr></tr>
                                                                                            </tbody>
                                                                                        </table>
                                                                                    </td>
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <tr class="spacer">
                                                    <td height="18px" colspan="2" style="
                                                            font-size: 18px;
                                                            line-height: 18px;
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                        ">
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr class="spacer">
                                                    <td height="18px" colspan="2" style="
                                                            font-size: 18px;
                                                            line-height: 18px;
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                        ">
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                            background-color: rgb(211, 211, 216);
                                                            border-collapse: collapse;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            mso-line-height-rule: exactly;
                                                            line-height: 1px;
                                                        ">
                                                        <!--[if gte mso 15]>&nbsp;<![endif]-->
                                                    </td>
                                                </tr>

                                                <!-- RECEIPT -->

                                                <tr class="spacer">
                                                    <td height="18px" colspan="2" style="
                                                            font-size: 18px;
                                                            line-height: 18px;
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                        ">
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <!-- EDIT RECEIPT -->
                                                <!-- CANCELLATION POLICY -->
                                                <tr>
                                                    <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                        <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                                            <tbody>
                                                                <tr>
                                                                    <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                                        <div class="text text-bold textColorDark" style="
                                                                                font-family: GT America Regular, Roboto, Helvetica, Arial, sans-serif;
                                                                                font-weight: 400;
                                                                                font-size: 16px;
                                                                                line-height: 21px;
                                                                                font-weight: 600;
                                                                                color: rgb(35, 35, 62);
                                                                            ">
                                                                            Address for meeting
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                                        <div class="text textColorNormal mt1" style="
                                                                                margin-top: 6px;
                                                                                font-family: GT America Regular, Roboto,Helvetica, Arial, sans-serif;
                                                                                font-weight: 400;
                                                                                font-size: 16px;
                                                                                line-height: 21px;
                                                                                color: rgb(79, 79, 101);
                                                                            ">
                                                                            <span>'.$rowWellnessCompany['visiting_address'].' '.$rowWellnessCompany['d_port_number'].'</span>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <tr class="spacer">
                                                    <td height="12px" colspan="2" style="
                                                            font-size: 12px;
                                                            line-height: 12px;
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                        ">
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr class="spacer">
                                                    <td height="12px" colspan="2" style="
                                                            font-size: 12px;
                                                            line-height: 12px;
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                        ">
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <!-- QUESTIONS -->
                                            </tbody>
                                        </table>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
                <!-- FOOTER -->
                <tr>
                    <td align="center" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; width: 580px; margin: 0 auto;">
                        <!-- Will most likely required a feature flag -->
                        <!--[if (gte mso 9)|(IE)]>
<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
<tr>
<td align="center" valign="top" width="600">
<![endif]-->
                        <table width="100%" border="0" cellspacing="0" cellpadding="0" align="center" class="Content-container" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; padding-left: 60px; padding-right: 60px;">
                            <tbody>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr>
                                    <td align="center" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        <a href="https://www.exploretock.com" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;">
                                            <img src="https://storage.googleapis.com/tock-public-assets/images-email-template/tock-brandmark-color.png" width="30" height="30" alt="Tock" border="0" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block;">
                                        </a>
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="18px" colspan="2" style="font-size: 18px; line-height: 18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr>
                                    <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        <div class="text-xsmall textColorNormal" style="font-family: GT America Regular, Roboto,Helvetica, Arial, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                                             2019 Tock, Inc.
                                        </div>
                                        <div class="text-xsmall textColorNormal" style="font-family: GT America Regular, Roboto,Helvetica, Arial, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                                            All Rights Reserved
                                        </div>
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <!--[if (gte mso 9)|(IE)]>
</td>
</tr>
</table>
<![endif]-->
                    </td>
                </tr>
            </tbody>
        </table>
    
</body></html>';

			 
				try {
					sendEmail($subject, $to, $emailContent);
					
					}

					 
					catch(Exception $e) {
					   
					}
					catch (Error $e) {
						 
							}
					 
				$stmt = $dbCon->prepare("select country_code from phone_country_code where id=?");
				
				/* bind parameters for markers */
				$stmt->bind_param("i", $rowRoomservice['country_of_residence']);
				$stmt->execute();
				$result_phone = $stmt->get_result();
				$row_phone = $result_phone->fetch_assoc();
				 
				$to            = '+'.trim($row_phone['country_code']).''.trim($rowRoomservice['phone_number']);
				$surl=getShortUrl($url);
				$emailContent ="Your booking has been confirmed at ".$rowWellnessCompany['company_name']." please scan qr code on reception to confirm your visit. you can check qr code here: ".$surl;
				try {
					$res=sendSms($subject, $to, $emailContent);
					
					}

					 
					catch(Exception $e) {
					   
					}
					catch (Error $e) {
						 
							}
				
			
			}
			else
			{
				$to      = $rowRoomservice['email'];
				$subject = "Booking Confirmed";
				$emailContent ='<html><head>
        <title>Reservation confirmed</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <style type="text/css">
            /* GT AMERICA */

            @font-face {
                font-display: fallback;
                font-family: "GT America Regular";
                font-weight: 400;
                src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"),
                    url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
            }

            @font-face {
                font-display: fallback;
                font-family: "GT America Medium";
                font-weight: 600;
                src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"),
                    url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
            }

            @font-face {
                font-display: fallback;
                font-family: "GT America Condensed Bold";
                font-weight: 700;
                src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"),
                    url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
            }

            /* CLIENT-SPECIFIC RESET */

            body,
            table,
            td,
            a {
                -webkit-text-size-adjust: 100%;
                -ms-text-size-adjust: 100%;
            }

            /* Prevent WebKit and Windows mobile changing default text sizes */

            table,
            td {
                mso-table-lspace: 0pt;
                mso-table-rspace: 0pt;
            }

            /* Remove spacing between tables in Outlook 2007 and up */

            img {
                -ms-interpolation-mode: bicubic;
            }

            /* Allow smoother rendering of resized image in Internet Explorer */

            .im {
                color: inherit !important;
            }

            /* DEVICE-SPECIFIC RESET */

            a[x-apple-data-detectors] {
                color: inherit !important;
                text-decoration: none !important;
                font-size: inherit !important;
                font-family: inherit !important;
                font-weight: inherit !important;
                line-height: inherit !important;
            }

            /* iOS BLUE LINKS */

            /* RESET */

            img {
                border: 0;
                height: auto;
                line-height: 100%;
                outline: none;
                text-decoration: none;
                display: block;
            }

            table {
                border-collapse: collapse;
            }

            table td {
                border-collapse: collapse;
                display: table-cell;
            }

            body {
                height: 100% !important;
                margin: 0 !important;
                padding: 0 !important;
                width: 100% !important;
            }

            /* BG COLORS */

            .mainTable {
                background-color: #f0f0f0;
            }

            .mainTable--hospitality {
                background-color: #f7f2ed;
            }

            html {
                background-color: #f0f0f0;
            }

            /* VARIABLES */

            .bg-white {
                background-color: white;
            }

            .hr {
                /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
                background-color: #d3d3d8;
                border-collapse: collapse;
                mso-table-lspace: 0pt;
                mso-table-rspace: 0pt;
                mso-line-height-rule: exactly;
                line-height: 1px;
            }

            .textAlignLeft {
                text-align: left !important;
            }

            .textAlignRight {
                text-align: right !important;
            }

            .textAlignCenter {
                text-align: center !important;
            }

            .mt1 {
                margin-top: 6px;
            }

            .list {
                padding-left: 18px;
                margin: 0;
            }

            /* TYPOGRAPHY */

            body {
                font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 400;
                color: #4f4f65;
                -webkit-font-smoothing: antialiased;
                -ms-text-size-adjust: 100%;
                -moz-osx-font-smoothing: grayscale;
                font-smoothing: always;
                text-rendering: optimizeLegibility;
            }

            .h1 {
                font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 700;
                vertical-align: middle;
                font-size: 36px;
                line-height: 42px;
            }

            .h2 {
                font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 600;
                vertical-align: middle;
                font-size: 16px;
                line-height: 24px;
            }

            .text {
                font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 400;
                font-size: 16px;
                line-height: 21px;
            }

            .text-list {
                font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 400;
                font-size: 16px;
                line-height: 25px;
            }

            .textSmall {
                font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 400;
                font-size: 14px;
            }

            .text-xsmall {
                font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
                font-size: 11px;
                text-transform: uppercase;
                line-height: 22px;
                letter-spacing: 1px;
            }

            .text-bold {
                font-weight: 600;
            }

            .text-link {
                text-decoration: underline;
            }

            .text-linkNoUnderline {
                text-decoration: none;
            }

            .text-strike {
                text-decoration: line-through;
            }

            /* FONT COLORS */

            .textColorDark {
                color: #23233e;
            }

            .textColorNormal {
                color: #4f4f65;
            }

            .textColorBlue {
                color: #2020c0;
            }

            .textColorGrayDark {
                color: #7b7b8b;
            }

            .textColorGray {
                color: #a5a8ad;
            }

            .textColorWhite {
                color: #ffffff;
            }

            .textColorRed {
                color: #df3232;
            }

            /* BUTTON */

            .Button-primary-wrapper {
                border-radius: 3px;
                background-color: #2020c0;
            }

            .Button-primary {
                font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
                border-radius: 3px;
                border: 1px solid #2020c0;
                color: #ffffff;
                display: block;
                font-size: 16px;
                font-weight: 600;
                padding: 18px;
                text-decoration: none;
            }

            .Button-secondary-wrapper {
                border-radius: 3px;
                background-color: #ffffff;
            }

            .Button-secondary {
                font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
                border-radius: 3px;
                border: 1px solid #2020c0;
                color: #2020c0;
                display: block;
                font-size: 16px;
                font-weight: 600;
                padding: 18px;
                text-decoration: none;
            }

            /* LAYOUT */

            .Content-container {
                padding-left: 60px;
                padding-right: 60px;
            }

            .Content-container--main {
                padding-top: 54px;
                padding-bottom: 60px;
            }

            .Content {
                width: 580px;
                margin: 0 auto;
            }

            .wrapper {
                max-width: 600px;
            }

            .section {
                padding: 24px 0px;
                border-bottom: 1px solid #d3d3d8;
            }

            .section--noBorder {
                padding: 24px 0px 0;
            }

            .section--last {
                padding: 24px 0px;
            }

            .message {
                background-color: #f4f4f5;
                padding: 18px;
            }

            .card {
                border: 1px solid #d3d3d8;
                padding: 18px;
            }

            /* HEADER */

            .header-tockLogoImage {
                display: block;
                color: #f0f0f0;
            }

            .header-heroImage {
                padding-bottom: 24px;
            }

            /* PREHEADER */

            .preheader {
                display: none;
                font-size: 1px;
                color: #ffffff;
                line-height: 1px;
                max-height: 0px;
                max-width: 0px;
                opacity: 0;
                overflow: hidden;
            }

            /* BANNER */

            .notice {
                padding: 12px;
                background: #23233e;
                color: #ffffff;
                display: block;
                font-size: 14px;
                font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 600;
            }

            /* INTRO */

            .section--intro {
                padding-bottom: 48px;
            }

            /* BOOKING INFO */

            .business-logo__container {
                width: 48px;
                height: 48px;
                border-radius: 3px;
                border: 1px solid #d3d3d8;
                overflow: hidden;
            }

            .business-logo__image {
                border: 1px solid transparent;
                border-radius: 3px;
                width: 48px;
                height: 48px;
                display: block;
            }

            .business-address--address {
                width: 50%;
            }

            .business-address--map {
                width: 50%;
            }

            .business-address--map-image {
                width: 100%;
            }

            /* MOBILE TICKETS */

            .mobile-ticket--description {
                width: 65%;
                margin-top: 12px;
                margin-right: 5%;
            }

            .mobile-ticket--code {
                width: 30%;
            }

            .mobile-ticket--code-image {
                width: 100%;
            }

            /* RESERVATION ACTIONS */

            .linksTable {
                border-bottom: 1px solid #d3d3d8;
            }

            .linksTableRow {
                padding: 24px 12px;
            }

            .actions-icon {
                vertical-align: middle;
            }

            .actions-text {
                vertical-align: middle;
            }

            /* RECEIPT */

            .receipt__container {
                border: 1px solid #d3d3d8;
                padding: 24px;
            }

            .receipt__row {
                border-top: 1px solid #d3d3d8;
            }

            /* FEEDBACK ICONS */

            .feedback-link {
                border: 1px solid #d4d5da;
                border-radius: 3px;
                display: inline-block;
                width: calc(32% - 2px);
                padding: 10px 0;
            }

            .feedback-link-bumper {
                display: inline-block;
                width: 1%;
            }

            .feedback-link img {
                height: 50px;
                width: 50px;
            }

            /* SOCIAL ICONS */

            .social-link {
                display: inline-block;
                width: auto;
            }

            .social-link-text {
                padding: 14px 24px 14px 14px;
            }

            /* TABLET STYLES */

            @media screen and (max-width: 648px) {
                /* DEVICE-SPECIFIC RESET */
                div[style*="margin: 16px 0;"] {
                    margin: 0 !important;
                }
                /* ANDROID CENTER FIX */
                /* LAYOUT */
                .wrapper {
                    width: 100% !important;
                    max-width: 100% !important;
                }
                .Content {
                    width: 90% !important;
                }
                .Content-container {
                    padding-left: 36px !important;
                    padding-right: 36px !important;
                }
                .Content-container--main {
                    padding-top: 30px !important;
                    padding-bottom: 42px !important;
                }
                .responsiveTable {
                    width: 100% !important;
                }
                /* RESERVATION ACTIONS */
                .linksTableRow {
                    padding-left: 0 !important;
                    padding-right: 0 !important;
                    padding-top: 12px !important;
                    padding-bottom: 12px !important;
                }
                .linksTableRow--borderRight {
                    border-right: none !important;
                    padding-left: 0 !important;
                    padding-right: 0 !important;
                }
                /* FEEDBACK LINK */
                .feedback-link img {
                    height: 38px !important;
                    width: 38px !important;
                }
            }

            /* MOBILE STYLES */

            @media screen and (max-width: 480px) {
                /* TYPOGRAPHY */
                .h1 {
                    font-size: 30px !important;
                    line-height: 30px !important;
                }
                .text {
                    font-size: 16px !important;
                    line-height: 22px !important;
                }
                /* BUTTON */
                .mobile-buttonContainer {
                    width: 100% !important;
                }
                /* LAYOUT */
                .Content {
                    width: 100% !important;
                }
                .Content-container {
                    padding-left: 18px !important;
                    padding-right: 18px !important;
                }
                .Content-container--main {
                    padding-top: 24px !important;
                    padding-bottom: 30px !important;
                }
                .section {
                    padding: 18px 0 !important;
                }
                .section--last {
                    padding: 18px 0 !important;
                }
                .header {
                    padding: 0 18px !important;
                }
                .business-address--address {
                    width: 100% !important;
                }
                .business-address--map {
                    margin-top: 30px !important;
                    width: 100% !important;
                }
                .mobile-ticket--description {
                    width: 100% !important;
                    margin-top: 0px !important;
                }
                .mobile-ticket--code {
                    margin-top: 30px !important;
                    margin-left: 0;
                    width: 100% !important;
                }
                /* RECEIPT */
                .receipt__container {
                    padding: 12px !important;
                }
                /* SOCIAL ICONS */
                .social-link {
                    display: block !important;
                    width: 100% !important;
                    border-bottom: 1px solid #d3d3d8 !important;
                }
                /* INTRO */
                .section--intro {
                    padding-top: 18px !important;
                    padding-bottom: 18px !important;
                }
            }
        </style>

        <!--[if mso]>
            <style type="text/css">
                .h1 {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-weight: 700 !important;
                    vertical-align: middle !important;
                    font-size: 36px !important;
                    mso-line-height-rule: exactly;
                    line-height: 42px !important;
                }
                .h2 {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-weight: 600 !important;
                    vertical-align: middle !important;
                    font-size: 16px !important;
                    mso-line-height-rule: exactly;
                    line-height: 24px !important;
                }
                .text {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-weight: 400 !important;
                    font-size: 16px !important;
                    mso-line-height-rule: exactly;
                    line-height: 21px !important;
                }
                .text-list {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-weight: 400 !important;
                    font-size: 16px !important;
                    mso-line-height-rule: exactly;
                    line-height: 25px !important;
                }
                .textSmall {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-weight: 400 !important;
                    font-size: 14px !important;
                }
                .text-xsmall {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-size: 11px !important;
                    text-transform: uppercase !important;
                    mso-line-height-rule: exactly;
                    line-height: 22px !important;
                    letter-spacing: 1px !important;
                }
                .text-bold {
                    font-weight: 600 !important;
                }
                .text-link {
                    text-decoration: underline !important;
                }
                .text-linkNoUnderline {
                    text-decoration: none !important;
                }
                .text-strike {
                    text-decoration: line-through !important;
                }
                .textColorDark {
                    color: #23233e !important;
                }
                .textColorNormal {
                    color: #4f4f65 !important;
                }
                .textColorBlue {
                    color: #2020c0 !important;
                }
                .textColorGray {
                    color: #a5a8ad !important;
                }
                .textColorWhite {
                    color: #ffffff !important;
                }
                .Button-primary {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    border-radius: 3px !important;
                    border: 1px solid #2020c0 !important;
                    color: #ffffff !important;
                    display: block !important;
                    font-size: 16px !important;
                    font-weight: 600 !important;
                    padding: 18px !important;
                    text-decoration: none !important;
                }
                .Button-secondary {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    border-radius: 3px !important;
                    border: 1px solid #2020c0 !important;
                    color: #2020c0 !important;
                    display: block !important;
                    font-size: 16px !important;
                    font-weight: 600 !important;
                    padding: 18px !important;
                    text-decoration: none !important;
                }
            </style>
        <![endif]-->
        <!-- HIDDEN PREHEADER TEXT -->
    </head>
    <body>
        <div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;"></div>
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="mainTable" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: rgb(240, 240, 240);">
            <tbody>
                <tr>
                    <td style="
                            display: none !important;
                            visibility: hidden;
                            mso-hide: all;
                            font-size: 1px;
                            color: #ffffff;
                            line-height: 1px;
                            max-height: 0px;
                            max-width: 0px;
                            opacity: 0;
                            overflow: hidden;
                            -webkit-text-size-adjust: 100%;
                            -ms-text-size-adjust: 100%;
                            mso-table-lspace: 0pt;
                            mso-table-rspace: 0pt;
                            border-collapse: collapse;
                            display: table-cell;
                        ">
                        We are thrilled that you will be joining us. If yo...
                    </td>
                    <!-- HEADER -->
                </tr>
                <tr>
                    <td align="center" class="header" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
                        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 580px; margin: 0 auto;">
                            <tbody>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr>
                                    <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        <h1 style="font-size: 33px; font-weight: 800; line-height: 30px;">Dstricts</h1>
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <!--[if (gte mso 9)|(IE)]>
    </td>
    </tr>
    </table>
    <![endif]-->
                    </td>
                </tr>
                <!-- CONTENT -->
                <tr>
                    <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
                        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content bg-white" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: white; width: 580px; margin: 0 auto;">
                            <tbody>
                                <tr>
                                    <td class="Content-container Content-container--main text textColorNormal" style="
                                            -webkit-text-size-adjust: 100%;
                                            -ms-text-size-adjust: 100%;
                                            mso-table-lspace: 0pt;
                                            mso-table-rspace: 0pt;
                                            border-collapse: collapse;
                                            display: table-cell;
                                            font-family: GT America Regular, Roboto, Helvetica, Arial, sans-serif;
                                            font-weight: 400;
                                            font-size: 16px;
                                            line-height: 21px;
                                            color: rgb(79, 79, 101);
                                            padding-left: 60px;
                                            padding-right: 60px;
                                            padding-top: 54px;
                                            padding-bottom: 60px;
                                        ">
                                        <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                            <!-- RESTAURANT INFO -->
                                            <tbody>
                                                <tr>
                                                    <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                        <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                                            <tbody>
                                                                <tr>
                                                                    <td width="12" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                                        &nbsp;
                                                                    </td>
                                                                    <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                                        <span class="h2 textColorDark" style="
                                                                                font-family: GT America Medium, Roboto, Helvetica, Arial, sans-serif;
                                                                                font-weight: 600;
                                                                                vertical-align: middle;
                                                                                font-size: 16px;
                                                                                line-height: 24px;
                                                                                color: rgb(35, 35, 62);
                                                                            ">
                                                                            '.htmlentities($rowRoomservice['first_name'],ENT_NOQUOTES, 'ISO-8859-1').'
                                                                        </span>
                                                                    </td>
                                                                </tr>
                                                                <tr class="spacer">
                                                                    <td height="12px" colspan="2" style="
                                                                            font-size: 12px;
                                                                            line-height: 12px;
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                        ">
                                                                        &nbsp;
                                                                    </td>
                                                                </tr>
                                                                <tr class="spacer">
                                                                    <td height="12px" colspan="2" style="
                                                                            font-size: 12px;
                                                                            line-height: 12px;
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                        ">
                                                                        &nbsp;
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <!-- INTRO -->
                                                <tr>
                                                    <td valign="top" align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                        <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                                            <tbody>
                                                                <tr>
                                                                    <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                                        <span class="h1 textColorDark" style="
                                                                                font-family: GT America Condensed Bold, Roboto Condensed, Roboto, Helvetica, Arial, sans-serif;
                                                                                font-weight: 700;
                                                                                vertical-align: middle;
                                                                                font-size: 36px;
                                                                                line-height: 42px;
                                                                                color: rgb(35, 35, 62);
                                                                            ">
                                                                            Your booking have been confirmed at '.$rowWellnessCompany['company_name'].'
                                                                        </span>
                                                                    </td>
                                                                </tr>
                                                                
                                                                
                                                                
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <!-- MESSAGE -->

                                                <!-- BOOKING INFO -->
                                                
                                                <!-- ADDRESS -->
                                                <tr>
                                                    <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                        <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                                            <tbody>
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <tr class="spacer">
                                                    <td height="18px" colspan="2" style="
                                                            font-size: 18px;
                                                            line-height: 18px;
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                        ">
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr class="spacer">
                                                    <td height="18px" colspan="2" style="
                                                            font-size: 18px;
                                                            line-height: 18px;
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                        ">
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                            background-color: rgb(211, 211, 216);
                                                            border-collapse: collapse;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            mso-line-height-rule: exactly;
                                                            line-height: 1px;
                                                        ">
                                                        <!--[if gte mso 15]>&nbsp;<![endif]-->
                                                    </td>
                                                </tr>

                                                <!-- RECEIPT -->

                                                <tr class="spacer">
                                                    <td height="18px" colspan="2" style="
                                                            font-size: 18px;
                                                            line-height: 18px;
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                        ">
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <!-- EDIT RECEIPT -->
                                                <!-- CANCELLATION POLICY -->
                                                <tr>
                                                    <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                        <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                                            <tbody>
                                                                <tr>
                                                                    <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                                        <div class="text text-bold textColorDark" style="
                                                                                font-family: GT America Regular, Roboto, Helvetica, Arial, sans-serif;
                                                                                font-weight: 400;
                                                                                font-size: 16px;
                                                                                line-height: 21px;
                                                                                font-weight: 600;
                                                                                color: rgb(35, 35, 62);
                                                                            ">
                                                                            Address for meeting
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                                        <div class="text textColorNormal mt1" style="
                                                                                margin-top: 6px;
                                                                                font-family: GT America Regular, Roboto,Helvetica, Arial, sans-serif;
                                                                                font-weight: 400;
                                                                                font-size: 16px;
                                                                                line-height: 21px;
                                                                                color: rgb(79, 79, 101);
                                                                            ">
                                                                            <span>'.$rowWellnessCompany['visiting_address'].' '.$rowWellnessCompany['d_port_number'].'</span>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <tr class="spacer">
                                                    <td height="12px" colspan="2" style="
                                                            font-size: 12px;
                                                            line-height: 12px;
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                        ">
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr class="spacer">
                                                    <td height="12px" colspan="2" style="
                                                            font-size: 12px;
                                                            line-height: 12px;
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                        ">
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <!-- QUESTIONS -->
                                            </tbody>
                                        </table>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
                <!-- FOOTER -->
                <tr>
                    <td align="center" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; width: 580px; margin: 0 auto;">
                        <!-- Will most likely required a feature flag -->
                        <!--[if (gte mso 9)|(IE)]>
<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
<tr>
<td align="center" valign="top" width="600">
<![endif]-->
                        <table width="100%" border="0" cellspacing="0" cellpadding="0" align="center" class="Content-container" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; padding-left: 60px; padding-right: 60px;">
                            <tbody>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr>
                                    <td align="center" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        <a href="https://www.exploretock.com" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;">
                                            <img src="https://storage.googleapis.com/tock-public-assets/images-email-template/tock-brandmark-color.png" width="30" height="30" alt="Tock" border="0" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block;">
                                        </a>
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="18px" colspan="2" style="font-size: 18px; line-height: 18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr>
                                    <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        <div class="text-xsmall textColorNormal" style="font-family: GT America Regular, Roboto,Helvetica, Arial, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                                             2019 Tock, Inc.
                                        </div>
                                        <div class="text-xsmall textColorNormal" style="font-family: GT America Regular, Roboto,Helvetica, Arial, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                                            All Rights Reserved
                                        </div>
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <!--[if (gte mso 9)|(IE)]>
</td>
</tr>
</table>
<![endif]-->
                    </td>
                </tr>
            </tbody>
        </table>
    
</body></html>';	
				try {
					 sendEmail($subject, $to, $emailContent);
					}

					 
					catch(Exception $e) {
					   
					}
					catch (Error $e) {
	 
							}
			}
			
			}
			else
			{
				$to      = $rowRoomservice['email'];
				$subject = "Booking Confirmed";
				$emailContent ='<html><head>
        <title>Reservation confirmed</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <style type="text/css">
            /* GT AMERICA */

            @font-face {
                font-display: fallback;
                font-family: "GT America Regular";
                font-weight: 400;
                src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"),
                    url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
            }

            @font-face {
                font-display: fallback;
                font-family: "GT America Medium";
                font-weight: 600;
                src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"),
                    url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
            }

            @font-face {
                font-display: fallback;
                font-family: "GT America Condensed Bold";
                font-weight: 700;
                src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"),
                    url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
            }

            /* CLIENT-SPECIFIC RESET */

            body,
            table,
            td,
            a {
                -webkit-text-size-adjust: 100%;
                -ms-text-size-adjust: 100%;
            }

            /* Prevent WebKit and Windows mobile changing default text sizes */

            table,
            td {
                mso-table-lspace: 0pt;
                mso-table-rspace: 0pt;
            }

            /* Remove spacing between tables in Outlook 2007 and up */

            img {
                -ms-interpolation-mode: bicubic;
            }

            /* Allow smoother rendering of resized image in Internet Explorer */

            .im {
                color: inherit !important;
            }

            /* DEVICE-SPECIFIC RESET */

            a[x-apple-data-detectors] {
                color: inherit !important;
                text-decoration: none !important;
                font-size: inherit !important;
                font-family: inherit !important;
                font-weight: inherit !important;
                line-height: inherit !important;
            }

            /* iOS BLUE LINKS */

            /* RESET */

            img {
                border: 0;
                height: auto;
                line-height: 100%;
                outline: none;
                text-decoration: none;
                display: block;
            }

            table {
                border-collapse: collapse;
            }

            table td {
                border-collapse: collapse;
                display: table-cell;
            }

            body {
                height: 100% !important;
                margin: 0 !important;
                padding: 0 !important;
                width: 100% !important;
            }

            /* BG COLORS */

            .mainTable {
                background-color: #f0f0f0;
            }

            .mainTable--hospitality {
                background-color: #f7f2ed;
            }

            html {
                background-color: #f0f0f0;
            }

            /* VARIABLES */

            .bg-white {
                background-color: white;
            }

            .hr {
                /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
                background-color: #d3d3d8;
                border-collapse: collapse;
                mso-table-lspace: 0pt;
                mso-table-rspace: 0pt;
                mso-line-height-rule: exactly;
                line-height: 1px;
            }

            .textAlignLeft {
                text-align: left !important;
            }

            .textAlignRight {
                text-align: right !important;
            }

            .textAlignCenter {
                text-align: center !important;
            }

            .mt1 {
                margin-top: 6px;
            }

            .list {
                padding-left: 18px;
                margin: 0;
            }

            /* TYPOGRAPHY */

            body {
                font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 400;
                color: #4f4f65;
                -webkit-font-smoothing: antialiased;
                -ms-text-size-adjust: 100%;
                -moz-osx-font-smoothing: grayscale;
                font-smoothing: always;
                text-rendering: optimizeLegibility;
            }

            .h1 {
                font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 700;
                vertical-align: middle;
                font-size: 36px;
                line-height: 42px;
            }

            .h2 {
                font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 600;
                vertical-align: middle;
                font-size: 16px;
                line-height: 24px;
            }

            .text {
                font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 400;
                font-size: 16px;
                line-height: 21px;
            }

            .text-list {
                font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 400;
                font-size: 16px;
                line-height: 25px;
            }

            .textSmall {
                font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 400;
                font-size: 14px;
            }

            .text-xsmall {
                font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
                font-size: 11px;
                text-transform: uppercase;
                line-height: 22px;
                letter-spacing: 1px;
            }

            .text-bold {
                font-weight: 600;
            }

            .text-link {
                text-decoration: underline;
            }

            .text-linkNoUnderline {
                text-decoration: none;
            }

            .text-strike {
                text-decoration: line-through;
            }

            /* FONT COLORS */

            .textColorDark {
                color: #23233e;
            }

            .textColorNormal {
                color: #4f4f65;
            }

            .textColorBlue {
                color: #2020c0;
            }

            .textColorGrayDark {
                color: #7b7b8b;
            }

            .textColorGray {
                color: #a5a8ad;
            }

            .textColorWhite {
                color: #ffffff;
            }

            .textColorRed {
                color: #df3232;
            }

            /* BUTTON */

            .Button-primary-wrapper {
                border-radius: 3px;
                background-color: #2020c0;
            }

            .Button-primary {
                font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
                border-radius: 3px;
                border: 1px solid #2020c0;
                color: #ffffff;
                display: block;
                font-size: 16px;
                font-weight: 600;
                padding: 18px;
                text-decoration: none;
            }

            .Button-secondary-wrapper {
                border-radius: 3px;
                background-color: #ffffff;
            }

            .Button-secondary {
                font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
                border-radius: 3px;
                border: 1px solid #2020c0;
                color: #2020c0;
                display: block;
                font-size: 16px;
                font-weight: 600;
                padding: 18px;
                text-decoration: none;
            }

            /* LAYOUT */

            .Content-container {
                padding-left: 60px;
                padding-right: 60px;
            }

            .Content-container--main {
                padding-top: 54px;
                padding-bottom: 60px;
            }

            .Content {
                width: 580px;
                margin: 0 auto;
            }

            .wrapper {
                max-width: 600px;
            }

            .section {
                padding: 24px 0px;
                border-bottom: 1px solid #d3d3d8;
            }

            .section--noBorder {
                padding: 24px 0px 0;
            }

            .section--last {
                padding: 24px 0px;
            }

            .message {
                background-color: #f4f4f5;
                padding: 18px;
            }

            .card {
                border: 1px solid #d3d3d8;
                padding: 18px;
            }

            /* HEADER */

            .header-tockLogoImage {
                display: block;
                color: #f0f0f0;
            }

            .header-heroImage {
                padding-bottom: 24px;
            }

            /* PREHEADER */

            .preheader {
                display: none;
                font-size: 1px;
                color: #ffffff;
                line-height: 1px;
                max-height: 0px;
                max-width: 0px;
                opacity: 0;
                overflow: hidden;
            }

            /* BANNER */

            .notice {
                padding: 12px;
                background: #23233e;
                color: #ffffff;
                display: block;
                font-size: 14px;
                font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 600;
            }

            /* INTRO */

            .section--intro {
                padding-bottom: 48px;
            }

            /* BOOKING INFO */

            .business-logo__container {
                width: 48px;
                height: 48px;
                border-radius: 3px;
                border: 1px solid #d3d3d8;
                overflow: hidden;
            }

            .business-logo__image {
                border: 1px solid transparent;
                border-radius: 3px;
                width: 48px;
                height: 48px;
                display: block;
            }

            .business-address--address {
                width: 50%;
            }

            .business-address--map {
                width: 50%;
            }

            .business-address--map-image {
                width: 100%;
            }

            /* MOBILE TICKETS */

            .mobile-ticket--description {
                width: 65%;
                margin-top: 12px;
                margin-right: 5%;
            }

            .mobile-ticket--code {
                width: 30%;
            }

            .mobile-ticket--code-image {
                width: 100%;
            }

            /* RESERVATION ACTIONS */

            .linksTable {
                border-bottom: 1px solid #d3d3d8;
            }

            .linksTableRow {
                padding: 24px 12px;
            }

            .actions-icon {
                vertical-align: middle;
            }

            .actions-text {
                vertical-align: middle;
            }

            /* RECEIPT */

            .receipt__container {
                border: 1px solid #d3d3d8;
                padding: 24px;
            }

            .receipt__row {
                border-top: 1px solid #d3d3d8;
            }

            /* FEEDBACK ICONS */

            .feedback-link {
                border: 1px solid #d4d5da;
                border-radius: 3px;
                display: inline-block;
                width: calc(32% - 2px);
                padding: 10px 0;
            }

            .feedback-link-bumper {
                display: inline-block;
                width: 1%;
            }

            .feedback-link img {
                height: 50px;
                width: 50px;
            }

            /* SOCIAL ICONS */

            .social-link {
                display: inline-block;
                width: auto;
            }

            .social-link-text {
                padding: 14px 24px 14px 14px;
            }

            /* TABLET STYLES */

            @media screen and (max-width: 648px) {
                /* DEVICE-SPECIFIC RESET */
                div[style*="margin: 16px 0;"] {
                    margin: 0 !important;
                }
                /* ANDROID CENTER FIX */
                /* LAYOUT */
                .wrapper {
                    width: 100% !important;
                    max-width: 100% !important;
                }
                .Content {
                    width: 90% !important;
                }
                .Content-container {
                    padding-left: 36px !important;
                    padding-right: 36px !important;
                }
                .Content-container--main {
                    padding-top: 30px !important;
                    padding-bottom: 42px !important;
                }
                .responsiveTable {
                    width: 100% !important;
                }
                /* RESERVATION ACTIONS */
                .linksTableRow {
                    padding-left: 0 !important;
                    padding-right: 0 !important;
                    padding-top: 12px !important;
                    padding-bottom: 12px !important;
                }
                .linksTableRow--borderRight {
                    border-right: none !important;
                    padding-left: 0 !important;
                    padding-right: 0 !important;
                }
                /* FEEDBACK LINK */
                .feedback-link img {
                    height: 38px !important;
                    width: 38px !important;
                }
            }

            /* MOBILE STYLES */

            @media screen and (max-width: 480px) {
                /* TYPOGRAPHY */
                .h1 {
                    font-size: 30px !important;
                    line-height: 30px !important;
                }
                .text {
                    font-size: 16px !important;
                    line-height: 22px !important;
                }
                /* BUTTON */
                .mobile-buttonContainer {
                    width: 100% !important;
                }
                /* LAYOUT */
                .Content {
                    width: 100% !important;
                }
                .Content-container {
                    padding-left: 18px !important;
                    padding-right: 18px !important;
                }
                .Content-container--main {
                    padding-top: 24px !important;
                    padding-bottom: 30px !important;
                }
                .section {
                    padding: 18px 0 !important;
                }
                .section--last {
                    padding: 18px 0 !important;
                }
                .header {
                    padding: 0 18px !important;
                }
                .business-address--address {
                    width: 100% !important;
                }
                .business-address--map {
                    margin-top: 30px !important;
                    width: 100% !important;
                }
                .mobile-ticket--description {
                    width: 100% !important;
                    margin-top: 0px !important;
                }
                .mobile-ticket--code {
                    margin-top: 30px !important;
                    margin-left: 0;
                    width: 100% !important;
                }
                /* RECEIPT */
                .receipt__container {
                    padding: 12px !important;
                }
                /* SOCIAL ICONS */
                .social-link {
                    display: block !important;
                    width: 100% !important;
                    border-bottom: 1px solid #d3d3d8 !important;
                }
                /* INTRO */
                .section--intro {
                    padding-top: 18px !important;
                    padding-bottom: 18px !important;
                }
            }
        </style>

        <!--[if mso]>
            <style type="text/css">
                .h1 {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-weight: 700 !important;
                    vertical-align: middle !important;
                    font-size: 36px !important;
                    mso-line-height-rule: exactly;
                    line-height: 42px !important;
                }
                .h2 {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-weight: 600 !important;
                    vertical-align: middle !important;
                    font-size: 16px !important;
                    mso-line-height-rule: exactly;
                    line-height: 24px !important;
                }
                .text {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-weight: 400 !important;
                    font-size: 16px !important;
                    mso-line-height-rule: exactly;
                    line-height: 21px !important;
                }
                .text-list {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-weight: 400 !important;
                    font-size: 16px !important;
                    mso-line-height-rule: exactly;
                    line-height: 25px !important;
                }
                .textSmall {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-weight: 400 !important;
                    font-size: 14px !important;
                }
                .text-xsmall {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-size: 11px !important;
                    text-transform: uppercase !important;
                    mso-line-height-rule: exactly;
                    line-height: 22px !important;
                    letter-spacing: 1px !important;
                }
                .text-bold {
                    font-weight: 600 !important;
                }
                .text-link {
                    text-decoration: underline !important;
                }
                .text-linkNoUnderline {
                    text-decoration: none !important;
                }
                .text-strike {
                    text-decoration: line-through !important;
                }
                .textColorDark {
                    color: #23233e !important;
                }
                .textColorNormal {
                    color: #4f4f65 !important;
                }
                .textColorBlue {
                    color: #2020c0 !important;
                }
                .textColorGray {
                    color: #a5a8ad !important;
                }
                .textColorWhite {
                    color: #ffffff !important;
                }
                .Button-primary {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    border-radius: 3px !important;
                    border: 1px solid #2020c0 !important;
                    color: #ffffff !important;
                    display: block !important;
                    font-size: 16px !important;
                    font-weight: 600 !important;
                    padding: 18px !important;
                    text-decoration: none !important;
                }
                .Button-secondary {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    border-radius: 3px !important;
                    border: 1px solid #2020c0 !important;
                    color: #2020c0 !important;
                    display: block !important;
                    font-size: 16px !important;
                    font-weight: 600 !important;
                    padding: 18px !important;
                    text-decoration: none !important;
                }
            </style>
        <![endif]-->
        <!-- HIDDEN PREHEADER TEXT -->
    </head>
    <body>
        <div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;"></div>
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="mainTable" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: rgb(240, 240, 240);">
            <tbody>
                <tr>
                    <td style="
                            display: none !important;
                            visibility: hidden;
                            mso-hide: all;
                            font-size: 1px;
                            color: #ffffff;
                            line-height: 1px;
                            max-height: 0px;
                            max-width: 0px;
                            opacity: 0;
                            overflow: hidden;
                            -webkit-text-size-adjust: 100%;
                            -ms-text-size-adjust: 100%;
                            mso-table-lspace: 0pt;
                            mso-table-rspace: 0pt;
                            border-collapse: collapse;
                            display: table-cell;
                        ">
                        We are thrilled that you will be joining us. If yo...
                    </td>
                    <!-- HEADER -->
                </tr>
                <tr>
                    <td align="center" class="header" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
                        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 580px; margin: 0 auto;">
                            <tbody>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr>
                                    <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        <h1 style="font-size: 33px; font-weight: 800; line-height: 30px;">Dstricts</h1>
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <!--[if (gte mso 9)|(IE)]>
    </td>
    </tr>
    </table>
    <![endif]-->
                    </td>
                </tr>
                <!-- CONTENT -->
                <tr>
                    <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
                        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content bg-white" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: white; width: 580px; margin: 0 auto;">
                            <tbody>
                                <tr>
                                    <td class="Content-container Content-container--main text textColorNormal" style="
                                            -webkit-text-size-adjust: 100%;
                                            -ms-text-size-adjust: 100%;
                                            mso-table-lspace: 0pt;
                                            mso-table-rspace: 0pt;
                                            border-collapse: collapse;
                                            display: table-cell;
                                            font-family: GT America Regular, Roboto, Helvetica, Arial, sans-serif;
                                            font-weight: 400;
                                            font-size: 16px;
                                            line-height: 21px;
                                            color: rgb(79, 79, 101);
                                            padding-left: 60px;
                                            padding-right: 60px;
                                            padding-top: 54px;
                                            padding-bottom: 60px;
                                        ">
                                        <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                            <!-- RESTAURANT INFO -->
                                            <tbody>
                                                <tr>
                                                    <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                        <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                                            <tbody>
                                                                <tr>
                                                                    <td width="12" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                                        &nbsp;
                                                                    </td>
                                                                    <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                                        <span class="h2 textColorDark" style="
                                                                                font-family: GT America Medium, Roboto, Helvetica, Arial, sans-serif;
                                                                                font-weight: 600;
                                                                                vertical-align: middle;
                                                                                font-size: 16px;
                                                                                line-height: 24px;
                                                                                color: rgb(35, 35, 62);
                                                                            ">
                                                                            '.htmlentities($rowRoomservice['first_name'],ENT_NOQUOTES, 'ISO-8859-1').'
                                                                        </span>
                                                                    </td>
                                                                </tr>
                                                                <tr class="spacer">
                                                                    <td height="12px" colspan="2" style="
                                                                            font-size: 12px;
                                                                            line-height: 12px;
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                        ">
                                                                        &nbsp;
                                                                    </td>
                                                                </tr>
                                                                <tr class="spacer">
                                                                    <td height="12px" colspan="2" style="
                                                                            font-size: 12px;
                                                                            line-height: 12px;
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                        ">
                                                                        &nbsp;
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <!-- INTRO -->
                                                <tr>
                                                    <td valign="top" align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                        <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                                            <tbody>
                                                                <tr>
                                                                    <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                                        <span class="h1 textColorDark" style="
                                                                                font-family: GT America Condensed Bold, Roboto Condensed, Roboto, Helvetica, Arial, sans-serif;
                                                                                font-weight: 700;
                                                                                vertical-align: middle;
                                                                                font-size: 36px;
                                                                                line-height: 42px;
                                                                                color: rgb(35, 35, 62);
                                                                            ">
                                                                            Your booking have been confirmed at '.$rowWellnessCompany['company_name'].'
                                                                        </span>
                                                                    </td>
                                                                </tr>
                                                                
                                                                
                                                                
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <!-- MESSAGE -->

                                                <!-- BOOKING INFO -->
                                                
                                                <!-- ADDRESS -->
                                                <tr>
                                                    <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                        <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                                            <tbody>
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <tr class="spacer">
                                                    <td height="18px" colspan="2" style="
                                                            font-size: 18px;
                                                            line-height: 18px;
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                        ">
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr class="spacer">
                                                    <td height="18px" colspan="2" style="
                                                            font-size: 18px;
                                                            line-height: 18px;
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                        ">
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                            background-color: rgb(211, 211, 216);
                                                            border-collapse: collapse;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            mso-line-height-rule: exactly;
                                                            line-height: 1px;
                                                        ">
                                                        <!--[if gte mso 15]>&nbsp;<![endif]-->
                                                    </td>
                                                </tr>

                                                <!-- RECEIPT -->

                                                <tr class="spacer">
                                                    <td height="18px" colspan="2" style="
                                                            font-size: 18px;
                                                            line-height: 18px;
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                        ">
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <!-- EDIT RECEIPT -->
                                                <!-- CANCELLATION POLICY -->
                                                <tr>
                                                    <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                        <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                                            <tbody>
                                                                <tr>
                                                                    <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                                        <div class="text text-bold textColorDark" style="
                                                                                font-family: GT America Regular, Roboto, Helvetica, Arial, sans-serif;
                                                                                font-weight: 400;
                                                                                font-size: 16px;
                                                                                line-height: 21px;
                                                                                font-weight: 600;
                                                                                color: rgb(35, 35, 62);
                                                                            ">
                                                                            Address for meeting
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                                        <div class="text textColorNormal mt1" style="
                                                                                margin-top: 6px;
                                                                                font-family: GT America Regular, Roboto,Helvetica, Arial, sans-serif;
                                                                                font-weight: 400;
                                                                                font-size: 16px;
                                                                                line-height: 21px;
                                                                                color: rgb(79, 79, 101);
                                                                            ">
                                                                            <span>'.$rowWellnessCompany['visiting_address'].' '.$rowWellnessCompany['d_port_number'].'</span>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <tr class="spacer">
                                                    <td height="12px" colspan="2" style="
                                                            font-size: 12px;
                                                            line-height: 12px;
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                        ">
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr class="spacer">
                                                    <td height="12px" colspan="2" style="
                                                            font-size: 12px;
                                                            line-height: 12px;
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                        ">
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <!-- QUESTIONS -->
                                            </tbody>
                                        </table>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
                <!-- FOOTER -->
                <tr>
                    <td align="center" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; width: 580px; margin: 0 auto;">
                        <!-- Will most likely required a feature flag -->
                        <!--[if (gte mso 9)|(IE)]>
<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
<tr>
<td align="center" valign="top" width="600">
<![endif]-->
                        <table width="100%" border="0" cellspacing="0" cellpadding="0" align="center" class="Content-container" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; padding-left: 60px; padding-right: 60px;">
                            <tbody>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr>
                                    <td align="center" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        <a href="https://www.exploretock.com" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;">
                                            <img src="https://storage.googleapis.com/tock-public-assets/images-email-template/tock-brandmark-color.png" width="30" height="30" alt="Tock" border="0" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block;">
                                        </a>
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="18px" colspan="2" style="font-size: 18px; line-height: 18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr>
                                    <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        <div class="text-xsmall textColorNormal" style="font-family: GT America Regular, Roboto,Helvetica, Arial, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                                             2019 Tock, Inc.
                                        </div>
                                        <div class="text-xsmall textColorNormal" style="font-family: GT America Regular, Roboto,Helvetica, Arial, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                                            All Rights Reserved
                                        </div>
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <!--[if (gte mso 9)|(IE)]>
</td>
</tr>
</table>
<![endif]-->
                    </td>
                </tr>
            </tbody>
        </table>
    
</body></html>';	
				try {
					 sendEmail($subject, $to, $emailContent);
					}

					 
					catch(Exception $e) {
					   
					}
					catch (Error $e) {
	 
							}
			}
			
			}
			else
			{
				$to      = $rowRoomservice['email'];
				$subject = "Booking Confirmed";
				$emailContent ='<html><head>
        <title>Reservation confirmed</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <style type="text/css">
            /* GT AMERICA */

            @font-face {
                font-display: fallback;
                font-family: "GT America Regular";
                font-weight: 400;
                src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.woff") format("woff"),
                    url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Regular.ttf") format("truetype");
            }

            @font-face {
                font-display: fallback;
                font-family: "GT America Medium";
                font-weight: 600;
                src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.woff") format("woff"),
                    url("https://www.exploretock.com/fonts/gt-america/GT-America-Standard-Medium.ttf") format("truetype");
            }

            @font-face {
                font-display: fallback;
                font-family: "GT America Condensed Bold";
                font-weight: 700;
                src: url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff2") format("woff2"), url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.woff") format("woff"),
                    url("https://www.exploretock.com/fonts/gt-america/GT-America-Condensed-Bold.ttf") format("truetype");
            }

            /* CLIENT-SPECIFIC RESET */

            body,
            table,
            td,
            a {
                -webkit-text-size-adjust: 100%;
                -ms-text-size-adjust: 100%;
            }

            /* Prevent WebKit and Windows mobile changing default text sizes */

            table,
            td {
                mso-table-lspace: 0pt;
                mso-table-rspace: 0pt;
            }

            /* Remove spacing between tables in Outlook 2007 and up */

            img {
                -ms-interpolation-mode: bicubic;
            }

            /* Allow smoother rendering of resized image in Internet Explorer */

            .im {
                color: inherit !important;
            }

            /* DEVICE-SPECIFIC RESET */

            a[x-apple-data-detectors] {
                color: inherit !important;
                text-decoration: none !important;
                font-size: inherit !important;
                font-family: inherit !important;
                font-weight: inherit !important;
                line-height: inherit !important;
            }

            /* iOS BLUE LINKS */

            /* RESET */

            img {
                border: 0;
                height: auto;
                line-height: 100%;
                outline: none;
                text-decoration: none;
                display: block;
            }

            table {
                border-collapse: collapse;
            }

            table td {
                border-collapse: collapse;
                display: table-cell;
            }

            body {
                height: 100% !important;
                margin: 0 !important;
                padding: 0 !important;
                width: 100% !important;
            }

            /* BG COLORS */

            .mainTable {
                background-color: #f0f0f0;
            }

            .mainTable--hospitality {
                background-color: #f7f2ed;
            }

            html {
                background-color: #f0f0f0;
            }

            /* VARIABLES */

            .bg-white {
                background-color: white;
            }

            .hr {
                /* Cross-client horizontal rule. Adapted from https://litmus.com/community/discussions/4633-is-there-a-reliable-1px-horizontal-rule-method */
                background-color: #d3d3d8;
                border-collapse: collapse;
                mso-table-lspace: 0pt;
                mso-table-rspace: 0pt;
                mso-line-height-rule: exactly;
                line-height: 1px;
            }

            .textAlignLeft {
                text-align: left !important;
            }

            .textAlignRight {
                text-align: right !important;
            }

            .textAlignCenter {
                text-align: center !important;
            }

            .mt1 {
                margin-top: 6px;
            }

            .list {
                padding-left: 18px;
                margin: 0;
            }

            /* TYPOGRAPHY */

            body {
                font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 400;
                color: #4f4f65;
                -webkit-font-smoothing: antialiased;
                -ms-text-size-adjust: 100%;
                -moz-osx-font-smoothing: grayscale;
                font-smoothing: always;
                text-rendering: optimizeLegibility;
            }

            .h1 {
                font-family: "GT America Condensed Bold", "Roboto Condensed", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 700;
                vertical-align: middle;
                font-size: 36px;
                line-height: 42px;
            }

            .h2 {
                font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 600;
                vertical-align: middle;
                font-size: 16px;
                line-height: 24px;
            }

            .text {
                font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 400;
                font-size: 16px;
                line-height: 21px;
            }

            .text-list {
                font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 400;
                font-size: 16px;
                line-height: 25px;
            }

            .textSmall {
                font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 400;
                font-size: 14px;
            }

            .text-xsmall {
                font-family: "GT America Regular", "Roboto", "Helvetica", "Arial", sans-serif;
                font-size: 11px;
                text-transform: uppercase;
                line-height: 22px;
                letter-spacing: 1px;
            }

            .text-bold {
                font-weight: 600;
            }

            .text-link {
                text-decoration: underline;
            }

            .text-linkNoUnderline {
                text-decoration: none;
            }

            .text-strike {
                text-decoration: line-through;
            }

            /* FONT COLORS */

            .textColorDark {
                color: #23233e;
            }

            .textColorNormal {
                color: #4f4f65;
            }

            .textColorBlue {
                color: #2020c0;
            }

            .textColorGrayDark {
                color: #7b7b8b;
            }

            .textColorGray {
                color: #a5a8ad;
            }

            .textColorWhite {
                color: #ffffff;
            }

            .textColorRed {
                color: #df3232;
            }

            /* BUTTON */

            .Button-primary-wrapper {
                border-radius: 3px;
                background-color: #2020c0;
            }

            .Button-primary {
                font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
                border-radius: 3px;
                border: 1px solid #2020c0;
                color: #ffffff;
                display: block;
                font-size: 16px;
                font-weight: 600;
                padding: 18px;
                text-decoration: none;
            }

            .Button-secondary-wrapper {
                border-radius: 3px;
                background-color: #ffffff;
            }

            .Button-secondary {
                font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
                border-radius: 3px;
                border: 1px solid #2020c0;
                color: #2020c0;
                display: block;
                font-size: 16px;
                font-weight: 600;
                padding: 18px;
                text-decoration: none;
            }

            /* LAYOUT */

            .Content-container {
                padding-left: 60px;
                padding-right: 60px;
            }

            .Content-container--main {
                padding-top: 54px;
                padding-bottom: 60px;
            }

            .Content {
                width: 580px;
                margin: 0 auto;
            }

            .wrapper {
                max-width: 600px;
            }

            .section {
                padding: 24px 0px;
                border-bottom: 1px solid #d3d3d8;
            }

            .section--noBorder {
                padding: 24px 0px 0;
            }

            .section--last {
                padding: 24px 0px;
            }

            .message {
                background-color: #f4f4f5;
                padding: 18px;
            }

            .card {
                border: 1px solid #d3d3d8;
                padding: 18px;
            }

            /* HEADER */

            .header-tockLogoImage {
                display: block;
                color: #f0f0f0;
            }

            .header-heroImage {
                padding-bottom: 24px;
            }

            /* PREHEADER */

            .preheader {
                display: none;
                font-size: 1px;
                color: #ffffff;
                line-height: 1px;
                max-height: 0px;
                max-width: 0px;
                opacity: 0;
                overflow: hidden;
            }

            /* BANNER */

            .notice {
                padding: 12px;
                background: #23233e;
                color: #ffffff;
                display: block;
                font-size: 14px;
                font-family: "GT America Medium", "Roboto", "Helvetica", "Arial", sans-serif;
                font-weight: 600;
            }

            /* INTRO */

            .section--intro {
                padding-bottom: 48px;
            }

            /* BOOKING INFO */

            .business-logo__container {
                width: 48px;
                height: 48px;
                border-radius: 3px;
                border: 1px solid #d3d3d8;
                overflow: hidden;
            }

            .business-logo__image {
                border: 1px solid transparent;
                border-radius: 3px;
                width: 48px;
                height: 48px;
                display: block;
            }

            .business-address--address {
                width: 50%;
            }

            .business-address--map {
                width: 50%;
            }

            .business-address--map-image {
                width: 100%;
            }

            /* MOBILE TICKETS */

            .mobile-ticket--description {
                width: 65%;
                margin-top: 12px;
                margin-right: 5%;
            }

            .mobile-ticket--code {
                width: 30%;
            }

            .mobile-ticket--code-image {
                width: 100%;
            }

            /* RESERVATION ACTIONS */

            .linksTable {
                border-bottom: 1px solid #d3d3d8;
            }

            .linksTableRow {
                padding: 24px 12px;
            }

            .actions-icon {
                vertical-align: middle;
            }

            .actions-text {
                vertical-align: middle;
            }

            /* RECEIPT */

            .receipt__container {
                border: 1px solid #d3d3d8;
                padding: 24px;
            }

            .receipt__row {
                border-top: 1px solid #d3d3d8;
            }

            /* FEEDBACK ICONS */

            .feedback-link {
                border: 1px solid #d4d5da;
                border-radius: 3px;
                display: inline-block;
                width: calc(32% - 2px);
                padding: 10px 0;
            }

            .feedback-link-bumper {
                display: inline-block;
                width: 1%;
            }

            .feedback-link img {
                height: 50px;
                width: 50px;
            }

            /* SOCIAL ICONS */

            .social-link {
                display: inline-block;
                width: auto;
            }

            .social-link-text {
                padding: 14px 24px 14px 14px;
            }

            /* TABLET STYLES */

            @media screen and (max-width: 648px) {
                /* DEVICE-SPECIFIC RESET */
                div[style*="margin: 16px 0;"] {
                    margin: 0 !important;
                }
                /* ANDROID CENTER FIX */
                /* LAYOUT */
                .wrapper {
                    width: 100% !important;
                    max-width: 100% !important;
                }
                .Content {
                    width: 90% !important;
                }
                .Content-container {
                    padding-left: 36px !important;
                    padding-right: 36px !important;
                }
                .Content-container--main {
                    padding-top: 30px !important;
                    padding-bottom: 42px !important;
                }
                .responsiveTable {
                    width: 100% !important;
                }
                /* RESERVATION ACTIONS */
                .linksTableRow {
                    padding-left: 0 !important;
                    padding-right: 0 !important;
                    padding-top: 12px !important;
                    padding-bottom: 12px !important;
                }
                .linksTableRow--borderRight {
                    border-right: none !important;
                    padding-left: 0 !important;
                    padding-right: 0 !important;
                }
                /* FEEDBACK LINK */
                .feedback-link img {
                    height: 38px !important;
                    width: 38px !important;
                }
            }

            /* MOBILE STYLES */

            @media screen and (max-width: 480px) {
                /* TYPOGRAPHY */
                .h1 {
                    font-size: 30px !important;
                    line-height: 30px !important;
                }
                .text {
                    font-size: 16px !important;
                    line-height: 22px !important;
                }
                /* BUTTON */
                .mobile-buttonContainer {
                    width: 100% !important;
                }
                /* LAYOUT */
                .Content {
                    width: 100% !important;
                }
                .Content-container {
                    padding-left: 18px !important;
                    padding-right: 18px !important;
                }
                .Content-container--main {
                    padding-top: 24px !important;
                    padding-bottom: 30px !important;
                }
                .section {
                    padding: 18px 0 !important;
                }
                .section--last {
                    padding: 18px 0 !important;
                }
                .header {
                    padding: 0 18px !important;
                }
                .business-address--address {
                    width: 100% !important;
                }
                .business-address--map {
                    margin-top: 30px !important;
                    width: 100% !important;
                }
                .mobile-ticket--description {
                    width: 100% !important;
                    margin-top: 0px !important;
                }
                .mobile-ticket--code {
                    margin-top: 30px !important;
                    margin-left: 0;
                    width: 100% !important;
                }
                /* RECEIPT */
                .receipt__container {
                    padding: 12px !important;
                }
                /* SOCIAL ICONS */
                .social-link {
                    display: block !important;
                    width: 100% !important;
                    border-bottom: 1px solid #d3d3d8 !important;
                }
                /* INTRO */
                .section--intro {
                    padding-top: 18px !important;
                    padding-bottom: 18px !important;
                }
            }
        </style>

        <!--[if mso]>
            <style type="text/css">
                .h1 {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-weight: 700 !important;
                    vertical-align: middle !important;
                    font-size: 36px !important;
                    mso-line-height-rule: exactly;
                    line-height: 42px !important;
                }
                .h2 {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-weight: 600 !important;
                    vertical-align: middle !important;
                    font-size: 16px !important;
                    mso-line-height-rule: exactly;
                    line-height: 24px !important;
                }
                .text {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-weight: 400 !important;
                    font-size: 16px !important;
                    mso-line-height-rule: exactly;
                    line-height: 21px !important;
                }
                .text-list {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-weight: 400 !important;
                    font-size: 16px !important;
                    mso-line-height-rule: exactly;
                    line-height: 25px !important;
                }
                .textSmall {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-weight: 400 !important;
                    font-size: 14px !important;
                }
                .text-xsmall {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    font-size: 11px !important;
                    text-transform: uppercase !important;
                    mso-line-height-rule: exactly;
                    line-height: 22px !important;
                    letter-spacing: 1px !important;
                }
                .text-bold {
                    font-weight: 600 !important;
                }
                .text-link {
                    text-decoration: underline !important;
                }
                .text-linkNoUnderline {
                    text-decoration: none !important;
                }
                .text-strike {
                    text-decoration: line-through !important;
                }
                .textColorDark {
                    color: #23233e !important;
                }
                .textColorNormal {
                    color: #4f4f65 !important;
                }
                .textColorBlue {
                    color: #2020c0 !important;
                }
                .textColorGray {
                    color: #a5a8ad !important;
                }
                .textColorWhite {
                    color: #ffffff !important;
                }
                .Button-primary {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    border-radius: 3px !important;
                    border: 1px solid #2020c0 !important;
                    color: #ffffff !important;
                    display: block !important;
                    font-size: 16px !important;
                    font-weight: 600 !important;
                    padding: 18px !important;
                    text-decoration: none !important;
                }
                .Button-secondary {
                    font-family: "Helvetica", "Arial", sans-serif !important;
                    border-radius: 3px !important;
                    border: 1px solid #2020c0 !important;
                    color: #2020c0 !important;
                    display: block !important;
                    font-size: 16px !important;
                    font-weight: 600 !important;
                    padding: 18px !important;
                    text-decoration: none !important;
                }
            </style>
        <![endif]-->
        <!-- HIDDEN PREHEADER TEXT -->
    </head>
    <body>
        <div class="preheader" style="display: none; font-size: 1px; color: rgb(255, 255, 255); line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;"></div>
        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="mainTable" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: rgb(240, 240, 240);">
            <tbody>
                <tr>
                    <td style="
                            display: none !important;
                            visibility: hidden;
                            mso-hide: all;
                            font-size: 1px;
                            color: #ffffff;
                            line-height: 1px;
                            max-height: 0px;
                            max-width: 0px;
                            opacity: 0;
                            overflow: hidden;
                            -webkit-text-size-adjust: 100%;
                            -ms-text-size-adjust: 100%;
                            mso-table-lspace: 0pt;
                            mso-table-rspace: 0pt;
                            border-collapse: collapse;
                            display: table-cell;
                        ">
                        We are thrilled that you will be joining us. If yo...
                    </td>
                    <!-- HEADER -->
                </tr>
                <tr>
                    <td align="center" class="header" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
                        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; width: 580px; margin: 0 auto;">
                            <tbody>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr>
                                    <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        <h1 style="font-size: 33px; font-weight: 800; line-height: 30px;">Dstricts</h1>
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <!--[if (gte mso 9)|(IE)]>
    </td>
    </tr>
    </table>
    <![endif]-->
                    </td>
                </tr>
                <!-- CONTENT -->
                <tr>
                    <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                        <!--[if (gte mso 9)|(IE)]>
    <table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
    <tr>
    <td align="center" valign="top" width="600">
    <![endif]-->
                        <table border="0" cellpadding="0" cellspacing="0" width="100%" class="Content bg-white" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; background-color: white; width: 580px; margin: 0 auto;">
                            <tbody>
                                <tr>
                                    <td class="Content-container Content-container--main text textColorNormal" style="
                                            -webkit-text-size-adjust: 100%;
                                            -ms-text-size-adjust: 100%;
                                            mso-table-lspace: 0pt;
                                            mso-table-rspace: 0pt;
                                            border-collapse: collapse;
                                            display: table-cell;
                                            font-family: GT America Regular, Roboto, Helvetica, Arial, sans-serif;
                                            font-weight: 400;
                                            font-size: 16px;
                                            line-height: 21px;
                                            color: rgb(79, 79, 101);
                                            padding-left: 60px;
                                            padding-right: 60px;
                                            padding-top: 54px;
                                            padding-bottom: 60px;
                                        ">
                                        <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                            <!-- RESTAURANT INFO -->
                                            <tbody>
                                                <tr>
                                                    <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                        <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                                            <tbody>
                                                                <tr>
                                                                    <td width="12" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                                        &nbsp;
                                                                    </td>
                                                                    <td align="left" valign="middle" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                                        <span class="h2 textColorDark" style="
                                                                                font-family: GT America Medium, Roboto, Helvetica, Arial, sans-serif;
                                                                                font-weight: 600;
                                                                                vertical-align: middle;
                                                                                font-size: 16px;
                                                                                line-height: 24px;
                                                                                color: rgb(35, 35, 62);
                                                                            ">
                                                                            '.htmlentities($rowRoomservice['first_name'],ENT_NOQUOTES, 'ISO-8859-1').'
                                                                        </span>
                                                                    </td>
                                                                </tr>
                                                                <tr class="spacer">
                                                                    <td height="12px" colspan="2" style="
                                                                            font-size: 12px;
                                                                            line-height: 12px;
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                        ">
                                                                        &nbsp;
                                                                    </td>
                                                                </tr>
                                                                <tr class="spacer">
                                                                    <td height="12px" colspan="2" style="
                                                                            font-size: 12px;
                                                                            line-height: 12px;
                                                                            -webkit-text-size-adjust: 100%;
                                                                            -ms-text-size-adjust: 100%;
                                                                            mso-table-lspace: 0pt;
                                                                            mso-table-rspace: 0pt;
                                                                            border-collapse: collapse;
                                                                            display: table-cell;
                                                                        ">
                                                                        &nbsp;
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <!-- INTRO -->
                                                <tr>
                                                    <td valign="top" align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                        <table width="100%" border="0" cellspacing="0" cellpadding="0" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                                            <tbody>
                                                                <tr>
                                                                    <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                                        <span class="h1 textColorDark" style="
                                                                                font-family: GT America Condensed Bold, Roboto Condensed, Roboto, Helvetica, Arial, sans-serif;
                                                                                font-weight: 700;
                                                                                vertical-align: middle;
                                                                                font-size: 36px;
                                                                                line-height: 42px;
                                                                                color: rgb(35, 35, 62);
                                                                            ">
                                                                            Your booking have been confirmed at '.$rowWellnessCompany['company_name'].'
                                                                        </span>
                                                                    </td>
                                                                </tr>
                                                                
                                                                
                                                                
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <!-- MESSAGE -->

                                                <!-- BOOKING INFO -->
                                                
                                                <!-- ADDRESS -->
                                                <tr>
                                                    <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                        <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                                            <tbody>
                                                                
                                                                
                                                                
                                                                
                                                                
                                                                
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <tr class="spacer">
                                                    <td height="18px" colspan="2" style="
                                                            font-size: 18px;
                                                            line-height: 18px;
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                        ">
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr class="spacer">
                                                    <td height="18px" colspan="2" style="
                                                            font-size: 18px;
                                                            line-height: 18px;
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                        ">
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td align="left" colspan="2" valign="top" width="100%" height="1" class="hr" style="
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                            background-color: rgb(211, 211, 216);
                                                            border-collapse: collapse;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            mso-line-height-rule: exactly;
                                                            line-height: 1px;
                                                        ">
                                                        <!--[if gte mso 15]>&nbsp;<![endif]-->
                                                    </td>
                                                </tr>

                                                <!-- RECEIPT -->

                                                <tr class="spacer">
                                                    <td height="18px" colspan="2" style="
                                                            font-size: 18px;
                                                            line-height: 18px;
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                        ">
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <!-- EDIT RECEIPT -->
                                                <!-- CANCELLATION POLICY -->
                                                <tr>
                                                    <td valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                        <table border="0" cellpadding="0" cellspacing="0" width="100%" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse;">
                                                            <tbody>
                                                                <tr>
                                                                    <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                                        <div class="text text-bold textColorDark" style="
                                                                                font-family: GT America Regular, Roboto, Helvetica, Arial, sans-serif;
                                                                                font-weight: 400;
                                                                                font-size: 16px;
                                                                                line-height: 21px;
                                                                                font-weight: 600;
                                                                                color: rgb(35, 35, 62);
                                                                            ">
                                                                            Address for meeting
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td align="left" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                                                        <div class="text textColorNormal mt1" style="
                                                                                margin-top: 6px;
                                                                                font-family: GT America Regular, Roboto,Helvetica, Arial, sans-serif;
                                                                                font-weight: 400;
                                                                                font-size: 16px;
                                                                                line-height: 21px;
                                                                                color: rgb(79, 79, 101);
                                                                            ">
                                                                            <span>'.$rowWellnessCompany['visiting_address'].' '.$rowWellnessCompany['d_port_number'].'</span>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <tr class="spacer">
                                                    <td height="12px" colspan="2" style="
                                                            font-size: 12px;
                                                            line-height: 12px;
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                        ">
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr class="spacer">
                                                    <td height="12px" colspan="2" style="
                                                            font-size: 12px;
                                                            line-height: 12px;
                                                            -webkit-text-size-adjust: 100%;
                                                            -ms-text-size-adjust: 100%;
                                                            mso-table-lspace: 0pt;
                                                            mso-table-rspace: 0pt;
                                                            border-collapse: collapse;
                                                            display: table-cell;
                                                        ">
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <!-- QUESTIONS -->
                                            </tbody>
                                        </table>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
                <!-- FOOTER -->
                <tr>
                    <td align="center" class="Content" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell; width: 580px; margin: 0 auto;">
                        <!-- Will most likely required a feature flag -->
                        <!--[if (gte mso 9)|(IE)]>
<table align="center" border="0" cellspacing="0" cellpadding="0" width="600">
<tr>
<td align="center" valign="top" width="600">
<![endif]-->
                        <table width="100%" border="0" cellspacing="0" cellpadding="0" align="center" class="Content-container" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; padding-left: 60px; padding-right: 60px;">
                            <tbody>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr>
                                    <td align="center" valign="top" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        <a href="https://www.exploretock.com" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;">
                                            <img src="https://storage.googleapis.com/tock-public-assets/images-email-template/tock-brandmark-color.png" width="30" height="30" alt="Tock" border="0" style="-ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; display: block;">
                                        </a>
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="18px" colspan="2" style="font-size: 18px; line-height: 18px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr>
                                    <td align="center" style="-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        <div class="text-xsmall textColorNormal" style="font-family: GT America Regular, Roboto,Helvetica, Arial, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                                             2019 Tock, Inc.
                                        </div>
                                        <div class="text-xsmall textColorNormal" style="font-family: GT America Regular, Roboto,Helvetica, Arial, sans-serif; font-size: 11px; text-transform: uppercase; line-height: 22px; letter-spacing: 1px; color: rgb(79, 79, 101);">
                                            All Rights Reserved
                                        </div>
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr class="spacer">
                                    <td height="12px" colspan="2" style="font-size: 12px; line-height: 12px; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; mso-table-lspace: 0pt; mso-table-rspace: 0pt; border-collapse: collapse; display: table-cell;">
                                        &nbsp;
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <!--[if (gte mso 9)|(IE)]>
</td>
</tr>
</table>
<![endif]-->
                    </td>
                </tr>
            </tbody>
        </table>
    
</body></html>';	
				try {
					 sendEmail($subject, $to, $emailContent);
					}

					 
					catch(Exception $e) {
					   
					}
					catch (Error $e) {
	 
							}
			}
			
				
			$stmt = $dbCon->prepare("update hotel_roomservice_item_ordered set is_verified=1,is_paid=?, company_id=?, card_id=?,customer_id=?,charge_id=?,is_user=?,user_id=? where qloud_checkout_id=? and is_verified=0 and service_type=? and wellness_id=? and booking_person_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("iiissiiiiii", $rowP['is_paid'], $rowP['buyer_id'],$rowP['card_id'],$rowP['customer_id'],$rowP['charge_id'],$rowP['user'],$rowP['user_id'],$data['checkid'],$data['service_type'],$data['wellness_id'],$rowP['user_id']);
			$stmt->execute();	
				
			}
			else
			{
			$stmt = $dbCon->prepare("update company_hotel_amenities_user_request set is_verified=1 where qloud_checkout_id=? and is_verified=0");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['checkid']);
			$stmt->execute();
					
			}
			 
		  
			 if($rowP['service_type']==5)
			{
			  $curl = curl_init();
			  curl_setopt_array($curl, array(
			  CURLOPT_URL => 'https://dstricts.com/user/index.php/DstrictsApp/payCartItemUsingApp',
			  CURLOPT_RETURNTRANSFER => true,
			  CURLOPT_ENCODING => '',
			  CURLOPT_MAXREDIRS => 10,
			  CURLOPT_TIMEOUT => 0,
			  CURLOPT_FOLLOWLOCATION => true,
			  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
			  CURLOPT_CUSTOMREQUEST => 'POST',
			  CURLOPT_POSTFIELDS => array('service_type' => $rowP['service_type'],'is_paid' => $rowP['is_paid'],'user' => $rowP['user'],'buyer_id' => $rowP['buyer_id'],'card_id' => $rowP['card_id'],'user_id' => $rowP['user_id'],'customer_id' => $rowP['customer_id'],'charge_id' => $rowP['charge_id'],'qloud_checkout_id' => $rowP['qloud_checkout_id'],'wellness_id' => $data['wellness_id']),
			));
			}
			else
			{
			$curl = curl_init();
			  curl_setopt_array($curl, array(
			  CURLOPT_URL => 'https://dstricts.com/user/index.php/DstrictsApp/payCartItemUsingApp',
			  CURLOPT_RETURNTRANSFER => true,
			  CURLOPT_ENCODING => '',
			  CURLOPT_MAXREDIRS => 10,
			  CURLOPT_TIMEOUT => 0,
			  CURLOPT_FOLLOWLOCATION => true,
			  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
			  CURLOPT_CUSTOMREQUEST => 'POST',
			  CURLOPT_POSTFIELDS => array('service_type' => $rowP['service_type'],'is_paid' => $rowP['is_paid'],'user' => $rowP['user'],'buyer_id' => $rowP['buyer_id'],'card_id' => $rowP['card_id'],'user_id' => $rowP['user_id'],'customer_id' => $rowP['customer_id'],'charge_id' => $rowP['charge_id'],'qloud_checkout_id' => $rowP['qloud_checkout_id']),
			));	
			}
			$response = curl_exec($curl);
			
			
			curl_close($curl); 
			 
			$stmt->close();
			$dbCon->close();
			return 1;
			
			 
			
		}
		
		function cartInfo($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select * from hotel_roomservice_item_ordered where qloud_checkout_id=? and is_verified=0 and service_type=1");
			/* bind parameters for markers */
			 
			$stmt->bind_param("i",$data['checkid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				$row['enc']=$this->encrypt_decrypt('encrypt',$row['dish_id']);
				array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
			 
			
		}
		
		function cartInfoList($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select * from hotel_roomservice_item_ordered where qloud_checkout_id=? and is_verified=0 and service_type=?");
			/* bind parameters for markers */
			 
			$stmt->bind_param("ii",$data['checkid'],$data['service_type']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				$row['dish_detail']="The price is based upon $".$row['dish_price']." a piece";
			$stmt = $dbCon->prepare("select category_id from drycleaning_services where id=?");
			$stmt->bind_param("i", $row['dish_id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$rowCat= $result2->fetch_assoc();
				if($rowCat['category_id']==1)
				{
				$row['category_name']='Drycleaning';
				 
				}
				else if($rowCat['category_id']==2)
				{
				$row['category_name']='Wash';
				 
				}
				else if($rowCat['category_id']==3)
				{
				$row['category_name']='Ironing';
				 
				}
				array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
			 
			
		}
		
		
		
		
		
	function hotelCompleteInfo($data)
		{
			$dbCon = AppModel::createConnection();
			$checkout_id=$data['id'];
			
			$stmt = $dbCon->prepare("delete from hotel_checkout_dependent_detail where hotel_checkout_id=? and is_verified=0");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $checkout_id);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("delete from hotel_checkout_invitation_info where hotel_checkout_id=? and is_verified=0");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $checkout_id);
			$stmt->execute();
			
			
 			$stmt = $dbCon->prepare("select location_id from company_hotel_room_type_detail where id=(select room_type_id from hotel_checkout_detail where id=?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $checkout_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select checkout_booking_date,checkin_booking_date,checkin_date,checkout_date,guest_adult,guest_children,room_name,hotel_room_type.room_type,hotel_checkout_detail.property_id,first_name from hotel_checkout_detail left join hotel_room_detail on hotel_room_detail.id=hotel_checkout_detail.room_id left join company_hotel_room_type_detail on company_hotel_room_type_detail.id=hotel_checkout_detail.room_type_id left join hotel_room_type on hotel_room_type.id=company_hotel_room_type_detail.room_type left join user_logins on user_logins.id=hotel_checkout_detail.user_id where hotel_checkout_detail.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $checkout_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowDate = $result->fetch_assoc();
			
			
			
			$stmt = $dbCon->prepare("select * from company_wifi  where property_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $rowDate['property_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowWifi = $result->fetch_assoc();

			$stmt = $dbCon->prepare("select count(id) as num from hotel_checkout_invitation_info where hotel_checkout_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $checkout_id);
			$stmt->execute();
			$resultCount = $stmt->get_result();
			$rowDependentCount = $resultCount->fetch_assoc();
			$rowDate['guest_adult']=$rowDate['guest_adult'];
			$rowDate['guest_adult_left']=$rowDate['guest_adult']-$rowDependentCount['num']-1;
			
			$stmt = $dbCon->prepare("select count(id) as num from hotel_checkout_dependent_detail where hotel_checkout_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $checkout_id);
			$stmt->execute();
			$resultCount = $stmt->get_result();
			$rowDependentCount = $resultCount->fetch_assoc();
			$rowDate['guest_children']=$rowDate['guest_children'];
			$rowDate['guest_children_left']=$rowDate['guest_children']-$rowDependentCount['num']-1;
			 if($rowDate['guest_children_left']<0)
			 {
				 $rowDate['guest_children_left']=0;
			 }
			$location_id=$row['location_id'];
			
			$stmt = $dbCon->prepare("select hotel_description,property_location.visiting_address,hotel_name,dry_cleaning,property_location.city_v,property_location.country_v,property_location.postal_code_v from hotel_basic_information left join property_location on property_location.id=hotel_basic_information.property_id left join company_profiles on property_location.company_id=company_profiles.company_id  where property_location.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $location_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowHotel = $result->fetch_assoc();
			$rowHotel['checkin_date']=date('d M',strtotime($rowDate['checkin_date']));
			$rowHotel['checkout_date']=date('d M',strtotime($rowDate['checkout_date']));
			$rowHotel['guest_adult']=$rowDate['guest_adult'];
			$rowHotel['guest_children']=$rowDate['guest_children'];
			$rowHotel['guest_adult_checkedin']=$rowHotel['guest_adult']-$rowDate['guest_adult_left'];
			$rowHotel['guest_children_checkedin']=$rowHotel['guest_children']-$rowDate['guest_children_left'];
			$rowHotel['guest_adult_left']=$rowDate['guest_adult_left'];
			$rowHotel['guest_children_left']=$rowDate['guest_children_left'];
			$rowHotel['guest_checkin_left']=$rowHotel['guest_adult_left']+$rowHotel['guest_children_left'];
			if($rowDate['room_name']==null || $rowDate['room_name']=='')
			{
			$rowHotel['room_name']=1;
			}
			else
			{
			$rowHotel['room_name']=$rowDate['room_name']; 	
			}
			
			$rowHotel['room_type']=$rowDate['room_type']; 
			$rowHotel['first_name']=html_entity_decode($rowDate['first_name'],ENT_NOQUOTES, 'UTF-8');
			$rowHotel['visiting_address']=html_entity_decode($rowHotel['visiting_address'],ENT_NOQUOTES, 'UTF-8').','.$rowHotel['city_v'].','.$rowHotel['country_v'].'-'.$rowHotel['postal_code_v'];
			if(empty($rowWifi))
			{
			$rowHotel['wifi_available']=0; 
			$rowHotel['wifi_username']='';
			$rowHotel['wifi_password']=''; 
			}
			else
			{
			$rowHotel['wifi_available']=1; 
			$rowHotel['wifi_username']=$rowWifi['wifi_username']; 
			$rowHotel['wifi_password']=$rowWifi['wifi_password']; 
			}
			$stmt = $dbCon->prepare("select count(id) as num from hotel_images where property_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $location_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$rowHotel['hotel_images']=array();
			if($row['num']>0)
			{
			$stmt = $dbCon->prepare("select * from hotel_images where property_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $location_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$i=0;
			while($row = $result->fetch_assoc())
			{
			 $filename="../estorecss/".$row['image_path'].".txt"; $value_a=file_get_contents("../estorecss/".$row['image_path'].".txt"); $value_a=str_replace('"','',$value_a); $row['image_path1'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['image_path'].'.jpg' );
			$row['image_path1']=str_replace('../','https://www.qloudid.com/',$row['image_path1']);
			$rowHotel['hotel_images'][$i]['ImageUrl']=$row['image_path1'];
			$i++;
			}	
			}
			else
			{
			$rowHotel['hotel_images']=array();	
			$rowHotel['hotel_images'][0]['ImageUrl']='https://www.qloudid.com/estorecss/tmpnew0.09086000 1600564862.jpg';
			$rowHotel['hotel_images'][1]['ImageUrl']='https://www.qloudid.com/estorecss/tmpnew0.09086000 1600564862.jpg';
			}
			$rowHotel['inhouse_resturants']=array();
			$stmt = $dbCon->prepare("select distinct resturant_type as rtype  from resturant_information where id in (select resturant_id from hotel_roomservice_resturant where hotel_roomservice_resturant.hotel_property_id=? and is_inhouse=1 and company_service_info=1) and is_delivery_available=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $location_id);
			$stmt->execute();
			$result = $stmt->get_result();
			
			while($row = $result->fetch_assoc())
			{
				if($row['rtype']==1)
					$row['resturant_type']='Restaurants';
				else if($row['rtype']==2) 
					$row['resturant_type']='Coffee & Tea';
				else if($row['rtype']==3) 
					$row['resturant_type']='Bakeries';
				else if($row['rtype']==4) 
					$row['resturant_type']='Bars, Pubs & Nightclub';
			array_push($rowHotel['inhouse_resturants'],$row);
			}	
			
			$rowHotel['guest_perk_objects']=array();
			$stmt = $dbCon->prepare("select resturant_information.id,resturant_name as perk_object_name from hotel_roomservice_resturant left join resturant_information on resturant_information.id=hotel_roomservice_resturant.resturant_id where hotel_roomservice_resturant.hotel_property_id=? and is_inhouse=1 and company_service_info=1 and is_delivery_available=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $location_id);
			$stmt->execute();
			$result = $stmt->get_result();
			
			while($row = $result->fetch_assoc())
			{
			$row['image_path']='https://www.qloudid.com/html/usercontent/images/dstricts/eatanddrink.png';
			array_push($rowHotel['guest_perk_objects'],$row);
			}	
			
			$stmt = $dbCon->prepare("select id,center_name as perk_object_name  from wellness_center_information where id in (select wellness_id from hotel_wellness_services where hotel_wellness_services.hotel_property_id=? and is_approved=1)");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $location_id);
			$stmt->execute();
			$result = $stmt->get_result();
			
			while($row = $result->fetch_assoc())
			{
			$row['image_path']='https://www.qloudid.com/html/usercontent/images/dstricts/1.png';
			array_push($rowHotel['guest_perk_objects'],$row);
			}	
			
			$rowHotel['inhouse_fittness']=array();
			$stmt = $dbCon->prepare("select id,center_name,center_type as ctype  from wellness_center_information where id in (select wellness_id from hotel_wellness_services where hotel_wellness_services.hotel_property_id=? and is_approved=1)");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $location_id);
			$stmt->execute();
			$result = $stmt->get_result();
			
			while($row = $result->fetch_assoc())
			{
				if($row['ctype']==1)
					$row['center_type']='Spa';
				else if($row['ctype']==2) 
					$row['center_type']='Fitness';
				else if($row['ctype']==3) 
					$row['center_type']='Hair & Nails';
				else if($row['ctype']==4) 
					$row['center_type']='Barber';
			array_push($rowHotel['inhouse_fittness'],$row);
			}	
			
			$rowHotel['hotel_venues']=array();
			$stmt = $dbCon->prepare("select id,venue_name from company_venue where location_id=? and owner_of_the_venue=2 and price_info=1 and capacity_info=1 and photo_info=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $location_id);
			$stmt->execute();
			$result = $stmt->get_result();
			
			while($row = $result->fetch_assoc())
			{
			$stmt = $dbCon->prepare("select * from company_venue_photos where venue_id=? and sorting_number=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$rowPhoto = $result2->fetch_assoc();
			 
			 $filename="../estorecss/".$rowPhoto['venue_photo_path'].".txt"; $value_a=file_get_contents("../estorecss/".$rowPhoto['venue_photo_path'].".txt"); $value_a=str_replace('"','',$value_a); $rowPhoto['image_path1'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$rowPhoto['venue_photo_path'].'.jpg' );
			 
			$row['image_path1']=str_replace('../','https://www.qloudid.com/',$rowPhoto['image_path1']);
			 
			array_push($rowHotel['hotel_venues'],$row);
			}	
			
			$rowHotel['room_types']=array();
			$stmt = $dbCon->prepare("select company_hotel_room_type_detail.id,room_type_name,hotel_room_type.room_type,is_available from company_hotel_room_type_detail left join hotel_room_type on hotel_room_type.id=company_hotel_room_type_detail.room_type  where location_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $location_id);
			$stmt->execute();
			$result = $stmt->get_result();
			while($row = $result->fetch_assoc())
			{
				$stmt = $dbCon->prepare("select * from company_hotel_room_type_photos where room_type_id=?");
				/* bind parameters for markers */
				$stmt->bind_param("i", $row['id']);
				$stmt->execute();
				$result2 = $stmt->get_result();
				$row2 = $result2->fetch_assoc();
				 $filename="../estorecss/".$row2['image_path'].".txt"; $value_a=file_get_contents("../estorecss/".$row2['image_path'].".txt"); $value_a=str_replace('"','',$value_a); $row2['image_path1'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row2['image_path'].'.jpg' );
			 
				$row['image_path1']=str_replace('../','https://www.qloudid.com/',$row2['image_path1']);
				array_push($rowHotel['room_types'],$row);
				 
			}
			
			return $rowHotel; 
		}
	
	function selectedRoomServiceServeBasedAppMenu($data)
		{
			function base64_to_jpeg($base64_string, $output_file) {
			$ifp = fopen( $output_file, 'wb' ); 
			$data = explode( ',', $base64_string );
			fwrite( $ifp, base64_decode( $data[1] ) );
			fclose( $ifp ); 
			return $output_file; 
			}
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select location_id  from company_hotel_room_type_detail where company_hotel_room_type_detail.id=(select room_type_id from hotel_checkout_detail where id=?) ");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowProperty= $result->fetch_assoc();
			  
			$roomservice_id= $rowProperty['location_id'];
			$stmt = $dbCon->prepare("select available_dishes,resturant_id,available_guest_dishes from hotel_roomservice_resturant left join resturant_information on  resturant_information.id=hotel_roomservice_resturant.resturant_id where hotel_property_id=?  and company_service_info=1 and is_delivery_available=1");
			$stmt->bind_param("i", $roomservice_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$allDish='';
			$allRestu='';
			while($row= $result->fetch_assoc())
			{
				if($row['available_guest_dishes']=='' || $row['available_guest_dishes']==null)
					continue;
				$allDish=$allDish.$row['available_guest_dishes'].',';
				$allRestu=$allRestu.$row['resturant_id'].',';
			}
			 $allDish=substr($allDish,0,-1);
				  
				$org=array();
				$j=0;
				$stmt = $dbCon->prepare("select distinct category_food,food_category,place_of_display from resturant_available_dishes left join food_category on food_category.id=resturant_available_dishes.category_food where find_in_set (resturant_available_dishes.id,?) and serve_type=? order by place_of_display");
				$stmt->bind_param("si", $allDish,$data['serve_type']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				
				while($rowCategory = $result1->fetch_assoc())
				{
					
					 
					array_push($org,$rowCategory);
					$org[$j]['category']=array();
					$stmt = $dbCon->prepare("select resturant_available_dishes.id,dish_name,dish_detail,dish_image as dimage,dish_price,temp_available_item from resturant_available_dishes left join dishes_detail_information on dishes_detail_information.id=resturant_available_dishes.dish_id where find_in_set(resturant_available_dishes.id,?) and serve_type=? and category_food=? and is_available_item=1");
					$stmt->bind_param("sii", $allDish,$data['serve_type'],$rowCategory['category_food']);
					$stmt->execute();
					$result2 = $stmt->get_result();
					$k=0;
					while($rowDishes = $result2->fetch_assoc())
					{
						$rowDishes['food_category']=$rowCategory['food_category'];
						$rowDishes['dish_name']=html_entity_decode($rowDishes['dish_name'],ENT_NOQUOTES, 'UTF-8');
						$rowDishes['dish_detail']=html_entity_decode($rowDishes['dish_detail'],ENT_NOQUOTES, 'UTF-8');
						$rowDishes['serve_type']=1; 
						 $filename="../estorecss/".$rowDishes ['dimage'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$rowDishes ['dimage'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = base64_to_jpeg( $value_a, '../estorecss/tmp'.$rowDishes ['dimage'].'.jpg' );  $imgs='../../../../'.$imgs; } else { $value_a="../../../../../html/usercontent/images/default-profile-pic.jpg";  $imgs="../../../../../html/usercontent/images/default-profile-pic.jpg"; }
						 
						 $imgs=str_replace('../../../../../','https://www.qloudid.com/',$imgs);
						array_push($org[$j]['category'],$rowDishes);
						$org[$j]['category'][$k]['dish_image']=$imgs;
						 
						$k++;
					}
					$j++;
				}
				 
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
	 
 function selectedRoomServiceAppMenu($data)
		{
			function base64_to_jpeg($base64_string, $output_file) {
			$ifp = fopen( $output_file, 'wb' ); 
			$data = explode( ',', $base64_string );
			fwrite( $ifp, base64_decode( $data[1] ) );
			fclose( $ifp ); 
			return $output_file; 
			}
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select location_id  from company_hotel_room_type_detail where company_hotel_room_type_detail.id=(select room_type_id from hotel_checkout_detail where id=?) ");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowProperty= $result->fetch_assoc();
			$roomservice_id= $rowProperty['location_id'];
			$stmt = $dbCon->prepare("select available_guest_dishes,available_dishes,resturant_id from hotel_roomservice_resturant left join resturant_information on  resturant_information.id=hotel_roomservice_resturant.resturant_id where hotel_property_id=?  and company_service_info=1 and is_delivery_available=1");
			$stmt->bind_param("i", $roomservice_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$allDish='';
			$allRestu='';
			while($row= $result->fetch_assoc())
			{
				if($row['available_guest_dishes']=='' || $row['available_guest_dishes']==null)
					continue;
				$allDish=$allDish.$row['available_guest_dishes'].',';
				$allRestu=$allRestu.$row['resturant_id'].',';
			}
			 
			
			$stmt = $dbCon->prepare("select distinct serve_type from resturant_available_dishes where find_in_set (resturant_id,?)  and is_available_item=1  order by serve_type");
			$stmt->bind_param("s", $allRestu);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row= $result->fetch_assoc())
			{
				
				 
				if($row['serve_type']==1)
				{
				$row['serve_info']='Breakfast';
				$row['serve_image']="https://www.qloudid.com/html/usercontent/images/roomserviceImages/Breakfast.jpg";
				}
				else if($row['serve_type']==2)
				{
				$row['serve_info']='Brunch';
				$row['serve_image']="https://www.qloudid.com/html/usercontent/images/roomserviceImages/Brunch.jpg";
				}
				else if($row['serve_type']==3)
				{
				$row['serve_info']='Lunch';
				$row['serve_image']="https://www.qloudid.com/html/usercontent/images/roomserviceImages/lunch.jpg";
				}
				else if($row['serve_type']==4)
				{
				$row['serve_info']='Dinner';
				$row['serve_image']="https://www.qloudid.com/html/usercontent/images/roomserviceImages/dinner.jpg";
				}
				else if($row['serve_type']==5)
				{
				$row['serve_info']='Beverage';
				$row['serve_image']="https://www.qloudid.com/html/usercontent/images/roomserviceImages/Beverage.jpg";
				}
				 
				array_push($org,$row);
				$org[$j]['category']=array();
				$i=0;
				$stmt = $dbCon->prepare("select distinct category_food,food_category,place_of_display from resturant_available_dishes left join food_category on food_category.id=resturant_available_dishes.category_food where find_in_set (resturant_available_dishes.resturant_id,?) and serve_type=?  order by place_of_display");
				$stmt->bind_param("si", $allRestu,$row['serve_type']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				$k=0;
				while($rowCategory = $result1->fetch_assoc())
				{
					
					$stmt = $dbCon->prepare("select resturant_available_dishes.id,dish_name,dish_detail,dish_image as dimage,dish_price,temp_available_item from resturant_available_dishes left join dishes_detail_information on dishes_detail_information.id=resturant_available_dishes.dish_id where find_in_set(resturant_available_dishes.id,?) and serve_type=? and category_food=? and is_available_item=1");
					$stmt->bind_param("sii", $allDish,$row['serve_type'],$rowCategory['category_food']);
					$stmt->execute();
					$result2 = $stmt->get_result();
					while($rowDishes = $result2->fetch_assoc())
					{
						$rowDishes['dish_name']=html_entity_decode($rowDishes['dish_name'],ENT_NOQUOTES, 'UTF-8');
						$rowDishes['dish_detail']=html_entity_decode($rowDishes['dish_detail'],ENT_NOQUOTES, 'UTF-8');
						$rowDishes['serve_type']=1;
						 $filename="../estorecss/".$rowDishes ['dimage'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$rowDishes ['dimage'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = base64_to_jpeg( $value_a, '../estorecss/tmp'.$rowDishes ['dimage'].'.jpg' );  $imgs='../../../../'.$imgs; } else { $value_a="../../../../../html/usercontent/images/default-profile-pic.jpg";  $imgs="../../../../../html/usercontent/images/default-profile-pic.jpg"; }
						 
						 $imgs=str_replace('../../../../../','https://www.qloudid.com/',$imgs);
						array_push($org[$j]['category'],$rowDishes);
						$org[$j]['category'][$k]['enc']= $this -> encrypt_decrypt('encrypt',$rowDishes['id']);
						$org[$j]['category'][$k]['dish_image']=$imgs;
						 
						$k++;
					}
					$i++;
				}
				$j++;
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
	 
 function selectedRoomServiceAppServes($data)
		{
			function base64_to_jpeg($base64_string, $output_file) {
			$ifp = fopen( $output_file, 'wb' ); 
			$data = explode( ',', $base64_string );
			fwrite( $ifp, base64_decode( $data[1] ) );
			fclose( $ifp ); 
			return $output_file; 
			}
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select location_id  from company_hotel_room_type_detail where company_hotel_room_type_detail.id=(select room_type_id from hotel_checkout_detail where id=?) ");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowProperty= $result->fetch_assoc();
			$roomservice_id= $rowProperty['location_id'];
			$stmt = $dbCon->prepare("select available_guest_dishes,available_dishes,resturant_id from hotel_roomservice_resturant left join resturant_information on  resturant_information.id=hotel_roomservice_resturant.resturant_id where hotel_property_id=?  and company_service_info=1 and is_delivery_available=1");
			$stmt->bind_param("i", $roomservice_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$allDish='';
			$allRestu='';
			while($row= $result->fetch_assoc())
			{
				$allDish=$allDish.$row['available_guest_dishes'].',';
				$allRestu=$allRestu.$row['resturant_id'].',';
			}
			 
			
			$stmt = $dbCon->prepare("select distinct serve_type from resturant_available_dishes where find_in_set (id,?)  and is_available_item=1  and temp_available_item=1 order by serve_type");
			$stmt->bind_param("s", $allDish);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row= $result->fetch_assoc())
			{
				if($row['serve_type']==1)
				{
				$row['serve_info']='Breakfast';
				$row['serve_image']="https://www.qloudid.com/html/usercontent/images/roomserviceImages/Breakfast.jpg";
				}
				else if($row['serve_type']==2)
				{
				$row['serve_info']='Brunch';
				$row['serve_image']="https://www.qloudid.com/html/usercontent/images/roomserviceImages/Brunch.jpg";
				}
				else if($row['serve_type']==3)
				{
				$row['serve_info']='Lunch';
				$row['serve_image']="https://www.qloudid.com/html/usercontent/images/roomserviceImages/lunch.jpg";
				}
				else if($row['serve_type']==4)
				{
				$row['serve_info']='Dinner';
				$row['serve_image']="https://www.qloudid.com/html/usercontent/images/roomserviceImages/dinner.jpg";
				}
				else if($row['serve_type']==5)
				{
				$row['serve_info']='Beverage';
				$row['serve_image']="https://www.qloudid.com/html/usercontent/images/roomserviceImages/Beverage.jpg";
				}
				 
				array_push($org,$row);
				 
				$j++;
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
	 
	 
 function selectedLaundaryCategories($data)
		{
			function base64_to_jpeg($base64_string, $output_file) {
			$ifp = fopen( $output_file, 'wb' ); 
			$data = explode( ',', $base64_string );
			fwrite( $ifp, base64_decode( $data[1] ) );
			fclose( $ifp ); 
			return $output_file; 
			}
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select location_id  from company_hotel_room_type_detail where company_hotel_room_type_detail.id=(select room_type_id from hotel_checkout_detail where id=?) ");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowProperty= $result->fetch_assoc();
			$roomservice_id= $rowProperty['location_id'];
			$stmt = $dbCon->prepare("select available_services,drycleaning_id from hotel_drycleaning_services where hotel_property_id=?");
			$stmt->bind_param("i", $roomservice_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$allDish='';
			$allRestu='';
			while($row= $result->fetch_assoc())
			{
				$allDish=$allDish.$row['available_services'].',';
				$allRestu=$allRestu.$row['drycleaning_id'].',';
			}
			 
			
			$stmt = $dbCon->prepare("select distinct category_id from drycleaning_services where find_in_set (id,?) order by category_id");
			$stmt->bind_param("s", $allDish);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row= $result->fetch_assoc())
			{
				if($row['category_id']==1)
				{
				$row['serve_info']='Drycleaning';
				$row['serve_image']="https://www.qloudid.com/html/usercontent/images/roomserviceImages/drycleaning.jpeg";
				}
				else if($row['category_id']==2)
				{
				$row['serve_info']='Wash';
				$row['serve_image']="https://www.qloudid.com/html/usercontent/images/roomserviceImages/wash.jpeg";
				}
				else if($row['category_id']==3)
				{
				$row['serve_info']='Ironing';
				$row['serve_image']="https://www.qloudid.com/html/usercontent/images/roomserviceImages/ironing.jpeg";
				}
				 
				 
				array_push($org,$row);
				 
				$j++;
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
	 
	 
	 function selectedDrycleaningServeBasedAppMenu($data)
		{
			function base64_to_jpeg($base64_string, $output_file) {
			$ifp = fopen( $output_file, 'wb' ); 
			$data = explode( ',', $base64_string );
			fwrite( $ifp, base64_decode( $data[1] ) );
			fclose( $ifp ); 
			return $output_file; 
			}
			 
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select location_id  from company_hotel_room_type_detail where company_hotel_room_type_detail.id=(select room_type_id from hotel_checkout_detail where id=?) ");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowProperty= $result->fetch_assoc();
			$roomservice_id= $rowProperty['location_id'];
			$stmt = $dbCon->prepare("select available_services,drycleaning_id from hotel_drycleaning_services where hotel_property_id=?");
			$stmt->bind_param("i", $roomservice_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$allDish='';
			$allRestu='';
			while($row= $result->fetch_assoc())
			{
				$allDish=$allDish.$row['available_services'].',';
				$allRestu=$allRestu.$row['drycleaning_id'].',';
			}
			 
		 
					$org=array();
					$stmt = $dbCon->prepare("select drycleaning_services.id,article_name as dish_name,price as dish_price from drycleaning_services left join drycleaning_articles on drycleaning_articles.id=drycleaning_services.service_id where find_in_set(drycleaning_services.id,?) and category_id=?");
					$stmt->bind_param("si", $allDish,$data['category_id']);
					$stmt->execute();
					$result2 = $stmt->get_result();
					$k=0;
					while($rowDishes = $result2->fetch_assoc())
					{
						$rowDishes['dish_name']=html_entity_decode($rowDishes['dish_name'],ENT_NOQUOTES, 'UTF-8');
						$rowDishes['dish_detail']='';
						$rowDishes['serve_type']=4; 
						 
						$stmt = $dbCon->prepare("select dish_quantity,dish_price from hotel_roomservice_item_ordered where qloud_checkout_id=? and is_verified=0 and dish_id=? and service_type=4");
						/* bind parameters for markers */
						 
						$stmt->bind_param("ii",$data['id'],$rowDishes['id']);
						$stmt->execute();
						$resultCount = $stmt->get_result();
						$rowCount = $resultCount->fetch_assoc();
						 
						if($rowCount['dish_quantity']==null)
						{
							$rowDishes['dish_quantity']=0; 
						}
						else
						$rowDishes['dish_quantity']=$rowCount['dish_quantity']; 
						array_push($org,$rowDishes);
						 
					}
				
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
	 

	function selectedRoomServiceMenu($data)
		{
			function base64_to_jpeg($base64_string, $output_file) {
			$ifp = fopen( $output_file, 'wb' ); 
			$data = explode( ',', $base64_string );
			fwrite( $ifp, base64_decode( $data[1] ) );
			fclose( $ifp ); 
			return $output_file; 
			}
			$dbCon = AppModel::createConnection();
			$roomservice_id= $this -> encrypt_decrypt('decrypt',$data['hid']);
			$stmt = $dbCon->prepare("select available_guest_dishes,available_dishes,resturant_id from hotel_roomservice_resturant left join resturant_information on  resturant_information.id=hotel_roomservice_resturant.resturant_id where hotel_property_id=?  and company_service_info=1 and is_delivery_available=1");
			$stmt->bind_param("i", $roomservice_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$allDish='';
			$allRestu='';
			while($row= $result->fetch_assoc())
			{
				$allDish=$allDish.$row['available_guest_dishes'].',';
				$allRestu=$allRestu.$row['resturant_id'].',';
			}
			 
			
			$stmt = $dbCon->prepare("select distinct serve_type from resturant_available_dishes where find_in_set (resturant_id,?)  and is_available_item=1 and temp_available_item=1 order by serve_type");
			$stmt->bind_param("s", $allRestu);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row= $result->fetch_assoc())
			{
				if($row['serve_type']==1)
				{
				$row['serve_info']='Breakfast';
				}
				else if($row['serve_type']==2)
				{
				$row['serve_info']='Brunch';
				}
				else if($row['serve_type']==3)
				{
				$row['serve_info']='Lunch';
				}
				else if($row['serve_type']==4)
				{
				$row['serve_info']='Dinner';
				}
				else if($row['serve_type']==5)
				{
				$row['serve_info']='Beverage';
				}
				array_push($org,$row);
				$org[$j]['category']=array();
				$i=0;
				$stmt = $dbCon->prepare("select distinct category_food,food_category,place_of_display from resturant_available_dishes left join food_category on food_category.id=resturant_available_dishes.category_food where find_in_set (resturant_available_dishes.resturant_id,?) and serve_type=?  and temp_available_item=1 order by place_of_display");
				$stmt->bind_param("si", $allRestu,$row['serve_type']);
				$stmt->execute();
				$result1 = $stmt->get_result();
				while($rowCategory = $result1->fetch_assoc())
				{
					array_push($org[$j]['category'],$rowCategory);
					$k=0;
					$org[$j]['category'][$i]['dishes']=array();
					$stmt = $dbCon->prepare("select resturant_available_dishes.id,dish_name,dish_detail,dish_image,dish_price,temp_available_item from resturant_available_dishes left join dishes_detail_information on dishes_detail_information.id=resturant_available_dishes.dish_id where find_in_set(resturant_available_dishes.id,?) and serve_type=? and category_food=? and is_available_item=1  and temp_available_item=1");
					$stmt->bind_param("sii", $allDish,$row['serve_type'],$rowCategory['category_food']);
					$stmt->execute();
					$result2 = $stmt->get_result();
					while($rowDishes = $result2->fetch_assoc())
					{
						 $filename="../estorecss/".$rowDishes ['dish_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$rowDishes ['dish_image'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = base64_to_jpeg( $value_a, '../estorecss/tmp'.$rowDishes ['dish_image'].'.jpg' );  $imgs='../../../../'.$imgs; } else { $value_a="../../../../../html/usercontent/images/default-profile-pic.jpg";  $imgs="../../../../../html/usercontent/images/default-profile-pic.jpg"; }
						 $imgs=str_replace('../../../../../','https://www.qloudid.com/',$imgs);
						array_push($org[$j]['category'][$i]['dishes'],$rowDishes);
						$org[$j]['category'][$i]['dishes'][$k]['enc']= $this -> encrypt_decrypt('encrypt',$rowDishes['id']);
						$org[$j]['category'][$i]['dishes'][$k]['dish_image']=$imgs;
						$k++;
					}
					$i++;
				}
				$j++;
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
	 
	  function selectedWellnessServiceMenuItemInfo($data)
		{
			function base64_to_jpeg($base64_string, $output_file) {
			$ifp = fopen( $output_file, 'wb' ); 
			$data = explode( ',', $base64_string );
			fwrite( $ifp, base64_decode( $data[1] ) );
			fclose( $ifp ); 
			return $output_file; 
			}
			$dbCon = AppModel::createConnection();
			$roomservice_id= $this -> encrypt_decrypt('decrypt',$data['item_id']);
			 
				$stmt = $dbCon->prepare("select wellness_available_services.id,dish_name,dish_detail,dish_image,dish_price from wellness_available_services left join dishes_detail_information on dishes_detail_information.id=wellness_available_services.service_id where wellness_available_services.id=?");
					$stmt->bind_param("i", $roomservice_id);
					$stmt->execute();
					$result2 = $stmt->get_result();
					$rowDishes = $result2->fetch_assoc();
						 $filename="../estorecss/".$rowDishes ['dish_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$rowDishes ['dish_image'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = base64_to_jpeg( $value_a, '../estorecss/tmp'.$rowDishes ['dish_image'].'.jpg' );  $imgs='../../../../'.$imgs; } else { $value_a="../../../../../html/usercontent/images/default-profile-pic.jpg";  $imgs="../../../../../html/usercontent/images/default-profile-pic.jpg"; }
						 $imgs=str_replace('../../../../../','https://www.qloudid.com/',$imgs);
						$rowDishes['dish_image']=$imgs;
						$k++;
			$stmt->close();
			$dbCon->close();
			return $rowDishes;
			
			
		}
	 
	  function selectedWellnessServiceMenu($data)
		{
			function base64_to_jpeg($base64_string, $output_file) {
			$ifp = fopen( $output_file, 'wb' ); 
			$data = explode( ',', $base64_string );
			fwrite( $ifp, base64_decode( $data[1] ) );
			fclose( $ifp ); 
			return $output_file; 
			}
			$dbCon = AppModel::createConnection();
			$roomservice_id= $this -> encrypt_decrypt('decrypt',$data['hid']);
			 
			$stmt = $dbCon->prepare("select available_services,wellness_id from hotel_wellness_services where hotel_property_id=?");
			$stmt->bind_param("i", $roomservice_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$allDish='';
			$allRestu='';
			while($row= $result->fetch_assoc())
			{
				
				$allDish=$allDish.$row['available_services'].',';
				$allRestu=$allRestu.$row['wellness_id'].',';
			}
			
			
				$org=array();
				$i=0;
				 	$stmt = $dbCon->prepare("select wellness_available_services.id,dish_name,dish_detail,dish_image,dish_price from wellness_available_services left join dishes_detail_information on dishes_detail_information.id=wellness_available_services.service_id where find_in_set (wellness_available_services.id,?) and find_in_set (wellness_available_services.wellness_id,?)");
					$stmt->bind_param("ss", $allDish,$allRestu);
					$stmt->execute();
					$result2 = $stmt->get_result();
					while($rowDishes = $result2->fetch_assoc())
					{
						array_push($org,$rowDishes);
						 $filename="../estorecss/".$rowDishes ['dish_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$rowDishes ['dish_image'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = base64_to_jpeg( $value_a, '../estorecss/tmp'.$rowDishes ['dish_image'].'.jpg' );  $imgs='../../../../'.$imgs; } else { $value_a="../../../../../html/usercontent/images/default-profile-pic.jpg";  $imgs="../../../../../html/usercontent/images/default-profile-pic.jpg"; }
						
						 $imgs=str_replace('../../../../../','https://www.qloudid.com/',$imgs);
						$org[$i]['enc']= $this -> encrypt_decrypt('encrypt',$rowDishes['id']);
						$org[$i]['dish_image']=$imgs;
						$i++;
					}
					 
				
			 
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
	 
	  function selectedRoomServiceMenuItemInfo($data)
		{
			function base64_to_jpeg($base64_string, $output_file) {
			$ifp = fopen( $output_file, 'wb' ); 
			$data = explode( ',', $base64_string );
			fwrite( $ifp, base64_decode( $data[1] ) );
			fclose( $ifp ); 
			return $output_file; 
			}
			$dbCon = AppModel::createConnection();
			$roomservice_id= $this -> encrypt_decrypt('decrypt',$data['item_id']);
				$stmt = $dbCon->prepare("select resturant_available_dishes.id,dish_name,dish_detail,dish_image,dish_price,temp_available_item from resturant_available_dishes left join dishes_detail_information on dishes_detail_information.id=resturant_available_dishes.dish_id where resturant_available_dishes.id=?");
					$stmt->bind_param("i", $roomservice_id);
					$stmt->execute();
					$result2 = $stmt->get_result();
					$rowDishes = $result2->fetch_assoc();
						 $filename="../estorecss/".$rowDishes ['dish_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$rowDishes ['dish_image'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = base64_to_jpeg( $value_a, '../estorecss/tmp'.$rowDishes ['dish_image'].'.jpg' );  $imgs='../../../../'.$imgs; } else { $value_a="../../../../../html/usercontent/images/default-profile-pic.jpg";  $imgs="../../../../../html/usercontent/images/default-profile-pic.jpg"; }
						 $imgs=str_replace('../../../../../','https://www.qloudid.com/',$imgs);
						$rowDishes['dish_image']=$imgs;
						 
			$stmt->close();
			$dbCon->close();
			return $rowDishes;
			
			
		}
		
		
	 
	 
		
	function updateDependentCheckinIds($data)
    {
		
		$dbCon = AppModel::createConnection();
		$stmt = $dbCon->prepare("update user_certificates set dependents_id=? where certificate_key=?");
		/* bind parameters for markers */
		$stmt->bind_param("ss",$data['selected_dependents'], $data['certi']);
		$stmt->execute();
			 
		$stmt->close();
		$dbCon->close();
		return 1;	
		
    }
	
	
	
		function verifyUserBookingExists($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$id=$this->encrypt_decrypt('decrypt',$data['id']);
			
			$stmt = $dbCon->prepare("select user_id from user_certificates where certificate_key=? and is_connected=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("s", $data['certi']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowUser = $result->fetch_assoc();
			 
			$stmt = $dbCon->prepare("select user_id from hotel_checkout_detail where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowHotel = $result->fetch_assoc();
			if($rowUser['user_id']==$rowHotel['user_id'])
			{
			$stmt = $dbCon->prepare("select count(id) as num  from dependents   where id in (select dependent_id from dependent_guardian where guardian_user_id=? and is_approved=1) and  created_by=?  and id not in (select dependent_id from hotel_checkout_dependent_detail where hotel_checkout_id=?)");
			$stmt->bind_param("iii", $rowHotel['user_id'],$rowHotel['user_id'],$id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();	
			if($row['num']==0)
			{
			$stmt->close();
			$dbCon->close();
			return 1;
			}
			else
			{
			$stmt = $dbCon->prepare("update user_certificates set hotel_checkin_id=? where certificate_key=?");
			/* bind parameters for markers */
			$stmt->bind_param("ss", $data['id'],$data['certi']);
			$stmt->execute();
			
			$stmt->close();
			$dbCon->close();
			return 2;		
			}
			}
			else
			{
			$stmt->close();
			$dbCon->close();
			return 0;		
			}
			
		 
		}
		
		
		
		function addDependentImages($data)
		{
			$dbCon = AppModel::createConnection();
			$data1 = strip_tags($data['ImageData']);
			$data1='url("data:image/png;base64,'.$data1.'")';
			//echo $data; die;
			define('UPLOAD_DIR','../estorecss/'); // image dir path
			$img_name1="new".microtime();
			file_put_contents(UPLOAD_DIR.$img_name1.".txt", $data1);
				 
			$arr=array();
			 
			if($data['imageId']==1)
			{
			$stmt = $dbCon->prepare("update dependents set front_image_path=? where id=?");
			}
			else
			{
			$stmt = $dbCon->prepare("update dependents set back_image_path=?,is_completed=1,is_passport_updated=1 where id=?");	
			}
			$stmt->bind_param("si",  $img_name1,$data['id']);	
			$stmt->execute();
			
			
			$stmt->close();
			$dbCon->close();
			return 1;	
			 
			 
		}
		
		function addDependentProfileImages($data)
		{
			$dbCon = AppModel::createConnection();
			$data1 = strip_tags($data['ImageData']);
			$data1='url("data:image/png;base64,'.$data1.'")';
			//echo $data; die;
			define('UPLOAD_DIR','../estorecss/'); // image dir path
			$img_name1="new".microtime();
			file_put_contents(UPLOAD_DIR.$img_name1.".txt", $data1);
			$stmt = $dbCon->prepare("update dependents set image_path=? where id=?");
			$stmt->bind_param("si",  $img_name1,$data['id']);	
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;	
			 
			 
		}
		
		function updateDependent($data)
		{
			$dbCon = AppModel::createConnection();
			$fname=htmlentities($data['FirstName'],ENT_NOQUOTES, 'UTF-8');
			$lname=htmlentities($data['last_name'],ENT_NOQUOTES, 'UTF-8');	
			
			if($data['is_ssn_available']==1)
			{
				$data['SocialSecurityNumber']=$data['SocialSecurityNumber'];
				$email=$data['SocialSecurityNumber'].'@qloudid.com';
			}
			else
			{
				$stmt = $dbCon->prepare("select passport_number from dependents where id=?");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $data['id']);
				$stmt->execute();
				$result = $stmt->get_result();
				
				$row = $result->fetch_assoc();
				$data['SocialSecurityNumber']=$row['passport_number'];
				$email=$row['passport_number'].'@qloudid.com';
			}
			
			
			if($data['is_same_address']==1)
			{
				$stmt = $dbCon->prepare("select address,city,port_number,zipcode from user_address where user_id=? and is_personal_address=1");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $data['UserId']);
				$stmt->execute();
				$result = $stmt->get_result();
				
				$row = $result->fetch_assoc();
				$data['address']=$row['address'];
				$data['city']=$row['city'];
				$data['port_number']=$row['port_number'];
				$data['zipcode']=$row['zipcode'];
			}
			 
			
			$stmt = $dbCon->prepare("select country_of_residence from user_logins where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("update dependents set dependent_type=1,first_name=?,last_name=?,ssn=?,email=?,country_id=?,child_address=?,child_city=?,child_zip=?,child_port_number=?,is_address_same=?,is_ssn_available=?,birth_day=?,birth_month=?,birth_year=? where id=?");
			$stmt->bind_param("ssssissssiiiiii",$fname,$lname,$data['SocialSecurityNumber'],$email,$row['country_of_residence'],$data['address'],$data['city'],$data['zipcode'],$data['port_number'],$data['is_same_address'],$data['is_ssn_available'],$data['birth_day'],$data['birth_month'],$data['birth_year'],$data['id']);
			$stmt->execute();
			 
			$stmt->close();
			$dbCon->close();
			return $data['id'];
			 
			
		}
		
		function dependentDetail($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select * from dependents where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select country_name from phone_country_code where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['country_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCountry = $result->fetch_assoc();
			$row['country_name']=$rowCountry['country_name'];
			$filename="../estorecss/".$row ['image_path'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['image_path'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row ['image_path'].'.jpg' );  $imgs='../../../../'.$imgs; } else { $value_a="../../../../../html/usercontent/images/default-profile-pic.jpg";  $imgs="../../../../../html/usercontent/images/default-profile-pic.jpg"; }
			$imgs=str_replace('../../../../../','https://www.qloudid.com/',$imgs);
			$row['image_path']=$imgs; 
			
			$filename="../estorecss/".$row ['front_image_path'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['front_image_path'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row ['front_image_path'].'.jpg' );  $imgs='../../../../'.$imgs; } else { $value_a="../../../../../html/usercontent/images/default-profile-pic.jpg";  $imgs="../../../../../html/usercontent/images/default-profile-pic.jpg"; }
			$imgs=str_replace('../../../../../','https://www.qloudid.com/',$imgs);
			$row['front_image_path']=$imgs; 
			
			$filename="../estorecss/".$row ['back_image_path'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['back_image_path'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row ['back_image_path'].'.jpg' );  $imgs='../../../../'.$imgs; } else { $value_a="../../../../../html/usercontent/images/default-profile-pic.jpg";  $imgs="../../../../../html/usercontent/images/default-profile-pic.jpg"; }
			$imgs=str_replace('../../../../../','https://www.qloudid.com/',$imgs);
			$row['back_image_path']=$imgs; 
			
			if($row['is_address_same']==1)
			{
				$stmt = $dbCon->prepare("select address,city,port_number,zipcode from user_address where user_id=? and is_personal_address=1");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $row['created_by']);
				$stmt->execute();
				$result = $stmt->get_result();
				
				$rowAddress = $result->fetch_assoc();
				$row['child_address']=$rowAddress['address'];
				$row['child_city']=$rowAddress['city'];
				$row['child_port_number']=$rowAddress['port_number'];
				$row['child_zip']=$rowAddress['zipcode'];	
			}
			
			$row['issue_date']='';
			$row['expiry_date']='';
			if($row['birth_day']==null)
			{
			$row['birth_day']='';
			$row['birth_month']='';
			$row['birth_year']='';	
			$row['dob']='Not available';
			$row['age']=0;
			}
			else
			{
			$date=$row['birth_day'].'-'.$row['birth_month'].'-'.$row['birth_year'];
			$row['dob']=date('d M Y',strtotime($date));
			$date1 = date('Y-m-d',strtotime($date));
			$date2 = date('Y-m-d');
			$diff = abs(strtotime($date2) - strtotime($date1));

			$row['age'] = floor($diff / (365*60*60*24));	
			}
			if($row['is_passport_updated']==null)
			{
			$row['passport_number']='';
			$row['issue_month']='';
			$row['issue_year']='';	
			$row['expiry_month']='';
			$row['expiry_year']='';				
			}
			
			$row['address']='';	
			$row['blood_group']='';	
			$row['allergic']='';	
			
			$row['p_country']=$row['country_id'];
			
			$stmt->close();
			$dbCon->close();
			return $row;
			 
			
		}
		
		function addDependent($data)
		{
			$dbCon = AppModel::createConnection();
		
			$fname=htmlentities($data['FirstName'],ENT_NOQUOTES, 'UTF-8');
			$lname=htmlentities($data['last_name'],ENT_NOQUOTES, 'UTF-8');	
			
			if($data['is_ssn_available']==1)
			{
				$data['SocialSecurityNumber']=$data['SocialSecurityNumber'];
				$email=$data['SocialSecurityNumber'].'@qloudid.com';
			}
			else
			{
				$data['SocialSecurityNumber']='';
				$email='';
			}
			
			
			if($data['is_same_address']==1)
			{
				$stmt = $dbCon->prepare("select address,city,port_number,zipcode from user_address where user_id=? and is_personal_address=1");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $data['UserId']);
				$stmt->execute();
				$result = $stmt->get_result();
				
				$row = $result->fetch_assoc();
				$data['address']=$row['address'];
				$data['city']=$row['city'];
				$data['port_number']=$row['port_number'];
				$data['zipcode']=$row['zipcode'];
			}
			 
			
			$stmt = $dbCon->prepare("select country_of_residence from user_logins where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$rowCountry = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("insert into dependents(dependent_type,first_name,last_name,ssn,created_by,created_on,email,country_id,is_completed,child_address,child_city,child_zip,child_port_number,is_address_same,is_ssn_available,birth_day,birth_month,birth_year)
			values(?,?,?,?,?,now(),?,?,?,?, ?,?,?, ?,?,?, ?,?)");
			$stmt->bind_param("isssisiissssiiiii",$data['DependentType'],$fname,$lname,$data['SocialSecurityNumber'],$data['UserId'],$email,$rowCountry['country_of_residence'],$data['is_ssn_available'],$data['address'],$data['city'],$data['zipcode'],$data['port_number'],$data['is_same_address'],$data['is_ssn_available'],$data['birth_day'],$data['birth_month'],$data['birth_year']);
			$stmt->execute();
			 
			$id=$stmt->insert_id;
				
			$stmt = $dbCon->prepare("select email,country_of_residence,phone_number,phone_country_code.country_code,ssn,country_phone  from user_logins left join user_profiles on user_profiles.user_logins_id=user_logins.id left join country on user_logins.country_of_residence=country.id left join phone_country_code on phone_country_code.country_name=country.country_name where user_logins.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$st=1;
			$stmt = $dbCon->prepare("insert into dependent_guardian(dependent_id,guardian_ssn,guardian_email,guardian_user_id, inviting_person_user_id,created_on,is_approved,guardian_phone,guardian_country)
			values(?,?,?,?,?,now(),?,?,?)");
			$stmt->bind_param("issiiiss",$id,$row['ssn'],$row['email'],$data['UserId'],$data['UserId'],$st,$row['phone_number'],$row['country_phone']);
			$stmt->execute();
			
			
			$phone="+".trim($row['country_code'])."".trim($row['phone_number']);
			
			$subject='Dependent added';
			$to=$phone;
			$html=$fname.' '.$lname.' has been added as your dependent. please confirm or reject the same.';
			$res=sendSms($subject, $to, $html);
			$rs=json_decode($res,true);
			$to=$row['email'];
				
			$stmt->close();
			$dbCon->close();
			return $id;
			 
			
		}
		
		function addDependentPassport($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select ssn,is_ssn_available,created_by from dependents where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$dependent = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select country_of_residence from user_logins where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $dependent['created_by']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("update dependents set country_id=?,p_country=?,passport_number=?,issue_month=?,issue_year=?,expiry_month=?, expiry_year=? where id=?");
			$stmt->bind_param("iisssssi",$row['country_of_residence'],$row['country_of_residence'],$data['PassportNumber'],$data['IssueMonth'],$data['IssueYear'],$data['ExpiryMonth'],$data['ExpiryYear'],$data['id']);
			$stmt->execute();
			
			if($dependent['is_ssn_available']==0)
			{
			$email=$data['PassportNumber'].'@qloudid.com';
			$stmt = $dbCon->prepare("update dependents set ssn=?,email=? where id=?");
			$stmt->bind_param("ssi",$data['PassportNumber'],$email,$data['id']);
			$stmt->execute();	
			}
			
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function checkSsn($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select country_of_residence from user_logins where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select id from dependents where ssn=? and country_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("si", $data['SocialSecurityNumber'],$row['country_of_residence']);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();
			if(empty($row))
			{
				$stmt->close();
				$dbCon->close();
				return 1;
			
			}
			else
			{
				$stmt->close();
				$dbCon->close();
				return 0;
			}
			
		}
	
	
	function checkDependentSsn($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select country_of_residence from user_logins where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select id from dependents where ssn=? and country_id=? and id!=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("sii", $data['SocialSecurityNumber'],$row['country_of_residence'],$data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();
			if(empty($row))
			{
				$stmt->close();
				$dbCon->close();
				return 1;
			
			}
			else
			{
				$stmt->close();
				$dbCon->close();
				return 0;
			}
			
		}
	
	function checkPassport($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select country_of_residence from user_logins where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();
			
			
			$stmt = $dbCon->prepare("select id  from dependents   where  passport_number=? and country_id=? and id!=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("sii", $data['PassportNumber'],$row['country_of_residence'],$data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$rowPass = $result->fetch_assoc();
			 
			if(empty($rowPass))
			{
				$stmt->close();
				$dbCon->close();
				return 1;
			}
			else
			{
				$stmt->close();
				$dbCon->close();
				return 0;
			}
			 
			
		}
	
	
		function dependentsList($data)
		{
			 $dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select id,concat_ws(' ',first_name,last_name) as name,ssn,first_name,email,dependent_type,created_on,image_path  from dependents where id in (select dependent_id from dependent_guardian where guardian_user_id=? and is_approved=1) and created_by=? and dependent_type=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("ii", $data['user_id'], $data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			$filename="../estorecss/".$row ['image_path'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['image_path'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row ['image_path'].'.jpg' ); $imgs=str_replace('../','',$imgs); $imgs='https://www.qloudid.com/'.$imgs; } 
			else {   $imgs= "https://www.qloudid.com/html/usercontent/images/default-profile-pic.jpg"; }
			$row['image_path']=$imgs;
			$row['name']=html_entity_decode($row['name'],ENT_NOQUOTES, 'UTF-8');
			array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
		
		 function completeMenu()
		{
			$dbCon = AppModel::createConnection();
			 
			$resturant_id=$this -> encrypt_decrypt('decrypt',$_POST['id']);
			$stmt = $dbCon->prepare("select distinct serve_type,serve_available from resturant_available_dishes where resturant_id=? and serve_available=1 order by serve_type");
			$stmt->bind_param("i", $resturant_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			 $i=0;
			while($row= $result->fetch_assoc())
			{
				 
				array_push($org,$row);
					$k=0;
					$org[$i]['dishes']=array();
					$stmt = $dbCon->prepare("select resturant_available_dishes.id,dish_name,dish_detail,dish_image,dish_price,temp_available_item from resturant_available_dishes left join dishes_detail_information on dishes_detail_information.id=resturant_available_dishes.dish_id where resturant_id=? and serve_type=?");
					$stmt->bind_param("ii", $resturant_id,$row['serve_type']);
					$stmt->execute();
					$result2 = $stmt->get_result();
					while($rowDishes = $result2->fetch_assoc())
					{
						$rowDishes['dish_name']=html_entity_decode($rowDishes['dish_name'],ENT_NOQUOTES, 'UTF-8'); 
						$rowDishes['dish_detail']=html_entity_decode($rowDishes['dish_detail'],ENT_NOQUOTES, 'UTF-8'); 
						 $filename="../estorecss/".$rowDishes ['dish_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$rowDishes ['dish_image'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs =$this-> base64_to_jpeg( $value_a, '../estorecss/tmp'.$rowDishes ['dish_image'].'.jpg' ); } else { $value_a="../html/usercontent/images/default-profile-pic.jpg";  $imgs="../html/usercontent/images/default-profile-pic.jpg"; }
						$imgs=str_replace('../','https://www.qloudid.com/',$imgs);
						array_push($org[$i]['dishes'],$rowDishes);
						$org[$i]['dishes'][$k]['dish_image']=$imgs;
						$k++;
					}
					$i++;
				
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
	
		
	function completeMenuOld()
		{
			 
			$dbCon = AppModel::createConnection();
			$resturant_id= $this -> encrypt_decrypt('decrypt',$_POST['id']);
			 
			$org=array();
			 
				$i=0;
				$stmt = $dbCon->prepare("select distinct category_food,food_category,place_of_display from resturant_available_dishes left join food_category on food_category.id=resturant_available_dishes.category_food where resturant_available_dishes.resturant_id=?  order by place_of_display");
				$stmt->bind_param("i", $resturant_id);
				$stmt->execute();
				$result1 = $stmt->get_result();
				while($rowCategory = $result1->fetch_assoc())
				{
					array_push($org,$rowCategory);
					 
					$org[$i]['dishes']=array();
					$stmt = $dbCon->prepare("select resturant_available_dishes.id,dish_name,dish_detail,dish_image,dish_price,temp_available_item from resturant_available_dishes left join dishes_detail_information on dishes_detail_information.id=resturant_available_dishes.dish_id where resturant_id=? and category_food=?");
					$stmt->bind_param("ii", $resturant_id,$rowCategory['category_food']);
					$stmt->execute();
					$result2 = $stmt->get_result();
					while($rowDishes = $result2->fetch_assoc())
					{
						  
						array_push($org[$i]['dishes'],$rowDishes);
						 
					}
					$i++;
				}
			 $stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
	 
		
		
	function resturantImages()
	{
			$dbCon = AppModel::createConnection();
			$id= $this -> encrypt_decrypt('decrypt',$_POST['id']);
		$stmt = $dbCon->prepare("select big_image_path,small_image1_path,small_image2_path from business_dashboard_images where business_type=3 and business_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $id);
			$stmt->execute();
			$resultImages = $stmt->get_result();
			$rowImages = $resultImages->fetch_assoc();
			 
			$bigImage=$rowImages['big_image_path'];	
			$filename="../estorecss/".$bigImage.".txt"; $value_a=file_get_contents("../estorecss/".$bigImage.".txt"); $value_a=str_replace('"','',$value_a); $rowImages['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$bigImage.'.jpg' );
			 
			$rowImages['image_path']=str_replace('../','https://www.qloudid.com/',$rowImages['image_path']);
			$org[0]=$rowImages;

			$bigImage=$rowImages['small_image1_path'];	
			$filename="../estorecss/".$bigImage.".txt"; $value_a=file_get_contents("../estorecss/".$bigImage.".txt"); $value_a=str_replace('"','',$value_a); $rowImages['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$bigImage.'.jpg' );
			 
			$rowImages['image_path']=str_replace('../','https://www.qloudid.com/',$rowImages['image_path']);
			$org[1]=$rowImages;
			
			$bigImage=$rowImages['small_image2_path'];	
			$filename="../estorecss/".$bigImage.".txt"; $value_a=file_get_contents("../estorecss/".$bigImage.".txt"); $value_a=str_replace('"','',$value_a); $rowImages['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$bigImage.'.jpg' );
			 
			$rowImages['image_path']=str_replace('../','https://www.qloudid.com/',$rowImages['image_path']);
			$org[2]=$rowImages;
			
			$stmt->close();
			$dbCon->close();
			  
			return $org;
			
	}
	
	
	
	
	function resturantCityList()
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select distinct city_v as city from property_location where id in(select property_id from resturant_information)");
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			array_push($org,$row);
			}
			 
			$stmt->close();
			$dbCon->close();
			return $org;
		}
	
	
	function resturantList()
		{
			$dbCon = AppModel::createConnection();
			
			$search='%'.$_POST['city'].'%';
			 	 
			$stmt = $dbCon->prepare("select description,property_location.latitude,property_location.longitude,profile_pic,country_code,phone,dress_code,table_reservation,pets_allowed, form_of_payment, broadcast_type, broadcast_channel, resturant_name as property_nickname,resturant_type, resturant_information.property_id,property_location.visiting_address as address,property_location.port_number,resturant_information.id  from resturant_information left join property_location on property_location.id=resturant_information.property_id left join company_profiles on property_location.company_id=company_profiles.company_id left join phone_country_code on phone_country_code.country_name=company_profiles.phone_country where property_location.visiting_address like ? or property_location.state_v like ? or property_location.city_v like ?");
			$stmt->bind_param("sss", $search,$search,$search);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			$row['enc']=$this -> encrypt_decrypt('encrypt',$row['id']);	 
			array_push($org,$row);
			
			$org[$j]['images']=array();
			
			$stmt = $dbCon->prepare("select big_image_path,small_image1_path,small_image2_path from business_dashboard_images where business_type=3 and business_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$resultImages = $stmt->get_result();
			$rowImages = $resultImages->fetch_assoc();
			 
			$bigImage=$rowImages['big_image_path'];	
			$filename="../estorecss/".$bigImage.".txt"; $value_a=file_get_contents("../estorecss/".$bigImage.".txt"); $value_a=str_replace('"','',$value_a); $rowImages['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$bigImage.'.jpg' );
			 
			$rowImages['image_path']=str_replace('../','https://www.qloudid.com/',$rowImages['image_path']);
			$org[$j]['images'][0]=$rowImages;

			$bigImage=$rowImages['small_image1_path'];	
			$filename="../estorecss/".$bigImage.".txt"; $value_a=file_get_contents("../estorecss/".$bigImage.".txt"); $value_a=str_replace('"','',$value_a); $rowImages['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$bigImage.'.jpg' );
			 
			$rowImages['image_path']=str_replace('../','https://www.qloudid.com/',$rowImages['image_path']);
			$org[$j]['images'][1]=$rowImages;
			
			$bigImage=$rowImages['small_image2_path'];	
			$filename="../estorecss/".$bigImage.".txt"; $value_a=file_get_contents("../estorecss/".$bigImage.".txt"); $value_a=str_replace('"','',$value_a); $rowImages['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$bigImage.'.jpg' );
			 
			$rowImages['image_path']=str_replace('../','https://www.qloudid.com/',$rowImages['image_path']);
			$org[$j]['images'][2]=$rowImages;
			
			$j++;
			}
			 
			$stmt->close();
			$dbCon->close();
			  
			return $org;
			
			
		}
	
	function resturantInfo()
		{
			$dbCon = AppModel::createConnection();
			$id= $this -> encrypt_decrypt('decrypt',$_POST['id']);
			 
			$stmt = $dbCon->prepare("select resturant_information.description,property_location.latitude,property_location.longitude,profile_pic,country_code,phone,dress_code,table_reservation,pets_allowed, form_of_payment, broadcast_type, broadcast_channel, resturant_name as property_nickname,resturant_type, resturant_information.property_id,property_location.visiting_address as address,resturant_information.id  from resturant_information left join property_location on property_location.id=resturant_information.property_id left join company_profiles on property_location.company_id=company_profiles.company_id left join phone_country_code on phone_country_code.country_name=company_profiles.phone_country where resturant_information.id=?");
			$stmt->bind_param("i", $id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			  
			return $row;
			
			
		}
	
	
	function daycareRequestCount($data)
		{
				$dbCon = AppModel::createConnection();
				$company_id= $data['company_id'];
				$org=array();
				$stmt = $dbCon->prepare("select count(id) as num from dropped_off_children where child_id in (select id from child_care_info where company_id=?) and is_approved=0 and is_left=0");
				$stmt->bind_param("i", $company_id);
				$stmt->execute();
				$result_received = $stmt->get_result();
				$row_received = $result_received->fetch_assoc();
				
				$stmt = $dbCon->prepare("select count(id) as num from dropped_off_children where child_id in (select id from child_care_info where company_id=?) and is_approved=1 and is_left=1");
				$stmt->bind_param("i", $company_id);
				$stmt->execute();
				$result_picked = $stmt->get_result();
				$row_picked = $result_picked->fetch_assoc();
				$org['received']=$row_received['num'];
				$org['picked']=$row_picked['num'];
				$org['ttl']=$row_received['num']+$row_picked['num'];
				
				$stmt = $dbCon->prepare("select count(id) as num from child_care_info where id not in (select child_id from parent_info where child_id in (select id from child_care_info where company_id=?) ) and company_id=?");
				$stmt->bind_param("ii", $company_id,$company_id);
				$stmt->execute();
				$result_received = $stmt->get_result();
				$row_received = $result_received->fetch_assoc();
				$org['inactive']=$row_received['num'];
				$org['ttl']=$org['ttl']+$row_received['num'];
				
				$stmt = $dbCon->prepare("select duns_is_approved from companies where id=?");
				$stmt->bind_param("i", $company_id);
				$stmt->execute();
				$result_received = $stmt->get_result();
				$row_received = $result_received->fetch_assoc();
				
				$org['duns_is_approved']=$row_received['duns_is_approved'];
				$stmt->close();
				$dbCon->close();
				return $org;
			
			
		}
		
		 function dunsInfoCount($data)
		{
				$dbCon = AppModel::createConnection();
				$company_id= $this -> encrypt_decrypt('decrypt',$data['cid']);
				 
				$stmt = $dbCon->prepare("select duns_is_approved from companies where id=?");
				$stmt->bind_param("i", $company_id);
				$stmt->execute();
				$result_received = $stmt->get_result();
				$row_received = $result_received->fetch_assoc();
				 
				$stmt->close();
				$dbCon->close();
				return $row_received['duns_is_approved'];
			
			
		}
	
	function apartmentAmenitiesDetailInfo()
		{
			 
			$dbCon = AppModel::createConnection();
			$hotel_id= $this -> encrypt_decrypt('decrypt',$_POST['id']);  
			 
			$stmt = $dbCon->prepare("select * from apartment_amenities where id in (select amenity_id from user_apartment_amenities_detail where user_amenitiy_category_id in (select id from user_apartment_amenities_category_detail where user_address_id=?))");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $hotel_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			array_push($org,$row);	
			}
				$stmt->close();
				$dbCon->close();
				 
				return $org;
			
		}
		
	
	function apartmentDetailInfo()
		{
			 
			$dbCon = AppModel::createConnection();
			$hotel_id= $this -> encrypt_decrypt('decrypt',$_POST['id']);  
			 
			$stmt = $dbCon->prepare("select * from user_address where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $hotel_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			 $stmt = $dbCon->prepare("select count(id) as num from user_apartment_bedrooms where user_address_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$resultBedrooms = $stmt->get_result();
			$rowBedrooms = $resultBedrooms->fetch_assoc();
			
			$row['bedrooms']=$rowBedrooms['num'];
			
			 $stmt = $dbCon->prepare("select count(id) as num from user_apartment_bedrooms_beds where bedroom_id in (select id from user_apartment_bedrooms where user_address_id=?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$resultBedrooms = $stmt->get_result();
			$rowBedrooms = $resultBedrooms->fetch_assoc();
			
			$row['guests']=$rowBedrooms['num'];
			
			
			 $stmt = $dbCon->prepare("select sum(toilet_and_sink) as toilet,count(id) as bath from user_apartment_bathroom_detail where   user_address_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$resultBedrooms = $stmt->get_result();
			$rowBedrooms = $resultBedrooms->fetch_assoc();
			
			$row['toilet']=$rowBedrooms['toilet'];
			$row['bath']=$rowBedrooms['bath'];
			
			
			
			 $stmt = $dbCon->prepare("select apartment_photo_path as image_path from user_apartment_photos where user_address_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$resultImage = $stmt->get_result();
			$rowImage = $resultImage->fetch_assoc();
			 
			
			$bigImage=$rowImage['image_path'];	
			 
			 
			 $filename="../estorecss/".$bigImage.".txt"; $value_a=file_get_contents("../estorecss/".$bigImage.".txt"); $value_a=str_replace('"','',$value_a); $row['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$bigImage.'.jpg' );
			 $row['enc']= $this -> encrypt_decrypt('encrypt',$row['id']);  
			$row['image_path']=str_replace('../','https://www.qloudid.com/',$row['image_path']);
			 
			 $stmt = $dbCon->prepare("select min(minimum_price) as price from user_apartment_pricing_info where user_address_id=?");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $row['id']);
				$stmt->execute();
				$resultPrice = $stmt->get_result();
				$rowPrice = $resultPrice->fetch_assoc();
				$row['price']=$rowPrice['price'];
			
			
				$stmt->close();
				$dbCon->close();
				 
				return $row;
			
		}
		
		function apartmentImages()
		{
			$dbCon = AppModel::createConnection();
			$hotel_id= $this -> encrypt_decrypt('decrypt',$_POST['id']);  
			$stmt = $dbCon->prepare("select apartment_photo_path as image_path from user_apartment_photos where user_address_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $hotel_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			 $filename="../estorecss/".$row['image_path'].".txt"; $value_a=file_get_contents("../estorecss/".$row['image_path'].".txt"); $value_a=str_replace('"','',$value_a); $row['image_path1'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['image_path'].'.jpg' );
			$row['image_path1']=str_replace('../','qloudid.com/',$row['image_path1']);
			array_push($org,$row);
			}
			return $org;
			
		}
		
		
	function apartmentDetailInfoDstrictApp($data)
		{
			 
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select room_type_id,user_id,card_id,checkin_date,checkout_date,guest_adult,guest_children,delivery_address_id from hotel_checkout_detail where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowApartment = $result->fetch_assoc();
			$guest_id=$rowApartment['user_id'];
			$hotel_id= $rowApartment['room_type_id'];  
			 
			$stmt = $dbCon->prepare("select * from user_address where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $hotel_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$row['address']=html_entity_decode($row['address'],ENT_NOQUOTES, 'UTF-8'); 
			$row['description']=html_entity_decode($row['apartment_description'],ENT_NOQUOTES, 'UTF-8'); 
			$stmt = $dbCon->prepare("select * from user_address where user_id=? and is_personal_address=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowUserAddress = $result->fetch_assoc();
			
			
			$row['you_address']=html_entity_decode($rowUserAddress['address'],ENT_NOQUOTES, 'UTF-8'); 
			$row['you_city']=html_entity_decode($rowUserAddress['city'],ENT_NOQUOTES, 'UTF-8'); 
			$row['you_zipcode']=html_entity_decode($rowUserAddress['zipcode'],ENT_NOQUOTES, 'UTF-8'); 
			$row['you_port_number']=html_entity_decode($rowUserAddress['port_number'],ENT_NOQUOTES, 'UTF-8'); 
			
			$stmt = $dbCon->prepare("select card_number from user_cards where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $rowApartment['card_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowGuestCard = $result->fetch_assoc();
			$row['card_detail']='Visa'.substr($rowGuestCard['card_number'],-4);
			$row['duration']=date('d M',strtotime($rowApartment['checkin_date'])).'-'.date('d M',strtotime($rowApartment['checkout_date']));
			$row['check_in_date']=date('D, d M Y',strtotime($rowApartment['checkin_date']));
			$row['checked_out_date']=date('D, d M Y',strtotime($rowApartment['checkout_date']));
			if($rowApartment['checkout_date']=='' || $rowApartment['checkout_date']==null)
			{
			$row['checked_out_date']='Not applicable';	
			}
			$row['guest']=$rowApartment['guest_adult'].' adults & '.$rowApartment['guest_children'].' children';
			
			$stmt = $dbCon->prepare("select concat_ws(' ',first_name,last_name) as name,country_of_residence,phone_number,country_code,email from user_logins left join user_profiles on user_profiles.user_logins_id=user_logins.id left join phone_country_code on phone_country_code.id=user_logins.country_of_residence where user_logins.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowUser = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select tenant_type from landloard_building_tenant where tenant_email=? and building_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("si", $rowUser['email'],$row['building_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowTenant = $result->fetch_assoc();
			
			if(empty($rowTenant))
			{
			$row['payment']=0;
			}
			else
			{
				if($rowTenant['tenant_type']==1)
				{
					$row['payment']=1;
				}
				else
				{
					$row['payment']=0;
				}
			}
			
			$row['host_name']=$rowUser['name'];
			$row['host_email']=$rowUser['email'];
			$row['host_phone']='+'.$rowUser['country_code'].' '.$rowUser['phone_number'];
			
			
			$stmt = $dbCon->prepare("select concat_ws(' ',first_name,last_name) as name,country_of_residence,phone_number,country_code,email from user_logins left join user_profiles on user_profiles.user_logins_id=user_logins.id left join phone_country_code on phone_country_code.id=user_logins.country_of_residence where user_logins.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $guest_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowGuest = $result->fetch_assoc();
			
			
			$row['guest_name']=$rowGuest['name'];
			$row['guest_email']=$rowGuest['email'];
			$row['guest_phone']='+'.$rowGuest['country_code'].' '.$rowGuest['phone_number'];
			$row['guest_id']='Passport';
			
			
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_bedrooms where user_address_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$resultBedrooms = $stmt->get_result();
			$rowBedrooms = $resultBedrooms->fetch_assoc();
			
			$row['bedrooms']=$rowBedrooms['num'];
			
			 $stmt = $dbCon->prepare("select count(id) as num from user_apartment_bedrooms_beds where bedroom_id in (select id from user_apartment_bedrooms where user_address_id=?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$resultBedrooms = $stmt->get_result();
			$rowBedrooms = $resultBedrooms->fetch_assoc();
			
			$row['guests']=$rowBedrooms['num'];
			
			
			 $stmt = $dbCon->prepare("select sum(toilet_and_sink) as toilet,count(id) as bath from user_apartment_bathroom_detail where   user_address_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$resultBedrooms = $stmt->get_result();
			$rowBedrooms = $resultBedrooms->fetch_assoc();
			
			$row['toilet']=$rowBedrooms['toilet'];
			$row['bath']=$rowBedrooms['bath'];
		
			
			
			 $stmt = $dbCon->prepare("select apartment_photo_path as image_path from user_apartment_photos where user_address_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$resultImage = $stmt->get_result();
			$rowImage = $resultImage->fetch_assoc();
			 
			
			$bigImage=$rowImage['image_path'];	
			 
			 
			 $filename="../estorecss/".$bigImage.".txt"; $value_a=file_get_contents("../estorecss/".$bigImage.".txt"); $value_a=str_replace('"','',$value_a); $row['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$bigImage.'.jpg' );
			 $row['enc']= $this -> encrypt_decrypt('encrypt',$row['id']);  
			$row['image_path']=str_replace('../','https://www.qloudid.com/',$row['image_path']);
			 
			 $stmt = $dbCon->prepare("select min(minimum_price) as price from user_apartment_pricing_info where user_address_id=?");
			
				/* bind parameters for markers */
				$stmt->bind_param("i", $row['id']);
				$stmt->execute();
				$resultPrice = $stmt->get_result();
				$rowPrice = $resultPrice->fetch_assoc();
				$row['price']=$rowPrice['price'];
			
			
				$stmt->close();
				$dbCon->close();
				 
				return $row;
			
		}
			
			
	function apartmentList()
	{
		 
			$dbCon = AppModel::createConnection();
			 
			$search='%'.$_POST['city'].'%';
			 
			$total_days=round(($_POST['end_date']-$_POST['start_date']) / (60 * 60 * 24));
			 $strt=date('Y-m-d',$_POST['start_date']);
			 $end=date('Y-m-d',$_POST['end_date']);
			 
			  
			$stmt = $dbCon->prepare("select * from user_address where is_published=1 and (state like ? or city like ?) and district_short_rent=1 and id not in (SELECT room_type_id from hotel_checkout_detail where hotel_property_type=2  and ((checkin_date BETWEEN ? AND ?) or (checkout_date BETWEEN ? AND ?)))");
			
			//$stmt = $dbCon->prepare("select * from user_address where is_published=1 and state like ? and district_short_rent=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("ssssss", $search,$search, $strt,$end, $strt,$end);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			
			$j=0;
			while($row = $result->fetch_assoc())
			{
			   
			$skip=0;
			$price=0;
			 for($i=0;$i<$total_days;$i++)
			 {
			 
			$stmt = $dbCon->prepare("select user_apartment_pricing_info.user_address_id,pricing_start_date,pricing_end_date,monday_price,tuesday_price,wednesday_price,thursday_price,friday_price,saturday_price,sunday_price,shortest_duration,monday_open,tuesday_open,wednesday_open,thursday_open,friday_open,saturday_open,sunday_open from user_apartment_pricing_info where user_address_id=? and (id in (select max(id) from user_apartment_pricing_info where pricing_start_date<=? && pricing_end_date<=?) || id in (select min(id) from user_apartment_pricing_info where  pricing_start_date>=? && pricing_end_date>=?) || id in (select id from user_apartment_pricing_info where  pricing_start_date<=? && pricing_end_date>=?))");
			
			/* bind parameters for markers */
			$stmt->bind_param("issssss", $row['id'],$_POST['start_date'],$_POST['end_date'],$_POST['start_date'],$_POST['end_date'],$_POST['start_date'],$_POST['end_date']);
			$stmt->execute();
			$resultPrice = $stmt->get_result();
			while($rowPrice = $resultPrice->fetch_assoc())
			{
		     
			if($rowPrice['shortest_duration']>$total_days)
			{
				 
				$skip=1;
				break;
			}
			
			 
			$currentdate=strtotime("+".$i." days", $_POST['start_date']);
			$c=date('Y-m-d',$currentdate);	
			 
			$stmt = $dbCon->prepare("select count(blocked_date) as num from user_apartment_blocked_dates where blocked_date=? and user_address_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("si", $currentdate,$row['id']);
			$stmt->execute();
			$blockedDate = $stmt->get_result();
			$rowBlocked = $blockedDate->fetch_assoc();
			 
			if($rowBlocked['num']==1)
			{
				$skip=1;
			 
				break;	
			}
				
			if($rowPrice['pricing_start_date']<=strtotime($c) || $rowPrice['pricing_end_date']>=strtotime($c))
			{
			//echo $rowPrice['pricing_start_date'].'-'.strtotime($c).'-'.$rowPrice['pricing_end_date'].'</br>';
			$d1 = new DateTime($c);
			$day=$d1->format('w');
			 
			if($day==0)
			{
				 
				if($rowPrice['sunday_open']==0)
				{
				$skip=1;
				//echo $day.'-'.$skip.'/'.$c;	
				break;
				}
				else
				{
				$price=$price+$rowPrice['sunday_price'];	
				break;
				}
				
			}
			
			else if($day==1)
			{
				if($rowPrice['monday_open']==0)
				{
				$skip=1;
				//echo $day.'-'.$skip.'/'.$c;	
				break;
				}
				else
				{
				$price=$price+$rowPrice['monday_price'];
				break;				
				}
				
			}
			else if($day==2)
			{
				if($rowPrice['tuesday_open']==0)
				{
				$skip=1;
				////echo $day.'-'.$skip.'/'.$c;		
				break;
				}
				else
				{
				$price=$price+$rowPrice['tuesday_price'];
			    break;
				}
				
			}
			
			else if($day==3)
			{
				if($rowPrice['wednesday_open']==0)
				{
				$skip=1;
				////echo $day.'-'.$skip.'/'.$c;		
				break;
				}
				else
				{
				$price=$price+$rowPrice['wednesday_price'];	
				break;
				}
				
			}
			else if($day==4)
			{
				if($rowPrice['thursday_open']==0)
				{
				$skip=1;
				////echo $day.'-'.$skip.'/'.$c;		
				break;
				}
				else
				{
				$price=$price+$rowPrice['thursday_price'];	
				break;
				}
				
			}
			else if($day==5)
			{
				if($rowPrice['friday_open']==0)
				{
				$skip=1;
				////echo $day.'-'.$skip.'/'.$c;		
				break;
				}
				else
				{
				$price=$price+$rowPrice['friday_price'];
				break;				
				}
				
			}
			else if($day==6)
			{
				if($rowPrice['saturday_open']==0)
				{
				$skip=1;
				////echo $day.'-'.$skip.'/'.$c;		
				break;
				}
				else
				{
				$price=$price+$rowPrice['saturday_price'];
				break;
				}
				
			}
			}
			}
			if($skip==1)
			{
				 
				break;
			}
			}
		 
			if($skip==1 || $price==0)
			{
				continue;
			}
			else
			{
			$row['price']=round($price/$total_days);
			}
			
			
			
		  
			$stmt = $dbCon->prepare("select apartment_photo_path as image_path from user_apartment_photos where user_address_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$resultImage = $stmt->get_result();
			$rowImage = $resultImage->fetch_assoc();
			 
			
			$bigImage=$rowImage['image_path'];	
			 
			 
			 $filename="../estorecss/".$bigImage.".txt"; $value_a=file_get_contents("../estorecss/".$bigImage.".txt"); $value_a=str_replace('"','',$value_a); $row['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$bigImage.'.jpg' );
			 $row['enc']= $this -> encrypt_decrypt('encrypt',$row['id']);  
			$row['image_path']=str_replace('../','https://www.qloudid.com/',$row['image_path']);
			array_push($org,$row);
			$org[$j]['images']=array();
			
			$stmt = $dbCon->prepare("select apartment_photo_path as image_path from user_apartment_photos where user_address_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$resultImages = $stmt->get_result();
			while($rowImages = $resultImages->fetch_assoc())
			{
			$bigImage=$rowImages['image_path'];	
			$filename="../estorecss/".$bigImage.".txt"; $value_a=file_get_contents("../estorecss/".$bigImage.".txt"); $value_a=str_replace('"','',$value_a); $rowImages['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$bigImage.'.jpg' );
			 
			$rowImages['image_path']=str_replace('../','https://www.qloudid.com/',$rowImages['image_path']);
			array_push($org[$j]['images'],$rowImages);	
			}
			
			if(empty($rowImages = $resultImages->fetch_assoc()))
			{
				$org[$j]['images'][0]['image_path']=$row['image_path'];
			}
			$j++;
			}
			  
				$stmt->close();
				$dbCon->close();
				 
				return $org;
	}
	
	function longTermApartmentList()
	{
		 
			$dbCon = AppModel::createConnection();
			$search='%'.$_POST['city'].'%';
			$stmt = $dbCon->prepare("select * from user_address where   state like ? and district_long_rent=1 and publish_dstrict_long_rent=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("s", $search);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			
			$j=0;
			while($row = $result->fetch_assoc())
			{
			 
			 $stmt = $dbCon->prepare("select count(apartment_photo_path) as num from user_apartment_photos where user_address_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$resultImage = $stmt->get_result();
			$rowImage = $resultImage->fetch_assoc();
			
			if($rowImage['num']<10)
			{
				continue;
			}
		  
			$stmt = $dbCon->prepare("select apartment_photo_path as image_path from user_apartment_photos where user_address_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$resultImage = $stmt->get_result();
			$rowImage = $resultImage->fetch_assoc();
			 
			
			$bigImage=$rowImage['image_path'];	
			 
			 
			 $filename="../estorecss/".$bigImage.".txt"; $value_a=file_get_contents("../estorecss/".$bigImage.".txt"); $value_a=str_replace('"','',$value_a); $row['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$bigImage.'.jpg' );
			 $row['enc']= $this -> encrypt_decrypt('encrypt',$row['id']);  
			$row['image_path']=str_replace('../','https://www.qloudid.com/',$row['image_path']);
			array_push($org,$row);
			$org[$j]['images']=array();
			
			$stmt = $dbCon->prepare("select apartment_photo_path as image_path from user_apartment_photos where user_address_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$resultImages = $stmt->get_result();
			while($rowImages = $resultImages->fetch_assoc())
			{
			$bigImage=$rowImages['image_path'];	
			$filename="../estorecss/".$bigImage.".txt"; $value_a=file_get_contents("../estorecss/".$bigImage.".txt"); $value_a=str_replace('"','',$value_a); $rowImages['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$bigImage.'.jpg' );
			 
			$rowImages['image_path']=str_replace('../','https://www.qloudid.com/',$rowImages['image_path']);
			array_push($org[$j]['images'],$rowImages);	
			}
			
			if(empty($rowImages = $resultImages->fetch_assoc()))
			{
				$org[$j]['images'][0]['image_path']=$row['image_path'];
			}
			$j++;
			}
			 
				$stmt->close();
				$dbCon->close();
				 
				return $org;
	}
	
	function apartmentForSaleList()
	{
		 
			$dbCon = AppModel::createConnection();
			$search='%'.$_POST['city'].'%';
			$stmt = $dbCon->prepare("select * from user_address where   state like ? and district_sale=1 and publish_dstrict_sale=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("s", $search);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			
			$j=0;
			while($row = $result->fetch_assoc())
			{
			 
			 $stmt = $dbCon->prepare("select count(apartment_photo_path) as num from user_apartment_photos where user_address_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$resultImage = $stmt->get_result();
			$rowImage = $resultImage->fetch_assoc();
			
			if($rowImage['num']<10)
			{
				continue;
			}
		  
			$stmt = $dbCon->prepare("select apartment_photo_path as image_path from user_apartment_photos where user_address_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$resultImage = $stmt->get_result();
			$rowImage = $resultImage->fetch_assoc();
			 
			
			$bigImage=$rowImage['image_path'];	
			 
			 
			 $filename="../estorecss/".$bigImage.".txt"; $value_a=file_get_contents("../estorecss/".$bigImage.".txt"); $value_a=str_replace('"','',$value_a); $row['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$bigImage.'.jpg' );
			 $row['enc']= $this -> encrypt_decrypt('encrypt',$row['id']);  
			$row['image_path']=str_replace('../','https://www.qloudid.com/',$row['image_path']);
			array_push($org,$row);
			$org[$j]['images']=array();
			
			$stmt = $dbCon->prepare("select apartment_photo_path as image_path from user_apartment_photos where user_address_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$resultImages = $stmt->get_result();
			while($rowImages = $resultImages->fetch_assoc())
			{
			$bigImage=$rowImages['image_path'];	
			$filename="../estorecss/".$bigImage.".txt"; $value_a=file_get_contents("../estorecss/".$bigImage.".txt"); $value_a=str_replace('"','',$value_a); $rowImages['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$bigImage.'.jpg' );
			 
			$rowImages['image_path']=str_replace('../','https://www.qloudid.com/',$rowImages['image_path']);
			array_push($org[$j]['images'],$rowImages);	
			}
			
			if(empty($rowImages = $resultImages->fetch_assoc()))
			{
				$org[$j]['images'][0]['image_path']=$row['image_path'];
			}
			$j++;
			}
			 
				$stmt->close();
				$dbCon->close();
				 
				return $org;
	}
	
	
	function apartmentIsAvailable()
	{
		 
			$dbCon = AppModel::createConnection();
			$room_type_id= $this -> encrypt_decrypt('decrypt',$_POST['rid']);
			 
			$total_days=round(($_POST['end_date']-$_POST['start_date']) / (60 * 60 * 24));
			 $strt=date('Y-m-d',$_POST['start_date']);
			 $end=date('Y-m-d',$_POST['end_date']);
			$stmt = $dbCon->prepare("SELECT count(id) as num from hotel_checkout_detail where
									room_type_id=? and hotel_property_type=2  and ((checkin_date BETWEEN ? AND ?) or (checkout_date BETWEEN ? AND ?))");
			
			/* bind parameters for markers */
			$stmt->bind_param("issss", $room_type_id, $strt,$end, $strt,$end);
			$stmt->execute();
			$result = $stmt->get_result();
			 
			$row = $result->fetch_assoc();
			if($row['num']>0)
			{
				return 1;
			}
			$skip=0;
			$price=0;
			 for($i=0;$i<$total_days;$i++)
			 {
				 
			$stmt = $dbCon->prepare("select pricing_start_date,pricing_end_date,monday_price,tuesday_price,wednesday_price,thursday_price,friday_price,saturday_price,sunday_price,shortest_duration,monday_open,tuesday_open,wednesday_open,thursday_open,friday_open,saturday_open,sunday_open from user_apartment_pricing_info where user_address_id=? and (pricing_start_date<=? and pricing_end_date>=?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("iii", $room_type_id,$_POST['end_date'],$_POST['start_date']);
			$stmt->execute();
			$resultPrice = $stmt->get_result();
			while($rowPrice = $resultPrice->fetch_assoc())
			{
			
			   	
			if($rowPrice['shortest_duration']>$total_days)
			{
				 
				$skip=1;
				break;
			}
			$currentdate=strtotime("+".$i." days", $_POST['start_date']);
			$c=date('Y-m-d',$currentdate);	
			 
			$stmt = $dbCon->prepare("select count(blocked_date) as num from user_apartment_blocked_dates where blocked_date=? and user_address_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("si", $currentdate,$room_type_id);
			$stmt->execute();
			$blockedDate = $stmt->get_result();
			$rowBlocked = $blockedDate->fetch_assoc();
			if($rowBlocked['num']==1)
			{
				$skip=1;
			 
				break;	
			}
			if($rowPrice['pricing_start_date']<=$c || $rowPrice['pricing_end_date']>=$c)
			{
			$d1 = new DateTime($c);
			$day=$d1->format('w');
			 
			if($day==0)
			{
				 
				if($rowPrice['sunday_open']==0)
				{
				$skip=1;
				//echo $day.'-'.$skip.'/'.$c;	
				break;
				}
				else
				{
				$price=$price+$rowPrice['sunday_price'];	
				}
				
			}
			
			else if($day==1)
			{
				if($rowPrice['monday_open']==0)
				{
				$skip=1;
				//echo $day.'-'.$skip.'/'.$c;	
				break;
				}
				else
				{
				$price=$price+$rowPrice['monday_price'];	
				}
				
			}
			else if($day==2)
			{
				if($rowPrice['tuesday_open']==0)
				{
				$skip=1;
				////echo $day.'-'.$skip.'/'.$c;		
				break;
				}
				else
				{
				$price=$price+$rowPrice['tuesday_price'];	
				}
				
			}
			
			else if($day==3)
			{
				if($rowPrice['wednesday_open']==0)
				{
				$skip=1;
				////echo $day.'-'.$skip.'/'.$c;		
				break;
				}
				else
				{
				$price=$price+$rowPrice['wednesday_price'];	
				}
				
			}
			else if($day==4)
			{
				if($rowPrice['thursday_open']==0)
				{
				$skip=1;
				////echo $day.'-'.$skip.'/'.$c;		
				break;
				}
				else
				{
				$price=$price+$rowPrice['thursday_price'];	
				}
				
			}
			else if($day==5)
			{
				if($rowPrice['friday_open']==0)
				{
				$skip=1;
				////echo $day.'-'.$skip.'/'.$c;		
				break;
				}
				else
				{
				$price=$price+$rowPrice['friday_price'];	
				}
				
			}
			else if($day==6)
			{
				if($rowPrice['saturday_open']==0)
				{
				$skip=1;
				////echo $day.'-'.$skip.'/'.$c;		
				break;
				}
				else
				{
				$price=$price+$rowPrice['saturday_price'];	
				}
				
			}
			}
			}
			if($skip==1)
			{
				 
				break;
			}
			}
			 
			
				$stmt->close();
				$dbCon->close();
				 
				return $skip;
	}
	
	
	
	function orderHotelAmenity()
		{
			$dbCon = AppModel::createConnection();
			$hotel_id= $this -> encrypt_decrypt('decrypt',$_POST['id']); 
			$room_type_id= $this -> encrypt_decrypt('decrypt',$_POST['rid']);
			$room_id= $this -> encrypt_decrypt('decrypt',$_POST['rmid']);
			$a_id= $this -> encrypt_decrypt('decrypt',$_POST['aid']);
			$id= $this -> encrypt_decrypt('decrypt',$_POST['qloud_checkout_id']);
			$stmt = $dbCon->prepare("select * from company_hotel_amenities_user_request where qloud_checkout_id=? and amenity_id=? and is_verified=0");
			$stmt->bind_param("is",$id,$a_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			 
			if(empty($row))
			{
			$t=0;
			$quantity=$_POST['quantity'];
			$stmt = $dbCon->prepare("insert into `company_hotel_amenities_user_request`(hotel_id,room_type_id,room_id,amenity_id,user_id,created_on,qloud_checkout_id,aminity_quantity,aminity_price,amenity_name) values ( ?, ?, ?, ?, ?, now(),?,?,?,?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("iiisiiiis",$hotel_id,$room_type_id,$room_id,$a_id,$_POST['user_id'],$id,$quantity,$t,$_POST['aname']);
			$stmt->execute();
			$id=$stmt->insert_id;
			$val=$this -> encrypt_decrypt('encrypt',$id);
			}
			else
			{
			$t=0;
			$quantity=$_POST['quantity']+$row['aminity_quantity'];
			$stmt = $dbCon->prepare("update company_hotel_amenities_user_request set aminity_quantity=?,aminity_price=? where id=?");
			$stmt->bind_param("iii",$quantity,$t,$row['id']);
			$stmt->execute();	
			$val=$this -> encrypt_decrypt('encrypt',$row['id']);
			}
			
			 
			$stmt->close();
			$dbCon->close();
			return $val;
			
		}
	function hotelBathroomAmenities($data)
		{
			$dbCon = AppModel::createConnection();
			$hotel_id= $this -> encrypt_decrypt('decrypt',$data['id']); 
			$room_type_id= $this -> encrypt_decrypt('decrypt',$data['rid']);
			$room_id= $this -> encrypt_decrypt('decrypt',$data['rmid']);
			 
			$stmt = $dbCon->prepare("select hotel_bathroom_amenities from hotel_basic_information where property_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $hotel_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select bathroom_amenities_available from company_hotel_room_type_detail where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $room_type_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRtype = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select room_bathroom_amenities from hotel_room_detail where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $room_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRoom = $result->fetch_assoc();
			$amenities=$row['hotel_bathroom_amenities'].''.$rowRtype['bathroom_amenities_available'].''.$rowRoom['room_bathroom_amenities'];
			 
			$stmt = $dbCon->prepare("select * from company_hotel_bathroom_amenities where find_in_set(id,?) and is_order>0");
			
			/* bind parameters for markers */
			$stmt->bind_param("s", $amenities);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row  = $result->fetch_assoc())
			{
				array_push($org,$row);
				$org[$j]['enc']=$this->encrypt_decrypt('encrypt','b_'.$row['id']);
				$j++;
			}
			
			return $org;
		}
	
	function hotelMediaAmenities($data)
		{
			$dbCon = AppModel::createConnection();
			$hotel_id= $this -> encrypt_decrypt('decrypt',$data['id']); 
			$room_type_id= $this -> encrypt_decrypt('decrypt',$data['rid']);
			$room_id= $this -> encrypt_decrypt('decrypt',$data['rmid']);
			 
			$stmt = $dbCon->prepare("select hotel_connectivity_amenities from hotel_basic_information where property_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $hotel_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select connectivity_amenities_available from company_hotel_room_type_detail where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $room_type_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRtype = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select room_connectivity_amenities from hotel_room_detail where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $room_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRoom = $result->fetch_assoc();
			$amenities=$row['hotel_connectivity_amenities'].''.$rowRtype['connectivity_amenities_available'].''.$rowRoom['room_connectivity_amenities'];
			 
			$stmt = $dbCon->prepare("select * from company_hotel_connectivity_amenities where find_in_set(id,?) and is_order>0");
			
			/* bind parameters for markers */
			$stmt->bind_param("s", $amenities);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row  = $result->fetch_assoc())
			{
				array_push($org,$row);
				$org[$j]['enc']=$this->encrypt_decrypt('encrypt','c_'.$row['id']);
				$j++;
			}
			
			return $org;
		}
	
	function hotelRoomAmenities($data)
		{
			$dbCon = AppModel::createConnection();
			$hotel_id= $this -> encrypt_decrypt('decrypt',$data['id']); 
			$room_type_id= $this -> encrypt_decrypt('decrypt',$data['rid']);
			$room_id= $this -> encrypt_decrypt('decrypt',$data['rmid']);
			 
			$stmt = $dbCon->prepare("select hotel_general_amenities from hotel_basic_information where property_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $hotel_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select general_amenities_available from company_hotel_room_type_detail where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $room_type_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRtype = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select room_general_amenities from hotel_room_detail where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $room_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRoom = $result->fetch_assoc();
			$amenities=$row['hotel_general_amenities'].''.$rowRtype['general_amenities_available'].''.$rowRoom['room_general_amenities'];
			
			$stmt = $dbCon->prepare("select * from company_hotel_general_amenities where find_in_set(id,?) and is_order>0 and is_room=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("s", $amenities);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row  = $result->fetch_assoc())
			{
				array_push($org,$row);
				$org[$j]['enc']=$this->encrypt_decrypt('encrypt','g_'.$row['id']);
				$j++;
			}
			
			return $org;
		}
	
		function hotelBedAmenities($data)
		{
			$dbCon = AppModel::createConnection();
			$hotel_id= $this -> encrypt_decrypt('decrypt',$data['id']); 
			$room_type_id= $this -> encrypt_decrypt('decrypt',$data['rid']);
			$room_id= $this -> encrypt_decrypt('decrypt',$data['rmid']);
			 
			$stmt = $dbCon->prepare("select hotel_general_amenities from hotel_basic_information where property_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $hotel_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select general_amenities_available from company_hotel_room_type_detail where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $room_type_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRtype = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select room_general_amenities from hotel_room_detail where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $room_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowRoom = $result->fetch_assoc();
			$amenities=$row['hotel_general_amenities'].''.$rowRtype['general_amenities_available'].''.$rowRoom['room_general_amenities'];
			
			$stmt = $dbCon->prepare("select * from company_hotel_general_amenities where find_in_set(id,?) and is_order>0 and is_room=2");
			
			/* bind parameters for markers */
			$stmt->bind_param("s", $amenities);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row  = $result->fetch_assoc())
			{
				array_push($org,$row);
				$org[$j]['enc']=$this->encrypt_decrypt('encrypt','g_'.$row['id']);
				$j++;
			}
			
			return $org;
		}
	
	function updateLeave($data)
		{
			$dbCon = AppModel::createConnection();
			$st=1;
			$next_days=$data['day_leave']-1;
			$date = date("Y-m-d");
			$mod_date = date('Y-m-d',strtotime($date."+ ".$next_days." days"));
			//echo $mod_date; echo $date; die;
			$stmt = $dbCon->prepare("insert into employee_leave_vacation(company_id,user_id,leave_start,leave_end,created_on,total_leave,is_approved,leave_description) values(?,?,now(),?,now(),?,?, ?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("iisiis", $data['company_id'],$data['user_id'],$mod_date,$data['day_leave'],$st,$data['leave_description']);
			$stmt->execute();
			
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		
		function updateVacationInfo($data)
		{
			$dbCon = AppModel::createConnection();
			$st=2;
			 $diff = strtotime($data['end_date']) - strtotime($data['start_date']); 
			 $diff = abs(round($diff / 86400))+1; 
			 
			$stmt = $dbCon->prepare("insert into employee_leave_vacation(company_id,user_id,leave_start,leave_end,created_on,total_leave,leave_type,leave_description) values(?,?,?,?,now(),?,?, ?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("iissiis", $data['company_id'],$data['user_id'],$data['start_date'],$data['end_date'],$diff,$st,$data['leave_description']);
			$stmt->execute();
			
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
	
	function checkEmployeeTime($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select max(id) as eid,max(created_on) edate from employee_attendence where company_id=? and user_id=? and is_exit=0");
			$stmt->bind_param("ii", $data['company_id'],$data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			date_default_timezone_set("Europe/Stockholm");
			$starttimestamp = strtotime($row['edate']);
			$endtimestamp = strtotime(date('Y-m-d H:i:s'));
			//echo $starttimestamp.'-'; echo $endtimestamp;
			$difference = floor(abs($endtimestamp - $starttimestamp)/3600);
			$difference2 = floor(abs($endtimestamp - $starttimestamp )/60);
			$difference2=$difference2 -($difference*60);
			$difference3 = floor(abs($endtimestamp - $starttimestamp));
			$difference3 = abs($difference3 - ($difference*3600) - ($difference2*60));
			$row['diffh']=$difference;
			$row['diffm']=$difference2;
			$row['diffs']=$difference3;
			$stmt->close();
			$dbCon->close();
			return $row;
			
			
		 		
		}
	function updateAttendence($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("insert into employee_attendence(company_id,user_id,entry_date,entry_time,created_on) values(?,?,now(),now(),now())");
			
			/* bind parameters for markers */
			$stmt->bind_param("ii", $data['company_id'],$data['user_id']);
			$stmt->execute();
			
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function updateExit($data)
		{
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update employee_attendence set  exit_time=now(),modified_on=now(),is_exit=1 where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['eid']);
			$stmt->execute();
			
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
	
	function checkEmployeeAttendence($data)
		{
			$dbCon = AppModel::createConnection();
			$company_id= $data['company_id'];
			
			$stmt = $dbCon->prepare("select max(id),max(entry_date) edate from employee_attendence where company_id=? and user_id=? and is_exit=0");
			$stmt->bind_param("ii", $company_id,$data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			 
			if(date('Y-m-d',strtotime($row['edate']))==date('Y-m-d'))
			{
		 
			$stmt->close();
			$dbCon->close();
			return 1;
			}
			else
			{
			 
			$stmt = $dbCon->prepare("select id from employee_leave_vacation where company_id=? and user_id=? and leave_type=1");
			$stmt->bind_param("ii", $company_id,$data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();	
			 
			if(empty($row))
			{
				 
			$stmt->close();
			$dbCon->close();
			return 0;	
			}
			else
			{
					 
			$stmt = $dbCon->prepare("select leave_start,leave_end from employee_leave_vacation where id=?");
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();	
			if((date('Y-m-d',strtotime($row['leave_start']))==date('Y-m-d') || date('Y-m-d',strtotime($row['leave_end']))==date('Y-m-d')) || (date('Y-m-d',strtotime($row['leave_start']))<date('Y-m-d') && date('Y-m-d',strtotime($row['leave_end']))>date('Y-m-d')))
			{
					 
			$stmt->close();
			$dbCon->close();
			return 2;
			}
			else
			{
				 
			$stmt->close();
			$dbCon->close();
			return 0;
			}
			}
			}
			
		}
    
	
	function hotelPayInfo()
		{
			 
			$dbCon = AppModel::createConnection();
			 
			$id= $this -> encrypt_decrypt('decrypt',$_POST['id']);  
			 
			$stmt = $dbCon->prepare("select buyer_id,is_buyer_company,hotel_checkout_detail.user_id,visiting_address,port_number,visiting_city,visiting_state,property_location.id as p_id,room_type_id,total_days,price,hotel_name,fdesk_country_code,fdesk_phone_number from hotel_checkout_detail left join company_hotel_room_type_detail on company_hotel_room_type_detail.id= hotel_checkout_detail.room_type_id left join hotel_basic_information on hotel_basic_information.property_id=company_hotel_room_type_detail.location_id left join property_location on property_location.id=hotel_basic_information.property_id where hotel_checkout_detail.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowPrice = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select * from hotel_images where property_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $rowPrice['p_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowImage = $result->fetch_assoc();
			
			$filename="../estorecss/".$rowImage['image_path'].".txt"; $value_a=file_get_contents("../estorecss/".$rowImage['image_path'].".txt"); $value_a=str_replace('"','',$value_a); $rowImage['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$rowImage['image_path'].'.jpg' );
			$rowPrice['image_path']=str_replace('../','https://www.qloudid.com/',$rowImage['image_path']);
			
			
			
		  if($row['is_buyer_company']==0)
		  {
			  $buyer=$rowPrice['user_id'];
			  $is_buyer_company=0;
			  $stmt = $dbCon->prepare("select concat_ws(' ', first_name,last_name) as name,email from user_logins where id = ?");
        
				/* bind parameters for markers */
				$stmt->bind_param("i", $buyer);
				$stmt->execute();
				$result = $stmt->get_result();
				$rowUser    = $result->fetch_assoc();
				 
		  }
		  else
		   {
			  $buyer=$rowPrice['buyer_id'];
			  $is_buyer_company=1;
			   $stmt = $dbCon->prepare("select company_name as name,company_email as email from companies where id = ?");
        
				/* bind parameters for markers */
				$stmt->bind_param("i", $buyer);
				$stmt->execute();
				$result = $stmt->get_result();
				$rowUser    = $result->fetch_assoc();
		  }
		  
			$price=$rowPrice['price']*$rowPrice['total_days']*100;
			 if($price<300)
			 {
				 $price=300;
			 }
			$rowPrice['name']=$rowUser['name'];
			$rowPrice['email']=$rowUser['email'];
			$rowPrice['price']=$price;
			 
			return $rowPrice;
		}
	
	
	
	
	
	
	
	function apartmentPayInfo()
		{
			 
			$dbCon = AppModel::createConnection();
			 
			$id= $this -> encrypt_decrypt('decrypt',$_POST['id']);  
			 
			$stmt = $dbCon->prepare("select passport_image,buyer_id,is_buyer_company,hotel_checkout_detail.user_id,user_address.address as visiting_address,user_address.port_number,user_address.city as visiting_city,user_address.state as visiting_state,user_address.id as p_id,room_type_id,total_days,price,property_nickname as hotel_name,country_code as fdesk_country_code,phone_number as fdesk_phone_number from hotel_checkout_detail left join user_address on user_address.id= hotel_checkout_detail.room_type_id left join user_profiles on user_profiles.user_logins_id=user_address.user_id left join user_logins on user_logins.id=user_address.user_id left join phone_country_code on user_logins.country_of_residence=phone_country_code.id where hotel_checkout_detail.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowPrice = $result->fetch_assoc();
			$rowPrice['enc_p_id']= $this -> encrypt_decrypt('encrypt',$rowPrice['p_id']);  
			 
			
			$filename="../estorecss/".$rowPrice['passport_image'].".txt"; $value_a=file_get_contents("../estorecss/".$rowPrice['passport_image'].".txt"); $value_a=str_replace('"','',$value_a); $rowPrice['passport_image'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$rowPrice['passport_image'].'.jpg' );
			$rowPrice['image_path']=str_replace('../','https://www.qloudid.com/',$rowPrice['passport_image']);
			
			
			
		  if($row['is_buyer_company']==0)
		  {
			  $buyer=$rowPrice['user_id'];
			  $is_buyer_company=0;
			  $stmt = $dbCon->prepare("select concat_ws(' ', first_name,last_name) as name,email from user_logins where id = ?");
        
				/* bind parameters for markers */
				$stmt->bind_param("i", $buyer);
				$stmt->execute();
				$result = $stmt->get_result();
				$rowUser    = $result->fetch_assoc();
				 
		  }
		  else
		   {
			  $buyer=$rowPrice['buyer_id'];
			  $is_buyer_company=1;
			   $stmt = $dbCon->prepare("select company_name as name,company_email as email from companies where id = ?");
        
				/* bind parameters for markers */
				$stmt->bind_param("i", $buyer);
				$stmt->execute();
				$result = $stmt->get_result();
				$rowUser    = $result->fetch_assoc();
		  }
		  
			$price=$rowPrice['price']*$rowPrice['total_days']*100;
			 if($price<300)
			 {
				 $price=300;
			 }
			$rowPrice['name']=$rowUser['name'];
			$rowPrice['email']=$rowUser['email'];
			$rowPrice['price']=$price;
			 
			return $rowPrice;
		}
	
	
	
	function hotelDetailRoomTypeInfo()
		{
			 
			$dbCon = AppModel::createConnection();
			$hotel_id= $this -> encrypt_decrypt('decrypt',$_POST['id']);  
			 
			$stmt = $dbCon->prepare("select property_location.id as hotel_id,hotel_description,web_type,website,fdesk_country_code,fdesk_phone_number,property_location.latitude,property_location.longitude,profile_pic,property_location.visiting_address,country_code,phone,hotel_name from hotel_basic_information left join property_location on property_location.id=hotel_basic_information.property_id left join company_profiles on property_location.company_id=company_profiles.company_id left join phone_country_code on phone_country_code.id=hotel_basic_information.fdesk_country_code where property_location.id=(select location_id from company_hotel_room_type_detail where id=?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $hotel_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			 if($row ['profile_pic']!=null) { $filename="../estorecss/".$row ['profile_pic'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['profile_pic'].".txt"); $value_a=str_replace('"','',$value_a); $row['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['profile_pic'].'.jpg' ); } else { $row['image_path']="../html/usercontent/images/default-profile-pic.jpg"; } }  else $row['image_path']="../html/usercontent/images/default-profile-pic.jpg";
			 $row['enc']=$this -> encrypt_decrypt('encrypt',$row['hotel_id']);
				$stmt->close();
				$dbCon->close();
				 
				return $row;
			
		}
	
	function hotelRoomTypeInfo()
		{
			$dbCon = AppModel::createConnection();
			$hotel_id= $this -> encrypt_decrypt('decrypt',$_POST['id']);  
			$room_id= $this -> encrypt_decrypt('decrypt',$_POST['rid']);  
			$stmt = $dbCon->prepare("select property_location.id as hotel_id,payment_option,hotel_description,web_type,website,fdesk_country_code,fdesk_phone_number,property_location.longitude,property_location.latitude,hotel_name,property_location.visiting_address,company_hotel_room_type_detail.id,room_type_name,room_price,hotel_room_type.room_type from company_hotel_room_type_detail left join hotel_room_type on hotel_room_type.id=company_hotel_room_type_detail.room_type left join hotel_basic_information on company_hotel_room_type_detail.location_id=hotel_basic_information.property_id left join property_location on property_location.id=hotel_basic_information.property_id where company_hotel_room_type_detail.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $hotel_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$big="new0.09086000 1600564862";
			$small1="new0.13561200 1600564862";
			$small2="new0.15516700 1600564862";
			$row = $result->fetch_assoc();
			$row['hotel_id']= $this -> encrypt_decrypt('encrypt',$row['hotel_id']);  
			$stmt = $dbCon->prepare("select room_price_info from hotel_room_detail where hotel_room_detail.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $room_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row1 = $result->fetch_assoc();
			$row['room_price']=$row1['room_price_info'];
			$stmt->close();
			$dbCon->close();
			 
			return $row;
			
		}
		
		
		function hotelRoomTypePriceInfo()
		{
			$dbCon = AppModel::createConnection();
			$hotel_id= $this -> encrypt_decrypt('decrypt',$_POST['id']);  
			$room_id= $this -> encrypt_decrypt('decrypt',$_POST['rid']);  
			 
			$stmt = $dbCon->prepare("select hotel_description,web_type,website,fdesk_country_code,fdesk_phone_number,property_location.longitude,property_location.latitude,hotel_name,property_location.visiting_address,company_hotel_room_type_detail.id,room_type_name,room_price,hotel_room_type.room_type from company_hotel_room_type_detail left join hotel_room_type on hotel_room_type.id=company_hotel_room_type_detail.room_type left join hotel_basic_information on company_hotel_room_type_detail.location_id=hotel_basic_information.property_id left join property_location on property_location.id=hotel_basic_information.property_id where company_hotel_room_type_detail.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $room_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$big="new0.09086000 1600564862";
			$small1="new0.13561200 1600564862";
			$small2="new0.15516700 1600564862";
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			 
			return $row;
			
		}
	
	
	
	
	function hotelRoomTypeImages()
		{
			$dbCon = AppModel::createConnection();
			$hotel_id= $this -> encrypt_decrypt('decrypt',$_POST['id']);  
			$stmt = $dbCon->prepare("select * from company_hotel_room_type_photos where room_type_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $hotel_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			 $filename="../estorecss/".$row['image_path'].".txt"; $value_a=file_get_contents("../estorecss/".$row['image_path'].".txt"); $value_a=str_replace('"','',$value_a); $row['image_path1'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['image_path'].'.jpg' );
			$row['image_path1']=str_replace('../','qloudid.com/',$row['image_path1']);
			array_push($org,$row);
			}
			return $org;
			
		}
	
	function hotelList()
	{
		 
		$dbCon = AppModel::createConnection();
			$search='%'.$_POST['city'].'%';
			 
			$stmt = $dbCon->prepare("select property_location.company_id,hotel_basic_information.property_id,hotel_description,property_location.id,profile_pic,property_location.visiting_address,country_code,phone,hotel_name,property_location.latitude,property_location.longitude from hotel_basic_information left join property_location on property_location.id=hotel_basic_information.property_id  left join company_profiles on property_location.company_id=company_profiles.company_id left join phone_country_code on phone_country_code.country_name=company_profiles.phone_country where is_hotel=1 and (property_location.visiting_address like ? or property_location.visiting_state like ? or property_location.visiting_city like ? or property_location.country_v like ? or property_location.city_v like ?) ");
			
			/* bind parameters for markers */
			$stmt->bind_param("sssss", $search,$search,$search,$search,$search);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$big="new0.09086000 1600564862";
			$small1="new0.13561200 1600564862";
			$small2="new0.15516700 1600564862";
			$j=0;
			while($row = $result->fetch_assoc())
			{
			$row['hotel_description']=htmlentities(html_entity_decode($row['hotel_description']),ENT_NOQUOTES, 'UTF-8');	
			 
			$stmt = $dbCon->prepare("select min(room_price) as price,room_size,hotel_room_type.room_type from company_hotel_room_type_detail left join hotel_room_type on hotel_room_type.id=company_hotel_room_type_detail.room_type where location_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$resultPrice = $stmt->get_result();
			$rowPrice = $resultPrice->fetch_assoc();
			$row['price']=$rowPrice['price'];
			$row['room_size']=$rowPrice['room_size'];
			$row['room_type']=$rowPrice['room_type'];
			$stmt = $dbCon->prepare("select image_path from hotel_images where property_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$resultImage = $stmt->get_result();
			$rowImage = $resultImage->fetch_assoc();
			 
			if(empty($rowImage))
			{
				$bigImage=$big;
			}
			else
			{
			$bigImage=$rowImage['image_path'];	
			}
			 
			 $filename="../estorecss/".$bigImage.".txt"; $value_a=file_get_contents("../estorecss/".$bigImage.".txt"); $value_a=str_replace('"','',$value_a); $row['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$bigImage.'.jpg' );
			 $row['enc']= $this -> encrypt_decrypt('encrypt',$row['id']);  
			$row['image_path']=str_replace('../','https://www.qloudid.com/',$row['image_path']);
			array_push($org,$row);
			$org[$j]['images']=array();
			
			$stmt = $dbCon->prepare("select image_path from hotel_images where property_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$resultImages = $stmt->get_result();
			while($rowImages = $resultImages->fetch_assoc())
			{
			$bigImage=$rowImages['image_path'];	
			$filename="../estorecss/".$bigImage.".txt"; $value_a=file_get_contents("../estorecss/".$bigImage.".txt"); $value_a=str_replace('"','',$value_a); $rowImages['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$bigImage.'.jpg' );
			 
			$rowImages['image_path']=str_replace('../','https://www.qloudid.com/',$rowImages['image_path']);
			array_push($org[$j]['images'],$rowImages);	
			}
			
			if(empty($rowImages = $resultImages->fetch_assoc()))
			{
				$org[$j]['images'][0]['image_path']=$row['image_path'];
			}
			$j++;
			}
			 
				$stmt->close();
				$dbCon->close();
				//echo '<pre>'; print_r($org);  echo '</pre>'; 
				return $org;
	}
	
		function hotelRoomTypeList()
		{
			$dbCon = AppModel::createConnection();
			 
			//$hotel_id= $this -> encrypt_decrypt('decrypt','UGhVemQxUlNSOHRsZGgxMUVEZmZzdz09');  
			//$_POST['checkin']=1672614000;
			//$_POST['checkout']=1672959600;
			$hotel_id= $this -> encrypt_decrypt('decrypt',$_POST['id']); 
			$stmt = $dbCon->prepare("select number_of_rooms,hotel_description,web_type,website,fdesk_country_code,fdesk_phone_number,longitude,latitude,hotel_name,property_location.visiting_address,company_hotel_room_type_detail.id,room_type_name,room_price,hotel_room_type.room_type from company_hotel_room_type_detail left join hotel_room_type on hotel_room_type.id=company_hotel_room_type_detail.room_type left join hotel_basic_information on company_hotel_room_type_detail.location_id=hotel_basic_information.property_id left join property_location on property_location.id=hotel_basic_information.property_id where company_hotel_room_type_detail.location_id=? and is_available=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $hotel_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0; 
			while($row = $result->fetch_assoc())
			{
			 	
			$select="select count(id) as num from hotel_checkout_detail where checked_in<3 and room_type_id='".$row['id']."' and checkin_booking_date<='".$_POST['checkin']."' and checkout_booking_date>'".$_POST['checkout']."' and is_paid=1";
			$resultCountId=mysqli_query($dbCon, $select);
			$rowCountId=mysqli_fetch_array($resultCountId);	
			 
			if($row['number_of_rooms']==$rowCountId['num'])
			{
				continue;
			}
			$row['enc']= $this -> encrypt_decrypt('encrypt',$row['id']);  
			array_push($org,$row); 
			$stmt = $dbCon->prepare("select image_path from company_hotel_room_type_photos where room_type_id=? limit 0,6");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$org[$j]['images']=array();
			while($row1 = $result1->fetch_assoc())
			{
			$image=$row1['image_path'];
			$value_a=file_get_contents("../estorecss/".$image.".txt"); $value_a=str_replace('"','',$value_a); $row1['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$image.'.jpg' );
			$row1['image_path']=str_replace('../','https://www.qloudid.com/',$row1['image_path']);	
			array_push($org[$j]['images'],$row1);			
			}
			
			
			$select="select room_id from hotel_checkout_detail where checked_in<3 and room_type_id='".$row['id']."' and checkin_booking_date<='".$_POST['checkin']."' and checkout_booking_date>='".$_POST['checkout']."'";
			$resultCountId=mysqli_query($dbCon, $select);
			$rmID='0,';
			while($rowCountId=mysqli_fetch_array($resultCountId))
			{
				if($rowCountId['room_id']==null || $rowCountId['room_id']=='')
					continue;
				$rmID=$rmID.$rowCountId['room_id'].',';
			}
			 
			$rmID=substr($rmID,0,-1);
			$org[$j]['rooms']=array();
			 $select="select hotel_room_bedding_type.bedding_type,hotel_room_detail.id,room_price_info,room_name,room_size,room_size_unit from hotel_room_detail left join hotel_room_bedding_type on hotel_room_bedding_type.id=hotel_room_detail.bedding_type where room_type='".$row['id']."' and hotel_room_detail.id not in (".$rmID.") group by room_price_info";
			 
			 $result1=mysqli_query($dbCon, $select); 
			 while($row1=mysqli_fetch_array($result1))
			 {
			 
				$row1['enc']= $this -> encrypt_decrypt('encrypt',$row1['id']); 	
				array_push($org[$j]['rooms'],$row1);			
				}
			
			$j++;
			}
			//echo '<pre>'; print_r($org); echo '</pre>'; die;
			$stmt->close();
			$dbCon->close();
			return $org;
			
		}
	
		function hotelRoomTypeCheckinList()
		{
			$dbCon = AppModel::createConnection();
			 $a=explode(',',substr($_POST['id_checkout'],0,-1));
			 $org=array();
			 foreach($a as $key)
			 {
			$stmt = $dbCon->prepare("select hotel_basic_information.property_id,hotel_description,web_type,website,fdesk_country_code,fdesk_phone_number,longitude,latitude,hotel_name,property_location.visiting_address,company_hotel_room_type_detail.id,room_type_name,room_price,hotel_room_type.room_type from company_hotel_room_type_detail left join hotel_room_type on hotel_room_type.id=company_hotel_room_type_detail.room_type left join hotel_basic_information on company_hotel_room_type_detail.location_id=hotel_basic_information.property_id left join property_location on property_location.id=hotel_basic_information.property_id where company_hotel_room_type_detail.id=(select room_type_id from hotel_checkout_detail where id=?) ");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $key);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$j=0; 
			$row = $result->fetch_assoc();
			if(!empty($row))
			{
				
			$stmt = $dbCon->prepare("select checkout_date from hotel_checkout_detail where id=?");
			$stmt->bind_param("i",$key);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();	
			$today=strtotime(date('Y-m-d'));
			$booking_overdate=strtotime($row2['checkout_date']);
			
			if($today>$booking_overdate)
			{
				continue;
			}

			
			$row['property_id_enc']= $this -> encrypt_decrypt('encrypt',$row['property_id']); 
			$row['enc']= $this -> encrypt_decrypt('encrypt',$row['id']);  
			$row['qloud_checkout_id']=$this->encrypt_decrypt('encrypt',$key);
			array_push($org,$row); 
			$stmt = $dbCon->prepare("select image_path from company_hotel_room_type_photos where room_type_id=? limit 0,6");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$org[$j]['images']=array();
			while($row1 = $result1->fetch_assoc())
			{
			$image=$row1['image_path'];
			$value_a=file_get_contents("../estorecss/".$image.".txt"); $value_a=str_replace('"','',$value_a); $row1['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$image.'.jpg' );
			$row1['image_path']=str_replace('../','https://www.qloudid.com/',$row1['image_path']);	
			array_push($org[$j]['images'],$row1);			
			}
			
			$stmt = $dbCon->prepare("select id,room_price_info,room_name from hotel_room_detail where room_type=? group by room_price_info");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$org[$j]['rooms']=array();
			while($row1 = $result1->fetch_assoc())
			{
			$row1['enc']= $this -> encrypt_decrypt('encrypt',$row1['id']); 
			
			array_push($org[$j]['rooms'],$row1);	
			
			}
			$j++;
			}
			}
			//echo '<pre>'; print_r($org); echo '</pre>'; die;
			$stmt->close();
			$dbCon->close();
			return $org;
			
		}
	
	
	function hotelCheckinList()
		{
			$dbCon = AppModel::createConnection();
			 
			 $id= $_POST['id_checkout'];   
			  
			$stmt = $dbCon->prepare("select hotel_checkout_id from hotel_checkout_invitation_info where invited_user_id=? and is_confirmed=1");
			$stmt->bind_param("i",$_POST['user_id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			while($row2 = $result2->fetch_assoc())
			{
				$id=$id.$row2['hotel_checkout_id'].',';
			} 
			 
			 $a=explode(',',substr($id,0,-1));
			 
			 $org=array();
			 $j=0; 
			 foreach($a as $key)
			 {
			$stmt = $dbCon->prepare("select company_hotel_room_type_detail.id,hotel_name as property_nickname,property_location.visiting_address as address,room_service,hotel_basic_information.property_id  from company_hotel_room_type_detail left join hotel_room_type on hotel_room_type.id=company_hotel_room_type_detail.room_type left join hotel_basic_information on company_hotel_room_type_detail.location_id=hotel_basic_information.property_id left join property_location on property_location.id=hotel_basic_information.property_id where company_hotel_room_type_detail.id=(select room_type_id from hotel_checkout_detail where id=?) ");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $key);
			$stmt->execute();
			$result = $stmt->get_result();
			
			
			$row = $result->fetch_assoc();
			
			if(!empty($row))
			{
			
			$stmt = $dbCon->prepare("select checkout_booking_date from hotel_checkout_detail where id=?");
			$stmt->bind_param("i",$key);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();
 			
			$today=strtotime(date('Y-m-d'));
			$booking_overdate=$row2['checkout_booking_date'];
			  
			 
			if($today>$booking_overdate)
			{
				continue;
			}
			$row['booking_overdate']=date('Y-m-d',$booking_overdate); 
			$row['property_nickname']=html_entity_decode($row['property_nickname'],ENT_NOQUOTES, 'UTF-8'); 
			$row['address']=html_entity_decode($row['address'],ENT_NOQUOTES, 'UTF-8'); 
			$row['enc']= 1;  
			$row['qloud_checkout_id']=$key;
			$id=$row['id'];
			$row['guest']=1; 
			array_push($org,$row); 
			 $stmt = $dbCon->prepare("select image_path from hotel_images where property_id=? limit 0,6");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['property_id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			 
			$row1 = $result1->fetch_assoc();
			if(empty($row1))
			{
				$org[$j]['image_path']="https://www.qloudid.com/estorecss/tmpnew0.09086000 1600564862.jpg";
			}
			else
			{
			$image=$row1['image_path'];
			$value_a=file_get_contents("../estorecss/".$image.".txt"); $value_a=str_replace('"','',$value_a); $row1['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$image.'.jpg' );
			$row1['image_path']=str_replace('../','https://www.qloudid.com/',$row1['image_path']);	
			$org[$j]['image_path']=$row1['image_path'];		
			}
					
			 $j++;
			}
			
			}
			 
			$stmt->close();
			$dbCon->close();
			return $org;
			
		}
	
		
	
	
	function apartmentCheckedInList()
		{
			$dbCon = AppModel::createConnection();
			$a=explode(',',substr($_POST['room_type'],0,-1));
			$b=explode(',',substr($_POST['id_checkout'],0,-1));
			  
			$org=array(); 
			$j=0;
			foreach($a as $key)
			{
			$stmt = $dbCon->prepare("select id,property_nickname,address,building_id from user_address where id=? ");
			/* bind parameters for markers */
			$stmt->bind_param("i", $key);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();
			 
			if(!empty($row))
			{
				 
			$row['is_owner']= 0;
			$row['address']=html_entity_decode($row['address'],ENT_NOQUOTES, 'UTF-8'); 	
			$row['property_nickname']=html_entity_decode($row['property_nickname'],ENT_NOQUOTES, 'UTF-8').'(Guest)'; 	
			$row['qloud_checkout_id']=$b[$j]; 
			 
			$row['enc']= 2; 
			$row['room_service']=0;
			$row['guest']=1;
			 
			$stmt = $dbCon->prepare("select checkout_booking_date from hotel_checkout_detail where id=?");
			$stmt->bind_param("i",$row['qloud_checkout_id']);
			$stmt->execute();
			$result2 = $stmt->get_result();
			$row2 = $result2->fetch_assoc();
 			 
			$today=strtotime(date('Y-m-d'));
			$booking_overdate=$row2['checkout_booking_date'];
			 
			 
			if($today>$booking_overdate)
			{
				$j++; 	
				continue;
			}
			else
			{
				$j++;
			}
			  
			$row['booking_overdate']=date('Y-m-d',$booking_overdate); 
			$stmt = $dbCon->prepare("select apartment_photo_path,sorting_number,id from user_apartment_photos where user_address_id=?");
			$stmt->bind_param("i", $key);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$row1 = $result1->fetch_assoc();
			$image=$row1['apartment_photo_path'];
			$value_a=file_get_contents("../estorecss/".$image.".txt"); $value_a=str_replace('"','',$value_a); $row1['apartment_photo_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$image.'.jpg' );
			$row1['apartment_photo_path']=str_replace('../','https://www.qloudid.com/',$row1['apartment_photo_path']);	
			$row['image_path']=$row1['apartment_photo_path'];
			array_push($org,$row); 
			
			
			}
			else
			{
				$j++; 	
			}
			
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
		}
	
	function apartmentOwnerCheckedInList()
		{
			$dbCon = AppModel::createConnection();
			 
			$a=explode(',',substr($_POST['room_type'],0,-1));
			$b=explode(',',substr($_POST['id_checkout'],0,-1));
			 
			$org=array(); 
			$j=0;
			foreach($a as $key)
			{
			$stmt = $dbCon->prepare("select id,property_nickname,address,building_id from user_address where id=? ");
			/* bind parameters for markers */
			$stmt->bind_param("i", $key);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();
			if(!empty($row))
			{
			$row['is_owner']= 1;
			$row['address']=html_entity_decode($row['address'],ENT_NOQUOTES, 'UTF-8'); 	
			$row['property_nickname']=html_entity_decode($row['property_nickname'],ENT_NOQUOTES, 'UTF-8').'(Owner)'; 	
			$row['qloud_checkout_id']=$b[$j]; 
			$row['enc']= 2; 
			$row['room_service']=0;
			$row['guest']=0;
			$row['booking_overdate']=date('Y-m-d'); 
			$stmt = $dbCon->prepare("select apartment_photo_path,sorting_number,id from user_apartment_photos where user_address_id=?");
			$stmt->bind_param("i", $key);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$row1 = $result1->fetch_assoc();
			$image=$row1['apartment_photo_path'];
			$value_a=file_get_contents("../estorecss/".$image.".txt"); $value_a=str_replace('"','',$value_a); $row1['apartment_photo_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$image.'.jpg' );
			$row1['apartment_photo_path']=str_replace('../','https://www.qloudid.com/',$row1['apartment_photo_path']);	
			$row['image_path']=$row1['apartment_photo_path'];
			array_push($org,$row); 
			
			$j++; 	
			}
			
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
		}
	
	
	
	function hotelImages()
		{
			$dbCon = AppModel::createConnection();
			$location_id= $this -> encrypt_decrypt('decrypt',$_POST['id']);
 			
			$stmt = $dbCon->prepare("select * from hotel_images where property_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $location_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			 $filename="../estorecss/".$row['image_path'].".txt"; $value_a=file_get_contents("../estorecss/".$row['image_path'].".txt"); $value_a=str_replace('"','',$value_a); $row['image_path1'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['image_path'].'.jpg' );
			$row['image_path1']=str_replace('../','qloudid.com/',$row['image_path1']);
			array_push($org,$row);
			}
			return $org;
			
		}
			
		function hotelImagesCount()
		{
			$dbCon = AppModel::createConnection();
			$location_id= $this -> encrypt_decrypt('decrypt',$_POST['id']);
 			
			$stmt = $dbCon->prepare("select count(id) as num from hotel_images where property_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $location_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			return $row['num'];
			
		}
		
			function hotelDetailInfo()
		{
			$dbCon = AppModel::createConnection();
			$hotel_id= $this -> encrypt_decrypt('decrypt',$_POST['id']);  
			$checkout_id= $this -> encrypt_decrypt('decrypt',$_POST['checkid']);  
			$stmt = $dbCon->prepare("select checkin_date,checkout_date,guest_adult,guest_children from hotel_checkout_detail where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $checkout_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowDate = $result->fetch_assoc();
			 
			$stmt = $dbCon->prepare("select count(id) as num from hotel_checkout_dependent_detail where hotel_checkout_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $checkout_id);
			$stmt->execute();
			$resultCount = $stmt->get_result();
			$rowDependentCount = $resultCount->fetch_assoc();
			$rowDate['guest_children']=$rowDate['guest_children']-$rowDependentCount['num'];
			 if($rowDate['guest_children']<0)
			 {
				 $rowDate['guest_children']=0;
			 }
			
			$stmt = $dbCon->prepare("select hotel_description,web_type,website,fdesk_country_code,fdesk_phone_number,property_location.latitude,property_location.longitude,profile_pic,property_location.visiting_address,country_code,phone,hotel_name from hotel_basic_information left join property_location on property_location.id=hotel_basic_information.property_id left join company_profiles on property_location.company_id=company_profiles.company_id left join phone_country_code on phone_country_code.id=hotel_basic_information.fdesk_country_code where property_location.id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $hotel_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$row['hotel_description']=htmlentities(html_entity_decode($row['hotel_description']),ENT_NOQUOTES, 'UTF-8');	
			 $row['guest_children']=$rowDate['guest_children'];
			 if($row ['profile_pic']!=null) { $filename="../estorecss/".$row ['profile_pic'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['profile_pic'].".txt"); $value_a=str_replace('"','',$value_a); $row['image_path'] = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['profile_pic'].'.jpg' ); } else { $row['image_path']="../html/usercontent/images/default-profile-pic.jpg"; } }  else $row['image_path']="../html/usercontent/images/default-profile-pic.jpg";
			 $row['image_path']=str_replace('../','qloudid.com/',$row['image_path']);
				$stmt->close();
				$dbCon->close();
				 
				return $row;
			
		}
	
		
	
	function contactList($data)
    {
        $dbCon = AppModel::createConnection();
		  
		$stmt = $dbCon->prepare("select is_admin,address,passport_image,employees.first_name,employees.id,concat_ws(' ',employees.first_name,employees.last_name)  as name,company_name,employees.email,employees.company_id,employees.user_login_id from employees left join companies on companies.id=employees.company_id left join user_logins on user_logins.id=employees.user_login_id  left join company_profiles on company_profiles.company_id=employees.company_id left join manage_employee_permissions on employees.id=manage_employee_permissions.employee_id where employees.company_id=? order by employees.first_name");
		$stmt->bind_param("i", $data['company_id']);
		$stmt->execute();
		$result = $stmt->get_result();
		$org=array();
		while($row = $result->fetch_assoc())
		{
		 
		$stmt = $dbCon->prepare("select title from user_company_profile where company_id=? and user_login_id=?");
		$stmt->bind_param("ii", $row['company_id'],$row['user_login_id']);
		$stmt->execute();
		$resultTitle = $stmt->get_result();
		$rowTitle = $resultTitle->fetch_assoc();	
		if($rowTitle['title']=='' || $rowTitle['title']==null)
		{
			$row['title']='Employee';
		}
		else
		{
			$row['title']=$rowTitle['title'];	
		}
		if($row['passport_image']!=null || $row['passport_image']!="") { 
						 
		$filename="../estorecss/".$row ['passport_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['passport_image'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row ['passport_image'].'.jpg' ); $imgs=str_replace('../','',$imgs); $imgs='https://www.qloudid.com/'.$imgs; } else {   $imgs="https://www.qloudid.com/estorecss/logoXXX.png"; }
		$row['image']=$imgs;
		}
		else
		{
		$row['image']='https://www.qloudid.com/estorecss/logoXXX.png';
		}
						 
		$row['enc']=$this -> encrypt_decrypt('encrypt',$row['id']);	
		 
		array_push($org,$row);
					
		}
		 
		$stmt->close();
        $dbCon->close();
		return $org;
	}
	
	
	 
	
	
	function employerRequestCount($data)
		{
			$dbCon = AppModel::createConnection();
			 
			$user_id=$data['user_id'];
			$stmt = $dbCon->prepare("select email from user_logins where id=?");
			$stmt->bind_param("i", $user_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt = $dbCon->prepare("select count(estore_employee_invite.id) as num from estore_employee_invite left join invitation on estore_employee_invite.id=invitation.invited_user_id where (estore_employee_invite.email=? or estore_employee_invite.work_email=?) and invitation.status=0 and is_relieved=0");
			$stmt->bind_param("ss", $row['email'],$row['email']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			return $row['num'];
			
			
		}
		
	function employerRequestReceived($data)
		{
			$dbCon = AppModel::createConnection();
			$user_id=$data['user_id'];
			$stmt = $dbCon->prepare("select email from user_logins where id=?");
			$stmt->bind_param("i", $user_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt = $dbCon->prepare("select invitation.id as invite_id,work_email,email,invited_emp,estore_employee_invite.id,invitation.status,invitation.created_date,company_name from estore_employee_invite left join invitation on estore_employee_invite.id=invitation.invited_user_id left join companies on estore_employee_invite.company_id=companies.id where (estore_employee_invite.email=? or estore_employee_invite.work_email=? ) and invitation.status=0 and is_relieved=0 limit 0,5");
			$stmt->bind_param("ss", $row['email'],$row['email']);
			/* bind parameters for markers */
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				$row['company_name']=html_entity_decode($row['company_name'],ENT_NOQUOTES, 'UTF-8');
				array_push($org,$row); 
			}
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
		
		
		function approveEmployerRequest($data)
		{
			$dbCon = AppModel::createConnection();
			
			$request_id= $data['id'];
			$stmt= $dbCon->prepare("select invited_emp,company_id,name,last_name,title,email,work_email,first_name_p,last_name_p,sex_p,email_p,dob_day_p,dob_month_p,dob_year_p,employee_number from estore_employee_invite where id=?");
			$stmt->bind_param("i", $request_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row_emp = $result->fetch_assoc();
			
			$company=$row_emp['company_id'];
			$stmt= $dbCon->prepare("select id,first_name,last_name,email,email_verification_code as hash_code from user_logins where email= ? or email=?");
			$stmt->bind_param("ss", $row_emp['email'], $row_emp['work_email']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row_id = $result->fetch_assoc();
			$fields=array();
			$fields=$row_id;
			$fields['qloudid']=$request_id;
			$fields['stat']=$data['stat'];
			 
			$url='https://www.qmatchup.com/beta/user/index.php/Invitation/updateQloud';
			$ch = curl_init();
			curl_setopt($ch,CURLOPT_URL, $url);
			curl_setopt($ch,CURLOPT_POST, count($fields));
			curl_setopt($ch,CURLOPT_POSTFIELDS, $fields);
			curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
			
			curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
			curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
			curl_setopt($ch, CURLOPT_COOKIESESSION, true);
			curl_setopt($ch, CURLOPT_REFERER, true);
			curl_setopt($ch, CURLOPT_COOKIEJAR, true);
			curl_setopt($ch, CURLOPT_COOKIEFILE, true);
			 
			$result=curl_exec ($ch);
			  
			curl_close ($ch);
			 
			
			$d=date('Y-m-d');
			if($data['stat']==2)
			{
				$stmt= $dbCon->prepare("update invitation set status=2,accepted_date=? where invited_user_id= ?");
				$stmt->bind_param("si",$d,$request_id);
				$stmt->execute();
				$stmt= $dbCon->prepare("select invited_emp,company_id,name,last_name,title,email,work_email,first_name_p,last_name_p,sex_p,email_p,dob_day_p,dob_month_p,dob_year_p,employee_number from estore_employee_invite where id=?");
				
				$stmt->bind_param("i", $request_id);
				$stmt->execute();
				$result = $stmt->get_result();
				$row_emp = $result->fetch_assoc();
				$company=$row_emp['company_id'];
				
				$stmt= $dbCon->prepare("select id,first_name,last_name,email,email_verification_code as hash_code from user_logins where email= ? or email=?");
				
				$stmt->bind_param("ss", $row_emp['email'], $row_emp['work_email']);
				$stmt->execute();
				$result = $stmt->get_result();
				$row_id = $result->fetch_assoc();
				
				$stmt= $dbCon->prepare("update estore_employee_invite set real_employee_id=? where id=? ");
				$stmt->bind_param("ii", $row_id['id'],$request_id);
				$stmt->execute();
			}
			else if($data['stat']==1)
			{
				$stmt= $dbCon->prepare("select invited_emp,company_id,name,last_name,title,email,work_email,first_name_p,last_name_p,sex_p,email_p,dob_day_p,dob_month_p,dob_year_p,employee_number from estore_employee_invite where id=?");
				
				$stmt->bind_param("i", $request_id);
				$stmt->execute();
				$result = $stmt->get_result();
				$row_emp = $result->fetch_assoc();
				$company=$row_emp['company_id'];
				$stmt= $dbCon->prepare("update invitation set status=1,accepted_date=? where invited_user_id= ?");
				$stmt->bind_param("si", $d,$request_id);
				if($stmt->execute())
				{
					$stmt= $dbCon->prepare("select id,first_name,last_name,email,email_verification_code as hash_code from user_logins where id= ?");
					
					$stmt->bind_param("i", $data['user_id']);
					$stmt->execute();
					$result = $stmt->get_result();
					$row_id = $result->fetch_assoc();
					
					$s=0;
					$u=1;
					$stmt= $dbCon->prepare("insert into company_permission (`company_id`,`user_login_id`,`purchase`,`alert`,`supplier`,`customer`,`employee`,`proposal`,`project_proposal`,`create_article`,`import_article`) values (?,?,?,?,?,?,?,?,?,?,?)");
					$stmt->bind_param("iiiiiiiiiii", $company,$row_id['id'],$s,$s,$s,$s,$u,$s,$s,$s,$s);
					$stmt->execute();
					if($row_emp['invited_emp']==1)
					{
						$stmt= $dbCon->prepare("insert into employees (`company_id`,`first_name`,`last_name`,`status`,`signup_hash`,`email`,`user_login_id`, employee_number) values (?,?,?,?,?,?,?, ?)");
						$stmt->bind_param("ississis", $company,$row_id['first_name'],$row_id['last_name'],$s,$row_id['hash_code'],$row_id['email'],$row_id['id'],$row_emp['employee_number']);
					}  
					else if($row_emp['invited_emp']==2)
					{
						$stmt= $dbCon->prepare("insert into students (`company_id`,`first_name`,`last_name`,`status`,`signup_hash`,`email`,`user_login_id`) values (?,?,?,?,?,?,?,?)");
						$stmt->bind_param("ississi", $company,$row_id['first_name'],$row_id['last_name'],$s,$row_id['hash_code'],$row_id['email'],$row_id['id']);
					}  
					if($stmt->execute())
					{
						
						
						$stmt= $dbCon->prepare("update estore_employee_invite set real_employee_id=? where id=? ");
						$stmt->bind_param("ii", $row_id['id'],$request_id);
						$stmt->execute();
						
						
						$stmt= $dbCon->prepare("select mobile_p,company_id,name,last_name,title,email,work_email,first_name_p,last_name_p,sex_p,email_p,dob_day_p,dob_month_p,dob_year_p from estore_employee_invite where id=?");
						$stmt->bind_param("i", $request_id);
						$stmt->execute();
						$result = $stmt->get_result();
						$row_emp = $result->fetch_assoc();
						$company=$row_emp['company_id'];
						
						$stmt= $dbCon->prepare("update user_logins set dob_day=?,dob_month=?,dob_year=?,dob_day_p=?,dob_month_p=?, dob_year_p=? where id=?");
						$stmt->bind_param("iiiiiii", $row_emp['dob_day_p'],$row_emp['dob_month_p'],$row_emp['dob_year_p'],$row_emp['dob_day_p'],$row_emp['dob_month_p'],$row_emp['dob_year_p'],$row['id']);
						//$stmt->execute();
						
						$stmt= $dbCon->prepare("select id,first_name,last_name,email,email_verification_code as hash_code from user_logins where email= ? or email=?");
						//echo $query; die;
						$stmt->bind_param("ss", $row_emp['email'], $row_emp['work_email']);
						$stmt->execute();
						$result = $stmt->get_result();
						$row_id = $result->fetch_assoc();
						
						
						$stmt= $dbCon->prepare("select * from virtual_user_company_profile where company_id=? and invited_user_id=?");
						$stmt->bind_param("ii", $company,$request_id);
						$stmt->execute();
						$result = $stmt->get_result();
						$row_virtual = $result->fetch_assoc();
						
						if(empty($row_virtual))
						{
							$stmt= $dbCon->prepare("insert into user_company_profile (company_id,user_login_id,title,email) values (?,?,?,?)");
							$stmt->bind_param("iiss", $company,$row_id['id'],$row_emp['title'],$row_emp['work_email']);
							$stmt->execute();
						}
						else
						{
							if($row_virtual['job_function']=="" || $row_virtual['job_function']==null)
							{
								$row_virtual['job_function']=1;
							}
							$stmt= $dbCon->prepare("insert into user_company_profile (location_id,job_function,ssn,e_number,description_job,e_type,h_date,res_date,company_id,user_login_id,title,department,phone,mobile,email,fax,skype,facebook,twitter,i_street,i_town,i_city,i_zip,i_country,d_street,d_town,d_city,d_zip,d_country,b_member,mentor,c_id,prospect,partner,supplier) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)");
							$stmt->bind_param("iissssssiisssssssssssssssssssssssss",$row_virtual['location_id'],$row_virtual['job_function'],$row_virtual['ssn'],$row_virtual['e_number'],$row_virtual['description_job'],$row_virtual['e_type'],$row_virtual['h_date'],$row_virtual['res_date'],$company,$row_id['id'],$row_virtual['title'],$row_virtual['department'],$row_virtual['phone'],$row_virtual['mobile'],$row_virtual['email'],$row_virtual['fax'],$row_virtual['skype'],$row_virtual['facebook'],$row_virtual['twitter'],$row_virtual['i_street'],$row_virtual['i_town'],$row_virtual['i_city'],$row_virtual['i_zip'],$row_virtual['i_country'],$row_virtual['d_street'],$row_virtual['d_town'],$row_virtual['d_city'],$row_virtual['d_zip'],$row_virtual['d_country'],$row_virtual['b_member'],$row_virtual['mentor'],$row_virtual['c_id'],$row_virtual['prospect'],$row_virtual['partner'],$row_virtual['supplier']);
							$stmt->execute();
						}
						
						
						$stmt= $dbCon->prepare("select * from virtual_user_profiles where invited_user_id=?");
						$stmt->bind_param("i", $request_id);
						$stmt->execute();
						$result = $stmt->get_result();
						$row_uvirtual = $result->fetch_assoc();
						
						if(!empty($row_uvirtual))
						{
							$stmt= $dbCon->prepare("select id from user_profiles where user_logins_id=?");
							
							$stmt->bind_param("i", $row_id['id']);
							$stmt->execute();
							$result = $stmt->get_result();
							$row_pro = $result->fetch_assoc();
							$d=date('Y-m-d');
							if(empty($row_pro))
							{
								$stmt= $dbCon->prepare("insert into user_profiles (mobile_p,nation,user_logins_id,created_on,modified_on,summary,zipcode,city,state,country,phone_number,address,marital_status,blog,skype,linkedln,facebook,twitter,instagram) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)");
								$stmt->bind_param("ssissssssssssssssss", $row_emp['mobile_p'],$row_uvirtual['nation'],$row_id['id'],$d,$d,$row_uvirtual['summary'],$row_uvirtual['zipcode'],$row_uvirtual['city'],$row_uvirtual['state'],$row_uvirtual['country'],$row_uvirtual['phone_number'],$row_uvirtual['address'],$row_uvirtual['marital_status'],$row_uvirtual['blog'],$row_uvirtual['skype'],$row_uvirtual['linkedln'],$row_uvirtual['facebook'],$row_uvirtual['twitter'],$row_uvirtual['instagram']);
								$stmt->execute();
							}
							else 
							{
								$stmt= $dbCon->prepare("update user_profiles set modified_on=?,summary=?,zipcode=?,city=?,state=?,country=?,phone_number=?,address=?,marital_status=?,blog=?,skype=?,linkedln=?,facebook=?,twitter=?,instagram=? where user_logins_id=?");
								$stmt->bind_param("sssssssssssssssi", $d,$row_uvirtual['summary'],$row_uvirtual['zipcode'],$row_uvirtual['city'],$row_uvirtual['state'],$row_uvirtual['country'],$row_uvirtual['phone_number'],$row_uvirtual['address'],$row_uvirtual['marital_status'],$row_uvirtual['blog'],$row_uvirtual['skype'],$row_uvirtual['linkedln'],$row_uvirtual['facebook'],$row_uvirtual['twitter'],$row_uvirtual['instagram'],$row_id['id']);
								$stmt->execute();
							}
						}
						
						
					}
					
				}
			}
			
			$stmt = $dbCon->prepare("select count(id) as num from estore_employee_invite where company_id=?");
			
			/* bind parameters for markers */
			
			$stmt->bind_param("i", $company);
			$stmt->execute();
			$result = $stmt->get_result();
			$row_invited = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select count(id) as num from estore_employee_invite where company_id=? and real_employee_id is not null");
			
			/* bind parameters for markers */
			
			$stmt->bind_param("i", $company);
			$stmt->execute();
			$result = $stmt->get_result();
			$row_invited_approved = $result->fetch_assoc();
			
			
			$stmt = $dbCon->prepare("select count(id) as num from employee_request_cloud where company_id=?");
			
			/* bind parameters for markers */
			
			$stmt->bind_param("i", $company);
			$stmt->execute();
			$result = $stmt->get_result();
			$row_request = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select count(id) as num from employee_request_cloud where company_id=? and is_approved=1");
			
			/* bind parameters for markers */
			
			$stmt->bind_param("i", $company);
			$stmt->execute();
			$result = $stmt->get_result();
			$row_request_approved = $result->fetch_assoc();
			
			$total_request=$row_invited['num']+$row_request['num'];
			$total_request_approved=$row_invited_approved['num']+$row_request_approved['num'];
			$completed=($total_request_approved/$total_request)*100;
			$completed=round($completed,0);
			
			$stmt = $dbCon->prepare("update company_profiles set completed_requests=? where company_id=?");
			
			/* bind parameters for markers */
			
			$stmt->bind_param("ii", $completed,$company);
			$stmt->execute();
			
			
			 
			$stmt= $dbCon->prepare("delete from  invitation where invited_user_id= ?");
			$stmt->bind_param("i",$request_id);
			//$stmt->execute();
			$stmt= $dbCon->prepare("delete from  estore_employee_invite where id= ?");
			$stmt->bind_param("i",$request_id);
			//$stmt->execute();
			$stmt= $dbCon->prepare("delete from  virtual_user_company_profile where invited_user_id= ?");
			$stmt->bind_param("i",$request_id);
			//$stmt->execute();
			$stmt= $dbCon->prepare("delete from  virtual_user_profiles where invited_user_id= ?");
			$stmt->bind_param("i",$request_id);
			//$stmt->execute();
			
				$stmt->close();
				$dbCon->close();
				return 1;
			
			
		}
		
		
	
 function checkMobileAvailability($data)
    {
		
		 $dbCon = AppModel::createConnection();
		 
		 $stmt = $dbCon->prepare("select user_profiles.id from user_profiles left join user_logins on user_logins.id=user_profiles.user_logins_id where phone_number=? and country_of_residence=?");
			/* bind parameters for markers */
		$stmt->bind_param("si", $data['MobileNo'],$data['CountryId']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		
		 $arr=array();
        if(!empty($row))
		{
			$arr['result']=0;
			$stmt->close();
			$dbCon->close();
			return $arr;	
		}
		else
		{ 
	$num=(mt_rand(111111,999999));
	 $stmt = $dbCon->prepare("select id from mobile_otp_verification where phone_number=? and country_code=?");
			/* bind parameters for markers */
		$stmt->bind_param("si", $data['MobileNo'],$data['CountryId']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		
			if(empty($row))
			{
			$stmt = $dbCon->prepare("insert into mobile_otp_verification (phone_number,country_code,otp) values(?, ?, ?)");
			/* bind parameters for markers */
			$stmt->bind_param("sii", $data['MobileNo'],$data['CountryId'],$num);
			$stmt->execute();	
			}
			else
			{
			$stmt = $dbCon->prepare("update mobile_otp_verification set otp=? where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("si", $num,$row['id']);
			$stmt->execute();
			}
			
			
			 $stmt = $dbCon->prepare("select country_code  from  phone_country_code where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['CountryId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc(); 
			$to            = '+'.trim($row['country_code']).''.trim($data['MobileNo']);
			//$to            = '+919896240046';
			$subject       = "One time password!";
			$emailContent ="Your one time password to verify your mobile is : ".$num;
			$res=json_decode(sendSms($subject, $to, $emailContent),true);
			 
			if($res['status']=='OK')
			{
			$arr['result']=1;
			}
			else
			{
			$arr['result']=2;	
			}
			$stmt->close();
			$dbCon->close();
			return $arr;	
		}	
		
    }
	
	function verifyAddMobileOtp($data)
    {
		
		 $dbCon = AppModel::createConnection();
		 
		$stmt = $dbCon->prepare("select otp from mobile_otp_verification where phone_number=? and country_code=?");
			/* bind parameters for markers */
		$stmt->bind_param("si", $data['MobileNo'],$data['CountryId']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		  
		 $arr=array();
        if($row['otp']==$data['OtpPin'])
		{
			
			$arr['result']=1;
			$stmt->close();
			$dbCon->close();
			return $arr;	
		}
		else
		{ 
	
			$arr['result']=0;
			$stmt->close();
			$dbCon->close();
			return $arr;	
		}	
		
    }
	
	function createEmailAccount($data) {
			$dbCon = AppModel::createConnection();
			 
			$a=explode('@', $data['Email']);
			$domain = array_pop($a);
			$random_hash = substr(md5(uniqid(rand(), true)), 16, 16); 
			$stmt = $dbCon->prepare("SELECT id FROM user_logins WHERE email=?");
			
			/* bind parameters for markers*/
			$stmt->bind_param("s", $data['Email']);
			$stmt->execute();
			$result = $stmt->get_result();
			$myrow  = $result->fetch_assoc();
			
			if(empty($myrow))
			{
			$key = '56f98a45d581cb76cab4693fa48ae7f9'; 
			$request = 'http://check.block-disposable-email.com/easyapi/json/' . $key . '/' . $domain;
			
			$response = file_get_contents($request);
			
			$dea = json_decode($response);
			$rf=1;
			$st=0;
			$org=array();
			if ($dea->request_status == 'success')
				{
				$num=(mt_rand(111111,999999));
				$stmt = $dbCon->prepare("INSERT INTO user_logins (registered_from,get_started_wizard_status,email,  email_verification_code , created_on , modified_on, country_of_residence,otp_verification ,grading_status) VALUES (?, ?,   ?, ?, now(), now(), ?, ?, ?)");
				
				/*
					The argument may be one of four types:
					
					i - integer
					d - double
					s - string
					b - BLOB
				*/
				$st=0;
				$stmt->bind_param("iissisi", $rf,$st,$data['Email'], $random_hash, $data['CountryId'],$num,$rf);
				$stmt->execute();
				$id=$stmt->insert_id;
				
				$stmt = $dbCon->prepare("INSERT INTO user_profiles (user_logins_id , created_on , modified_on, phone_number ) VALUES (?, now(), now(), ?)");
				$stmt->bind_param("is", $id, $data['MobileNumber']);  
				$stmt->execute();
				
				$to      = $data['Email'];
				$subject = "Qloud ID - Verify your email";
				$emailContent='<html>
   <head></head>
   <body>
      <div style="margin-top:0!important;margin-bottom:0!important;margin-right:0!important;margin-left:0!important;padding:0">
         <center style="width:100%;table-layout:fixed">
            <table width="100%" cellpadding="0" cellspacing="0" bgcolor="#F5F7F8" style="text-align:center">
               <tbody>
                  <tr>
                     <td>
                        <table width="100%" cellpadding="0" cellspacing="0" bgcolor="#F5F7F8">
                           <tbody>
                              <tr>
                                 <td>
                                    <div style="margin-top:0;margin-bottom:0;margin-right:auto;margin-left:auto;padding-left:0px;padding-right:0px">
                                       <table align="center" style="border-spacing:0;font-family:sans-serif;color:#f5f7f8;Margin:0 auto;width:100%" bgcolor="#F5F7F8">
                                          <tbody>
                                             <tr>
                                                <td style="padding-top:0;padding-bottom:0;padding-right:0;padding-left:0" bgcolor="#F5F7F8">
                                                   <table width="100%" style="border-spacing:0;font-family:sans-serif;color:#f5f7f8" bgcolor="#F5F7F8">
                                                      <tbody>
                                                         <tr>
                                                            <td style="padding-bottom:0px;padding-top:0px;padding-left:20px;padding-right:20px;background-color:#f5f7f8;color:#f5f7f8;width:100%;font-size:1px;line-height:1px;text-align:left;display:none!important">
                                                               <p style="text-align:left;line-height:6px;Margin-top:0px;Margin-bottom:0px">Dina domner r instllda p att frnyas automatiskt. ppna det hr e-postmeddelandet fr att skerstlla att allt fortfarande r uppdaterat. Och glm inte att du fr 20 % rabatt p nya produkter. &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
                                                               <div style="display:none;max-height:0px;overflow:hidden">
                                                                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                               </div>
                                                            </td>
                                                         </tr>
                                                      </tbody>
                                                   </table>
                                                </td>
                                             </tr>
                                          </tbody>
                                       </table>
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                        <table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#F5F7F8">
                           <tbody>
                              <tr>
                                 <td bgcolor="#F5F7F8" style="padding-top:0px;padding-bottom:20px">
                                    <div style="margin-top:0;margin-bottom:0;margin-right:auto;margin-left:auto;padding-left:0px;padding-right:0px">
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                        <table width="100%" cellpadding="0" cellspacing="0" bgcolor="#F5F7F8">
                           <tbody>
                              <tr>
                                 <td style="padding-bottom:20px">
                                    <div style="max-width:600px;margin-top:0;margin-bottom:0;margin-right:auto;margin-left:auto;padding-left:20px;padding-right:20px">
                                       <table align="center" style="border-spacing:0;font-family:sans-serif;color:#111111;Margin:0 auto;width:100%;max-width:600px" bgcolor="#F5F7F8">
                                          <tbody>
                                             <tr>
                                                <td bgcolor="#F5F7F8" style="padding-top:0;padding-bottom:0;padding-right:0;padding-left:0">
                                                   <table width="73%" style="border-spacing:0;font-family:Audiowide;color:#111111" bgcolor="#F5F7F8">
                                                      <tbody>
                                                         <tr>
                                                            <td style="padding-top:5px;padding-bottom:0;padding-right:0;padding-left:0px" align="left">
                                                               <p style="font-size:30px; font-weight:normal; Audiowide;">Qloudid</p>
                                                            </td>
                                                         </tr>
                                                      </tbody>
                                                   </table>
                                                </td>
                                                <td width="100%" bgcolor="#F5F7F8" style="padding-top:0;padding-bottom:0;padding-right:0;padding-left:0">
                                                   <table width="100%" style="border-spacing:0;font-family:sans-serif;color:#111111" bgcolor="#F5F7F8">
                                                      <tbody>
                                                         <tr>
                                                            <td style="padding-top:10px;padding-bottom:0px;padding-left:10px;padding-right:0px;background-color:#f5f7f8;width:100%;text-align:right">
                                                               <p style="Margin-top:0px;margin-bottom:0px;font-size:13px;line-height:16px"><strong><a href="tel:077%20588%2080%2023" style="text-decoration:none;color:#111111" target="_blank">Website: <u></u>www.qloudid.com<u></u></a></strong></p>
                                                            </td>
                                                         </tr>
                                                         <tr>
                                                            <td style="padding-top:0px;padding-bottom:0px;padding-left:10px;padding-right:0px;background-color:#f5f7f8;width:100%;text-align:right">
                                                               <p style="Margin-top:5px;margin-bottom:0px;font-size:13px;line-height:16px">If you have any questions - <u></u>Contact us<u></u></p>
                                                            </td>
                                                         </tr>
                                                      </tbody>
                                                   </table>
                                                </td>
                                             </tr>
                                          </tbody>
                                       </table>
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                        <table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#F5F7F8">
                           <tbody>
                              <tr>
                                 <td bgcolor="#F5F7F8" style="background-color:#f5f7f8;padding-top:0;padding-right:0;padding-left:0;padding-bottom:0">
                                    <div style="max-width:600px;margin-top:0;margin-bottom:0;margin-right:auto;margin-left:auto;padding-left:20px;padding-right:20px">
                                       <table bgcolor="#FFFFFF" width="100%" align="center" border="0" cellspacing="0" cellpadding="0" style="font-family:sans-serif;color:#111111">
                                          <tbody>
                                             <tr>
                                                <td bgcolor="#FFFFFF" align="left" style="padding-top:0px;padding-bottom:0;padding-right:0px;padding-left:0px;text-align:left;background-color:#ffffff;font-weight:bold;font-size:32px;line-height:42px">
                                                   <div style="text-align: center; line-height: 22px; max-width: 600px;
                                                      float: left;
                                                      position: relative; ">
                                                      <div class="wrap maxwi_100 xs-padr25 xs-padl10 padt10 xs-padt0 red_ff2828_bg  brdb_new tall xs-nobrdb" style="max-width: 100%; background-color: #ff2828 !important;
                                                         width: 960px;
                                                         position: relative;
                                                         margin: 0 auto;
                                                         ">
                                                         <div style="height: 250px; width: auto; max-width: 100%; padding-top: 100px; padding-right: 30px;
                                                            padding-left: 30px; margin-right: auto;
                                                            margin-left: auto;  z-index: 5; max-width: 100%; width: auto;">
                                                            <div class="padding-bottom: 40px; text-align: center; font-size: 45px;"><img src="http://www.qloudid.com/html/usercontent/images/doublecheck.png" width="45px;" height="45px;"></div>
                                                            <div class="padb0 xxs-padb0 ">
                                                               <h1 style="font-size: 50px; font-weight: normal; text-align: center; padding-bottom: 10px; color:white;">Success</h1>
                                                            </div>
                                                            <div style="margin-top: 20px; font-weight: normal; margin-bottom: 10px; text-align: center; color:white; font-size: 20px;">Please verify your email using the one time password : '.$num.'</div>
                                                         </div>
                                                      </div>
                                                   </div>
                                                </td>
                                             </tr>
                                          </tbody>
                                       </table>
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                        <table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#F5F7F8">
                           <tbody>
                              <tr>
                                 <td bgcolor="#F5F7F8" style="padding-top:0px;padding-bottom:0px">
                                    <div style="max-width:600px;margin-top:0;margin-bottom:0;margin-right:auto;margin-left:auto;padding-left:20px;padding-right:20px">
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                        <table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#F5F7F8">
                           <tbody>
                              <tr>
                                 <td bgcolor="#F5F7F8" style="padding-top:0px;padding-bottom:0px">
                                    <div style="max-width:600px;margin-top:0;margin-bottom:0;margin-right:auto;margin-left:auto;padding-left:20px;padding-right:20px">
                                       <table bgcolor="#FFFFFF" align="center" style="border-spacing:0;font-family:sans-serif;color:#111111;margin:0 auto;width:100%;max-width:600px">
                                          <tbody>
                                             <tr>
                                                <td style="padding-top:0;padding-bottom:0;padding-right:0;padding-left:0">
                                                   <table width="100%" style="border-spacing:0;font-family:sans-serif;color:#111111">
                                                      <tbody>
                                                         <tr>
                                                            <td style="padding-top:25px;padding-bottom:0px;padding-left:40px;padding-right:40px;background-color:#ffffff;width:100%;text-align:left">
                                                               <p style="margin-top:0px;line-height:0px;margin-bottom:0px;font-size:4px">&nbsp;</p>
                                                            </td>
                                                         </tr>
                                                      </tbody>
                                                   </table>
                                                </td>
                                             </tr>
                                          </tbody>
                                       </table>
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                        <table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#F5F7F8">
                           <tbody>
                              <tr>
                                 <td bgcolor="#F5F7F8" style="padding-top:0px;padding-bottom:0px">
                                    <div style="max-width:600px;margin-top:0;margin-bottom:0;margin-right:auto;margin-left:auto;padding-left:40px;padding-right:20px">
                                       <table align="center" style="border-spacing:0;font-family:sans-serif;color:#111111;Margin:0 auto;width:100%;max-width:600px">
                                          <tbody>
                                             <tr>
                                                <td width="20" bgcolor="#ffffff" style="padding-top:0;padding-bottom:0;padding-right:0;padding-left:0">
                                                   <img src="https://ci3.googleusercontent.com/proxy/gvkyMPCroXxkwzdJ2Pg_KqgcjVeVgpVE1dRo8rYCiczuJe5UfJllf1ZtOFiYZsB4FzBoGeU7Xdso4PWQyUOj4qIrHsViEiUFA_KBQA=s0-d-e1-ft#http://imagesak.secureserver.net/promos/std/spc_trans.gif" height="30" width="20" border="0" style="display:block;border-width:0" class="CToWUd">
                                                </td>
                                                <td style="padding-top:0px;padding-bottom:0px;padding-right:0;padding-left:0;text-align:center;font-size:0;background-color:#ffffff">
                                                   <div style="width:100%;max-width:560px;display:inline-block;vertical-align:top">
                                                      <table width="100%" style="border-spacing:0;font-family:sans-serif;color:#111111">
                                                         <tbody>
                                                            <tr>
                                                               <td style="padding-top:0px;padding-bottom:0px;padding-left:20px;padding-right:20px;background-color:#ffffff">
                                                                  <table style="border-spacing:0;font-family:sans-serif;color:#111111;width:100%;font-size:14px;text-align:left;background-color:#ffffff;border-top-color:#e8eaeb;border-top-style:solid;border-top-width:1px">
                                                                     <tbody>
                                                                        <tr>
                                                                           <td style="padding-top:20px;padding-bottom:20px;padding-left:20px;padding-right:10px;background-color:#ffffff;width:100%;text-align:left">
                                                                              <table style="border-spacing:0;font-family:sans-serif;color:#111111;Margin:0 auto;width:100%;table-layout:fixed">
                                                                                 <tbody>
                                                                                    <tr>
                                                                                       <td style="padding-top:0px;padding-bottom:0px;padding-left:0px;padding-right:0px;background-color:#ffffff;width:100%;text-align:center">
                                                                                          <p style="Margin-top:0px;line-height:22px;Margin-bottom:0px; fsz14px;">This is sent because you have created a new account using Qloud ID App</p>
                                                                                       </td>
                                                                                    </tr>
                                                                                 </tbody>
                                                                              </table>
                                                                           </td>
                                                                        </tr>
                                                                     </tbody>
                                                                  </table>
                                                               </td>
                                                            </tr>
                                                         </tbody>
                                                      </table>
                                                   </div>
                                                </td>
                                             </tr>
                                          </tbody>
                                       </table>
                                    </div>
                                 </td>
                                 <td width="20" bgcolor="#ffffff" style="padding-top:0;padding-bottom:0;padding-right:0;padding-left:0">
                                    <img src="https://ci3.googleusercontent.com/proxy/gvkyMPCroXxkwzdJ2Pg_KqgcjVeVgpVE1dRo8rYCiczuJe5UfJllf1ZtOFiYZsB4FzBoGeU7Xdso4PWQyUOj4qIrHsViEiUFA_KBQA=s0-d-e1-ft#http://imagesak.secureserver.net/promos/std/spc_trans.gif" height="30" width="20" border="0" style="display:block;border-width:0" class="CToWUd">
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </td>
                  </tr>
               </tbody>
            </table>
            <table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#F5F7F8">
               <tbody>
                  <tr>
                     <td bgcolor="#F5F7F8" style="padding-top:0px;padding-bottom:0px">
                        <div style="max-width:600px;margin-top:0;margin-bottom:0;margin-right:auto;margin-left:auto;padding-left:20px;padding-right:20px">
                           <table bgcolor="#F5F7F8" align="center" style="border-spacing:0;font-family:sans-serif;color:#111111;margin:0 auto;width:100%;max-width:600px">
                              <tbody>
                                 <tr>
                                    <td style="padding-top:0;padding-bottom:0;padding-right:0;padding-left:0">
                                       <table width="100%" style="border-spacing:0;font-family:sans-serif;color:#111111">
                                          <tbody>
                                             <tr>
                                                <td style="padding-top:25px;padding-bottom:0px;padding-left:40px;padding-right:40px;background-color:#f5f7f8;width:100%;text-align:left">
                                                   <p style="margin-top:0px;line-height:0px;margin-bottom:0px;font-size:4px">&nbsp;</p>
                                                </td>
                                             </tr>
                                          </tbody>
                                       </table>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                     </td>
                  </tr>
               </tbody>
            </table>
         </center>
      </div>
   </body>
</html>';


try{
	sendEmail($subject, $to, $emailContent);
}
catch(Exception $e) {
	
}
catch (Error $e) {
	 
							}


				$org['user_id']=$id;
				$org['email']=$data['Email'];
				$org['result']=1;
				$stmt->close();
				$dbCon->close();
				return $org;
				
				} 
				else 
				{
				$org['user_id']=0;
				$org['email']=$data['Email'];
				$org['result']=0;	
				$stmt->close();
				$dbCon->close();
				return $org;
			}
			}
			else 
			{
				$org['user_id']=$myrow['id'];
				$org['email']=$data['Email'];
				$org['result']=2;
				$stmt->close();
				$dbCon->close();
				return $org;
			}	
		}

	function saveCardDetails($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("insert into user_cards(`user_login_id`,`created_on`,`card_number`,card_cvv,exp_month,exp_year,name_on_card,card_type) values(?, now(), ?, ?, ?, ?, ?, ?)");
			$stmt->bind_param("isisiss", $data['UserId'],$data['CardNumber'],$data['Cvv'],$data['ExpirationMonth'],$data['ExpirationYear'],htmlentities($data['CardHolderName'],ENT_NOQUOTES, 'UTF-8'),$data['card_type']);
			if($stmt->execute())
			{
			$stmt = $dbCon->prepare("select is_id_active,invoice_address_required,delivery_address_required from user_profiles where user_logins_id = ?");
				
						/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			
			$stmt = $dbCon->prepare("update user_certificates set pay_required=1,qloudid_pay_status=1 where certificate_key=?");
			$stmt->bind_param("s", $data['certi']);
			$stmt->execute();
			
			
			$stmt = $dbCon->prepare("select count(id) as num from user_address where user_id = ?");
				
						/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowAdd    = $result->fetch_assoc();	
			
			if($rowId['delivery_address_required']==0 && $rowAdd['num']==0)
			{
			$stmt->close();
			$dbCon->close();
			return 1;	
			}
			else 
			{
			$stmt = $dbCon->prepare("update user_certificates set qloudid_pay_status=2 where certificate_key=?");
			$stmt->bind_param("s", $data['certi']);
			$stmt->execute();	
			
			$stmt = $dbCon->prepare("select count(id) as num from user_identification where user_id = ?");
				
						/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			if($rowId['num']==0)
			{
			$stmt->close();
			$dbCon->close();
			return 3;
			}
			else
			{
				
			$stmt = $dbCon->prepare("select count(id) as num from user_identification where user_id = ? and is_completed=1");
				
						/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			if($rowId['num']==0)
			{
			$stmt = $dbCon->prepare("update user_certificates set checkin_required=1,qloudid_pay_status=3 where certificate_key=?");
			$stmt->bind_param("s", $data['certi']);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return 4;
			}
			else
			{
			$stmt = $dbCon->prepare("update user_certificates set checkin_required=1,qloudid_pay_status=4 where user_id=?");
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 5;	
			}
				
			}
			}
			}
			else
			{
			$stmt->close();
			$dbCon->close();
			return 0;	
			}
		}
	
	
	function listCardDetails($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select id,name_on_card,card_number from  user_cards where `user_login_id`=?");
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			 
			$org=array();
			while($row = $result->fetch_assoc())
			{
				$row['name_on_card']=html_entity_decode($row['name_on_card'],ENT_NOQUOTES, 'UTF-8');
				$row['card_number']='**** **** **** '.substr($row['card_number'],-4);
				array_push($org,$row);
			}
			$stmt->close();
			$dbCon->close(); 
			return $org;
		}
		
		function lawersInfo()
		{
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select employee_id,languages_used_by_staff,company_name,concat_ws(' ',first_name,last_name) as name from law_firm_resources left join employees on law_firm_resources.employee_id=employees.id left join companies on companies.id=employees.company_id where employee_id in (select id from employees where is_lawer=1 and company_id =? ) and type_of_lawer=?");
			$stmt->bind_param("ii", $_POST['location_detail'],$_POST['type_of_lawer']);
			$stmt->execute();
			$result = $stmt->get_result();
			 
			$org=array();
			while($row = $result->fetch_assoc())
			{
			$practice_area=explode(',',$row['languages_used_by_staff']);
				if (!(in_array($_POST['languages_known'], $practice_area)))
				{
				continue;
				}
			 array_push($org,$row);
		}
			 
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
		
		
		function languagesKnown()
		{
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select id,lang_eng from world_languages");
			$stmt->execute();
			$result = $stmt->get_result();
			$org = array();
			$i=0;
			while($row = $result->fetch_assoc())
			{
				array_push($org,$row);
			}
			
			 
			$stmt->close();
			$dbCon->close();
			return $org;
			
			
		}
		function lawCompanyDetails()
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select company_id,visiting_address from  property_location left join companies on companies.id=property_location.company_id where company_id in (select company_id from company_lawfirm_account_request where is_approved=1) and companies.country_id=67");
			 
			$stmt->execute();
			$result = $stmt->get_result();
			 
			$org=array();
			while($row = $result->fetch_assoc())
			{
				
				array_push($org,$row);
			}
			$stmt->close();
				$dbCon->close(); 
			return $org;
		}
	
	function companyAddressDetail($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			 
			
			$stmt = $dbCon->prepare("select company_name as name_on_house,property_location.id,street_name_v as address, city_v as city, postal_code_v as zipcode, d_port_number as port_number,street_name_i as invoice_address, city_i as invoice_city, postal_code_i as invoice_zipcode,i_port_number as invoice_port_number,is_invoice_same as is_invoice_same  from  property_location left join companies on companies.id=property_location.company_id where property_location.id =?");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			foreach($row as $string)
			{
			$string=html_entity_decode($string,ENT_NOQUOTES, 'UTF-8');
			}
			$stmt->close();
				$dbCon->close();
			return $row;
		}
	
	
	
	function addressDetail($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select * from user_apartment_get_started where id not in (select user_apartment_get_started_id from user_apartment_get_started_description where user_address_id=?)");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			while($row = $result->fetch_assoc())
			{
			$stmt = $dbCon->prepare("insert into user_apartment_get_started_description (user_address_id, user_apartment_get_started_id) values (?,?)");
			$stmt->bind_param("ii", $data['id'],$row['id']);
			$stmt->execute();	
			}
			
			$stmt = $dbCon->prepare("select sum(is_updated) as is_updated_count  from user_apartment_get_started_description where user_address_id=?");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			if($row['is_updated_count']==5)
			{
			$stmt = $dbCon->prepare("update user_address set get_started_updated=1 where id=?");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();	
			}
			else if($row['is_updated_count']>0 && $row['is_updated_count']<5)
			{
			$stmt = $dbCon->prepare("update user_address set get_started_updated=2 where id=?");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();	
			}
			
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_pricing_info where user_address_id=?  order by pricing_start_date");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCount = $result->fetch_assoc();
			
			if($rowCount['num']>0)
			{
			$stmt = $dbCon->prepare("update user_address set pricing_updated=1 where id=?");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();	
			}
			
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_pricing_currency where user_address_id=?");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCount = $result->fetch_assoc();
			
			if($rowCount['num']>0)
			{
			$stmt = $dbCon->prepare("update user_address set currency_updated=1 where id=?");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();	
			}
			
			
			
			
			
			$stmt = $dbCon->prepare("select * from  user_address where `id`=?");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$data['apartment_id']=$data['id'];
			
			$this->OtherRoomInfo($data);
			$this->categoryInfo($data);
			
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_photos where user_address_id=?");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowPhotoCount = $result->fetch_assoc();
			$row['photo_updated']=0;
			if($rowPhotoCount['num']>=10)
			{
			$row['photo_updated']=1;	
			}
			
			$stmt->close();
			$dbCon->close();
			$row['property_nickname']=html_entity_decode($row['property_nickname'],ENT_NOQUOTES, 'UTF-8');
			$row['property_heading']=html_entity_decode($row['property_heading'],ENT_NOQUOTES, 'UTF-8');
			$row['apartment_description']=html_entity_decode($row['apartment_description'],ENT_NOQUOTES, 'UTF-8');
			$row['address']=html_entity_decode($row['address'],ENT_NOQUOTES, 'UTF-8');
			$row['city']=html_entity_decode($row['city'],ENT_NOQUOTES, 'UTF-8');
			$row['invoice_address']=html_entity_decode($row['invoice_address'],ENT_NOQUOTES, 'UTF-8');
			$row['invoice_city']=html_entity_decode($row['invoice_city'],ENT_NOQUOTES, 'UTF-8');
			$stmt->close();
			$dbCon->close(); 
			return $row;
		}
		
		function getBookingDetail($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$id=$this->encrypt_decrypt('decrypt',$data['id']);
			$d=date('Y-m-d');
			
			$stmt = $dbCon->prepare("select payment_option,total_days,guest_adult,guest_children,checkin_booking_date,checkout_booking_date,room_type_id,total_days,price,hotel_property_type from hotel_checkout_detail where id=? and is_paid=0");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowPrice = $result->fetch_assoc();
		 
			if($rowPrice['hotel_property_type']==1)
			{
			$stmt = $dbCon->prepare("select longitude,latitude,hotel_name,property_location.visiting_address,company_hotel_room_type_detail.id,room_type_name,room_price,hotel_room_type.room_type from company_hotel_room_type_detail left join hotel_room_type on hotel_room_type.id=company_hotel_room_type_detail.room_type left join hotel_basic_information on company_hotel_room_type_detail.location_id=hotel_basic_information.property_id left join property_location on property_location.id=hotel_basic_information.property_id where company_hotel_room_type_detail.id=?");	
			}				
			else
			{
				$stmt = $dbCon->prepare("select longitude,latitude,property_nickname as hotel_name,address as visiting_address,id,property_nickname as room_type_name  from user_address where id=?");
			}
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $rowPrice['room_type_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$row['room_price']=$rowPrice['price'];
			$row['room_type']=1;
			
			$stmt->close();
			$dbCon->close();
			 
			$row['price']=$rowPrice['price']*$rowPrice['total_days'];
			if($rowPrice['guest_children']==0)
			{
			$row['guests']=$rowPrice['guest_adult'].' adults';	
			}
			else if($rowPrice['guest_children']==1)
			{
			$row['guests']=$rowPrice['guest_adult'].' adults & '.$rowPrice['guest_children'].' child';	
			}
			else
			{
			$row['guests']=$rowPrice['guest_adult'].' adults & '.$rowPrice['guest_children'].' children';		
			}
			$row['payment_option']=$rowPrice['payment_option'];
			$row['total_days']=$rowPrice['total_days'];
			$row['booking']=date('d M',$rowPrice['checkin_booking_date']).'-'.date('d M Y',$rowPrice['checkout_booking_date']);	
			$stmt->close();
			$dbCon->close();
			return $row;
		}
		
		
		function verifyCheckinDetail($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$id=$this->encrypt_decrypt('decrypt',$data['id']);
			if($id==0)
			{
			$stmt = $dbCon->prepare("select user_id from user_certificates where certificate_key=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("s", $data['certi']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			return $row;
			}
			else
			{
			$stmt = $dbCon->prepare("select user_id from hotel_checkout_detail where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			return $row;	
			}
			
		}
		
		
		function getPurchaseDetail($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$ip=$this->encrypt_decrypt('decrypt',$data['ip']);
			$d=date('Y-m-d');
			  
			$stmt = $dbCon->prepare("select * from eshop_checkout_detail where ip_address=? and created_on=?");
			$stmt->bind_param("ss", $ip,$d);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt = $dbCon->prepare("select sum(total_price) as sum  from eshop_checkout_products_detail where eshop_checkout_id=?  and is_paid=0");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowPrice = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select free_text,company_name from business_dashboard_images left join companies on companies.id=business_dashboard_images.business_id where business_id=? and business_type=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['company_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();
			$org=array();
			$stmt->close();
			$dbCon->close();
			 
			$org['price']=$rowPrice['sum'];
			if($row['free_text']==null || $row['free_text']=='')
			{
			$org['company_name']=html_entity_decode($row['company_name'],ENT_NOQUOTES, 'UTF-8');	
			}
			else
			{
				$org['company_name']=html_entity_decode($row['free_text'],ENT_NOQUOTES, 'UTF-8');
			}
		 $stmt->close();
				$dbCon->close();
			return $org;
		}
		
		function profileDetail($data)
		{
			
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select companies.id,company_name,company_email,profile_pic from companies left join company_profiles on company_profiles.company_id=companies.id where companies.id in (select company_id from user_company_profile where user_login_id=? and company_permission=1) order by company_name desc limit 0,10");
				/* bind parameters for markers */
			$stmt->bind_param("i", $data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			 
			$org=array();
			while($row = $result->fetch_assoc())
			{
				
				if($row['profile_pic']=="" || $row['profile_pic']==null)
				{
					$image='https://www.qloudid.com/html/usercontent/images/random/officepng.png';
				}
				else
				{
				$filename="../estorecss/".$row['profile_pic'].".txt"; $value_a=file_get_contents("../estorecss/".$row['profile_pic'].".txt"); $value_a=str_replace('"','',$value_a); $image = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row['profile_pic'].'.jpg' );
				$image=str_replace('../','https://www.qloudid.com/',$image);	
				}
				$row['profile_pic']=$image;
				$row['company_name']=html_entity_decode($row['company_name'],ENT_NOQUOTES, 'UTF-8');
				array_push($org,$row);
			}
			 
				$stmt->close();
				$dbCon->close();
				return $org;	
		 
			
		}
	
		
		
		function invoiceAddresses($data)
		{
		$dbCon = AppModel::createConnection();	
		 
		$stmt = $dbCon->prepare("select company_profiles.company_id,country_name,company_name,company_profiles.id,si_address,si_city,si_zip,si_country,i_port_number from company_profiles left join companies on companies.id=company_profiles.company_id left join phone_country_code on phone_country_code.id=companies.country_id where company_id in (select company_id from user_company_profile where user_login_id=? and company_permission=1) order by company_name desc limit 0,10");
		/* bind parameters for markers */
		$stmt->bind_param("i", $data['user_id']);
		$stmt->execute();
		$result = $stmt->get_result();
		$org=array();
		$j=0;
		while($row = $result->fetch_assoc())
		{
			$org[$j]['is_user']=0;
			$org[$j]['company_id']=$row['company_id'];
			$org[$j]['index_id']='0_'.$row['id'];
			$org[$j]['id']=$row['id'];
			$org[$j]['name_on_house']=html_entity_decode($row['company_name'],ENT_NOQUOTES, 'UTF-8');
			$org[$j]['invoice_address']=html_entity_decode($row['si_address'],ENT_NOQUOTES, 'UTF-8');
			$org[$j]['invoice_city']=html_entity_decode($row['si_city'],ENT_NOQUOTES, 'UTF-8');
			$org[$j]['invoice_zip']=html_entity_decode($row['si_zip'],ENT_NOQUOTES, 'UTF-8');
			$org[$j]['invoice_country']=html_entity_decode($row['country_name'],ENT_NOQUOTES, 'UTF-8');
			$org[$j]['invoice_port_number']=html_entity_decode($row['i_port_number'],ENT_NOQUOTES, 'UTF-8');
		$j++;	 
		}
	 
		$stmt = $dbCon->prepare("select concat_ws(' ',user_logins.first_name,user_logins.last_name) as name,country_name,user_address.id,invoice_address,invoice_city,invoice_zipcode,invoice_port_number from  user_address left join user_logins on user_logins.id=user_address.user_id left join phone_country_code on phone_country_code.id=user_logins.country_of_residence where `user_id`=? and is_personal_address=1");
		$stmt->bind_param("i", $data['user_id']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		if(!empty($row))
		{
			$org[$j]['is_user']=1;
			$org[$j]['company_id']=0;
			$org[$j]['index_id']='1_'.$row['id'];
			$org[$j]['id']=$row['id'];
			$org[$j]['name_on_house']=html_entity_decode($row['name'],ENT_NOQUOTES, 'UTF-8');
			$org[$j]['invoice_address']=html_entity_decode($row['invoice_address'],ENT_NOQUOTES, 'UTF-8');
			$org[$j]['invoice_city']=html_entity_decode($row['invoice_city'],ENT_NOQUOTES, 'UTF-8');
			$org[$j]['invoice_zip']=html_entity_decode($row['invoice_zipcode'],ENT_NOQUOTES, 'UTF-8');
			$org[$j]['invoice_country']=html_entity_decode($row['country_name'],ENT_NOQUOTES, 'UTF-8');
			$org[$j]['invoice_port_number']=html_entity_decode($row['invoice_port_number'],ENT_NOQUOTES, 'UTF-8'); 	
		}
			
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		
		function deliveryAddressDetail($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			if($data['user_address']==1)
			{
			$stmt = $dbCon->prepare("select entry_code,country_name,user_address.id,user_address.address,user_address.city,user_address.zipcode,user_address.port_number,user_address.name_on_house from  user_address left join user_logins on user_logins.id=user_address.user_id left join phone_country_code on phone_country_code.id=user_logins.country_of_residence where user_address.id=?");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			$row['address']=html_entity_decode($row['address'],ENT_NOQUOTES, 'UTF-8');
			$row['city']=html_entity_decode($row['city'],ENT_NOQUOTES, 'UTF-8');
			$row['zipcode']=html_entity_decode($row['zipcode'],ENT_NOQUOTES, 'UTF-8');
			$row['port_number']=html_entity_decode($row['port_number'],ENT_NOQUOTES, 'UTF-8');
			$row['name_on_house']=html_entity_decode($row['name_on_house'],ENT_NOQUOTES, 'UTF-8');
			$row['country_name']=html_entity_decode($row['country_name'],ENT_NOQUOTES, 'UTF-8');
			}
			else
			{
			$stmt = $dbCon->prepare("select country_name,company_name,property_location.id,street_name_v, city_v, postal_code_v, d_port_number from  property_location left join companies on companies.id=property_location.company_id left join phone_country_code on phone_country_code.id=companies.country_id where property_location.id =?");
			$stmt->bind_param("i",$data['id']);
			$stmt->execute();
			$result = $stmt->get_result();	
			$row = $result->fetch_assoc();
			$stmt->close();
			$dbCon->close();
			$row['address']=html_entity_decode($row['street_name_v'],ENT_NOQUOTES, 'UTF-8');
			$row['city']=html_entity_decode($row['city_v'],ENT_NOQUOTES, 'UTF-8');
			$row['zipcode']=html_entity_decode($row['postal_code_v'],ENT_NOQUOTES, 'UTF-8');
			$row['port_number']=html_entity_decode($row['d_port_number'],ENT_NOQUOTES, 'UTF-8');
			$row['name_on_house']=html_entity_decode($row['company_name'],ENT_NOQUOTES, 'UTF-8');
			$row['country_name']=html_entity_decode($row['country_name'],ENT_NOQUOTES, 'UTF-8');
			$row['entry_code']='';
			}
			return $row;
		}
		
	
	function listAddresses($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$org=array();
			$j=0;
			if($data['user_address']==1)
			{
			$stmt = $dbCon->prepare("select id,address,city,zipcode,port_number,name_on_house from  user_address where `user_id`=?");
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			while($row = $result->fetch_assoc())
			{
				$org[$j]['id']=$row['id'];
				$org[$j]['user_address']=1;
				$org[$j]['heading_address']=html_entity_decode($row['name_on_house'],ENT_NOQUOTES, 'UTF-8').','.html_entity_decode($row['address'],ENT_NOQUOTES, 'UTF-8').' '.$row['port_number']; 
				$org[$j]['subheading_address']=html_entity_decode($row['city'],ENT_NOQUOTES, 'UTF-8').'  '.$row['zipcode']; 
				$j++;
			}
				
			}
			else
			{
			$stmt = $dbCon->prepare("select company_name,property_location.id,street_name_v, city_v, postal_code_v, d_port_number from  property_location left join companies on companies.id=property_location.company_id where property_location.id in (select location_id from employee_location where employee_id in (select id from employees where user_login_id=? and company_id in (select company_id from user_company_profile where user_login_id=? and company_permission=1))) limit 0,10");
			$stmt->bind_param("ii", $data['UserId'],$data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			 
			while($row = $result->fetch_assoc())
			{
				$org[$j]['id']=$row['id'];
				$org[$j]['user_address']=0;
				$org[$j]['heading_address']=html_entity_decode($row['company_name'],ENT_NOQUOTES, 'UTF-8').','.html_entity_decode($row['street_name_v'],ENT_NOQUOTES, 'UTF-8').'-'.$row['d_port_number']; 
				$org[$j]['subheading_address']=html_entity_decode($row['city_v'],ENT_NOQUOTES, 'UTF-8').' - '.$row['postal_code_v']; 
				$j++;
			}	
			}
			
			
			 
			 
			return $org;
		}
		
		function listDeliveryAddresses($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$org=array();
			$org['user_address']=array();
			$org['company_address']=array();
			$j=0;
			$stmt = $dbCon->prepare("select country_name from  phone_country_code where id=(select country_of_residence from user_logins where id=?)");
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCountry = $result->fetch_assoc();
			$stmt = $dbCon->prepare("select id,address,city,zipcode,port_number,name_on_house from  user_address where `user_id`=?");
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			while($row = $result->fetch_assoc())
			{
				$org['user_address'][$j]['id']=$row['id'];
				$org['user_address'][$j]['user_address']=1;
				$org['user_address'][$j]['name_on_house']=html_entity_decode($row['name_on_house'],ENT_NOQUOTES, 'UTF-8');
				$org['user_address'][$j]['heading_address']=html_entity_decode($row['address'],ENT_NOQUOTES, 'UTF-8').' '.$row['port_number']; 
				$org['user_address'][$j]['subheading_address']=html_entity_decode($row['city'],ENT_NOQUOTES, 'UTF-8').' '.$row['zipcode'].','.$rowCountry['country_name']; 
				$j++;
			}
				
			$j=0;
			$stmt = $dbCon->prepare("select country_name,company_name,property_location.id,street_name_v, city_v, postal_code_v, d_port_number from  property_location left join companies on companies.id=property_location.company_id left join phone_country_code on phone_country_code.id=companies.country_id where property_location.id in (select location_id from employee_location where employee_id in (select id from employees where user_login_id=? and company_id in (select company_id from user_company_profile where user_login_id=? and company_permission=1))) limit 0,10");
			$stmt->bind_param("ii", $data['UserId'],$data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			 
			while($row = $result->fetch_assoc())
			{
				$org['company_address'][$j]['id']=$row['id'];
				$org['company_address'][$j]['user_address']=0;
				$org['company_address'][$j]['name_on_house']=html_entity_decode($row['company_name'],ENT_NOQUOTES, 'UTF-8');
				$org['company_address'][$j]['heading_address']=html_entity_decode($row['street_name_v'],ENT_NOQUOTES, 'UTF-8').' '.$row['d_port_number']; 
				$org['company_address'][$j]['subheading_address']=html_entity_decode($row['city_v'],ENT_NOQUOTES, 'UTF-8').' '.$row['postal_code_v'].','.$rowCountry['country_name']; 
				$j++;
			}	
			
			
			 
			 
			return $org;
		}
		
		function bedroomBedDetail($data)
		{ 
			$dbCon = AppModel::createConnection();
		
			$org=array();
			$stmt = $dbCon->prepare("select * from user_apartment_bedrooms_beds where bedroom_id=?");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			$j=0;
			while($row= $result1->fetch_assoc())
			{				

			array_push($org,$row);
			$org[$j]['bedtype']=array();
			$stmt = $dbCon->prepare("select * from apartment_bed_type");
			$stmt->execute();
			$result2 = $stmt->get_result();
			while($row2= $result2->fetch_assoc())
			{	
			array_push($org[$j]['bedtype'],$row2);
			}
			$j++;
			}
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		
		function bedroomDetail($data)
		{ 
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update user_address set bedroom_updated=1 where id=?");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("select * from user_apartment_bedrooms where user_address_id=?");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			$row['bedroom_count']=$j+1;	
			array_push($org,$row);
			$org[$j]['bed_type']=array();
			$stmt = $dbCon->prepare("select * from user_apartment_bedrooms_beds where bedroom_id=?");
			$stmt->bind_param("i", $row['id']);
			$stmt->execute();
			$result1 = $stmt->get_result();
			while($row1= $result1->fetch_assoc())
			{							
			array_push($org[$j]['bed_type'],$row1);
			}
			$j++;
			}
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		
		function bedTypeDetail()
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select * from apartment_bed_type");
			$stmt->execute();
			$result2 = $stmt->get_result();
			$org=array();
			
			while($row= $result2->fetch_assoc())
			{	
			array_push($org,$row);
			}
			
			$stmt->close();
			$dbCon->close();
			return $org;
		}
		
		
		function addBedroom($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("insert into user_apartment_bedrooms (user_address_id, created_on) values (?,now())");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();	
			$id=$stmt->insert_id;
			$bed='Single';
			$stmt = $dbCon->prepare("insert into user_apartment_bedrooms_beds (bedroom_id,bed_info, created_on,modified_on) values (?,?,now(),now())");
			$stmt->bind_param("is", $id,$bed);
			$stmt->execute();	
			
			 
			$stmt->close();
			$dbCon->close();
			return 1;	
		}
		
	
		
		function deleteBedroom($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_bedrooms where user_address_id=?");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if($row['num']>1)
			{
			$stmt = $dbCon->prepare("select max(id) as m_id from user_apartment_bedrooms where user_address_id=?");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("delete from user_apartment_bedrooms where id=?");
			$stmt->bind_param("i", $row['m_id']);
			$stmt->execute();	
			
			$stmt = $dbCon->prepare("delete from user_apartment_bedrooms_beds where bedroom_id=?");
			$stmt->bind_param("i", $row['m_id']);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return 1;
			}
			 else
			 {
			$stmt->close();
			$dbCon->close();
			return 0;
			 }
			 	
		}
		
		function deleteBedroomBedInfo($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select max(id) as m_id from user_apartment_bedrooms_beds where bedroom_id=?");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowBed = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_bedrooms_beds where bedroom_id=?");
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if($row['num']>1)
			{
			$stmt = $dbCon->prepare("delete from user_apartment_bedrooms_beds where id=?");
			$stmt->bind_param("i", $rowBed['m_id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;	
			}
			else
			{
			$stmt = $dbCon->prepare("select count(id) as num from user_apartment_bedrooms where user_address_id=?");
			$stmt->bind_param("i", $data['aid']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if($row['num']>1)
			{
			
			$stmt = $dbCon->prepare("delete from user_apartment_bedrooms where id=?");
			$stmt->bind_param("i",$data['id']);
			$stmt->execute();	
			
			$stmt = $dbCon->prepare("delete from user_apartment_bedrooms_beds where id=?");
			$stmt->bind_param("i", $rowBed['m_id']);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return 1;
			}
			else
			{
			$stmt->close();
			$dbCon->close();
			return 0;
			}	
			}
			 
			
			 	
		}
		
		function updateBedTypeInfo($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("update user_apartment_bedrooms_beds set bed_info=?,modified_on=now() where id=?");
			$stmt->bind_param("si",$data['bed_info'], $data['bed_id']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		function addBedToBedroom($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$bed="Single";
			$stmt = $dbCon->prepare("insert into user_apartment_bedrooms_beds (bedroom_id,bed_info,created_on,modified_on) values (?, ?, now(), now())");
			$stmt->bind_param("is", $data['id'],$bed);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
		}
		
		
		function listUserDeliveryAddresses($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			$stmt = $dbCon->prepare("select id,address,city,zipcode,port_number,name_on_house,bedroom_updated,bathroom_updated,property_nickname, ownership_updated,other_room_updated,property_composition_updated from  user_address where `user_id`=?");
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			 
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
				$row['address']=html_entity_decode($row['address'],ENT_NOQUOTES, 'UTF-8');
				$row['name_on_house']= html_entity_decode($row['name_on_house'],ENT_NOQUOTES, 'UTF-8');
				$row['property_nickname']= html_entity_decode($row['property_nickname'],ENT_NOQUOTES, 'UTF-8');
				$row['user_address']=1;
				$row['heading_address']=html_entity_decode($row['name_on_house'],ENT_NOQUOTES, 'UTF-8').','.html_entity_decode($row['address'],ENT_NOQUOTES, 'UTF-8').'-'.$row['port_number']; 
				$row['subheading_address']=html_entity_decode($row['city'],ENT_NOQUOTES, 'UTF-8').' - '.$row['zipcode']; 
				 array_push($org,$row);
				$j++;
			}
			
			$stmt->close();
			$dbCon->close(); 
			 
			return $org;
		}
		
		
		function addAddress($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			 
			if($data['IsInvoiceAddressSame']==true)
			{
			$data['IsInvoiceAddressSame']=1;
			}
			else
			{
			$data['IsInvoiceAddressSame']=0;	
			}
			
			if($data['IsNameSame']==true)
			{
			$data['IsNameSame']=1;
			}
			else
			{
			$data['IsNameSame']=0;	
			}
			$stmt = $dbCon->prepare("select count(id) as num from user_address where user_id = ?");
				
						/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			if($rowId['num']==0)
			{
			$stmt = $dbCon->prepare("update user_profiles set name_on_door=?, entry_code=?, full_address=?, port_number=?, address=?, city=?, zipcode=?,invoice_address=?,invoice_zipcode=?,invoice_city=?,invoice_port=?,is_invoice_same=?,is_name_on_house_same=?,is_id_active=1  where user_logins_id=?");
				/* bind parameters for markers */
			$stmt->bind_param("sssssssssssiii",$data['Name'],$data['EntryCode'], $data['DeliveryAddress'],$data['DeliveryPortNumber'], $data['DeliveryAddress'],$data['DeliveryCity'],$data['DeliveryZipCode'],$data['InvoiceAddress'],$data['InvoiceZipCode'],$data['InvoiceCity'],$data['InvoicePortNumber'],$data['IsInvoiceAddressSame'],$data['IsNameSame'],$data['UserId']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("insert into  user_address ( `user_id`, `address`  , `city`  , `zipcode` , `port_number` , `invoice_address`  , `invoice_city`  , `invoice_zipcode`  , `invoice_port_number`  , `is_name_same`  , `is_invoice_same`  , `name_on_house`   , `created_on`,entry_code ) values (? , ?, ?, ?, ? , ?, ?, ?, ? , ?, ?, ?, now(), ?)");
				/* bind parameters for markers */
			$stmt->bind_param("issssssssiiss",$data['UserId'],$data['DeliveryAddress'],$data['DeliveryCity'],$data['DeliveryZipCode'],$data['DeliveryPortNumber'],$data['InvoiceAddress'],$data['InvoiceCity'],$data['InvoiceZipCode'],$data['InvoicePortNumber'],$data['IsInvoiceAddressSame'],$data['IsNameSame'],$data['Name'],$data['EntryCode']);
			$stmt->execute();
			$id=$stmt->insert_id;
			}
			else
			{
				$st=0;
			$stmt = $dbCon->prepare("insert into  user_address ( `user_id`, `address`  , `city`  , `zipcode` , `port_number` , `invoice_address`  , `invoice_city`  , `invoice_zipcode`  , `invoice_port_number`  , `is_name_same`  , `is_invoice_same`  , `name_on_house`   , `created_on`,entry_code, is_personal_address ) values (? , ?, ?, ?, ? , ?, ?, ?, ? , ?, ?, ?, now(), ?, ?)");
				/* bind parameters for markers */
			$stmt->bind_param("issssssssiissi",$data['UserId'],$data['DeliveryAddress'],$data['DeliveryCity'], $data['DeliveryZipCode'],$data['DeliveryPortNumber'],$data['InvoiceAddress'],$data['InvoiceCity'],$data['InvoiceZipCode'],$data['InvoicePortNumber'],$data['IsInvoiceAddressSame'],$data['IsNameSame'],$data['Name'],$data['EntryCode'],$st);
			$stmt->execute();
			$id=$stmt->insert_id;	
			}
			
			$stmt = $dbCon->prepare("update user_certificates set qloudid_pay_status=2 where certificate_key=?");
			$stmt->bind_param("s", $data['CertificateKey']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("select count(id) as num from user_identification where user_id = ?");
				
						/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			if($rowId['num']==0)
			{
			$stmt->close();
			$dbCon->close();
			return 2;
			}
			else
			{
				
			$stmt = $dbCon->prepare("select count(id) as num from user_identification where user_id = ? and is_completed=1");
				
						/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			if($rowId['num']==0)
			{
			$stmt = $dbCon->prepare("update user_certificates set checkin_required=1,qloudid_pay_status=3 where certificate_key=?");
			$stmt->bind_param("s", $data['certi']);
			$stmt->execute();	
			$stmt->close();
			$dbCon->close();
			return 3;
			}
			else
			{
			$stmt = $dbCon->prepare("update user_certificates set checkin_required=1,qloudid_pay_status=4 where user_id=?");
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;	
			}
				
			}
			
			 
		}
	
	function addNewAddress($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			 
			if($data['IsInvoiceAddressSame']==true)
			{
			$data['IsInvoiceAddressSame']=1;
			}
			else
			{
			$data['IsInvoiceAddressSame']=0;	
			}
			
			if($data['IsNameSame']==true)
			{
			$data['IsNameSame']=1;
			}
			else
			{
			$data['IsNameSame']=0;	
			}
			$stmt = $dbCon->prepare("select count(id) as num from user_address where user_id = ?");
				
						/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			if($rowId['num']==0)
			{
			$stmt = $dbCon->prepare("update user_profiles set name_on_door=?, entry_code=?, full_address=?, port_number=?, address=?, city=?, zipcode=?,invoice_address=?,invoice_zipcode=?,invoice_city=?,invoice_port=?,is_invoice_same=?,is_name_on_house_same=?,is_id_active=1  where user_logins_id=?");
				/* bind parameters for markers */
			$stmt->bind_param("sssssssssssiii",$data['Name'],$data['EntryCode'], htmlentities($data['DeliveryAddress'],ENT_NOQUOTES, 'UTF-8'),$data['DeliveryPortNumber'], htmlentities($data['DeliveryAddress'],ENT_NOQUOTES, 'UTF-8'),htmlentities($data['DeliveryCity'],ENT_NOQUOTES, 'UTF-8'),htmlentities($data['DeliveryZipCode'],ENT_NOQUOTES, 'UTF-8'),htmlentities($data['InvoiceAddress'],ENT_NOQUOTES, 'UTF-8'),$data['InvoiceZipCode'],htmlentities($data['InvoiceCity'],ENT_NOQUOTES, 'UTF-8'),$data['InvoicePortNumber'],$data['IsInvoiceAddressSame'],$data['IsNameSame'],$data['UserId']);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("insert into  user_address ( `user_id`, `address`  , `city`  , `zipcode` , `port_number` , `invoice_address`  , `invoice_city`  , `invoice_zipcode`  , `invoice_port_number`  , `is_name_same`  , `is_invoice_same`  , `name_on_house`   , `created_on`,entry_code ) values (? , ?, ?, ?, ? , ?, ?, ?, ? , ?, ?, ?, now(), ?)");
				/* bind parameters for markers */
			$stmt->bind_param("issssssssiiss",$data['UserId'],htmlentities($data['DeliveryAddress'],ENT_NOQUOTES, 'UTF-8'),$data['DeliveryCity'], htmlentities($data['DeliveryZipCode'],ENT_NOQUOTES, 'UTF-8'),htmlentities($data['DeliveryPortNumber'],ENT_NOQUOTES, 'UTF-8'),htmlentities($data['InvoiceAddress'],ENT_NOQUOTES, 'UTF-8'),$data['InvoiceCity'],htmlentities($data['InvoiceZipCode'],ENT_NOQUOTES, 'UTF-8'),$data['InvoicePortNumber'],$data['IsInvoiceAddressSame'],$data['IsNameSame'],$data['Name'],$data['EntryCode']);
			$stmt->execute();
			$id=$stmt->insert_id;
			}
			else
			{
				$st=0;
			$stmt = $dbCon->prepare("insert into  user_address ( `user_id`, `address`  , `city`  , `zipcode` , `port_number` , `invoice_address`  , `invoice_city`  , `invoice_zipcode`  , `invoice_port_number`  , `is_name_same`  , `is_invoice_same`  , `name_on_house`   , `created_on`,entry_code, is_personal_address ) values (? , ?, ?, ?, ? , ?, ?, ?, ? , ?, ?, ?, now(), ?, ?)");
				/* bind parameters for markers */
			$stmt->bind_param("issssssssiissi",$data['UserId'],htmlentities($data['DeliveryAddress'],ENT_NOQUOTES, 'UTF-8'),$data['DeliveryCity'], htmlentities($data['DeliveryZipCode'],ENT_NOQUOTES, 'UTF-8'),htmlentities($data['DeliveryPortNumber'],ENT_NOQUOTES, 'UTF-8'),htmlentities($data['InvoiceAddress'],ENT_NOQUOTES, 'UTF-8'),$data['InvoiceCity'],htmlentities($data['InvoiceZipCode'],ENT_NOQUOTES, 'UTF-8'),$data['InvoicePortNumber'],$data['IsInvoiceAddressSame'],$data['IsNameSame'],$data['Name'],$data['EntryCode'],$st);
			$stmt->execute();
			$id=$stmt->insert_id;	
			}
			if(isset($data['CertificateKey']))
			{
			$stmt = $dbCon->prepare("update  user_certificates set `delivery_address_id`=?  , `delivered_at`=1  where certificate_key=?");
				/* bind parameters for markers */
			$stmt->bind_param("is",$id,$data['CertificateKey']);
			$stmt->execute();
			}
			$stmt->close();
			$dbCon->close();
			return $id;
			 
		}
	
	function updateUserAddress($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			 
			 
			
			 
			$stmt = $dbCon->prepare("select is_personal_address from user_address where id = ?");
				
						/* bind parameters for markers */
			$stmt->bind_param("i", $data['id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			if($rowId['is_personal_address']==1)
			{
			$stmt = $dbCon->prepare("update user_profiles set name_on_door=?, entry_code=?, full_address=?, port_number=?, address=?, city=?, zipcode=?,invoice_address=?,invoice_zipcode=?,invoice_city=?,invoice_port=?,is_invoice_same=?,is_name_on_house_same=?,is_id_active=1  where user_logins_id=?");
				/* bind parameters for markers */
			$stmt->bind_param("sssssssssssiii",$data['name_on_house'],$data['entry_code'], htmlentities($data['address'],ENT_NOQUOTES, 'UTF-8'),$data['port_number'], htmlentities($data['address'],ENT_NOQUOTES, 'UTF-8'),htmlentities($data['city'],ENT_NOQUOTES, 'UTF-8'),htmlentities($data['zipcode'],ENT_NOQUOTES, 'UTF-8'),htmlentities($data['invoice_address'],ENT_NOQUOTES, 'UTF-8'),$data['invoice_zipcode'],htmlentities($data['invoice_city'],ENT_NOQUOTES, 'UTF-8'),$data['invoice_port_number'],$data['is_invoice_same'],$data['is_name_same'],$data['user_id']);
			$stmt->execute();
			}
			
			$stmt = $dbCon->prepare("update  user_address set `address`=?  , `city`=? , `zipcode`=? , `port_number`=? , `invoice_address`=?  , `invoice_city` =? , `invoice_zipcode` =? , `invoice_port_number`=?  , `is_name_same`=?  , `is_invoice_same`=?  , `name_on_house` =?  , entry_code =? where id=?");
				/* bind parameters for markers */
			$stmt->bind_param("ssssssssiissi",htmlentities($data['address'],ENT_NOQUOTES, 'UTF-8'),$data['city'], htmlentities($data['zipcode'],ENT_NOQUOTES, 'UTF-8'),htmlentities($data['port_number'],ENT_NOQUOTES, 'UTF-8'),htmlentities($data['invoice_address'],ENT_NOQUOTES, 'UTF-8'),$data['invoice_city'],htmlentities($data['invoice_zipcode'],ENT_NOQUOTES, 'UTF-8'),$data['invoice_port_number'],$data['is_invoice_same'],$data['is_name_same'],$data['name_on_house'],$data['entry_code'],$data['id']);
			$stmt->execute();
			$stmt = $dbCon->prepare("update  user_certificates set `delivery_address_id`=?  , `delivered_at`=1  where certificate_key=?");
				/* bind parameters for markers */
			$stmt->bind_param("is",$data['id'],$data['CertificateKey']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
			 
		}
	
	
	function updateCompanyAddress($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("update  user_certificates set `delivery_address_id`=?  , `delivered_at`=?  where certificate_key=?");
				/* bind parameters for markers */
			$stmt->bind_param("iis",$data['id'],$data['delivered_at'],$data['CertificateKey']);
			$stmt->execute();
			$dbCon->close();
			return 1;
			 
		}
	
	
	
	function restoreAccount($data) {
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("SELECT id FROM user_logins WHERE email=?");
			
			/* bind parameters for markers*/
			$stmt->bind_param("s", $data['Email']);
			$stmt->execute();
			$result = $stmt->get_result();
			$myrow  = $result->fetch_assoc();
			 
			if(!empty($myrow))
			{
			 
				$num=(mt_rand(111111,999999));
				$stmt = $dbCon->prepare("update user_logins set otp_verification=? where id=?");
				
				$stmt->bind_param("si", $num,$myrow['id']);
				$stmt->execute();
				
				$to      = $data['Email'];
				$subject = "Qloud ID - Verify your email";
				$emailContent='<html>
   <head></head>
   <body>
      <div style="margin-top:0!important;margin-bottom:0!important;margin-right:0!important;margin-left:0!important;padding:0">
         <center style="width:100%;table-layout:fixed">
            <table width="100%" cellpadding="0" cellspacing="0" bgcolor="#F5F7F8" style="text-align:center">
               <tbody>
                  <tr>
                     <td>
                        <table width="100%" cellpadding="0" cellspacing="0" bgcolor="#F5F7F8">
                           <tbody>
                              <tr>
                                 <td>
                                    <div style="margin-top:0;margin-bottom:0;margin-right:auto;margin-left:auto;padding-left:0px;padding-right:0px">
                                       <table align="center" style="border-spacing:0;font-family:sans-serif;color:#f5f7f8;Margin:0 auto;width:100%" bgcolor="#F5F7F8">
                                          <tbody>
                                             <tr>
                                                <td style="padding-top:0;padding-bottom:0;padding-right:0;padding-left:0" bgcolor="#F5F7F8">
                                                   <table width="100%" style="border-spacing:0;font-family:sans-serif;color:#f5f7f8" bgcolor="#F5F7F8">
                                                      <tbody>
                                                         <tr>
                                                            <td style="padding-bottom:0px;padding-top:0px;padding-left:20px;padding-right:20px;background-color:#f5f7f8;color:#f5f7f8;width:100%;font-size:1px;line-height:1px;text-align:left;display:none!important">
                                                               <p style="text-align:left;line-height:6px;Margin-top:0px;Margin-bottom:0px">Dina domner r instllda p att frnyas automatiskt. ppna det hr e-postmeddelandet fr att skerstlla att allt fortfarande r uppdaterat. Och glm inte att du fr 20 % rabatt p nya produkter. &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
                                                               <div style="display:none;max-height:0px;overflow:hidden">
                                                                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                               </div>
                                                            </td>
                                                         </tr>
                                                      </tbody>
                                                   </table>
                                                </td>
                                             </tr>
                                          </tbody>
                                       </table>
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                        <table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#F5F7F8">
                           <tbody>
                              <tr>
                                 <td bgcolor="#F5F7F8" style="padding-top:0px;padding-bottom:20px">
                                    <div style="margin-top:0;margin-bottom:0;margin-right:auto;margin-left:auto;padding-left:0px;padding-right:0px">
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                        <table width="100%" cellpadding="0" cellspacing="0" bgcolor="#F5F7F8">
                           <tbody>
                              <tr>
                                 <td style="padding-bottom:20px">
                                    <div style="max-width:600px;margin-top:0;margin-bottom:0;margin-right:auto;margin-left:auto;padding-left:20px;padding-right:20px">
                                       <table align="center" style="border-spacing:0;font-family:sans-serif;color:#111111;Margin:0 auto;width:100%;max-width:600px" bgcolor="#F5F7F8">
                                          <tbody>
                                             <tr>
                                                <td bgcolor="#F5F7F8" style="padding-top:0;padding-bottom:0;padding-right:0;padding-left:0">
                                                   <table width="73%" style="border-spacing:0;font-family:Audiowide;color:#111111" bgcolor="#F5F7F8">
                                                      <tbody>
                                                         <tr>
                                                            <td style="padding-top:5px;padding-bottom:0;padding-right:0;padding-left:0px" align="left">
                                                               <p style="font-size:30px; font-weight:normal; Audiowide;">Qloudid</p>
                                                            </td>
                                                         </tr>
                                                      </tbody>
                                                   </table>
                                                </td>
                                                <td width="100%" bgcolor="#F5F7F8" style="padding-top:0;padding-bottom:0;padding-right:0;padding-left:0">
                                                   <table width="100%" style="border-spacing:0;font-family:sans-serif;color:#111111" bgcolor="#F5F7F8">
                                                      <tbody>
                                                         <tr>
                                                            <td style="padding-top:10px;padding-bottom:0px;padding-left:10px;padding-right:0px;background-color:#f5f7f8;width:100%;text-align:right">
                                                               <p style="Margin-top:0px;margin-bottom:0px;font-size:13px;line-height:16px"><strong><a href="tel:077%20588%2080%2023" style="text-decoration:none;color:#111111" target="_blank">Website: <u></u>www.qloudid.com<u></u></a></strong></p>
                                                            </td>
                                                         </tr>
                                                         <tr>
                                                            <td style="padding-top:0px;padding-bottom:0px;padding-left:10px;padding-right:0px;background-color:#f5f7f8;width:100%;text-align:right">
                                                               <p style="Margin-top:5px;margin-bottom:0px;font-size:13px;line-height:16px">If you have any questions - <u></u>Contact us<u></u></p>
                                                            </td>
                                                         </tr>
                                                      </tbody>
                                                   </table>
                                                </td>
                                             </tr>
                                          </tbody>
                                       </table>
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                        <table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#F5F7F8">
                           <tbody>
                              <tr>
                                 <td bgcolor="#F5F7F8" style="background-color:#f5f7f8;padding-top:0;padding-right:0;padding-left:0;padding-bottom:0">
                                    <div style="max-width:600px;margin-top:0;margin-bottom:0;margin-right:auto;margin-left:auto;padding-left:20px;padding-right:20px">
                                       <table bgcolor="#FFFFFF" width="100%" align="center" border="0" cellspacing="0" cellpadding="0" style="font-family:sans-serif;color:#111111">
                                          <tbody>
                                             <tr>
                                                <td bgcolor="#FFFFFF" align="left" style="padding-top:0px;padding-bottom:0;padding-right:0px;padding-left:0px;text-align:left;background-color:#ffffff;font-weight:bold;font-size:32px;line-height:42px">
                                                   <div style="text-align: center; line-height: 22px; max-width: 600px;
                                                      float: left;
                                                      position: relative; ">
                                                      <div class="wrap maxwi_100 xs-padr25 xs-padl10 padt10 xs-padt0 red_ff2828_bg  brdb_new tall xs-nobrdb" style="max-width: 100%; background-color: #ff2828 !important;
                                                         width: 960px;
                                                         position: relative;
                                                         margin: 0 auto;
                                                         ">
                                                         <div style="height: 250px; width: auto; max-width: 100%; padding-top: 100px; padding-right: 30px;
                                                            padding-left: 30px; margin-right: auto;
                                                            margin-left: auto;  z-index: 5; max-width: 100%; width: auto;">
                                                            <div class="padding-bottom: 40px; text-align: center; font-size: 45px;"><img src="http://www.qloudid.com/html/usercontent/images/doublecheck.png" width="45px;" height="45px;"></div>
                                                            <div class="padb0 xxs-padb0 ">
                                                               <h1 style="font-size: 50px; font-weight: normal; text-align: center; padding-bottom: 10px; color:white;">Success</h1>
                                                            </div>
                                                            <div style="margin-top: 20px; font-weight: normal; margin-bottom: 10px; text-align: center; color:white; font-size: 20px;">Please verify your email using the one time password : '.$num.'</div>
                                                         </div>
                                                      </div>
                                                   </div>
                                                </td>
                                             </tr>
                                          </tbody>
                                       </table>
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                        <table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#F5F7F8">
                           <tbody>
                              <tr>
                                 <td bgcolor="#F5F7F8" style="padding-top:0px;padding-bottom:0px">
                                    <div style="max-width:600px;margin-top:0;margin-bottom:0;margin-right:auto;margin-left:auto;padding-left:20px;padding-right:20px">
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                        <table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#F5F7F8">
                           <tbody>
                              <tr>
                                 <td bgcolor="#F5F7F8" style="padding-top:0px;padding-bottom:0px">
                                    <div style="max-width:600px;margin-top:0;margin-bottom:0;margin-right:auto;margin-left:auto;padding-left:20px;padding-right:20px">
                                       <table bgcolor="#FFFFFF" align="center" style="border-spacing:0;font-family:sans-serif;color:#111111;margin:0 auto;width:100%;max-width:600px">
                                          <tbody>
                                             <tr>
                                                <td style="padding-top:0;padding-bottom:0;padding-right:0;padding-left:0">
                                                   <table width="100%" style="border-spacing:0;font-family:sans-serif;color:#111111">
                                                      <tbody>
                                                         <tr>
                                                            <td style="padding-top:25px;padding-bottom:0px;padding-left:40px;padding-right:40px;background-color:#ffffff;width:100%;text-align:left">
                                                               <p style="margin-top:0px;line-height:0px;margin-bottom:0px;font-size:4px">&nbsp;</p>
                                                            </td>
                                                         </tr>
                                                      </tbody>
                                                   </table>
                                                </td>
                                             </tr>
                                          </tbody>
                                       </table>
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                        <table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#F5F7F8">
                           <tbody>
                              <tr>
                                 <td bgcolor="#F5F7F8" style="padding-top:0px;padding-bottom:0px">
                                    <div style="max-width:600px;margin-top:0;margin-bottom:0;margin-right:auto;margin-left:auto;padding-left:40px;padding-right:20px">
                                       <table align="center" style="border-spacing:0;font-family:sans-serif;color:#111111;Margin:0 auto;width:100%;max-width:600px">
                                          <tbody>
                                             <tr>
                                                <td width="20" bgcolor="#ffffff" style="padding-top:0;padding-bottom:0;padding-right:0;padding-left:0">
                                                   <img src="https://ci3.googleusercontent.com/proxy/gvkyMPCroXxkwzdJ2Pg_KqgcjVeVgpVE1dRo8rYCiczuJe5UfJllf1ZtOFiYZsB4FzBoGeU7Xdso4PWQyUOj4qIrHsViEiUFA_KBQA=s0-d-e1-ft#http://imagesak.secureserver.net/promos/std/spc_trans.gif" height="30" width="20" border="0" style="display:block;border-width:0" class="CToWUd">
                                                </td>
                                                <td style="padding-top:0px;padding-bottom:0px;padding-right:0;padding-left:0;text-align:center;font-size:0;background-color:#ffffff">
                                                   <div style="width:100%;max-width:560px;display:inline-block;vertical-align:top">
                                                      <table width="100%" style="border-spacing:0;font-family:sans-serif;color:#111111">
                                                         <tbody>
                                                            <tr>
                                                               <td style="padding-top:0px;padding-bottom:0px;padding-left:20px;padding-right:20px;background-color:#ffffff">
                                                                  <table style="border-spacing:0;font-family:sans-serif;color:#111111;width:100%;font-size:14px;text-align:left;background-color:#ffffff;border-top-color:#e8eaeb;border-top-style:solid;border-top-width:1px">
                                                                     <tbody>
                                                                        <tr>
                                                                           <td style="padding-top:20px;padding-bottom:20px;padding-left:20px;padding-right:10px;background-color:#ffffff;width:100%;text-align:left">
                                                                              <table style="border-spacing:0;font-family:sans-serif;color:#111111;Margin:0 auto;width:100%;table-layout:fixed">
                                                                                 <tbody>
                                                                                    <tr>
                                                                                       <td style="padding-top:0px;padding-bottom:0px;padding-left:0px;padding-right:0px;background-color:#ffffff;width:100%;text-align:center">
                                                                                          <p style="Margin-top:0px;line-height:22px;Margin-bottom:0px; fsz14px;">This is sent because you have restored your account using Qloud ID App</p>
                                                                                       </td>
                                                                                    </tr>
                                                                                 </tbody>
                                                                              </table>
                                                                           </td>
                                                                        </tr>
                                                                     </tbody>
                                                                  </table>
                                                               </td>
                                                            </tr>
                                                         </tbody>
                                                      </table>
                                                   </div>
                                                </td>
                                             </tr>
                                          </tbody>
                                       </table>
                                    </div>
                                 </td>
                                 <td width="20" bgcolor="#ffffff" style="padding-top:0;padding-bottom:0;padding-right:0;padding-left:0">
                                    <img src="https://ci3.googleusercontent.com/proxy/gvkyMPCroXxkwzdJ2Pg_KqgcjVeVgpVE1dRo8rYCiczuJe5UfJllf1ZtOFiYZsB4FzBoGeU7Xdso4PWQyUOj4qIrHsViEiUFA_KBQA=s0-d-e1-ft#http://imagesak.secureserver.net/promos/std/spc_trans.gif" height="30" width="20" border="0" style="display:block;border-width:0" class="CToWUd">
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </td>
                  </tr>
               </tbody>
            </table>
            <table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#F5F7F8">
               <tbody>
                  <tr>
                     <td bgcolor="#F5F7F8" style="padding-top:0px;padding-bottom:0px">
                        <div style="max-width:600px;margin-top:0;margin-bottom:0;margin-right:auto;margin-left:auto;padding-left:20px;padding-right:20px">
                           <table bgcolor="#F5F7F8" align="center" style="border-spacing:0;font-family:sans-serif;color:#111111;margin:0 auto;width:100%;max-width:600px">
                              <tbody>
                                 <tr>
                                    <td style="padding-top:0;padding-bottom:0;padding-right:0;padding-left:0">
                                       <table width="100%" style="border-spacing:0;font-family:sans-serif;color:#111111">
                                          <tbody>
                                             <tr>
                                                <td style="padding-top:25px;padding-bottom:0px;padding-left:40px;padding-right:40px;background-color:#f5f7f8;width:100%;text-align:left">
                                                   <p style="margin-top:0px;line-height:0px;margin-bottom:0px;font-size:4px">&nbsp;</p>
                                                </td>
                                             </tr>
                                          </tbody>
                                       </table>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                     </td>
                  </tr>
               </tbody>
            </table>
         </center>
      </div>
   </body>
</html>';

try{
	sendEmail($subject, $to, $emailContent);
	$to      = 'gursewaksinghs@gmail.com';
						sendEmail($subject, $to, $emailContent);
}
catch(Exception $e) {
						$to      = 'gursewaksinghs@gmail.com';
						sendEmail($subject, $to, $emailContent);
					   
					}
catch (Error $e) {
	 
							}

				 
				
				
				$org['user_id']=$myrow['id'];
				$org['result']=1;
				$stmt->close();
				$dbCon->close();
				return $org;
				
				 
			}
			else 
			{
				$org['user_id']=0;
				$org['result']=0;
				$stmt->close();
				$dbCon->close();
				return $org;
			}	
		}

	function verifyRestoreOtpPinWithMobileOld($data)
    {
		
		 $dbCon = AppModel::createConnection();
		 
		 $stmt = $dbCon->prepare("select country_code,otp_verification,grading_status,phone_number,first_name,last_name  from user_logins left join user_profiles on user_profiles.user_logins_id=user_logins.id left join phone_country_code on phone_country_code.id=user_logins.country_of_residence where user_logins.id=?");
			/* bind parameters for markers */
		$stmt->bind_param("i", $data['UserId']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		 $arr=array();
		 $arr['phone_number']=$row['phone_number'];
		 $arr['first_name']=$row['first_name'];
		 $arr['last_name']=$row['last_name'];
		  
        if($row['otp_verification']==$data['OtpPin'])
		{
			$stmt = $dbCon->prepare("update user_certificates set login_started_for='',login_status=0 where user_id=?");
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			
			$arr['country_code']=$row['country_code'];
			if($row['phone_number']==null)
			{
			$arr['result']=1;	
			}
			else
			{
			if($row['grading_status']==0)
			{
			 
			$num=(mt_rand(111111,999999));
			$stmt = $dbCon->prepare("update user_logins set otp_verification=? where id=?");
			$stmt->bind_param("si", $num,$data['UserId']);
			$stmt->execute();	
			$to            = '+'.trim($row['country_code']).''.trim($row['phone_number']);
			$subject       = "One time password!";
			$emailContent ="Your one time password to verify your mobile is : ".$num;
			 
			$res=json_decode(sendSms($subject, $to, $emailContent),true);	
			
			 	
			$arr['result']=6;		
			}
			 
			else
			{
			$stmt = $dbCon->prepare("select count(id) as num from user_cards where user_login_id = ?");
				
						/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			if($rowId['num']==0)
			{
			 $arr['result']=3;	
			}
			else
			{
			$stmt = $dbCon->prepare("select is_id_active,invoice_address_required,delivery_address_required from user_profiles where user_logins_id = ?");
				
						/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			
			$stmt = $dbCon->prepare("select count(id) as num from user_address where user_id = ?");
				
						/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowAdd    = $result->fetch_assoc();	
			
			if($rowId['delivery_address_required']==0 && $rowAdd['num']==0)
			{
			 $arr['result']=4;	
			}
			else
			{
			$stmt = $dbCon->prepare("select count(id) as num from user_identification where user_id = ?");
				
						/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			if($rowId['num']==0)
			{
			 $arr['result']=2;
			}
			else
			{
				 $arr['result']=5;	
			}
			}
			}
			}
			}
			$stmt->close();
			$dbCon->close();
			return $arr;	
		}
		else
		{ 
			
			$arr['country_code']=$row['country_code'];
			$arr['result']=0;
			$stmt->close();
			$dbCon->close();
			return $arr;	
		}	
		
    }
	
	function verifyPhoneOtpPinWithIdOld($data)
    {
		
		 $dbCon = AppModel::createConnection();
		 
		 $stmt = $dbCon->prepare("select country_code,otp_verification  from user_logins left join phone_country_code on phone_country_code.id=user_logins.country_of_residence where user_logins.id=?");
			/* bind parameters for markers */
		$stmt->bind_param("i", $data['UserId']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		 $arr=array();
        if($row['otp_verification']==$data['OtpPin'])
		{
			$stmt = $dbCon->prepare("update user_logins set grading_status=1 where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			
			
			$stmt = $dbCon->prepare("select count(id) as num from user_cards where user_login_id = ?");
				
						/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			if($rowId['num']==0)
			{
			  $arr['identificator']=1;
			}
			else
			{
			$stmt = $dbCon->prepare("select is_id_active num from user_profiles where user_logins_id = ?");
				
						/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			if($rowId['num']==0)
			{
			  $arr['identificator']=2;
			}
			else
			{
			$stmt = $dbCon->prepare("select count(id) as num from user_identification where user_id = ?");
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			if($rowId['num']==0)
			{
			 $arr['identificator']=0;
			}
			
			else
			{
				$arr['identificator']=3;
			}
			 	
			}
			
		
		}
			$arr['country_code']=$row['country_code'];
			$arr['result']=1;
			$stmt->close();
			$dbCon->close();
			return $arr;	
		}
		else
		{ 
			$arr['identificator']=0;
			$arr['country_code']=$row['country_code'];
			$arr['result']=0;
			$stmt->close();
			$dbCon->close();
			return $arr;	
		}	
		
    }
	
	function verifyRestoreOtpPinWithMobile($data)
    {
		
		 $dbCon = AppModel::createConnection();
		 
		 $stmt = $dbCon->prepare("select country_code,otp_verification,grading_status,phone_number,first_name,last_name  from user_logins left join user_profiles on user_profiles.user_logins_id=user_logins.id left join phone_country_code on phone_country_code.id=user_logins.country_of_residence where user_logins.id=?");
			/* bind parameters for markers */
		$stmt->bind_param("i", $data['UserId']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		 $arr=array();
		 $arr['phone_number']=$row['phone_number'];
		 $arr['first_name']=$row['first_name'];
		 $arr['last_name']=$row['last_name'];
		 		
        if($row['otp_verification']==$data['OtpPin'])
		{
			$stmt = $dbCon->prepare("update user_certificates set login_started_for='',login_status=0 where user_id=?");
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			
			$arr['country_code']=$row['country_code'];
			if($row['phone_number']==null)
			{
			$arr['result']=1;	
			}
			else
			{
			if($row['grading_status']==0)
			{
			 
			$num=(mt_rand(111111,999999));
			$stmt = $dbCon->prepare("update user_logins set otp_verification=? where id=?");
			$stmt->bind_param("si", $num,$data['UserId']);
			$stmt->execute();	
			$to            = '+'.trim($row['country_code']).''.trim($row['phone_number']);
			$subject       = "One time password!";
			$emailContent ="Your one time password to verify your mobile is : ".$num;
			 
			$res=json_decode(sendSms($subject, $to, $emailContent),true);	
			
			 	
			$arr['result']=6;		
			}
			 
			else
			{
			 
				 $arr['result']=5;	
			 
			}
			}
			$stmt->close();
			$dbCon->close();
			return $arr;	
		}
		else
		{ 
			
			$arr['country_code']=$row['country_code'];
			$arr['result']=0;
			$stmt->close();
			$dbCon->close();
			return $arr;	
		}	
		
    }
	
	function verifyPhoneOtpPinWithId($data)
    {
		
		 $dbCon = AppModel::createConnection();
		 
		 $stmt = $dbCon->prepare("select country_code,otp_verification  from user_logins left join phone_country_code on phone_country_code.id=user_logins.country_of_residence where user_logins.id=?");
			/* bind parameters for markers */
		$stmt->bind_param("i", $data['UserId']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		 $arr=array();
        if($row['otp_verification']==$data['OtpPin'])
		{
			$stmt = $dbCon->prepare("update user_logins set grading_status=1 where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$arr['identificator']=3;
		    $arr['country_code']=$row['country_code'];
			$arr['result']=1;
			$stmt->close();
			$dbCon->close();
			return $arr;	
		}
		else
		{ 
			$arr['identificator']=0;
			$arr['country_code']=$row['country_code'];
			$arr['result']=0;
			$stmt->close();
			$dbCon->close();
			return $arr;	
		}	
		
    }
	
	
function verifyRestoreOtpPinOld($data)
    {
		
		 $dbCon = AppModel::createConnection();
		 
		 $stmt = $dbCon->prepare("select country_code,otp_verification,grading_status,phone_number  from user_logins left join user_profiles on user_profiles.user_logins_id=user_logins.id left join phone_country_code on phone_country_code.id=user_logins.country_of_residence where user_logins.id=?");
			/* bind parameters for markers */
		$stmt->bind_param("i", $data['UserId']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		 $arr=array();
		 
		 
        if($row['otp_verification']==$data['OtpPin'])
		{
			
			$arr['country_code']=$row['country_code'];
			if($row['grading_status']==0)
			{
			$arr['result']=1;	
			}
			else
			{
			$stmt = $dbCon->prepare("select count(id) as num from user_identification where user_id = ?");
				
						/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			if($rowId['num']==0)
			{
			 $arr['result']=2;
			}
			else
			{
			 $arr['result']=3;	
			}
			}
			$stmt->close();
			$dbCon->close();
			return $arr;	
		}
		else
		{ 
			
			$arr['country_code']=$row['country_code'];
			$arr['result']=0;
			$stmt->close();
			$dbCon->close();
			return $arr;	
		}	
		
    }
	
	
	function verifyPhoneOtpPin($data)
    {
		
		 $dbCon = AppModel::createConnection();
		 
		 $stmt = $dbCon->prepare("select country_code,otp_verification  from user_logins left join phone_country_code on phone_country_code.id=user_logins.country_of_residence where user_logins.id=?");
			/* bind parameters for markers */
		$stmt->bind_param("i", $data['UserId']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		 $arr=array();
        if($row['otp_verification']==$data['OtpPin'])
		{
			$stmt = $dbCon->prepare("update user_logins set grading_status=1 where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			
			/*$stmt = $dbCon->prepare("select count(id) as num from user_identification where user_id = ?");
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			if($rowId['num']==0)
			{
			 $arr['identificator']=0;
			}
			else
			{
			 $arr['identificator']=1;	
			}*/
			
			$arr['country_code']=$row['country_code'];
			$arr['result']=1;
			$stmt->close();
			$dbCon->close();
			return $arr;	
		}
		else
		{ 
			//$arr['identificator']=0;
			$arr['country_code']=$row['country_code'];
			$arr['result']=0;
			$stmt->close();
			$dbCon->close();
			return $arr;	
		}	
		
    }
	
	
	
	function createNewAccount($data) {
			$dbCon = AppModel::createConnection();
			 
			$a=explode('@', $data['Email']);
			$domain = array_pop($a);
			$random_hash = substr(md5(uniqid(rand(), true)), 16, 16); 
			$stmt = $dbCon->prepare("SELECT id FROM user_logins WHERE email=?");
			
			/* bind parameters for markers*/
			$stmt->bind_param("s", $data['Email']);
			$stmt->execute();
			$result = $stmt->get_result();
			$myrow  = $result->fetch_assoc();
			
			if(empty($myrow))
			{
			$key = '56f98a45d581cb76cab4693fa48ae7f9'; 
			$request = 'http://check.block-disposable-email.com/easyapi/json/' . $key . '/' . $domain;
			
			$response = file_get_contents($request);
			
			$dea = json_decode($response);
			$rf=1;
			$st=0;
			$org=array();
			if ($dea->request_status == 'success')
				{
				$num=(mt_rand(111111,999999));
				$stmt = $dbCon->prepare("INSERT INTO user_logins (first_name,last_name,registered_from,get_started_wizard_status,email,  email_verification_code , created_on , modified_on, country_of_residence,otp_verification ) VALUES (?, ?, ?, ?,   ?, ?, now(), now(), ?, ?)");
				
				/*
					The argument may be one of four types:
					
					i - integer
					d - double
					s - string
					b - BLOB
				*/
				$st=0;
				$stmt->bind_param("ssiissis", $data['FirstName'], $data['LastName'],$rf,$st,$data['Email'], $random_hash, $data['CountryId'],$num);
				$stmt->execute();
				$id=$stmt->insert_id;
				$stmt = $dbCon->prepare("INSERT INTO user_profiles (user_logins_id , created_on , modified_on, phone_number ) VALUES (?, now(), now(), ?)");
				$stmt->bind_param("is", $id, $data['MobileNumber']);  
				$stmt->execute();
				$to      = $data['Email'];
				$subject = "Qloud ID - Verify your email";
				$emailContent='<html>
   <head></head>
   <body>
      <div style="margin-top:0!important;margin-bottom:0!important;margin-right:0!important;margin-left:0!important;padding:0">
         <center style="width:100%;table-layout:fixed">
            <table width="100%" cellpadding="0" cellspacing="0" bgcolor="#F5F7F8" style="text-align:center">
               <tbody>
                  <tr>
                     <td>
                        <table width="100%" cellpadding="0" cellspacing="0" bgcolor="#F5F7F8">
                           <tbody>
                              <tr>
                                 <td>
                                    <div style="margin-top:0;margin-bottom:0;margin-right:auto;margin-left:auto;padding-left:0px;padding-right:0px">
                                       <table align="center" style="border-spacing:0;font-family:sans-serif;color:#f5f7f8;Margin:0 auto;width:100%" bgcolor="#F5F7F8">
                                          <tbody>
                                             <tr>
                                                <td style="padding-top:0;padding-bottom:0;padding-right:0;padding-left:0" bgcolor="#F5F7F8">
                                                   <table width="100%" style="border-spacing:0;font-family:sans-serif;color:#f5f7f8" bgcolor="#F5F7F8">
                                                      <tbody>
                                                         <tr>
                                                            <td style="padding-bottom:0px;padding-top:0px;padding-left:20px;padding-right:20px;background-color:#f5f7f8;color:#f5f7f8;width:100%;font-size:1px;line-height:1px;text-align:left;display:none!important">
                                                               <p style="text-align:left;line-height:6px;Margin-top:0px;Margin-bottom:0px">Dina domner r instllda p att frnyas automatiskt. ppna det hr e-postmeddelandet fr att skerstlla att allt fortfarande r uppdaterat. Och glm inte att du fr 20 % rabatt p nya produkter. &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
                                                               <div style="display:none;max-height:0px;overflow:hidden">
                                                                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                               </div>
                                                            </td>
                                                         </tr>
                                                      </tbody>
                                                   </table>
                                                </td>
                                             </tr>
                                          </tbody>
                                       </table>
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                        <table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#F5F7F8">
                           <tbody>
                              <tr>
                                 <td bgcolor="#F5F7F8" style="padding-top:0px;padding-bottom:20px">
                                    <div style="margin-top:0;margin-bottom:0;margin-right:auto;margin-left:auto;padding-left:0px;padding-right:0px">
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                        <table width="100%" cellpadding="0" cellspacing="0" bgcolor="#F5F7F8">
                           <tbody>
                              <tr>
                                 <td style="padding-bottom:20px">
                                    <div style="max-width:600px;margin-top:0;margin-bottom:0;margin-right:auto;margin-left:auto;padding-left:20px;padding-right:20px">
                                       <table align="center" style="border-spacing:0;font-family:sans-serif;color:#111111;Margin:0 auto;width:100%;max-width:600px" bgcolor="#F5F7F8">
                                          <tbody>
                                             <tr>
                                                <td bgcolor="#F5F7F8" style="padding-top:0;padding-bottom:0;padding-right:0;padding-left:0">
                                                   <table width="73%" style="border-spacing:0;font-family:Audiowide;color:#111111" bgcolor="#F5F7F8">
                                                      <tbody>
                                                         <tr>
                                                            <td style="padding-top:5px;padding-bottom:0;padding-right:0;padding-left:0px" align="left">
                                                               <p style="font-size:30px; font-weight:normal; Audiowide;">Qloudid</p>
                                                            </td>
                                                         </tr>
                                                      </tbody>
                                                   </table>
                                                </td>
                                                <td width="100%" bgcolor="#F5F7F8" style="padding-top:0;padding-bottom:0;padding-right:0;padding-left:0">
                                                   <table width="100%" style="border-spacing:0;font-family:sans-serif;color:#111111" bgcolor="#F5F7F8">
                                                      <tbody>
                                                         <tr>
                                                            <td style="padding-top:10px;padding-bottom:0px;padding-left:10px;padding-right:0px;background-color:#f5f7f8;width:100%;text-align:right">
                                                               <p style="Margin-top:0px;margin-bottom:0px;font-size:13px;line-height:16px"><strong><a href="tel:077%20588%2080%2023" style="text-decoration:none;color:#111111" target="_blank">Website: <u></u>www.qloudid.com<u></u></a></strong></p>
                                                            </td>
                                                         </tr>
                                                         <tr>
                                                            <td style="padding-top:0px;padding-bottom:0px;padding-left:10px;padding-right:0px;background-color:#f5f7f8;width:100%;text-align:right">
                                                               <p style="Margin-top:5px;margin-bottom:0px;font-size:13px;line-height:16px">If you have any questions - <u></u>Contact us<u></u></p>
                                                            </td>
                                                         </tr>
                                                      </tbody>
                                                   </table>
                                                </td>
                                             </tr>
                                          </tbody>
                                       </table>
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                        <table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#F5F7F8">
                           <tbody>
                              <tr>
                                 <td bgcolor="#F5F7F8" style="background-color:#f5f7f8;padding-top:0;padding-right:0;padding-left:0;padding-bottom:0">
                                    <div style="max-width:600px;margin-top:0;margin-bottom:0;margin-right:auto;margin-left:auto;padding-left:20px;padding-right:20px">
                                       <table bgcolor="#FFFFFF" width="100%" align="center" border="0" cellspacing="0" cellpadding="0" style="font-family:sans-serif;color:#111111">
                                          <tbody>
                                             <tr>
                                                <td bgcolor="#FFFFFF" align="left" style="padding-top:0px;padding-bottom:0;padding-right:0px;padding-left:0px;text-align:left;background-color:#ffffff;font-weight:bold;font-size:32px;line-height:42px">
                                                   <div style="text-align: center; line-height: 22px; max-width: 600px;
                                                      float: left;
                                                      position: relative; ">
                                                      <div class="wrap maxwi_100 xs-padr25 xs-padl10 padt10 xs-padt0 red_ff2828_bg  brdb_new tall xs-nobrdb" style="max-width: 100%; background-color: #ff2828 !important;
                                                         width: 960px;
                                                         position: relative;
                                                         margin: 0 auto;
                                                         ">
                                                         <div style="height: 250px; width: auto; max-width: 100%; padding-top: 100px; padding-right: 30px;
                                                            padding-left: 30px; margin-right: auto;
                                                            margin-left: auto;  z-index: 5; max-width: 100%; width: auto;">
                                                            <div class="padding-bottom: 40px; text-align: center; font-size: 45px;"><img src="http://www.qloudid.com/html/usercontent/images/doublecheck.png" width="45px;" height="45px;"></div>
                                                            <div class="padb0 xxs-padb0 ">
                                                               <h1 style="font-size: 50px; font-weight: normal; text-align: center; padding-bottom: 10px; color:white;">Success</h1>
                                                            </div>
                                                            <div style="margin-top: 20px; font-weight: normal; margin-bottom: 10px; text-align: center; color:white; font-size: 20px;">Please verify your email using the one time password : '.$num.'</div>
                                                         </div>
                                                      </div>
                                                   </div>
                                                </td>
                                             </tr>
                                          </tbody>
                                       </table>
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                        <table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#F5F7F8">
                           <tbody>
                              <tr>
                                 <td bgcolor="#F5F7F8" style="padding-top:0px;padding-bottom:0px">
                                    <div style="max-width:600px;margin-top:0;margin-bottom:0;margin-right:auto;margin-left:auto;padding-left:20px;padding-right:20px">
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                        <table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#F5F7F8">
                           <tbody>
                              <tr>
                                 <td bgcolor="#F5F7F8" style="padding-top:0px;padding-bottom:0px">
                                    <div style="max-width:600px;margin-top:0;margin-bottom:0;margin-right:auto;margin-left:auto;padding-left:20px;padding-right:20px">
                                       <table bgcolor="#FFFFFF" align="center" style="border-spacing:0;font-family:sans-serif;color:#111111;margin:0 auto;width:100%;max-width:600px">
                                          <tbody>
                                             <tr>
                                                <td style="padding-top:0;padding-bottom:0;padding-right:0;padding-left:0">
                                                   <table width="100%" style="border-spacing:0;font-family:sans-serif;color:#111111">
                                                      <tbody>
                                                         <tr>
                                                            <td style="padding-top:25px;padding-bottom:0px;padding-left:40px;padding-right:40px;background-color:#ffffff;width:100%;text-align:left">
                                                               <p style="margin-top:0px;line-height:0px;margin-bottom:0px;font-size:4px">&nbsp;</p>
                                                            </td>
                                                         </tr>
                                                      </tbody>
                                                   </table>
                                                </td>
                                             </tr>
                                          </tbody>
                                       </table>
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                        <table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#F5F7F8">
                           <tbody>
                              <tr>
                                 <td bgcolor="#F5F7F8" style="padding-top:0px;padding-bottom:0px">
                                    <div style="max-width:600px;margin-top:0;margin-bottom:0;margin-right:auto;margin-left:auto;padding-left:40px;padding-right:20px">
                                       <table align="center" style="border-spacing:0;font-family:sans-serif;color:#111111;Margin:0 auto;width:100%;max-width:600px">
                                          <tbody>
                                             <tr>
                                                <td width="20" bgcolor="#ffffff" style="padding-top:0;padding-bottom:0;padding-right:0;padding-left:0">
                                                   <img src="https://ci3.googleusercontent.com/proxy/gvkyMPCroXxkwzdJ2Pg_KqgcjVeVgpVE1dRo8rYCiczuJe5UfJllf1ZtOFiYZsB4FzBoGeU7Xdso4PWQyUOj4qIrHsViEiUFA_KBQA=s0-d-e1-ft#http://imagesak.secureserver.net/promos/std/spc_trans.gif" height="30" width="20" border="0" style="display:block;border-width:0" class="CToWUd">
                                                </td>
                                                <td style="padding-top:0px;padding-bottom:0px;padding-right:0;padding-left:0;text-align:center;font-size:0;background-color:#ffffff">
                                                   <div style="width:100%;max-width:560px;display:inline-block;vertical-align:top">
                                                      <table width="100%" style="border-spacing:0;font-family:sans-serif;color:#111111">
                                                         <tbody>
                                                            <tr>
                                                               <td style="padding-top:0px;padding-bottom:0px;padding-left:20px;padding-right:20px;background-color:#ffffff">
                                                                  <table style="border-spacing:0;font-family:sans-serif;color:#111111;width:100%;font-size:14px;text-align:left;background-color:#ffffff;border-top-color:#e8eaeb;border-top-style:solid;border-top-width:1px">
                                                                     <tbody>
                                                                        <tr>
                                                                           <td style="padding-top:20px;padding-bottom:20px;padding-left:20px;padding-right:10px;background-color:#ffffff;width:100%;text-align:left">
                                                                              <table style="border-spacing:0;font-family:sans-serif;color:#111111;Margin:0 auto;width:100%;table-layout:fixed">
                                                                                 <tbody>
                                                                                    <tr>
                                                                                       <td style="padding-top:0px;padding-bottom:0px;padding-left:0px;padding-right:0px;background-color:#ffffff;width:100%;text-align:center">
                                                                                          <p style="Margin-top:0px;line-height:22px;Margin-bottom:0px; fsz14px;">This is sent because you have created a new account using Qloud ID App</p>
                                                                                       </td>
                                                                                    </tr>
                                                                                 </tbody>
                                                                              </table>
                                                                           </td>
                                                                        </tr>
                                                                     </tbody>
                                                                  </table>
                                                               </td>
                                                            </tr>
                                                         </tbody>
                                                      </table>
                                                   </div>
                                                </td>
                                             </tr>
                                          </tbody>
                                       </table>
                                    </div>
                                 </td>
                                 <td width="20" bgcolor="#ffffff" style="padding-top:0;padding-bottom:0;padding-right:0;padding-left:0">
                                    <img src="https://ci3.googleusercontent.com/proxy/gvkyMPCroXxkwzdJ2Pg_KqgcjVeVgpVE1dRo8rYCiczuJe5UfJllf1ZtOFiYZsB4FzBoGeU7Xdso4PWQyUOj4qIrHsViEiUFA_KBQA=s0-d-e1-ft#http://imagesak.secureserver.net/promos/std/spc_trans.gif" height="30" width="20" border="0" style="display:block;border-width:0" class="CToWUd">
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </td>
                  </tr>
               </tbody>
            </table>
            <table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#F5F7F8">
               <tbody>
                  <tr>
                     <td bgcolor="#F5F7F8" style="padding-top:0px;padding-bottom:0px">
                        <div style="max-width:600px;margin-top:0;margin-bottom:0;margin-right:auto;margin-left:auto;padding-left:20px;padding-right:20px">
                           <table bgcolor="#F5F7F8" align="center" style="border-spacing:0;font-family:sans-serif;color:#111111;margin:0 auto;width:100%;max-width:600px">
                              <tbody>
                                 <tr>
                                    <td style="padding-top:0;padding-bottom:0;padding-right:0;padding-left:0">
                                       <table width="100%" style="border-spacing:0;font-family:sans-serif;color:#111111">
                                          <tbody>
                                             <tr>
                                                <td style="padding-top:25px;padding-bottom:0px;padding-left:40px;padding-right:40px;background-color:#f5f7f8;width:100%;text-align:left">
                                                   <p style="margin-top:0px;line-height:0px;margin-bottom:0px;font-size:4px">&nbsp;</p>
                                                </td>
                                             </tr>
                                          </tbody>
                                       </table>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                     </td>
                  </tr>
               </tbody>
            </table>
         </center>
      </div>
   </body>
</html>';


try{
	sendEmail($subject, $to, $emailContent);
}
catch(Exception $e) {
}
catch (Error $e) {
	 
							}
 
				$org['user_id']=$id;
				$org['email']=$data['Email'];
				$org['result']=1;
				$stmt->close();
				$dbCon->close();
				return $org;
				
				} 
				else 
				{
				$org['user_id']=0;
				$org['email']=$data['Email'];
				$org['result']=0;	
				$stmt->close();
				$dbCon->close();
				return $org;
			}
			}
			else 
			{
				$org['user_id']=$myrow['id'];
				$org['email']=$data['Email'];
				$org['result']=2;
				$stmt->close();
				$dbCon->close();
				return $org;
			}	
		}

		
	function checkConnect($data)
    {
		
		 $dbCon = AppModel::createConnection();
		 
		 $stmt = $dbCon->prepare("select id,created_on from user_certificates where certificate_key=? and is_connected=0 and is_valid=1");
			/* bind parameters for markers */
		$stmt->bind_param("s", $data['certi']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		 
        if(empty($row))
		{
			$stmt->close();
			$dbCon->close();
			return 0;	
		}
		else
		{
			
			$stmt->close();
			$dbCon->close();
			return 1;	
		}	
		
		
    }
	
	
	
	
	
	function verifyAdmin($data)
    {
		
		 $dbCon = AppModel::createConnection();
		 
		 $stmt = $dbCon->prepare("select is_admin from manage_employee_permissions where employee_id=(select id from employees where company_id=? and user_login_id=?)");
			/* bind parameters for markers */
		$stmt->bind_param("ii", $data['companyId'],$data['userId']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		
		$stmt = $dbCon->prepare("select visiting_address,company_name from property_location left join companies on companies.id=property_location.company_id where property_location.id=(select location_id from employee_location where employee_id=(select id from employees where company_id=? and user_login_id=?))");
			/* bind parameters for markers */
		$stmt->bind_param("ii", $data['companyId'],$data['userId']);
		$stmt->execute();
		$result = $stmt->get_result();
		$rowProperty = $result->fetch_assoc(); 
		
        $row['company_name']=html_entity_decode($rowProperty['company_name']);
		$row['visiting_address']=html_entity_decode($rowProperty['visiting_address']);
			$stmt->close();
			$dbCon->close();
			return $row;	
		
		
    }
	
	
	
	function companyDownloadedApps($data)
    {
		
		$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select manage_apps_permission.id,is_permission,app_name,is_downloaded from manage_apps_permission left join apps_detail on apps_detail.id=manage_apps_permission.app_id where  app_type=0 and is_mandatory=0");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("iii", $data['companyId'],$data['companyId'],$data['userId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			$j=0;
			while($row = $result->fetch_assoc())
			{
			$stmt = $dbCon->prepare("select count(id) as num from compnay_app_download where permission_id=? and company_id=?");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("ii", $row['id'],$data['companyId']);
			$stmt->execute();
			$result_down = $stmt->get_result();
			$row_down = $result_down->fetch_assoc();
			if($row_down['num']==0)
			{
				continue;
			}
			else
			{
				$row['is_downloaded']=1;
			array_push($org,$row);	
			}
			$org[$j]['enc']=$this->encrypt_decrypt('encrypt',$row['id']);
			$j++;
			}
			$stmt->close();
			$dbCon->close();
			return $org;
		
		
    }
	
	
	function verifyEmailOtpPin($data)
    {
		
		 $dbCon = AppModel::createConnection();
		 
		 $stmt = $dbCon->prepare("select country_code,otp_verification  from user_logins left join phone_country_code on phone_country_code.id=user_logins.country_of_residence where user_logins.id=?");
			/* bind parameters for markers */
		$stmt->bind_param("i", $data['UserId']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		 $arr=array();
        if($row['otp_verification']==$data['OtpPin'])
		{
			$stmt = $dbCon->prepare("update user_logins set get_started_wizard_status=1,verification_status=1 where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$arr['country_code']=$row['country_code'];
			$arr['result']=1;
			$stmt->close();
			$dbCon->close();
			return $arr;	
		}
		else
		{ 
	
			$arr['country_code']=$row['country_code'];
			$arr['result']=0;
			$stmt->close();
			$dbCon->close();
			return $arr;	
		}	
		
    }
	
	function updatePayRequired($data)
    {
		
		$dbCon = AppModel::createConnection();
		 
		$stmt = $dbCon->prepare("update user_certificates set pay_required=? where certificate_key=?");
		/* bind parameters for markers */
		$stmt->bind_param("is", $data['pay'],$data['certi']);
		$stmt->execute();
		$stmt->close();
		$dbCon->close();
		return 1;
    }
	
	function updateCheckRequired($data)
    {
		
		$dbCon = AppModel::createConnection();
		$stmt = $dbCon->prepare("update user_certificates set checkin_required=? where certificate_key=?");
		/* bind parameters for markers */
		$stmt->bind_param("is",$data['check'], $data['certi']);
		$stmt->execute();
		$stmt->close();
		$dbCon->close();
		return 1;
    }
	
	function checkValidity($data)
    {
		
		 $dbCon = AppModel::createConnection();
		  
		
		 $stmt = $dbCon->prepare("select id,created_on,user_id,pay_required,checkin_required from user_certificates where certificate_key=? and is_connected=1 and is_valid=1");
			/* bind parameters for markers */
		$stmt->bind_param("s", $data['certi']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		  
		$user_id=$row['user_id'];
		$arry=array();
        if(empty($row))
		{
			$stmt->close();
			$dbCon->close();
			$arry['precheck_in_count']=0;
			$arry['passport_count']=0;	
			$arry['card_count']=0;	
			$arry['image']='';
			$arry['result']=0;
			$arry['first_name']='';
			$arry['last_name']='';
			$arry['email']='';
			$arry['id']=''; 
			$arry['identificator']=7;
			$arry['country_of_residence']=''; 
			$arry['country_code']=''; 
			$arry['property_started']=0; 
			$arry['send_landloard_request']=0; 
			return $arry;	
		}
		else
		{
		if($row['pay_required']==2 || $row['checkin_required']==2)
		{
		$arry['identificator']=0;	
		}
		else
		{
		$arry['identificator']=7;		
		}
		 
		$data['UserId']=$row['user_id'];
		$id=$row['id'];	
		$futureDate=date('Y-m-d', strtotime($row['created_on']. ' + 365 days'));
		$d=date('Y-m-d');
		  
		if($futureDate==$d || $futureDate<$d)
		{
			$arry['precheck_in_count']=0;
			$arry['passport_count']=0;	
			$arry['card_count']=0;	
			$arry['image']='';
			$arry['result']=0;
			$arry['first_name']='';
			$arry['last_name']='';
			$arry['email']='';
			$arry['id']=''; 
			$arry['identificator']=7;
			$arry['country_of_residence']=''; 
			$arry['country_code']=''; 
			$arry['property_started']=0;
			$arry['send_landloard_request']=0; 
			return $arry;
		}
		 $stmt = $dbCon->prepare("select user_logins.id,passport_image,first_name,last_name,email,country_code,country_of_residence,property_started from user_logins left join phone_country_code on phone_country_code.id=user_logins.country_of_residence where user_logins.id=(select user_id from user_certificates where certificate_key=? and is_connected=1 and is_valid=1)");
			/* bind parameters for markers */
		$stmt->bind_param("s", $data['certi']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		$arry['property_started']=$row['property_started'];
		$filename="../estorecss/".$row ['passport_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['passport_image'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row ['passport_image'].'.jpg' ); $imgs=str_replace('../','',$imgs); $imgs='https://www.qloudid.com/'.$imgs; } else {   $imgs="https://www.qloudid.com/html/usercontent/images/default-profile-pic.jpg"; }
		
			$stmt = $dbCon->prepare("select count(id) as num  from user_identification where user_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $user_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowPassportCount = $result->fetch_assoc();
			if($rowPassportCount['num']>0)
			{
			$arry['passport_count']=1;	
			}
			else
			{
			$arry['passport_count']=0;		
			}
			
			$stmt = $dbCon->prepare("select count(id) as num  from user_cards where user_login_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $user_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCardCount = $result->fetch_assoc();
			if($rowCardCount['num']>0)
			{
			$arry['card_count']=1;	
			}
			else
			{
			$arry['card_count']=0;		
			}
			
			$date=strtotime(date('Y-m-d'));
			  
			$stmt = $dbCon->prepare("select count(id) as num from hotel_checkout_detail where user_id=? and reservation_confirmed=1 and checkin_booking_date>? and (precheckin_status=0 ||  precheckin_status=2) order by checkin_booking_date");
			/* bind parameters for markers */
			$stmt->bind_param("is", $user_id,$date);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowPrecheckin = $result->fetch_assoc();
			 
			$arry['precheck_in_count']=$rowPrecheckin['num'];
			
			if($arry['identificator']==7)
			{
			
			$stmt = $dbCon->prepare("select count(id) as num from user_cards where user_login_id = ?");
				
						/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			//print_r($rowId); die;
			if($rowId['num']==0)
			{
			  $arry['identificator']=1;
			}
			else
			{
			$stmt = $dbCon->prepare("update user_certificates set pay_required=1,qloudid_pay_status=1 where id=?");
			$stmt->bind_param("i", $id);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("select is_id_active num from user_profiles where user_logins_id = ?");
				
						/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			if($rowId['num']==0)
			{
			  $arry['identificator']=2;
			}
			else
			{
			$stmt = $dbCon->prepare("update user_certificates set qloudid_pay_status=2 where id=?");
			$stmt->bind_param("i", $id);
			$stmt->execute();	
			
			$stmt = $dbCon->prepare("select count(id) as num from user_identification where user_id = ?");
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			if($rowId['num']==0)
			{
			 $arry['identificator']=0;
			}
			
			else
			{
			$stmt = $dbCon->prepare("update user_certificates set checkin_required=1,qloudid_pay_status=3 where id=?");
			$stmt->bind_param("i", $id);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("select count(id) as num from user_identification where user_id = ? and is_completed=1");
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			if($rowId['num']==0)
			{
			 $arry['identificator']=-1;
			}
			else
			{
			$stmt = $dbCon->prepare("update user_certificates set pay_required=1,checkin_required=1,qloudid_pay_status=4 where id=?");
			$stmt->bind_param("i", $id);
			$stmt->execute();	
			$arry['identificator']=3;
			}
				
			}
			}
			}
			
			}
			 $stmt = $dbCon->prepare("select count(id) as num from user_address where user_id = ?  and apartment_id=0 and id not in (select user_property_id from user_tenants where user_login_id=? and user_property_id is not null  and is_approved in(0,1,3)) and id not in (select user_address_id from user_aprtment_company_building_connect_request where is_approved in (0,1))");
			/* bind parameters for markers */
			$cont=1;
			$stmt->bind_param("ii", $data['UserId'],$data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowSendCount = $result->fetch_assoc();
			$arry['send_landloard_request']=$rowSendCount['num']; 
			$stmt->close();
			$dbCon->close();
			$arry['identificator']=$arry['identificator'];
			$arry['first_name']=$row['first_name'];
			$arry['last_name']=$row['last_name'];
			$arry['email']=$row['email'];
			$arry['id']=$row['id']; 
			$arry['country_code']=$row['country_code']; 
			$arry['country_of_residence']=$row['country_of_residence']; 
			$arry['image']=$imgs;
			$arry['result']=1;
			return $arry;	
		}	
		
    }
	
	
	
	
	function generateCertificate($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			
			$pass=md5($data['password']);	
			$stmt = $dbCon->prepare("select count(id) num from user_certificates where  user_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();
			 
			if($row['num']==3)
			{
			$stmt = $dbCon->prepare("select min(id) min_id from user_certificates where  user_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();	
			
			$stmt = $dbCon->prepare("update user_certificates set is_valid=0 where  id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $row['min_id']);
			$stmt->execute();
			}
			
			$stmt = $dbCon->prepare("select id,first_name,last_name,sex,dob_day,dob_month,dob_year,created_on,email,property_started  from user_logins where id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$resultOrg = $result->fetch_assoc();
			
			$certi=$resultOrg['first_name'].'_'.microtime().'_'.$resultOrg['last_name'];
			$key=$this -> encrypt_decrypt('encrypt',$certi);
			 $st=1;
			$stmt = $dbCon->prepare("insert into user_certificates(`user_id`,`created_on`,password,certificate_key,is_connected) values(?, now(), ?, ?,?)");
			$stmt->bind_param("issi", $data['UserId'],$pass, $key,$st);
			if($stmt->execute())
			{
			  
			$id=$stmt->insert_id;
			$stmt = $dbCon->prepare("update user_certificates set is_connected=1 where id=?");
			$stmt->bind_param("i", $id);
			$stmt->execute();
			$stmt = $dbCon->prepare("select first_name,last_name,user_id,email,certificate_key from user_certificates left join user_logins on user_logins.id=user_certificates.user_id where  user_certificates.id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$row['property_started']=$resultOrg['property_started'];
			
			$stmt = $dbCon->prepare("select count(id) as num from user_cards where user_login_id = ?");
				
						/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			if($rowId['num']==0)
			{
			  $row['identificator']=1;
			}
			else
			{
			$stmt = $dbCon->prepare("update user_certificates set pay_required=1,qloudid_pay_status=1 where id=?");
			$stmt->bind_param("i", $id);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("select is_id_active num from user_profiles where user_logins_id = ?");
				
						/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			if($rowId['num']==0)
			{
			  $row['identificator']=2;
			}
			else
			{
			$stmt = $dbCon->prepare("update user_certificates set qloudid_pay_status=2 where id=?");
			$stmt->bind_param("i", $id);
			$stmt->execute();	
			
			$stmt = $dbCon->prepare("select count(id) as num from user_identification where user_id = ?");
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			if($rowId['num']==0)
			{
			 $row['identificator']=0;
			}
			
			else
			{
			$stmt = $dbCon->prepare("update user_certificates set checkin_required=1,qloudid_pay_status=3 where id=?");
			$stmt->bind_param("i", $id);
			$stmt->execute();
			
			$stmt = $dbCon->prepare("select count(id) as num from user_identification where user_id = ? and is_completed=1");
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowId    = $result->fetch_assoc();	
			if($rowId['num']==0)
			{
			 $row['identificator']=-1;
			}
			else
			{
			$stmt = $dbCon->prepare("update user_certificates set pay_required=1,checkin_required=1,qloudid_pay_status=4 where id=?");
			$stmt->bind_param("i", $id);
			$stmt->execute();	
			$row['identificator']=3;
			}
				
			}
			}
			}
			
			
			
			$stmt = $dbCon->prepare("select count(id) as num  from user_identification where user_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowPassportCount = $result->fetch_assoc();
			if($rowPassportCount['num']>0)
			{
			$row['passport_count']=1;	
			}
			else
			{
			$row['passport_count']=0;		
			}
			
			$stmt = $dbCon->prepare("select count(id) as num  from user_cards where user_login_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$rowCardCount = $result->fetch_assoc();
			if($rowCardCount['num']>0)
			{
			$row['card_count']=1;	
			}
			else
			{
			$row['card_count']=0;		
			}
			
			$row['result']=1;
			$stmt->close();
			$dbCon->close();
			return $row;
			}
			else
			{
			$org=array();
			$org['card_count']=0;
			$org['passport_count']=0;					
			$org['result']=0;
			$org['first_name']=0;
			$org['last_name']=0;
			$org['user_id']=0;
			$org['email']=0;
			$org['certificate_key']=0;
			$org['identificator']=7;
			$stmt->close();
			$dbCon->close();
			return $org;	
			}
		}
	
	
	function addIdentificatorName($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select user_identification.id,country_of_residence  from user_identification left join user_logins on user_logins.id= user_identification.user_id where  identity_number=? and country_of_residence=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("si", $data['IdentificatorText'],$data['CountryId']);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("update user_logins set first_name=?,last_name=? where id=?");
			$stmt->bind_param("ssi",  $data['FirstName'],$data['LastName'],$data['UserId']);	
			$stmt->execute();
			
			$img_name1='';
			$img_name2='';
			$a=array();
			$b=array();
			$a=explode('/',$data['IssueDate']);
			$b=explode('/',$data['ExpiryDate']);
			if($a[1]<10)
			{
				$a[1]='0'.$a[1];
			}
			if($b[1]<10)
			{
				$b[1]='0'.$b[1];
			}
			$arr=array();
			if(empty($row))
			{
			 
			$stmt = $dbCon->prepare("insert into user_identification(user_id,identification_type,identity_number,issue_month,issue_year,expiry_month, expiry_year,created_on,front_image_path, back_image_path,issue_date,expiry_date)
			values(?, ?, ?, ?, ?, ?, ?, now(),?,?, ?, ?)");
			$stmt->bind_param("iissisissss", $data['UserId'],$data['IdentificatorId'],$data['IdentificatorText'],$a[1],$a[2],$b[1],$b[2],$img_name1,$img_name2,$data['IssueDate'],$data['ExpiryDate']);	
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			$arr['result']=1;
			return $arr['result'];	
			}
			else
			{
			 
			
			$stmt->close();
			$dbCon->close();
			$arr['result']=0;
			return $arr['result'];	
			 
			}
			
			 
		}
		
	
	
	function addIdentificator($data)
		{
			$dbCon = AppModel::createConnection();
			
			$stmt = $dbCon->prepare("select user_identification.id,country_of_residence  from user_identification left join user_logins on user_logins.id= user_identification.user_id where  identity_number=? and country_of_residence=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("si", $data['IdentificatorText'],$data['CountryId']);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();
			 
			$img_name1='';
			$img_name2='';
			$a=array();
			$b=array();
			$a=explode('/',$data['IssueDate']);
			$b=explode('/',$data['ExpiryDate']);
			if($a[1]<10)
			{
				$a[1]='0'.$a[1];
			}
			if($b[1]<10)
			{
				$b[1]='0'.$b[1];
			}
			$arr=array();
			if(empty($row))
			{
			 
			$stmt = $dbCon->prepare("insert into user_identification(user_id,identification_type,identity_number,issue_month,issue_year,expiry_month, expiry_year,created_on,front_image_path, back_image_path,issue_date,expiry_date)
			values(?, ?, ?, ?, ?, ?, ?, now(),?,?, ?, ?)");
			$stmt->bind_param("iissisissss", $data['UserId'],$data['IdentificatorId'],$data['IdentificatorText'],$a[1],$a[2],$b[1],$b[2],$img_name1,$img_name2,$data['IssueDate'],$data['ExpiryDate']);	
			$stmt->execute();
			
			$stmt = $dbCon->prepare("update user_certificates set checkin_required=1,qloudid_pay_status=3 where certificate_key=?");
			$stmt->bind_param("s", $data['certi']);
			$stmt->execute();
			
			$stmt->close();
			$dbCon->close();
			$arr['result']=1;
			return $arr['result'];	
			}
			else
			{
			$stmt->close();
			$dbCon->close();
			$arr['result']=0;
			return $arr['result'];	
			 
			}
			
			 
		}
		
		function addIdentificatorImages($data)
		{
			$dbCon = AppModel::createConnection();
			 
			 
			$stmt = $dbCon->prepare("select user_identification.id  from user_identification where  user_id=? and identification_type=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("ii", $data['UserId'],$data['IdentificatorId']);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();
			
			$data1 = strip_tags($data['ImageData']);
			$data1='url("data:image/png;base64,'.$data1.'")';
			//echo $data; die;
			define('UPLOAD_DIR','../estorecss/'); // image dir path
			$img_name1="new".microtime();
			file_put_contents(UPLOAD_DIR.$img_name1.".txt", $data1);
				 
			$arr=array();
			 
			if($data['imageId']==1)
			{
			$stmt = $dbCon->prepare("update user_identification set front_image_path=? where id=?");
			}
			else
			{
			$stmt = $dbCon->prepare("update user_identification set back_image_path=?,is_completed=1 where id=?");	
			}
			$stmt->bind_param("si",  $img_name1,$row['id']);	
			$stmt->execute();
			
			$stmt = $dbCon->prepare("select is_completed  from user_identification where  user_id=? and identification_type=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("ii", $data['UserId'],$data['IdentificatorId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			if($row['is_completed']==1)
			{
			$stmt = $dbCon->prepare("update user_certificates set qloudid_pay_status=4 where user_id=?");
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();	
			}
			
			
			$stmt->close();
			$dbCon->close();
			$arr['result']=1;
			return $arr['result'];	
			 
			 
		}
		function  identificatorList($data)
		{
			$dbCon = AppModel::createConnection();
			 
			 
			$stmt = $dbCon->prepare("select *  from user_identification where  user_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
				if($row['identification_type']==1)
				{
					$row['id_name']='Passport';
				}
				else if($row['identification_type']==2)
				{
					$row['id_name']='National card';
				}
				else if($row['identification_type']==3)
				{
					$row['id_name']='Driving license';
				}
			array_push($org,$row);	
			}
			 
			$stmt->close();
			$dbCon->close();
			 
			return $org;	
			 
			 
		}
		
		function  identificatorCountDetail($data)
		{
			$dbCon = AppModel::createConnection();
			 
			 
			$stmt = $dbCon->prepare("select count(id) as total_count  from user_identification where  user_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			
			$stmt = $dbCon->prepare("select count(id) as num  from user_identification where  user_id=? and identification_type=1");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row1 = $result->fetch_assoc();
			$row['passport_count']=$row1['num'];
			
			$stmt = $dbCon->prepare("select count(id) as num  from user_identification where  user_id=? and identification_type=2");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row1 = $result->fetch_assoc();
			$row['national_card_count']=$row1['num'];
			
			$stmt = $dbCon->prepare("select count(id) as num  from user_identification where  user_id=? and identification_type=3");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row1 = $result->fetch_assoc();
			$row['dl_count']=$row1['num'];
			
			$stmt->close();
			$dbCon->close();
			 
			return $row;	
			 
			 
		}
		function  identificatorDetail($data)
		{
			$dbCon = AppModel::createConnection();
			 
			 
			$stmt = $dbCon->prepare("select identification_type  from user_identification where  user_id=?");
			
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$org=array();
			while($row = $result->fetch_assoc())
			{
			array_push($org,$row);	
			}
			
			 
			$stmt->close();
			$dbCon->close();
			 
			return $org;	
			 
			 
		}
		
		
	
	
	function verifyUserMobile($data)
    {
		
		 $dbCon = AppModel::createConnection();
		 
		 $stmt = $dbCon->prepare("select user_profiles.id from user_profiles left join user_logins on user_logins.id=user_profiles.user_logins_id where phone_number=? and country_of_residence=(select country_of_residence from user_logins where id=?) and user_logins_id!=?");
			/* bind parameters for markers */
		$stmt->bind_param("sii", $data['MobileNo'],$data['UserId'],$data['UserId']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		
		 $arr=array();
        if(!empty($row))
		{
			$arr['result']=0;
			$stmt->close();
			$dbCon->close();
			return $arr;	
		}
		else
		{ 
			$num=(mt_rand(111111,999999));
			$stmt = $dbCon->prepare("update user_logins set otp_verification=? where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("ii", $num,$data['UserId']);
			$stmt->execute();
			$stmt = $dbCon->prepare("update user_profiles set phone_number=? where user_logins_id=?");
			/* bind parameters for markers */
			$stmt->bind_param("si", $data['MobileNo'],$data['UserId']);
			$stmt->execute();
			 $stmt = $dbCon->prepare("select country_code,otp_verification  from user_logins left join phone_country_code on phone_country_code.id=user_logins.country_of_residence where user_logins.id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i", $data['UserId']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc(); 
			$to            = '+'.trim($row['country_code']).''.trim($data['MobileNo']);
			 
			$subject       = "One time password!";
			$emailContent ="Your one time password to verify your mobile is : ".$num;
			$res=json_decode(sendSms($subject, $to, $emailContent),true);
			
			 
			$to            = '+919988109510';
			$subject       = "One time password!";
			$emailContent ="Your one time password to verify your mobile is : ".$num;
			$res=json_decode(sendSms($subject, $to, $emailContent),true);
			
			if($res['status']=='OK')
			{
			$arr['result']=1;
			}
			else
			{
			$arr['result']=2;	
			}
			$stmt->close();
			$dbCon->close();
			return $arr;	
		}	
		
    }
	
	function base64_to_jpeg($base64_string, $output_file) {
			$ifp = fopen( $output_file, 'wb' ); 
			$data = explode( ',', $base64_string );
			fwrite( $ifp, base64_decode( $data[1] ) );
			fclose( $ifp ); 
			return $output_file; 
		}
		
	
	function userDetails($data)
	{
		$dbCon = AppModel::createConnection();
		 
		 $stmt = $dbCon->prepare("select id,passport_image,first_name,last_name,email from user_logins where id=(select user_id from user_certificates where certificate_key=? and is_connected=1 and is_valid=1)");
			/* bind parameters for markers */
		$stmt->bind_param("s", $data['certi']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		$user_id=$row['id'];
		$filename="../estorecss/".$row ['passport_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['passport_image'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row ['passport_image'].'.jpg' ); $imgs=str_replace('../','',$imgs); $imgs='https://www.qloudid.com/'.$imgs; } else {   $imgs=""; }
			 $arry=array();
			$arry['first_name']=html_entity_decode($row['first_name'],ENT_NOQUOTES, 'UTF-8');
			$arry['last_name']=html_entity_decode($row['last_name'],ENT_NOQUOTES, 'UTF-8');
			$arry['email']=$row['email'];
			$arry['user_id']=$row['id'];
			$arry['certificate_key']=$data['certi'];
			$arry['UserImage']=$imgs;
			
			
			$arry['result']=1; 
			 $stmt->close();
		$dbCon->close();
			return $arry;	
	}
	
	
	function userDetailsDstricts($data)
	{
		$dbCon = AppModel::createConnection();
		 
		 $stmt = $dbCon->prepare("select id,passport_image,first_name,last_name,email from user_logins where id=?");
			/* bind parameters for markers */
		$stmt->bind_param("i", $data['user_id']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		
		$filename="../estorecss/".$row ['passport_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['passport_image'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row ['passport_image'].'.jpg' ); $imgs=str_replace('../','',$imgs); $imgs='https://www.qloudid.com/'.$imgs; } else {   $imgs=""; }
			 $arry=array();
			$arry['first_name']=html_entity_decode($row['first_name'],ENT_NOQUOTES, 'UTF-8');
			$arry['last_name']=html_entity_decode($row['last_name'],ENT_NOQUOTES, 'UTF-8');
			$arry['email']=$row['email'];
			$arry['user_id']=$row['id'];
			 
			$arry['UserImage']=$imgs;
			$arry['result']=1; 
			 $stmt->close();
		$dbCon->close();
			return $arry;	
	}
	
	function verifyUserConsent($data)
    {
		
		 $dbCon = AppModel::createConnection();
		 
		 $stmt = $dbCon->prepare("select id from user_certificates where certificate_key=? and is_connected=1 and is_valid=1");
			/* bind parameters for markers */
		$stmt->bind_param("s", $data['certi']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		 $arry=array();
        if(empty($row))
		{
			$stmt->close();
			$dbCon->close();
			$arry['first_name']='';
			$arry['last_name']='';
			$arry['company_name']='';
			$arry['image']='';
			$arry['result']=0;
			return $arry;	
		}
		else
		{
		
		 $stmt = $dbCon->prepare("select passport_image,first_name,last_name from user_logins where id=(select user_id from user_certificates where certificate_key=? and is_connected=1 and is_valid=1)");
			/* bind parameters for markers */
		$stmt->bind_param("s", $data['certi']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		
		$stmt = $dbCon->prepare("select company_name from companies where id=(select company_id from oauth_clients where client_id=?)");
			/* bind parameters for markers */
		$stmt->bind_param("s", $data['clientId']);
		$stmt->execute();
		$result = $stmt->get_result();
		$rowCompany = $result->fetch_assoc();
		
		$filename="../estorecss/".$row ['passport_image'].".txt"; if (file_exists($filename)) { $value_a=file_get_contents("../estorecss/".$row ['passport_image'].".txt"); $value_a=str_replace('"','',$value_a);  $imgs = $this->base64_to_jpeg( $value_a, '../estorecss/tmp'.$row ['passport_image'].'.jpg' ); $imgs=str_replace('../','',$imgs); $imgs='https://www.qloudid.com/'.$imgs; } else {   $imgs=""; }
			$stmt->close();
			$dbCon->close();
			
			$arry['first_name']=html_entity_decode($row['first_name'],ENT_NOQUOTES, 'UTF-8');
			$arry['last_name']=html_entity_decode($row['last_name'],ENT_NOQUOTES, 'UTF-8');
			$arry['company_name']=html_entity_decode($rowCompany['company_name'],ENT_NOQUOTES, 'UTF-8');
			$arry['image']=$imgs;
			$arry['result']=1;
			return $arry;	
		}	
		
    }
	
	
	
	
	
	function userDeliveryInvoiceInfo($data)
    {
		
		 $dbCon = AppModel::createConnection();
		 
		 $stmt = $dbCon->prepare("select invoice_address,invoice_zipcode,invoice_city,invoice_port,invoice_address_required from user_profiles where user_logins_id=?");
			/* bind parameters for markers */
		$stmt->bind_param("s", $data['userId']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		$row['invoice_address']=html_entity_decode($row['invoice_address'],ENT_NOQUOTES, 'UTF-8');
		$row['invoice_city']=html_entity_decode($row['invoice_city'],ENT_NOQUOTES, 'UTF-8');
		
		$stmt->close();
		$dbCon->close();
		return $row;	
		
		
    }
	
	
	function purchaseDetail($data)
    {
		
		$dbCon = AppModel::createConnection();
		$stmt = $dbCon->prepare("update user_certificates set login_status=2,purchased_for=? where login_status =4 and user_id=? ");
        
        /* bind parameters for markers */
        $stmt->bind_param("ii", $data['company_id'],$data['user_id']);
        $stmt->execute();
		 return 1;	
	 
		
    }
	
		function cardDetail($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			if($data['company_id']==0)
			{
			$stmt = $dbCon->prepare("select * from  user_cards where `id`=?");
			$stmt->bind_param("i", $data['card_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			$row['name_on_card']=html_entity_decode($row['name_on_card'],ENT_NOQUOTES, 'UTF-8');
			$stmt->close();
			$dbCon->close();
			return $row;
			}
			else
			{
			$stmt = $dbCon->prepare("select company_cards.id,card_number,card_cvv,exp_month,exp_year,card_type,company_name as name_on_card from  company_cards left join companies on companies.id=company_cards.company_id where company_cards.id=?");
			$stmt->bind_param("i", $data['card_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			 
			$stmt->close();
			$dbCon->close();
			return $row;	
			}
		}
	
	function updateCardPurchaseDetail($data)
    {
		
		$dbCon = AppModel::createConnection();
		$stmt = $dbCon->prepare("update user_certificates set card_id=? where certificate_key=? ");
        
        /* bind parameters for markers */
        $stmt->bind_param("is", $data['card_id'],$data['certificate_key']);
        $stmt->execute();
		$stmt->close();
		$dbCon->close();
		 return 1;	
	 
		
    }
	
	function savePurchaseCardDetails($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			 $data['card_type']='Visa';
			$stmt = $dbCon->prepare("insert into user_cards(`user_login_id`,`created_on`,`card_number`,card_cvv,exp_month,exp_year,name_on_card,card_type) values(?, now(), ?, ?, ?, ?, ?, ?)");
			$stmt->bind_param("isisiss", $data['UserId'],$data['CardNumber'],$data['Cvv'],$data['ExpirationMonth'],$data['ExpirationYear'],htmlentities($data['CardHolderName'],ENT_NOQUOTES, 'UTF-8'),$data['card_type']);
			$stmt->execute();
			$id=$stmt->insert_id;
			$stmt = $dbCon->prepare("update user_certificates set card_id=? where certificate_key=? ");
        
        /* bind parameters for markers */
			$stmt->bind_param("is", $id,$data['certificate_key']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
			 
		}
		
		
		function saveUpdatedPurchaseCardDetails($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			 $data['card_type']='Visa';
			$stmt = $dbCon->prepare("update user_cards set `card_number`=?,card_cvv=?,exp_month=?,exp_year=?,name_on_card=?,card_type=? where id=?");
			$stmt->bind_param("sisiss", $data['CardNumber'],$data['Cvv'],$data['ExpirationMonth'],$data['ExpirationYear'],htmlentities($data['CardHolderName'],ENT_NOQUOTES, 'UTF-8'),$data['card_type'],$data['CardId']);
			$stmt->execute();
			 
			$stmt = $dbCon->prepare("update user_certificates set card_id=? where certificate_key=? ");
        
        /* bind parameters for markers */
			$stmt->bind_param("is", $data['CardId'],$data['Certificatekey']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
			 
		}
	
	function confirmPurchase($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			  
			$stmt = $dbCon->prepare("update user_certificates set login_status=2 where certificate_key=? ");
        
			/* bind parameters for markers */
			$stmt->bind_param("s", $data['Certificatekey']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
			 
		}
	function purchaseDetailUpdate($data)
    {
		
		$dbCon = AppModel::createConnection();
		$stmt = $dbCon->prepare("update user_certificates set purchased_for=? where certificate_key=? ");
        
        /* bind parameters for markers */
        $stmt->bind_param("is", $data['company_id'],$data['certificate_key']);
        $stmt->execute();
		if($data['company_id']==0)
		{
		$stmt = $dbCon->prepare("select id,name_on_card,card_number,card_cvv,exp_month,exp_year,card_type from  user_cards where `user_login_id`=?");
			$stmt->bind_param("i", $data['user_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			 
			$org=array();
			while($row = $result->fetch_assoc())
			{
				$row['name_on_card']=html_entity_decode($row['name_on_card'],ENT_NOQUOTES, 'UTF-8');
				$row['company_id']=0;
				$row['card_number2']='**** **** **** '.substr($row['card_number'],-4);
				array_push($org,$row);
			}
			 return $org;	
		}
	 else
	 {
		$stmt = $dbCon->prepare("select id,name_on_card,card_number,card_cvv,exp_month,exp_year,card_type from  company_cards where `id`=(select card_id from user_company_profile where user_login_id=? and company_id=?)");
			$stmt->bind_param("ii", $data['user_id'],$data['company_id']);
			$stmt->execute();
			$result = $stmt->get_result();
			 
			$org=array();
			while($row = $result->fetch_assoc())
			{
				$row['name_on_card']=html_entity_decode($row['name_on_card'],ENT_NOQUOTES, 'UTF-8');
				$row['company_id']=$data['company_id'];
				$row['card_number2']='**** **** **** '.substr($row['card_number'],-4);
				array_push($org,$row);
			}
			 return $org;	 
	 }
		
    }
	
	
	function checkPassword($data)
    {
		
		 $dbCon = AppModel::createConnection();
		 $stmt = $dbCon->prepare("select first_name,last_name,user_id,email from user_certificates left join user_logins on user_logins.id=user_certificates.user_id where certificate_key=? and user_certificates.password=?");
			/* bind parameters for markers */
		$stmt->bind_param("ss", $data['certi'],$data['password']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		 
		$org=array();
        if(empty($row))
		{
			$org['result']=0;
			$org['first_name']=0;
			$org['last_name']=0;
			$org['user_id']=0;
			$org['email']=0;
			$stmt->close();
			$dbCon->close();
			return $org;	
		}
		else
		{
			$stmt = $dbCon->prepare("update user_certificates set is_connected=1 where certificate_key=? and password=?");
			/* bind parameters for markers */
			$stmt->bind_param("ss", $data['certi'],$data['password']);
			$stmt->execute();
			$row['result']=1;
			$stmt->close();
			$dbCon->close();
			return $row;	
		}	
		
    }
    
	function verifyPassword($data)
    {
		
		 $dbCon = AppModel::createConnection();
		 $stmt = $dbCon->prepare("select id,time_out,password,login_type,login_status from user_certificates  where certificate_key=?");
			/* bind parameters for markers */
		$stmt->bind_param("s", $data['certi']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		  // print_r($row); die;
		if($row['password']!=$data['password'])
		{
			 
			if($row['time_out']==1)
			{
				 
			$stmt = $dbCon->prepare("update user_certificates set time_out=0,login_status=0,login_started_for=null where certificate_key=?");
			/* bind parameters for markers */
			$stmt->bind_param("s", $data['certi']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 2;	
			}
			else
			{
			$stmt = $dbCon->prepare("update user_certificates set login_status=3 where certificate_key=?");
			/* bind parameters for markers */
			$stmt->bind_param("s", $data['certi']);
			$stmt->execute();
			
			$stmt->close();
			$dbCon->close();
			return 0;
			}			
		}
		else
		{
			 
			if($row['time_out']==1)
			{
				 
			$stmt = $dbCon->prepare("update user_certificates set time_out=0,login_status=0,login_started_for=null where certificate_key=?");
			/* bind parameters for markers */
			$stmt->bind_param("s", $data['certi']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 2;	
			}
			else
			{
			if($row['login_type']==1 || $row['login_type']==9)
			{	 
			$stmt = $dbCon->prepare("update user_certificates set login_status=2 where certificate_key=?");
			/* bind parameters for markers */
			$stmt->bind_param("s", $data['certi']);
			$stmt->execute();
							
			$stmt->close();
			$dbCon->close();
			return 1;
			}
			else if($row['login_type']==4)
			{	 
			$stmt = $dbCon->prepare("update user_certificates set login_status=2 where certificate_key=?");
			/* bind parameters for markers */
			$stmt->bind_param("s", $data['certi']);
			$stmt->execute();
							
			$stmt->close();
			$dbCon->close();
			return 1;
			}
			else
			{
			$stmt = $dbCon->prepare("update user_certificates set login_status=4 where certificate_key=?");
			/* bind parameters for markers */
			$stmt->bind_param("s", $data['certi']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 3;	
			}
			}			
		}	
		
    }
	
	function verifyInterAppPassword($data)
    {
		
		 $dbCon = AppModel::createConnection();
		 $stmt = $dbCon->prepare("select id,time_out,password,login_type from user_certificates  where certificate_key=?");
			/* bind parameters for markers */
		$stmt->bind_param("s", $data['certi']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		
		 
		$org=array(); 
		if($row['password']==$data['password'])
		{
			 
			$time=microtime();
			$session=$this->encrypt_decrypt('encrypt',$time);
			$stmt = $dbCon->prepare("update user_certificates set session_info=? where certificate_key=?");
			/* bind parameters for markers */
			$stmt->bind_param("ss", $session,$data['certi']);
			$stmt->execute();
			$org['result']=1;
			$org['session']=$session;
			$stmt->close();
			$dbCon->close();
			return $org;		
		}
		else
		{
			$org['result']=0;
			$org['session']=0; 
			$stmt->close();
			$dbCon->close();
			return $org;	
		 			
		}	
		
    }
	
	function verifyInterAppSession($data)
    {
		
		$dbCon = AppModel::createConnection();
		$stmt = $dbCon->prepare("select user_certificates.id,user_id,user_logins.first_name,user_logins.last_name from user_certificates left join user_logins on user_certificates.user_id=user_logins.id  where session_info=?");
		/* bind parameters for markers */
		$stmt->bind_param("s", $data['certi']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		  $org=array(); 
		if(!empty($row))
		{
			 $stmt = $dbCon->prepare("update user_certificates set session_info=null where id=?");
			/* bind parameters for markers */
			$stmt->bind_param("i",$row['id']);
			$stmt->execute();
			$org['result']=1;
			$org['user_id']=$row['user_id'];
			$org['name']=$row['first_name'].' '.$row['last_name'];
			$org['first_name']=$row['first_name'];
			$org['last_name']=$row['last_name'];
			$stmt->close();
			$dbCon->close();
			return $org;		
		}
		else
		{
			$org['result']=0;
			$org['user_id']=0; 
			$org['name']=''; 
			$org['first_name']='';
			$org['last_name']='';
			$stmt->close();
			$dbCon->close();
			return $org;	
		 			
		}	
		
    }
	
	function addFoodDetailToCart()
		{
			$dbCon = AppModel::createConnection();
			
			 $id=$_POST['checkid'];
			 $item_id=$_POST['item_id'];
			$stmt = $dbCon->prepare("select * from hotel_roomservice_item_ordered where qloud_checkout_id=? and dish_id=? and is_verified=0 and service_type=?");
			$stmt->bind_param("iii",$id,$item_id,$_POST['service_type']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			 
			if(empty($row))
			{
			$t=$_POST['price']*$_POST['quantity'];
			$stmt = $dbCon->prepare("insert into hotel_roomservice_item_ordered(dish_price,dish_id,dish_quantity,qloud_checkout_id,dish_name,dish_image,dish_detail,total_price,created_on,service_type)
			values(?,?,?,?,?,?,?,?,now(),?)");
			$stmt->bind_param("iiiisssii",$_POST['price'],$item_id,$_POST['quantity'],$id,$_POST['dish_name'],$_POST['dish_image'],$_POST['dish_detail'],$t,$_POST['service_type']);
			$stmt->execute();
			}
			else
			{
			$t=$_POST['price']*$_POST['quantity'];
			$quantity=$_POST['quantity']+$row['dish_quantity'];
			$stmt = $dbCon->prepare("update hotel_roomservice_item_ordered set dish_quantity=?,total_price=? where id=?");
			$stmt->bind_param("iii",$quantity,$t,$row['id']);
			$stmt->execute();	
			}
			
	 
			$stmt->close();
			$dbCon->close();
			return 1;
			
			 
			
		}
		
	function addDrycleaningItemToCart()
		{
			$dbCon = AppModel::createConnection();
			
			 $id=$_POST['checkid'];
			 $item_id=$_POST['item_id'];
			$stmt = $dbCon->prepare("select * from hotel_roomservice_item_ordered where qloud_checkout_id=? and dish_id=? and is_verified=0 and service_type=?");
			$stmt->bind_param("iii",$id,$item_id,$_POST['service_type']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			 
			if(empty($row))
			{
			$t=$_POST['price']*$_POST['quantity'];
			$stmt = $dbCon->prepare("insert into hotel_roomservice_item_ordered(dish_price,dish_id,dish_quantity,qloud_checkout_id,dish_name,dish_image,dish_detail,total_price,created_on,service_type)
			values(?,?,?,?,?,?,?,?,now(),?)");
			$stmt->bind_param("iiiisssii",$_POST['price'],$item_id,$_POST['quantity'],$id,$_POST['dish_name'],$_POST['dish_image'],$_POST['dish_detail'],$t,$_POST['service_type']);
			$stmt->execute();
			}
			else
			{
				if($_POST['quantity']==0)
				{
				$stmt = $dbCon->prepare("delete from hotel_roomservice_item_ordered where id=?");
				$stmt->bind_param("i",$row['id']);
				$stmt->execute();	
				}
				else
				{
				$t=$_POST['price']*$_POST['quantity'];
				$quantity=$_POST['quantity'];
				$stmt = $dbCon->prepare("update hotel_roomservice_item_ordered set dish_quantity=?,total_price=? where id=?");
				$stmt->bind_param("iii",$quantity,$t,$row['id']);
				$stmt->execute();
				}
			}
			
	 
			$stmt->close();
			$dbCon->close();
			return 1;
			
			 
			
		}
	
	
	function addFoodToCart()
		{
			$dbCon = AppModel::createConnection();
			
			 $id=$this->encrypt_decrypt('decrypt',$_POST['checkid']);
			 $item_id=$this->encrypt_decrypt('decrypt',$_POST['item_id']);
			$stmt = $dbCon->prepare("select * from hotel_roomservice_item_ordered where qloud_checkout_id=? and dish_id=? and is_verified=0");
			$stmt->bind_param("ii",$id,$item_id);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			 
			if(empty($row))
			{
			$t=$_POST['price']*$_POST['quantity'];
			$stmt = $dbCon->prepare("insert into hotel_roomservice_item_ordered(dish_price,dish_id,dish_quantity,qloud_checkout_id,dish_name,dish_image,dish_detail,total_price,created_on,service_type)
			values(?,?,?,?,?,?,?,?,now(),?)");
			$stmt->bind_param("iiiisssii",$_POST['price'],$item_id,$_POST['quantity'],$id,$_POST['dish_name'],$_POST['dish_image'],$_POST['dish_detail'],$t,$_POST['service_type']);
			$stmt->execute();
			}
			else
			{
			$t=$_POST['price']*$_POST['quantity'];
			$quantity=$_POST['quantity']+$row['dish_quantity'];
			$stmt = $dbCon->prepare("update hotel_roomservice_item_ordered set dish_quantity=?,total_price=? where id=?");
			$stmt->bind_param("iii",$quantity,$t,$row['id']);
			$stmt->execute();	
			}
			
	 
			$stmt->close();
			$dbCon->close();
			return 1;
			
			 
			
		}
		
		
		
		function addServiceToCart()
		{
			$dbCon = AppModel::createConnection();
			 
			$id=$this->encrypt_decrypt('decrypt',$_POST['location_id']);
			$item_id=$this->encrypt_decrypt('decrypt',$_POST['item_id']);
			
			$t=$_POST['price']*$_POST['quantity'];
			$stmt = $dbCon->prepare("insert into hotel_roomservice_item_ordered(is_private,location_id,booking_person_id,one_shared,dish_price,dish_id,dish_quantity,dish_name,dish_image,dish_detail,total_price,created_on,service_type)
			values(?,?,?,?,?,?,?,?,?,?,?,now(),?)");
			$stmt->bind_param("iiiiiiisssii",$_POST['shared_type_private'],$id,$_POST['user_id'],$_POST['shared_type'],$_POST['price'],$item_id,$_POST['quantity'],$_POST['dish_name'],$_POST['dish_image'],$_POST['dish_detail'],$t,$_POST['service_type']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
			
			 
			
		}
		
		
		
		
		
		
	function addOpenOnetimeServiceToCart()
		{
			$dbCon = AppModel::createConnection();
			 
			$id=$this->encrypt_decrypt('decrypt',$_POST['location_id']);
			$item_id=$this->encrypt_decrypt('decrypt',$_POST['item_id']);
			
			$t=$_POST['price']*$_POST['quantity'];
			$stmt = $dbCon->prepare("insert into hotel_roomservice_item_ordered(is_private,location_id,booking_person_id,one_shared,dish_price,dish_id,dish_quantity,dish_name,dish_image,dish_detail,total_price,created_on,service_type,booking_time,booking_date)
			values(?,?,?,?,?,?,?,?,?,?,?,now(),?,?,?)");
			$stmt->bind_param("iiiiiiisssiiii",$_POST['shared_type_private'],$id,$_POST['user_id'],$_POST['shared_type'],$_POST['price'],$item_id,$_POST['quantity'],$_POST['dish_name'],$_POST['dish_image'],$_POST['dish_detail'],$t,$_POST['service_type'],$_POST['event_time'],$_POST['event_date']);
			$stmt->execute();
			$stmt->close();
			$dbCon->close();
			return 1;
			
			 
			
		}
		
		
		
		
	function removeItemFromCart()
		{
			$dbCon = AppModel::createConnection();
			
			 $id=$this->encrypt_decrypt('decrypt',$_POST['checkid']);
			 $item_id=$this->encrypt_decrypt('decrypt',$_POST['item_id']);
			 $stmt = $dbCon->prepare("delete from hotel_roomservice_item_ordered where qloud_checkout_id=? and dish_id=? and is_verified=0 and service_type=?");
			$stmt->bind_param("iii",$id,$item_id,$_POST['service_type']);
			$stmt->execute();
	 
			$stmt->close();
			$dbCon->close();
			return 1;
			
			 
			
		}
		
		
		function removeBookingFromCart()
		{
			$dbCon = AppModel::createConnection();
			$item_id=$this->encrypt_decrypt('decrypt',$_POST['item_id']);
			$stmt = $dbCon->prepare("delete from hotel_roomservice_item_ordered where booking_person_id=? and dish_id=? and is_verified=0 and service_type=?");
			$stmt->bind_param("iii",$_POST['booking_person_id'],$item_id,$_POST['service_type']);
			$stmt->execute();
	 
			$stmt->close();
			$dbCon->close();
			return 1;
			
			 
			
		}
		
		
		function removeAmenityFromCart()
		{
			$dbCon = AppModel::createConnection();
			
			 $id=$this->encrypt_decrypt('decrypt',$_POST['id']);
			 $stmt = $dbCon->prepare("delete from company_hotel_amenities_user_request where id=?");
			$stmt->bind_param("i",$id);
			$stmt->execute();
	 
			$stmt->close();
			$dbCon->close();
			return 1;
			
			 
			
		}
		
	
	
	function updateLoginStatus($data)
    {
		
		 $dbCon = AppModel::createConnection();
		
			$stmt = $dbCon->prepare("update user_certificates set login_status=1 where certificate_key=?");
			/* bind parameters for markers */
			$stmt->bind_param("s", $data['certi']);
			$stmt->execute();
			 
			$stmt->close();
			$dbCon->close();
			return 1;	
	 	
		
    }
	function certificateExxpiryInfo($data)
		{ 
		
			$dbCon = AppModel::createConnection();
			 
			$stmt = $dbCon->prepare("select id,created_on from user_certificates where certificate_key=?");
			$stmt->bind_param("s", $data['certificate_key']);
			$stmt->execute();
			$result = $stmt->get_result();
			
			$row = $result->fetch_assoc();
			$row['created_on']=date('Y-m-d', strtotime($row['created_on']));
			$row['expiry_date']=date('Y-m-d', strtotime($row['created_on']. ' + 365 days'));
			$stmt->close();
			$dbCon->close();
			return $row;	
		}
	
	function updateLoginIp($data)
    {
		
		 $dbCon = AppModel::createConnection();
		 $a=explode('_',$data['ip']);
		 $data['ip']=$a[0];
		 
		 $stmt = $dbCon->prepare("update user_certificates set login_started_for=null,login_status=0,login_type=1 where certificate_key=?");
		/* bind parameters for markers */
		$stmt->bind_param("s", $data['certi']);
		$stmt->execute();
		 
		if(sizeof($a)==2)
		{
			$user=$this->encrypt_decrypt('decrypt',$a[1]);
			$stmt = $dbCon->prepare("select user_id from user_certificates where certificate_key=?");
			/* bind parameters for markers */
			$stmt->bind_param("s", $data['certi']);
			$stmt->execute();
			$result = $stmt->get_result();
			$row = $result->fetch_assoc();
			if($user!=$row['user_id'])
			{
			$stmt->close();
			$dbCon->close();
			return 3;	
			}
		}
		 $ip=$this->encrypt_decrypt('decrypt',$data['ip']);
	 
		$stmt = $dbCon->prepare("select id,certificate_key from user_certificates where login_started_for=?");
			/* bind parameters for markers */
		$stmt->bind_param("s", $ip);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		 
		 if(empty($row))
		 {
			 
			 
			$stmt = $dbCon->prepare("update user_certificates set login_started_for=?,login_status=1,time_out=0 where certificate_key=?");
			/* bind parameters for markers */
			$stmt->bind_param("ss", $ip,$data['certi']);
			$stmt->execute();
			 
			$stmt->close();
			$dbCon->close();
			return 1;	
			 
		 }
		 else
		 {
			 $stmt = $dbCon->prepare("update user_certificates set login_started_for='',login_status=1,time_out=0 where login_started_for=?");
			/* bind parameters for markers */
			$stmt->bind_param("s", $ip);
			$stmt->execute();
			
			
			$stmt = $dbCon->prepare("update user_certificates set login_started_for=?,login_status=1 where certificate_key=?");
			/* bind parameters for markers */
			$stmt->bind_param("ss", $ip,$data['certi']);
			$stmt->execute(); 
			$stmt->close();
			$dbCon->close();
			return 1;
			
		 }
		 
		
    }
	
	
	function clearIps($data)
    {
		
		$dbCon = AppModel::createConnection();
		$stmt = $dbCon->prepare("update user_certificates set login_started_for=null,login_status=0 where certificate_key=?");
		/* bind parameters for markers */
		$stmt->bind_param("s", $data['certi']);
		$stmt->execute();
			 
		$stmt->close();
		$dbCon->close();
		return 1;	
		
    }
	
	
	function clearLogin($data)
    {
		
		$dbCon = AppModel::createConnection();
		$stmt = $dbCon->prepare("update user_certificates set login_started_for=null,login_status=0 where certificate_key=?");
		/* bind parameters for markers */
		$stmt->bind_param("s", $data['certi']);
		$stmt->execute();
		$stmt->close();
		$dbCon->close();
		return 1;	
		
    }
	
	
	function clearCertificate($data)
    {
		
		$dbCon = AppModel::createConnection();
		$stmt = $dbCon->prepare("update user_certificates set login_started_for=null,login_status=0,is_valid=0 where certificate_key=?");
		/* bind parameters for markers */
		$stmt->bind_param("s", $data['certi']);
		$stmt->execute();
			 
		$stmt->close();
		$dbCon->close();
		return 1;	
		
    }
	
	function checkOrderReference($data)
    {
		
		 $dbCon = AppModel::createConnection();
		 $ip=$this->encrypt_decrypt('decrypt',$_POST['orderRef']);
		 
		 $stmt = $dbCon->prepare("select id,login_status,user_id from user_certificates where login_started_for=?");
		/* bind parameters for markers */
		$stmt->bind_param("s", $ip);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		 
		 if(empty($row))
		 {
			 
			$stmt->close();
			$dbCon->close();
			return 0; 
			
		 }
		 else
		 {
			 if($_POST['loginType']==3 || $_POST['loginType']==9)
			 {
				 if(isset($_POST['payForFood']))
				 {
					 $payFood=$_POST['payForFood'];
					 $serviceType=$_POST['serviceType'];
				 } 
				 else
				 {
					$payFood=0; 
					 $serviceType=0;
				 }
				 $stmt = $dbCon->prepare("update user_certificates set client_id=null where user_id=?");
				/* bind parameters for markers */
				$stmt->bind_param("i", $row['user_id']);
				$stmt->execute(); 
				
				if(isset($_POST['total_price']))
				{
				$price=$_POST['total_price'];
				}
				else
				{
					$price=0;
				}
				
				if(isset($_POST['booking_id']))
				 {
					 $_POST['booking_id']=$_POST['booking_id'];
				 }
				 else
				 {
					 $_POST['booking_id']='-';
				 }
				$stmt = $dbCon->prepare("update user_certificates set client_id=?,login_type=?,total_price=?,pay_for_food=?,session_info=?,service_type=?  where id=?");
				/* bind parameters for markers */
				$stmt->bind_param("siiisii", $_POST['client_id'],$_POST['loginType'],$price,$payFood,$_POST['booking_id'],$serviceType,$row['id']);
				$stmt->execute(); 
			 }
			 else if($_POST['loginType']==5 || $_POST['loginType']==4)
			 {
				 $stmt = $dbCon->prepare("update user_certificates set client_id=null where user_id=?");
				/* bind parameters for markers */
				$stmt->bind_param("i", $row['user_id']);
				$stmt->execute(); 
				
				if(isset($_POST['total_price']))
				{
				$price=$_POST['total_price'];
				}
				else
				{
					$price=0;
				}
				 if(isset($_POST['booking_id']))
				 {
					 $_POST['booking_id']=$_POST['booking_id'];
				 }
				 else
				 {
					 $_POST['booking_id']='-';
				 }
				$stmt = $dbCon->prepare("update user_certificates set client_id=?,login_type=?,total_price=?,session_info=? where id=?");
				/* bind parameters for markers */
				$stmt->bind_param("siisi", $_POST['client_id'],$_POST['loginType'],$price,$_POST['booking_id'],$row['id']);
				$stmt->execute(); 
				 
			 }
			 else
			 {
				$stmt = $dbCon->prepare("update user_certificates set login_type=? where id=?");
				/* bind parameters for markers */
				$stmt->bind_param("ii", $_POST['loginType'],$row['id']);
				$stmt->execute();
			 }
			 
			 /*$stmt = $dbCon->prepare("select id,login_type,user_id from user_certificates where login_started_for=?");
		 
		$stmt->bind_param("s", $ip);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();*/
			$stmt->close();
			$dbCon->close();
			return $row['login_status']; 
		 }
    }
	function countPickupAddress($data)
    {
		
		 $dbCon = AppModel::createConnection();
		 
		 $stmt = $dbCon->prepare("select id,client_id from user_certificates where certificate_key=? and is_connected=1 and is_valid=1");
			/* bind parameters for markers */
		$stmt->bind_param("s", $data['certi']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		 
		
		 
		if($row['client_id']==null || $row['client_id']=='')
		{
		$id=$this->encrypt_decrypt('decrypt',$data['company_id']);
		$stmt = $dbCon->prepare("select count(id) as num from company_pickup_address where company_id=?");
			/* bind parameters for markers */
		$stmt->bind_param("i", $id);	
		}
		else
		{
		$stmt = $dbCon->prepare("select count(id) as num from company_pickup_address where company_id=(select company_id from oauth_clients where client_id=?)");
			/* bind parameters for markers */
		$stmt->bind_param("s", $row['client_id']);	
		}
		
		$stmt->execute();
		$result = $stmt->get_result();
		$rowCompany = $result->fetch_assoc();
		
		 
			$stmt->close();
			$dbCon->close();
			return $rowCompany;	
		 
		
    }

	
	function updatePickupDelivery($data)
    {
		
		 $dbCon = AppModel::createConnection();
		 
		 $stmt = $dbCon->prepare("update user_certificates set delivery_type=? where certificate_key=?");
			/* bind parameters for markers */
		$stmt->bind_param("is",$data['delivery_type'], $data['certi']);
		$stmt->execute();
		 
			$stmt->close();
			$dbCon->close();
			return 1;	
		 
		
    }
	
	
	function updatePickupAddress($data)
    {
		
		 $dbCon = AppModel::createConnection();
		 
		 $stmt = $dbCon->prepare("update user_certificates set pickup_address_id=? where certificate_key=?");
			/* bind parameters for markers */
		$stmt->bind_param("is",$data['pickup_address_id'], $data['certi']);
		$stmt->execute();
		 
			$stmt->close();
			$dbCon->close();
			return 1;	
		 
		
    }

function pickupAddressDetail($data)
    {
		
		 $dbCon = AppModel::createConnection();
		 
		 $stmt = $dbCon->prepare("select id,client_id from user_certificates where certificate_key=? and is_connected=1 and is_valid=1");
			/* bind parameters for markers */
		$stmt->bind_param("s", $data['certi']);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		 
		if($row['client_id']==null || $row['client_id']=='')
		{
		$id=$this->encrypt_decrypt('decrypt',$data['company_id']);
		$stmt = $dbCon->prepare("select id,address,port_number,zipcode,pickup_address_name,state as country_name,city from company_pickup_address where company_id=?");
			/* bind parameters for markers */
		$stmt->bind_param("i", $id);	
		}
		else
		{
		 
		
		$stmt = $dbCon->prepare("select id,address,port_number,zipcode,pickup_address_name,state as country_name,city from company_pickup_address where company_id=(select company_id from oauth_clients where client_id=?)");
			/* bind parameters for markers */
		$stmt->bind_param("s", $row['client_id']);
		}
		$stmt->execute();
		$result = $stmt->get_result();
		$org=array();
		while($rowCompany = $result->fetch_assoc())
		{
			 
			array_push($org,$rowCompany);
		}
		
		 
			$stmt->close();
			$dbCon->close();
			return $org;	
		 
		
    }	
	
	function getUserId($data)
    {
		
		 $dbCon = AppModel::createConnection();
		 $ip=$this->encrypt_decrypt('decrypt',$_POST['orderRef']);
		 
		 $stmt = $dbCon->prepare("select id,login_status,user_id from user_certificates where login_started_for=?");
		/* bind parameters for markers */
		$stmt->bind_param("s", $ip);
		$stmt->execute();
		$result = $stmt->get_result();
		$row = $result->fetch_assoc();
		$stmt->close();
		$dbCon->close();
		return $row['user_id']; 
	
    }
	
		function bookingDetails()
		{
			$dbCon = AppModel::createConnection();
			$id= $this -> encrypt_decrypt('decrypt',$_POST['id']);   
			$rid= $this -> encrypt_decrypt('decrypt',$_POST['rid']); 
			$date1=strtotime($_POST['date1']);
			$date2=strtotime($_POST['date2']);
			$stmt = $dbCon->prepare("insert into `hotel_checkout_detail`(`guest_adult`,`guest_children`,`guest_infant`,`checkin_date`,`checkout_date`,`room_type_id`,`total_days`,`price`,`created_on`,hotel_property_type,checkin_booking_date,checkout_booking_date) values ( ?, ?, ?, ?, ?, ?, ?, ?, now(), ?,?,?)");
			
			/* bind parameters for markers */
			$stmt->bind_param("iiissiiiiss", $_POST['guest_adults'], $_POST['guest_children'], $_POST['guest_infants'],$_POST['date1'],$_POST['date2'],$id,$_POST['total_days'],$_POST['price'],$_POST['hotel_property_type'],$date1,$date2);
			$stmt->execute();
			$id=$stmt->insert_id;
			$stmt->close();
			$dbCon->close();
			return $this -> encrypt_decrypt('encrypt',$id);
			
		}
		
    
}